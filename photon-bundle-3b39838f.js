/* Twinkle Signature v1 8t2EVEx5kYzpdl+sA4G5hyqV8rs1yThDUxY2+tMLW1OKyWYzrB6IH4TXETs43YK+Fq6x69XZrbuuE/TahHz1CQ== *//*!
*   Version: main_53810
*   Build #: 53810
*    Branch: main
*  Revision: b6c17ee6e357b0e62d554ffb142e1c150a406384
* Timestamp: 2023-11-29 16:14:00 UTC
*/
!function() {
var e = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
function t(e, t, r) {
return e(r = {
path: t,
exports: {},
require: function(e, t) {
return n(null == t && r.path);
}
}, r.exports), r.exports;
}
function n() {
throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");
}
/**
	 * @license React
	 * react.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */ var r = Symbol.for("react.element"), i = Symbol.for("react.portal"), o = Symbol.for("react.fragment"), a = Symbol.for("react.strict_mode"), s = Symbol.for("react.profiler"), l = Symbol.for("react.provider"), c = Symbol.for("react.context"), d = Symbol.for("react.forward_ref"), u = Symbol.for("react.suspense"), p = Symbol.for("react.memo"), f = Symbol.for("react.lazy"), h = Symbol.iterator;
function m(e) {
return null === e || "object" != typeof e ? null : "function" == typeof (e = h && e[h] || e["@@iterator"]) ? e : null;
}
var g = {
isMounted: function() {
return !1;
},
enqueueForceUpdate: function() {},
enqueueReplaceState: function() {},
enqueueSetState: function() {}
}, y = Object.assign, I = {};
function _(e, t, n) {
this.props = e, this.context = t, this.refs = I, this.updater = n || g;
}
function b() {}
function S(e, t, n) {
this.props = e, this.context = t, this.refs = I, this.updater = n || g;
}
_.prototype.isReactComponent = {}, _.prototype.setState = function(e, t) {
if ("object" != typeof e && "function" != typeof e && null != e) throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");
this.updater.enqueueSetState(this, e, t, "setState");
}, _.prototype.forceUpdate = function(e) {
this.updater.enqueueForceUpdate(this, e, "forceUpdate");
}, b.prototype = _.prototype;
var v = S.prototype = new b;
v.constructor = S, y(v, _.prototype), v.isPureReactComponent = !0;
var T = Array.isArray, E = Object.prototype.hasOwnProperty, P = {
current: null
}, O = {
key: !0,
ref: !0,
__self: !0,
__source: !0
};
function C(e, t, n) {
var i, o = {}, a = null, s = null;
if (null != t) for (i in void 0 !== t.ref && (s = t.ref), void 0 !== t.key && (a = "" + t.key), 
t) E.call(t, i) && !O.hasOwnProperty(i) && (o[i] = t[i]);
var l = arguments.length - 2;
if (1 === l) o.children = n; else if (1 < l) {
for (var c = Array(l), d = 0; d < l; d++) c[d] = arguments[d + 2];
o.children = c;
}
if (e && e.defaultProps) for (i in l = e.defaultProps) void 0 === o[i] && (o[i] = l[i]);
return {
$$typeof: r,
type: e,
key: a,
ref: s,
props: o,
_owner: P.current
};
}
function N(e, t) {
return {
$$typeof: r,
type: e.type,
key: t,
ref: e.ref,
props: e.props,
_owner: e._owner
};
}
function A(e) {
return "object" == typeof e && null !== e && e.$$typeof === r;
}
function L(e) {
var t = {
"=": "=0",
":": "=2"
};
return "$" + e.replace(/[=:]/g, (function(e) {
return t[e];
}));
}
var w = /\/+/g;
function k(e, t) {
return "object" == typeof e && null !== e && null != e.key ? L("" + e.key) : t.toString(36);
}
function R(e, t, n, o, a) {
var s = typeof e;
"undefined" !== s && "boolean" !== s || (e = null);
var l = !1;
if (null === e) l = !0; else switch (s) {
case "string":
case "number":
l = !0;
break;

case "object":
switch (e.$$typeof) {
case r:
case i:
l = !0;
}
}
if (l) return a = a(l = e), e = "" === o ? "." + k(l, 0) : o, T(a) ? (n = "", null != e && (n = e.replace(w, "$&/") + "/"), 
R(a, t, n, "", (function(e) {
return e;
}))) : null != a && (A(a) && (a = N(a, n + (!a.key || l && l.key === a.key ? "" : ("" + a.key).replace(w, "$&/") + "/") + e)), 
t.push(a)), 1;
if (l = 0, o = "" === o ? "." : o + ":", T(e)) for (var c = 0; c < e.length; c++) {
var d = o + k(s = e[c], c);
l += R(s, t, n, d, a);
} else if ("function" == typeof (d = m(e))) for (e = d.call(e), c = 0; !(s = e.next()).done; ) l += R(s = s.value, t, n, d = o + k(s, c++), a); else if ("object" === s) throw t = String(e), 
Error("Objects are not valid as a React child (found: " + ("[object Object]" === t ? "object with keys {" + Object.keys(e).join(", ") + "}" : t) + "). If you meant to render a collection of children, use an array instead.");
return l;
}
function x(e, t, n) {
if (null == e) return e;
var r = [], i = 0;
return R(e, r, "", "", (function(e) {
return t.call(n, e, i++);
})), r;
}
function B(e) {
if (-1 === e._status) {
var t = e._result;
(t = t()).then((function(t) {
0 !== e._status && -1 !== e._status || (e._status = 1, e._result = t);
}), (function(t) {
0 !== e._status && -1 !== e._status || (e._status = 2, e._result = t);
})), -1 === e._status && (e._status = 0, e._result = t);
}
if (1 === e._status) return e._result.default;
throw e._result;
}
var D = {
current: null
}, F = {
transition: null
}, M = {
map: x,
forEach: function(e, t, n) {
x(e, (function() {
t.apply(this, arguments);
}), n);
},
count: function(e) {
var t = 0;
return x(e, (function() {
t++;
})), t;
},
toArray: function(e) {
return x(e, (function(e) {
return e;
})) || [];
},
only: function(e) {
if (!A(e)) throw Error("React.Children.only expected to receive a single React element child.");
return e;
}
}, U = {
Children: M,
Component: _,
Fragment: o,
Profiler: s,
PureComponent: S,
StrictMode: a,
Suspense: u,
__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: {
ReactCurrentDispatcher: D,
ReactCurrentBatchConfig: F,
ReactCurrentOwner: P
},
cloneElement: function(e, t, n) {
if (null == e) throw Error("React.cloneElement(...): The argument must be a React element, but you passed " + e + ".");
var i = y({}, e.props), o = e.key, a = e.ref, s = e._owner;
if (null != t) {
if (void 0 !== t.ref && (a = t.ref, s = P.current), void 0 !== t.key && (o = "" + t.key), 
e.type && e.type.defaultProps) var l = e.type.defaultProps;
for (c in t) E.call(t, c) && !O.hasOwnProperty(c) && (i[c] = void 0 === t[c] && void 0 !== l ? l[c] : t[c]);
}
var c = arguments.length - 2;
if (1 === c) i.children = n; else if (1 < c) {
l = Array(c);
for (var d = 0; d < c; d++) l[d] = arguments[d + 2];
i.children = l;
}
return {
$$typeof: r,
type: e.type,
key: o,
ref: a,
props: i,
_owner: s
};
},
createContext: function(e) {
return (e = {
$$typeof: c,
_currentValue: e,
_currentValue2: e,
_threadCount: 0,
Provider: null,
Consumer: null,
_defaultValue: null,
_globalName: null
}).Provider = {
$$typeof: l,
_context: e
}, e.Consumer = e;
},
createElement: C,
createFactory: function(e) {
var t = C.bind(null, e);
return t.type = e, t;
},
createRef: function() {
return {
current: null
};
},
forwardRef: function(e) {
return {
$$typeof: d,
render: e
};
},
isValidElement: A,
lazy: function(e) {
return {
$$typeof: f,
_payload: {
_status: -1,
_result: e
},
_init: B
};
},
memo: function(e, t) {
return {
$$typeof: p,
type: e,
compare: void 0 === t ? null : t
};
},
startTransition: function(e) {
var t = F.transition;
F.transition = {};
try {
e();
} finally {
F.transition = t;
}
},
unstable_act: function() {
throw Error("act(...) is not supported in production builds of React.");
},
useCallback: function(e, t) {
return D.current.useCallback(e, t);
},
useContext: function(e) {
return D.current.useContext(e);
},
useDebugValue: function() {},
useDeferredValue: function(e) {
return D.current.useDeferredValue(e);
},
useEffect: function(e, t) {
return D.current.useEffect(e, t);
},
useId: function() {
return D.current.useId();
},
useImperativeHandle: function(e, t, n) {
return D.current.useImperativeHandle(e, t, n);
},
useInsertionEffect: function(e, t) {
return D.current.useInsertionEffect(e, t);
},
useLayoutEffect: function(e, t) {
return D.current.useLayoutEffect(e, t);
},
useMemo: function(e, t) {
return D.current.useMemo(e, t);
},
useReducer: function(e, t, n) {
return D.current.useReducer(e, t, n);
},
useRef: function(e) {
return D.current.useRef(e);
},
useState: function(e) {
return D.current.useState(e);
},
useSyncExternalStore: function(e, t, n) {
return D.current.useSyncExternalStore(e, t, n);
},
useTransition: function() {
return D.current.useTransition();
},
version: "18.2.0"
}, H = (t((function(e, t) {})), t((function(e) {
e.exports = U;
})));
function V(e) {
for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++) n[r - 1] = arguments[r];
throw new Error("number" == typeof e ? "[MobX] minified error nr: " + e + (n.length ? " " + n.map(String).join(",") : "") + ". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts" : "[MobX] " + e);
}
var J = {};
function G() {
return "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : J;
}
var z = Object.assign, j = Object.getOwnPropertyDescriptor, q = Object.defineProperty, Y = Object.prototype, W = [];
Object.freeze(W);
var K = {};
Object.freeze(K);
var X = "undefined" != typeof Proxy, Q = Object.toString();
function $(e) {
var t = !1;
return function() {
if (!t) return t = !0, e.apply(this, arguments);
};
}
X || V("Proxy not available");
var Z = function() {};
function ee(e) {
return "function" == typeof e;
}
function te(e) {
switch (typeof e) {
case "string":
case "symbol":
case "number":
return !0;
}
return !1;
}
function ne(e) {
return null !== e && "object" == typeof e;
}
function re(e) {
if (!ne(e)) return !1;
var t = Object.getPrototypeOf(e);
if (null == t) return !0;
var n = Object.hasOwnProperty.call(t, "constructor") && t.constructor;
return "function" == typeof n && n.toString() === Q;
}
function ie(e) {
var t = null == e ? void 0 : e.constructor;
return !!t && ("GeneratorFunction" === t.name || "GeneratorFunction" === t.displayName);
}
function oe(e, t, n) {
q(e, t, {
enumerable: !1,
writable: !0,
configurable: !0,
value: n
});
}
function ae(e, t) {
var n = "isMobX" + e;
return t.prototype[n] = !0, function(e) {
return ne(e) && !0 === e[n];
};
}
function se(e) {
return e instanceof Map;
}
function le(e) {
return e instanceof Set;
}
var ce = void 0 !== Object.getOwnPropertySymbols;
function de(e) {
var t = Object.keys(e);
if (!ce) return t;
var n = Object.getOwnPropertySymbols(e);
return n.length ? [].concat(t, n.filter((function(t) {
return Y.propertyIsEnumerable.call(e, t);
}))) : t;
}
var ue = "undefined" != typeof Reflect && Reflect.ownKeys ? Reflect.ownKeys : ce ? function(e) {
return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e));
} : Object.getOwnPropertyNames;
function pe(e) {
return null === e ? null : "object" == typeof e ? "" + e : e;
}
function fe(e, t) {
return Y.hasOwnProperty.call(e, t);
}
var he = Object.getOwnPropertyDescriptors || function(e) {
var t = {};
return ue(e).forEach((function(n) {
t[n] = j(e, n);
})), t;
};
function me(e, t) {
for (var n = 0; n < t.length; n++) {
var r = t[n];
r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
Object.defineProperty(e, r.key, r);
}
}
function ge(e, t, n) {
return t && me(e.prototype, t), n && me(e, n), Object.defineProperty(e, "prototype", {
writable: !1
}), e;
}
function ye() {
return ye = Object.assign || function(e) {
for (var t = 1; t < arguments.length; t++) {
var n = arguments[t];
for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
}
return e;
}, ye.apply(this, arguments);
}
function Ie(e, t) {
return Ie = Object.setPrototypeOf || function(e, t) {
return e.__proto__ = t, e;
}, Ie(e, t);
}
function _e(e, t) {
if (e) {
if ("string" == typeof e) return be(e, t);
var n = Object.prototype.toString.call(e).slice(8, -1);
return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? be(e, t) : void 0;
}
}
function be(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];
return r;
}
function Se(e, t) {
var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
if (n) return (n = n.call(e)).next.bind(n);
if (Array.isArray(e) || (n = _e(e)) || t && e && "number" == typeof e.length) {
n && (e = n);
var r = 0;
return function() {
return r >= e.length ? {
done: !0
} : {
done: !1,
value: e[r++]
};
};
}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
var ve = Symbol("mobx-stored-annotations");
function Te(e) {
return Object.assign((function(t, n) {
Ee(t, n, e);
}), e);
}
function Ee(e, t, n) {
fe(e, ve) || oe(e, ve, ye({}, e[ve])), Be(n) || (e[ve][t] = n);
}
function Pe(e) {
return fe(e, ve) || oe(e, ve, ye({}, e[ve])), e[ve];
}
var Oe = Symbol("mobx administration"), Ce = function() {
function e(e) {
void 0 === e && (e = "Atom"), this.name_ = void 0, this.isPendingUnobservation_ = !1, 
this.isBeingObserved_ = !1, this.observers_ = new Set, this.diffValue_ = 0, this.lastAccessedBy_ = 0, 
this.lowestObserverState_ = kt.NOT_TRACKING_, this.onBOL = void 0, this.onBUOL = void 0, 
this.name_ = e;
}
var t = e.prototype;
return t.onBO = function() {
this.onBOL && this.onBOL.forEach((function(e) {
return e();
}));
}, t.onBUO = function() {
this.onBUOL && this.onBUOL.forEach((function(e) {
return e();
}));
}, t.reportObserved = function() {
return un(this);
}, t.reportChanged = function() {
cn(), pn(this), dn();
}, t.toString = function() {
return this.name_;
}, e;
}(), Ne = ae("Atom", Ce);
function Ae(e, t, n) {
void 0 === t && (t = Z), void 0 === n && (n = Z);
var r = new Ce(e);
return t !== Z && Fn(r, t), n !== Z && Mn(r, n), r;
}
var Le = {
identity: function(e, t) {
return e === t;
},
structural: function(e, t) {
return si(e, t);
},
default: function(e, t) {
return Object.is ? Object.is(e, t) : e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t;
},
shallow: function(e, t) {
return si(e, t, 1);
}
};
function we(e, t, n) {
return tr(e) ? e : Array.isArray(e) ? mt.array(e, {
name: n
}) : re(e) ? mt.object(e, void 0, {
name: n
}) : se(e) ? mt.map(e, {
name: n
}) : le(e) ? mt.set(e, {
name: n
}) : "function" != typeof e || kn(e) || Xn(e) ? e : ie(e) ? Wn(e) : Ln(n, e);
}
function ke(e) {
return e;
}
var Re = "override", xe = Te({
annotationType_: Re,
make_: function(e, t) {
return 0;
},
extend_: function(e, t, n, r) {
V("'" + this.annotationType_ + "' can only be used with 'makeObservable'");
}
});
function Be(e) {
return e.annotationType_ === Re;
}
function De(e, t) {
return {
annotationType_: e,
options_: t,
make_: Fe,
extend_: Me
};
}
function Fe(e, t, n, r) {
var i;
if (null != (i = this.options_) && i.bound) return null === this.extend_(e, t, n, !1) ? 0 : 1;
if (r === e.target_) return null === this.extend_(e, t, n, !1) ? 0 : 2;
if (kn(n.value)) return 1;
var o = Ue(e, this, t, n, !1);
return q(r, t, o), 2;
}
function Me(e, t, n, r) {
var i = Ue(e, this, t, n);
return e.defineProperty_(t, i, r);
}
function Ue(e, t, n, r, i) {
var o, a, s, l, c, d, u, p;
void 0 === i && (i = tn.safeDescriptors), p = r, t.annotationType_, p.value;
var f, h = r.value;
null != (o = t.options_) && o.bound && (h = h.bind(null != (f = e.proxy_) ? f : e.target_));
return {
value: Pt(null != (a = null == (s = t.options_) ? void 0 : s.name) ? a : n.toString(), h, null != (l = null == (c = t.options_) ? void 0 : c.autoAction) && l, null != (d = t.options_) && d.bound ? null != (u = e.proxy_) ? u : e.target_ : void 0),
configurable: !i || e.isPlainObject_,
enumerable: !1,
writable: !i
};
}
function He(e, t) {
return {
annotationType_: e,
options_: t,
make_: Ve,
extend_: Je
};
}
function Ve(e, t, n, r) {
var i;
if (r === e.target_) return null === this.extend_(e, t, n, !1) ? 0 : 2;
if (null != (i = this.options_) && i.bound && (!fe(e.target_, t) || !Xn(e.target_[t])) && null === this.extend_(e, t, n, !1)) return 0;
if (Xn(n.value)) return 1;
var o = Ge(e, this, t, n, !1, !1);
return q(r, t, o), 2;
}
function Je(e, t, n, r) {
var i, o = Ge(e, this, t, n, null == (i = this.options_) ? void 0 : i.bound);
return e.defineProperty_(t, o, r);
}
function Ge(e, t, n, r, i, o) {
var a;
void 0 === o && (o = tn.safeDescriptors), a = r, t.annotationType_, a.value;
var s, l = r.value;
(Xn(l) || (l = Wn(l)), i) && ((l = l.bind(null != (s = e.proxy_) ? s : e.target_)).isMobXFlow = !0);
return {
value: l,
configurable: !o || e.isPlainObject_,
enumerable: !1,
writable: !o
};
}
function ze(e, t) {
return {
annotationType_: e,
options_: t,
make_: je,
extend_: qe
};
}
function je(e, t, n) {
return null === this.extend_(e, t, n, !1) ? 0 : 1;
}
function qe(e, t, n, r) {
return Ye(e, this, t, n), e.defineComputedProperty_(t, ye({}, this.options_, {
get: n.get,
set: n.set
}), r);
}
function Ye(e, t, n, r) {
t.annotationType_, r.get;
}
function We(e, t) {
return {
annotationType_: e,
options_: t,
make_: Ke,
extend_: Xe
};
}
function Ke(e, t, n) {
return null === this.extend_(e, t, n, !1) ? 0 : 1;
}
function Xe(e, t, n, r) {
var i, o;
return Qe(e, this), e.defineObservableProperty_(t, n.value, null != (i = null == (o = this.options_) ? void 0 : o.enhancer) ? i : we, r);
}
function Qe(e, t, n, r) {
t.annotationType_;
}
var $e = Ze();
function Ze(e) {
return {
annotationType_: "true",
options_: e,
make_: et,
extend_: tt
};
}
function et(e, t, n, r) {
var i, o, a, s;
if (n.get) return _t.make_(e, t, n, r);
if (n.set) {
var l = Pt(t.toString(), n.set);
return r === e.target_ ? null === e.defineProperty_(t, {
configurable: !tn.safeDescriptors || e.isPlainObject_,
set: l
}) ? 0 : 2 : (q(r, t, {
configurable: !0,
set: l
}), 2);
}
if (r !== e.target_ && "function" == typeof n.value) return ie(n.value) ? (null != (s = this.options_) && s.autoBind ? Wn.bound : Wn).make_(e, t, n, r) : (null != (a = this.options_) && a.autoBind ? Ln.bound : Ln).make_(e, t, n, r);
var c, d = !1 === (null == (i = this.options_) ? void 0 : i.deep) ? mt.ref : mt;
"function" == typeof n.value && null != (o = this.options_) && o.autoBind && (n.value = n.value.bind(null != (c = e.proxy_) ? c : e.target_));
return d.make_(e, t, n, r);
}
function tt(e, t, n, r) {
var i, o, a;
if (n.get) return _t.extend_(e, t, n, r);
if (n.set) return e.defineProperty_(t, {
configurable: !tn.safeDescriptors || e.isPlainObject_,
set: Pt(t.toString(), n.set)
}, r);
"function" == typeof n.value && null != (i = this.options_) && i.autoBind && (n.value = n.value.bind(null != (a = e.proxy_) ? a : e.target_));
return (!1 === (null == (o = this.options_) ? void 0 : o.deep) ? mt.ref : mt).extend_(e, t, n, r);
}
var nt = {
deep: !0,
name: void 0,
defaultDecorator: void 0
};
function rt(e) {
return e || nt;
}
Object.freeze(nt);
var it = We("observable"), ot = We("observable.ref", {
enhancer: ke
}), at = We("observable.shallow", {
enhancer: function(e, t, n) {
return null == e || ti(e) || Ur(e) || zr(e) || Wr(e) ? e : Array.isArray(e) ? mt.array(e, {
name: n,
deep: !1
}) : re(e) ? mt.object(e, void 0, {
name: n,
deep: !1
}) : se(e) ? mt.map(e, {
name: n,
deep: !1
}) : le(e) ? mt.set(e, {
name: n,
deep: !1
}) : void 0;
}
}), st = We("observable.struct", {
enhancer: function(e, t) {
return si(e, t) ? t : e;
}
}), lt = Te(it);
function ct(e) {
return !0 === e.deep ? we : !1 === e.deep ? ke : (t = e.defaultDecorator) && null != (n = null == (r = t.options_) ? void 0 : r.enhancer) ? n : we;
var t, n, r;
}
function dt(e) {
var t;
return e ? null != (t = e.defaultDecorator) ? t : Ze(e) : void 0;
}
function ut(e, t, n) {
if (!te(t)) return tr(e) ? e : re(e) ? mt.object(e, t, n) : Array.isArray(e) ? mt.array(e, t) : se(e) ? mt.map(e, t) : le(e) ? mt.set(e, t) : "object" == typeof e && null !== e ? e : mt.box(e, t);
Ee(e, t, it);
}
Object.assign(ut, lt);
var pt, ft, ht = {
box: function(e, t) {
var n = rt(t);
return new xt(e, ct(n), n.name, !0, n.equals);
},
array: function(e, t) {
var n = rt(t);
return kr(e, ct(n), n.name);
},
map: function(e, t) {
var n = rt(t);
return new Gr(e, ct(n), n.name);
},
set: function(e, t) {
var n = rt(t);
return new Yr(e, ct(n), n.name);
},
object: function(e, t, n) {
return Vn(_r({}, n), e, t);
},
ref: Te(ot),
shallow: Te(at),
deep: lt,
struct: Te(st)
}, mt = z(ut, ht), gt = "computed", yt = ze(gt), It = ze("computed.struct", {
equals: Le.structural
}), _t = function(e, t) {
if (te(t)) return Ee(e, t, yt);
if (re(e)) return Te(ze(gt, e));
var n = re(t) ? t : {};
return n.get = e, n.name || (n.name = e.name || ""), new Dt(n);
};
Object.assign(_t, yt), _t.struct = Te(It);
var bt, St = 0, vt = 1, Tt = null != (pt = null == (ft = j((function() {}), "name")) ? void 0 : ft.configurable) && pt, Et = {
value: "action",
configurable: !0,
writable: !1,
enumerable: !1
};
function Pt(e, t, n, r) {
function i() {
return Ot(e, n, t, r || this, arguments);
}
return void 0 === n && (n = !1), i.isMobxAction = !0, Tt && (Et.value = e, Object.defineProperty(i, "name", Et)), 
i;
}
function Ot(e, t, n, r, i) {
var o = Ct(e, t);
try {
return n.apply(r, i);
} catch (e) {
throw o.error_ = e, e;
} finally {
Nt(o);
}
}
function Ct(e, t, n, r) {
var i = tn.trackingDerivation, o = !t || !i;
cn();
var a = tn.allowStateChanges;
o && (qt(), a = Lt(!0));
var s = {
runAsAction_: o,
prevDerivation_: i,
prevAllowStateChanges_: a,
prevAllowStateReads_: Wt(!0),
notifySpy_: !1,
startTime_: 0,
actionId_: vt++,
parentActionId_: St
};
return St = s.actionId_, s;
}
function Nt(e) {
St !== e.actionId_ && V(30), St = e.parentActionId_, void 0 !== e.error_ && (tn.suppressReactionErrors = !0), 
wt(e.prevAllowStateChanges_), Kt(e.prevAllowStateReads_), dn(), e.runAsAction_ && Yt(e.prevDerivation_), 
tn.suppressReactionErrors = !1;
}
function At(e, t) {
var n = Lt(e);
try {
return t();
} finally {
wt(n);
}
}
function Lt(e) {
var t = tn.allowStateChanges;
return tn.allowStateChanges = e, t;
}
function wt(e) {
tn.allowStateChanges = e;
}
bt = Symbol.toPrimitive;
var kt, Rt, xt = function(e, t) {
var n, r;
function i(t, n, r, i, o) {
var a;
return void 0 === r && (r = "ObservableValue"), void 0 === o && (o = Le.default), 
(a = e.call(this, r) || this).enhancer = void 0, a.name_ = void 0, a.equals = void 0, 
a.interceptors_ = void 0, a.changeListeners_ = void 0, a.value_ = void 0, a.dehancer = void 0, 
a.enhancer = n, a.name_ = r, a.equals = o, a.value_ = n(t, void 0, r), a;
}
r = e, (n = i).prototype = Object.create(r.prototype), n.prototype.constructor = n, 
Ie(n, r);
var o = i.prototype;
return o.dehanceValue = function(e) {
return void 0 !== this.dehancer ? this.dehancer(e) : e;
}, o.set = function(e) {
this.value_;
(e = this.prepareNewValue_(e)) !== tn.UNCHANGED && this.setNewValue_(e);
}, o.prepareNewValue_ = function(e) {
if (br(this)) {
var t = vr(this, {
object: this,
type: Ar,
newValue: e
});
if (!t) return tn.UNCHANGED;
e = t.newValue;
}
return e = this.enhancer(e, this.value_, this.name_), this.equals(this.value_, e) ? tn.UNCHANGED : e;
}, o.setNewValue_ = function(e) {
var t = this.value_;
this.value_ = e, this.reportChanged(), Tr(this) && Pr(this, {
type: Ar,
object: this,
newValue: e,
oldValue: t
});
}, o.get = function() {
return this.reportObserved(), this.dehanceValue(this.value_);
}, o.intercept_ = function(e) {
return Sr(this, e);
}, o.observe_ = function(e, t) {
return t && e({
observableKind: "value",
debugObjectName: this.name_,
object: this,
type: Ar,
newValue: this.value_,
oldValue: void 0
}), Er(this, e);
}, o.raw = function() {
return this.value_;
}, o.toJSON = function() {
return this.get();
}, o.toString = function() {
return this.name_ + "[" + this.value_ + "]";
}, o.valueOf = function() {
return pe(this.get());
}, o[t] = function() {
return this.valueOf();
}, i;
}(Ce, bt), Bt = ae("ObservableValue", xt), Dt = function(e) {
function t(e) {
this.dependenciesState_ = kt.NOT_TRACKING_, this.observing_ = [], this.newObserving_ = null, 
this.isBeingObserved_ = !1, this.isPendingUnobservation_ = !1, this.observers_ = new Set, 
this.diffValue_ = 0, this.runId_ = 0, this.lastAccessedBy_ = 0, this.lowestObserverState_ = kt.UP_TO_DATE_, 
this.unboundDepsCount_ = 0, this.value_ = new Mt(null), this.name_ = void 0, this.triggeredBy_ = void 0, 
this.isComputing_ = !1, this.isRunningSetter_ = !1, this.derivation = void 0, this.setter_ = void 0, 
this.isTracing_ = Rt.NONE, this.scope_ = void 0, this.equals_ = void 0, this.requiresReaction_ = void 0, 
this.keepAlive_ = void 0, this.onBOL = void 0, this.onBUOL = void 0, e.get || V(31), 
this.derivation = e.get, this.name_ = e.name || "ComputedValue", e.set && (this.setter_ = Pt("ComputedValue-setter", e.set)), 
this.equals_ = e.equals || (e.compareStructural || e.struct ? Le.structural : Le.default), 
this.scope_ = e.context, this.requiresReaction_ = e.requiresReaction, this.keepAlive_ = !!e.keepAlive;
}
var n = t.prototype;
return n.onBecomeStale_ = function() {
hn(this);
}, n.onBO = function() {
this.onBOL && this.onBOL.forEach((function(e) {
return e();
}));
}, n.onBUO = function() {
this.onBUOL && this.onBUOL.forEach((function(e) {
return e();
}));
}, n.get = function() {
if (this.isComputing_ && V(32, this.name_, this.derivation), 0 !== tn.inBatch || 0 !== this.observers_.size || this.keepAlive_) {
if (un(this), Ht(this)) {
var e = tn.trackingContext;
this.keepAlive_ && !e && (tn.trackingContext = this), this.trackAndCompute() && fn(this), 
tn.trackingContext = e;
}
} else Ht(this) && (this.warnAboutUntrackedRead_(), cn(), this.value_ = this.computeValue_(!1), 
dn());
var t = this.value_;
if (Ut(t)) throw t.cause;
return t;
}, n.set = function(e) {
if (this.setter_) {
this.isRunningSetter_ && V(33, this.name_), this.isRunningSetter_ = !0;
try {
this.setter_.call(this.scope_, e);
} finally {
this.isRunningSetter_ = !1;
}
} else V(34, this.name_);
}, n.trackAndCompute = function() {
var e = this.value_, t = this.dependenciesState_ === kt.NOT_TRACKING_, n = this.computeValue_(!0), r = t || Ut(e) || Ut(n) || !this.equals_(e, n);
return r && (this.value_ = n), r;
}, n.computeValue_ = function(e) {
this.isComputing_ = !0;
var t, n = Lt(!1);
if (e) t = Jt(this, this.derivation, this.scope_); else if (!0 === tn.disableErrorBoundaries) t = this.derivation.call(this.scope_); else try {
t = this.derivation.call(this.scope_);
} catch (e) {
t = new Mt(e);
}
return wt(n), this.isComputing_ = !1, t;
}, n.suspend_ = function() {
this.keepAlive_ || (zt(this), this.value_ = void 0);
}, n.observe_ = function(e, t) {
var n = this, r = !0, i = void 0;
return Rn((function() {
var o = n.get();
if (!r || t) {
var a = qt();
e({
observableKind: "computed",
debugObjectName: n.name_,
type: Ar,
object: n,
newValue: o,
oldValue: i
}), Yt(a);
}
r = !1, i = o;
}));
}, n.warnAboutUntrackedRead_ = function() {}, n.toString = function() {
return this.name_ + "[" + this.derivation.toString() + "]";
}, n.valueOf = function() {
return pe(this.get());
}, n[e] = function() {
return this.valueOf();
}, t;
}(Symbol.toPrimitive), Ft = ae("ComputedValue", Dt);
!function(e) {
e[e.NOT_TRACKING_ = -1] = "NOT_TRACKING_", e[e.UP_TO_DATE_ = 0] = "UP_TO_DATE_", 
e[e.POSSIBLY_STALE_ = 1] = "POSSIBLY_STALE_", e[e.STALE_ = 2] = "STALE_";
}(kt || (kt = {})), function(e) {
e[e.NONE = 0] = "NONE", e[e.LOG = 1] = "LOG", e[e.BREAK = 2] = "BREAK";
}(Rt || (Rt = {}));
var Mt = function(e) {
this.cause = void 0, this.cause = e;
};
function Ut(e) {
return e instanceof Mt;
}
function Ht(e) {
switch (e.dependenciesState_) {
case kt.UP_TO_DATE_:
return !1;

case kt.NOT_TRACKING_:
case kt.STALE_:
return !0;

case kt.POSSIBLY_STALE_:
for (var t = Wt(!0), n = qt(), r = e.observing_, i = r.length, o = 0; o < i; o++) {
var a = r[o];
if (Ft(a)) {
if (tn.disableErrorBoundaries) a.get(); else try {
a.get();
} catch (e) {
return Yt(n), Kt(t), !0;
}
if (e.dependenciesState_ === kt.STALE_) return Yt(n), Kt(t), !0;
}
}
return Xt(e), Yt(n), Kt(t), !1;
}
}
function Vt() {
return null !== tn.trackingDerivation;
}
function Jt(e, t, n) {
var r = Wt(!0);
Xt(e), e.newObserving_ = new Array(e.observing_.length + 100), e.unboundDepsCount_ = 0, 
e.runId_ = ++tn.runId;
var i, o = tn.trackingDerivation;
if (tn.trackingDerivation = e, tn.inBatch++, !0 === tn.disableErrorBoundaries) i = t.call(n); else try {
i = t.call(n);
} catch (e) {
i = new Mt(e);
}
return tn.inBatch--, tn.trackingDerivation = o, Gt(e), Kt(r), i;
}
function Gt(e) {
for (var t = e.observing_, n = e.observing_ = e.newObserving_, r = kt.UP_TO_DATE_, i = 0, o = e.unboundDepsCount_, a = 0; a < o; a++) {
var s = n[a];
0 === s.diffValue_ && (s.diffValue_ = 1, i !== a && (n[i] = s), i++), s.dependenciesState_ > r && (r = s.dependenciesState_);
}
for (n.length = i, e.newObserving_ = null, o = t.length; o--; ) {
var l = t[o];
0 === l.diffValue_ && sn(l, e), l.diffValue_ = 0;
}
for (;i--; ) {
var c = n[i];
1 === c.diffValue_ && (c.diffValue_ = 0, an(c, e));
}
r !== kt.UP_TO_DATE_ && (e.dependenciesState_ = r, e.onBecomeStale_());
}
function zt(e) {
var t = e.observing_;
e.observing_ = [];
for (var n = t.length; n--; ) sn(t[n], e);
e.dependenciesState_ = kt.NOT_TRACKING_;
}
function jt(e) {
var t = qt();
try {
return e();
} finally {
Yt(t);
}
}
function qt() {
var e = tn.trackingDerivation;
return tn.trackingDerivation = null, e;
}
function Yt(e) {
tn.trackingDerivation = e;
}
function Wt(e) {
var t = tn.allowStateReads;
return tn.allowStateReads = e, t;
}
function Kt(e) {
tn.allowStateReads = e;
}
function Xt(e) {
if (e.dependenciesState_ !== kt.UP_TO_DATE_) {
e.dependenciesState_ = kt.UP_TO_DATE_;
for (var t = e.observing_, n = t.length; n--; ) t[n].lowestObserverState_ = kt.UP_TO_DATE_;
}
}
var Qt = [ "mobxGuid", "spyListeners", "enforceActions", "computedRequiresReaction", "reactionRequiresObservable", "observableRequiresReaction", "allowStateReads", "disableErrorBoundaries", "runId", "UNCHANGED" ], $t = function() {
this.version = 6, this.UNCHANGED = {}, this.trackingDerivation = null, this.trackingContext = null, 
this.runId = 0, this.mobxGuid = 0, this.inBatch = 0, this.pendingUnobservations = [], 
this.pendingReactions = [], this.isRunningReactions = !1, this.allowStateChanges = !1, 
this.allowStateReads = !0, this.enforceActions = !0, this.spyListeners = [], this.globalReactionErrorHandlers = [], 
this.computedRequiresReaction = !1, this.reactionRequiresObservable = !1, this.observableRequiresReaction = !1, 
this.disableErrorBoundaries = !1, this.suppressReactionErrors = !1, this.safeDescriptors = !0;
}, Zt = !0, en = !1, tn = function() {
var e = G();
return e.__mobxInstanceCount > 0 && !e.__mobxGlobals && (Zt = !1), e.__mobxGlobals && e.__mobxGlobals.version !== (new $t).version && (Zt = !1), 
Zt ? e.__mobxGlobals ? (e.__mobxInstanceCount += 1, e.__mobxGlobals.UNCHANGED || (e.__mobxGlobals.UNCHANGED = {}), 
e.__mobxGlobals) : (e.__mobxInstanceCount = 1, e.__mobxGlobals = new $t) : (setTimeout((function() {
en || V(35);
}), 1), new $t);
}();
function nn() {
if ((tn.pendingReactions.length || tn.inBatch || tn.isRunningReactions) && V(36), 
en = !0, Zt) {
var e = G();
0 == --e.__mobxInstanceCount && (e.__mobxGlobals = void 0), tn = new $t;
}
}
function rn(e) {
return e.observers_ && e.observers_.size > 0;
}
function on(e) {
return e.observers_;
}
function an(e, t) {
e.observers_.add(t), e.lowestObserverState_ > t.dependenciesState_ && (e.lowestObserverState_ = t.dependenciesState_);
}
function sn(e, t) {
e.observers_.delete(t), 0 === e.observers_.size && ln(e);
}
function ln(e) {
!1 === e.isPendingUnobservation_ && (e.isPendingUnobservation_ = !0, tn.pendingUnobservations.push(e));
}
function cn() {
tn.inBatch++;
}
function dn() {
if (0 == --tn.inBatch) {
yn();
for (var e = tn.pendingUnobservations, t = 0; t < e.length; t++) {
var n = e[t];
n.isPendingUnobservation_ = !1, 0 === n.observers_.size && (n.isBeingObserved_ && (n.isBeingObserved_ = !1, 
n.onBUO()), n instanceof Dt && n.suspend_());
}
tn.pendingUnobservations = [];
}
}
function un(e) {
var t = tn.trackingDerivation;
return null !== t ? (t.runId_ !== e.lastAccessedBy_ && (e.lastAccessedBy_ = t.runId_, 
t.newObserving_[t.unboundDepsCount_++] = e, !e.isBeingObserved_ && tn.trackingContext && (e.isBeingObserved_ = !0, 
e.onBO())), !0) : (0 === e.observers_.size && tn.inBatch > 0 && ln(e), !1);
}
function pn(e) {
e.lowestObserverState_ !== kt.STALE_ && (e.lowestObserverState_ = kt.STALE_, e.observers_.forEach((function(e) {
e.dependenciesState_ === kt.UP_TO_DATE_ && e.onBecomeStale_(), e.dependenciesState_ = kt.STALE_;
})));
}
function fn(e) {
e.lowestObserverState_ !== kt.STALE_ && (e.lowestObserverState_ = kt.STALE_, e.observers_.forEach((function(t) {
t.dependenciesState_ === kt.POSSIBLY_STALE_ ? t.dependenciesState_ = kt.STALE_ : t.dependenciesState_ === kt.UP_TO_DATE_ && (e.lowestObserverState_ = kt.UP_TO_DATE_);
})));
}
function hn(e) {
e.lowestObserverState_ === kt.UP_TO_DATE_ && (e.lowestObserverState_ = kt.POSSIBLY_STALE_, 
e.observers_.forEach((function(e) {
e.dependenciesState_ === kt.UP_TO_DATE_ && (e.dependenciesState_ = kt.POSSIBLY_STALE_, 
e.onBecomeStale_());
})));
}
var mn = function() {
function e(e, t, n, r) {
void 0 === e && (e = "Reaction"), this.name_ = void 0, this.onInvalidate_ = void 0, 
this.errorHandler_ = void 0, this.requiresObservable_ = void 0, this.observing_ = [], 
this.newObserving_ = [], this.dependenciesState_ = kt.NOT_TRACKING_, this.diffValue_ = 0, 
this.runId_ = 0, this.unboundDepsCount_ = 0, this.isDisposed_ = !1, this.isScheduled_ = !1, 
this.isTrackPending_ = !1, this.isRunning_ = !1, this.isTracing_ = Rt.NONE, this.name_ = e, 
this.onInvalidate_ = t, this.errorHandler_ = n, this.requiresObservable_ = r;
}
var t = e.prototype;
return t.onBecomeStale_ = function() {
this.schedule_();
}, t.schedule_ = function() {
this.isScheduled_ || (this.isScheduled_ = !0, tn.pendingReactions.push(this), yn());
}, t.isScheduled = function() {
return this.isScheduled_;
}, t.runReaction_ = function() {
if (!this.isDisposed_) {
cn(), this.isScheduled_ = !1;
var e = tn.trackingContext;
if (tn.trackingContext = this, Ht(this)) {
this.isTrackPending_ = !0;
try {
this.onInvalidate_();
} catch (e) {
this.reportExceptionInDerivation_(e);
}
}
tn.trackingContext = e, dn();
}
}, t.track = function(e) {
if (!this.isDisposed_) {
cn(), this.isRunning_ = !0;
var t = tn.trackingContext;
tn.trackingContext = this;
var n = Jt(this, e, void 0);
tn.trackingContext = t, this.isRunning_ = !1, this.isTrackPending_ = !1, this.isDisposed_ && zt(this), 
Ut(n) && this.reportExceptionInDerivation_(n.cause), dn();
}
}, t.reportExceptionInDerivation_ = function(e) {
var t = this;
if (this.errorHandler_) this.errorHandler_(e, this); else {
if (tn.disableErrorBoundaries) throw e;
var n = "[mobx] uncaught error in '" + this + "'";
tn.suppressReactionErrors || console.error(n, e), tn.globalReactionErrorHandlers.forEach((function(n) {
return n(e, t);
}));
}
}, t.dispose = function() {
this.isDisposed_ || (this.isDisposed_ = !0, this.isRunning_ || (cn(), zt(this), 
dn()));
}, t.getDisposer_ = function() {
var e = this.dispose.bind(this);
return e[Oe] = this, e;
}, t.toString = function() {
return "Reaction[" + this.name_ + "]";
}, t.trace = function(e) {
void 0 === e && (e = !1), ur(this, e);
}, e;
}();
var gn = function(e) {
return e();
};
function yn() {
tn.inBatch > 0 || tn.isRunningReactions || gn(In);
}
function In() {
tn.isRunningReactions = !0;
for (var e = tn.pendingReactions, t = 0; e.length > 0; ) {
100 == ++t && (console.error("[mobx] cycle in reaction: " + e[0]), e.splice(0));
for (var n = e.splice(0), r = 0, i = n.length; r < i; r++) n[r].runReaction_();
}
tn.isRunningReactions = !1;
}
var _n = ae("Reaction", mn);
function bn(e) {
return console.warn("[mobx.spy] Is a no-op in production builds"), function() {};
}
var Sn = "action", vn = "autoAction", Tn = "<unnamed action>", En = De(Sn), Pn = De("action.bound", {
bound: !0
}), On = De(vn, {
autoAction: !0
}), Cn = De("autoAction.bound", {
autoAction: !0,
bound: !0
});
function Nn(e) {
return function(t, n) {
return ee(t) ? Pt(t.name || Tn, t, e) : ee(n) ? Pt(t, n, e) : te(n) ? Ee(t, n, e ? On : En) : te(t) ? Te(De(e ? vn : Sn, {
name: t,
autoAction: e
})) : void 0;
};
}
var An = Nn(!1);
Object.assign(An, En);
var Ln = Nn(!0);
function wn(e) {
return Ot(e.name || Tn, !1, e, this, void 0);
}
function kn(e) {
return ee(e) && !0 === e.isMobxAction;
}
function Rn(e, t) {
var n, r;
void 0 === t && (t = K);
var i, o = null != (n = null == (r = t) ? void 0 : r.name) ? n : "Autorun";
if (!t.scheduler && !t.delay) i = new mn(o, (function() {
this.track(l);
}), t.onError, t.requiresObservable); else {
var a = Bn(t), s = !1;
i = new mn(o, (function() {
s || (s = !0, a((function() {
s = !1, i.isDisposed_ || i.track(l);
})));
}), t.onError, t.requiresObservable);
}
function l() {
e(i);
}
return i.schedule_(), i.getDisposer_();
}
Object.assign(Ln, On), An.bound = Te(Pn), Ln.bound = Te(Cn);
var xn = function(e) {
return e();
};
function Bn(e) {
return e.scheduler ? e.scheduler : e.delay ? function(t) {
return setTimeout(t, e.delay);
} : xn;
}
function Dn(e, t, n) {
var r;
void 0 === n && (n = K);
var i, o, a, s, l = null != (r = n.name) ? r : "Reaction", c = An(l, n.onError ? (i = n.onError, 
o = t, function() {
try {
return o.apply(this, arguments);
} catch (e) {
i.call(this, e);
}
}) : t), d = !n.scheduler && !n.delay, u = Bn(n), p = !0, f = !1, h = n.compareStructural ? Le.structural : n.equals || Le.default, m = new mn(l, (function() {
p || d ? g() : f || (f = !0, u(g));
}), n.onError, n.requiresObservable);
function g() {
if (f = !1, !m.isDisposed_) {
var t = !1;
m.track((function() {
var n = At(!1, (function() {
return e(m);
}));
t = p || !h(a, n), s = a, a = n;
})), (p && n.fireImmediately || !p && t) && c(a, s, m), p = !1;
}
}
return m.schedule_(), m.getDisposer_();
}
function Fn(e, t, n) {
return Un("onBO", e, t, n);
}
function Mn(e, t, n) {
return Un("onBUO", e, t, n);
}
function Un(e, t, n, r) {
var i = "function" == typeof r ? ri(t, n) : ri(t), o = ee(r) ? r : n, a = e + "L";
return i[a] ? i[a].add(o) : i[a] = new Set([ o ]), function() {
var e = i[a];
e && (e.delete(o), 0 === e.size && delete i[a]);
};
}
var Hn = "always";
function Vn(e, t, n, r) {
var i = he(t), o = $r(e, r)[Oe];
cn();
try {
ue(i).forEach((function(e) {
o.extend_(e, i[e], !n || (!(e in n) || n[e]));
}));
} finally {
dn();
}
return e;
}
function Jn(e) {
var t, n = {
name: e.name_
};
return e.observing_ && e.observing_.length > 0 && (n.dependencies = (t = e.observing_, 
Array.from(new Set(t))).map(Jn)), n;
}
function Gn(e) {
var t = {
name: e.name_
};
return rn(e) && (t.observers = Array.from(on(e)).map(Gn)), t;
}
var zn = 0;
function jn() {
this.message = "FLOW_CANCELLED";
}
jn.prototype = Object.create(Error.prototype);
var qn = He("flow"), Yn = He("flow.bound", {
bound: !0
}), Wn = Object.assign((function(e, t) {
if (te(t)) return Ee(e, t, qn);
var n = e, r = n.name || "<unnamed flow>", i = function() {
var e, t = this, i = arguments, o = ++zn, a = An(r + " - runid: " + o + " - init", n).apply(t, i), s = void 0, l = new Promise((function(t, n) {
var i = 0;
function l(e) {
var t;
s = void 0;
try {
t = An(r + " - runid: " + o + " - yield " + i++, a.next).call(a, e);
} catch (e) {
return n(e);
}
d(t);
}
function c(e) {
var t;
s = void 0;
try {
t = An(r + " - runid: " + o + " - yield " + i++, a.throw).call(a, e);
} catch (e) {
return n(e);
}
d(t);
}
function d(e) {
if (!ee(null == e ? void 0 : e.then)) return e.done ? t(e.value) : (s = Promise.resolve(e.value)).then(l, c);
e.then(d, n);
}
e = n, l(void 0);
}));
return l.cancel = An(r + " - runid: " + o + " - cancel", (function() {
try {
s && Kn(s);
var t = a.return(void 0), n = Promise.resolve(t.value);
n.then(Z, Z), Kn(n), e(new jn);
} catch (t) {
e(t);
}
})), l;
};
return i.isMobXFlow = !0, i;
}), qn);
function Kn(e) {
ee(e.cancel) && e.cancel();
}
function Xn(e) {
return !0 === (null == e ? void 0 : e.isMobXFlow);
}
function Qn(e, t) {
return ii(e).intercept_(t);
}
function $n(e, t, n) {
return ii(e, t).intercept_(n);
}
function Zn(e, t) {
if (void 0 === t) return Ft(e);
if (!1 === ti(e)) return !1;
if (!e[Oe].values_.has(t)) return !1;
var n = ri(e, t);
return Ft(n);
}
function er(e, t) {
return !!e && (void 0 !== t ? !!ti(e) && e[Oe].values_.has(t) : ti(e) || !!e[Oe] || Ne(e) || _n(e) || Ft(e));
}
function tr(e) {
return er(e);
}
function nr(e) {
return ti(e) ? e[Oe].keys_() : zr(e) || Wr(e) ? Array.from(e.keys()) : Ur(e) ? e.map((function(e, t) {
return t;
})) : void V(5);
}
function rr(e, t) {
return ti(e) ? e[Oe].has_(t) : zr(e) || Wr(e) ? e.has(t) : Ur(e) ? t >= 0 && t < e.length : void V(10);
}
function ir(e) {
if (ti(e)) return e[Oe].ownKeys_();
V(38);
}
function or(e, t, n, r) {
return ee(n) ? sr(e, t, n, r) : ar(e, t, n);
}
function ar(e, t, n) {
return ii(e).observe_(t, n);
}
function sr(e, t, n, r) {
return ii(e, t).observe_(n, r);
}
function lr(e, t, n) {
return e.set(t, n), n;
}
function cr(e, t) {
if (null == e || "object" != typeof e || e instanceof Date || !tr(e)) return e;
if (Bt(e) || Ft(e)) return cr(e.get(), t);
if (t.has(e)) return t.get(e);
if (Ur(e)) {
var n = lr(t, e, new Array(e.length));
return e.forEach((function(e, r) {
n[r] = cr(e, t);
})), n;
}
if (Wr(e)) {
var r = lr(t, e, new Set);
return e.forEach((function(e) {
r.add(cr(e, t));
})), r;
}
if (zr(e)) {
var i = lr(t, e, new Map);
return e.forEach((function(e, n) {
i.set(n, cr(e, t));
})), i;
}
var o = lr(t, e, {});
return ir(e).forEach((function(n) {
Y.propertyIsEnumerable.call(e, n) && (o[n] = cr(e[n], t));
})), o;
}
function dr(e, t) {
return cr(e, new Map);
}
function ur() {
V("trace() is not available in production builds");
for (var e = !1, t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];
"boolean" == typeof n[n.length - 1] && (e = n.pop());
var i = pr(n);
if (!i) return V("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");
i.isTracing_ === Rt.NONE && console.log("[mobx.trace] '" + i.name_ + "' tracing enabled"), 
i.isTracing_ = e ? Rt.BREAK : Rt.LOG;
}
function pr(e) {
switch (e.length) {
case 0:
return tn.trackingDerivation;

case 1:
return ri(e[0]);

case 2:
return ri(e[0], e[1]);
}
}
function fr(e, t) {
void 0 === t && (t = void 0), cn();
try {
return e.apply(t);
} finally {
dn();
}
}
function hr(e, t, n) {
return 1 === arguments.length || t && "object" == typeof t ? gr(e, t) : mr(e, t, n || {});
}
function mr(e, t, n) {
var r;
if ("number" == typeof n.timeout) {
var i = new Error("WHEN_TIMEOUT");
r = setTimeout((function() {
if (!a[Oe].isDisposed_) {
if (a(), !n.onError) throw i;
n.onError(i);
}
}), n.timeout);
}
n.name = "When";
var o = Pt("When-effect", t), a = Rn((function(t) {
At(!1, e) && (t.dispose(), r && clearTimeout(r), o());
}), n);
return a;
}
function gr(e, t) {
var n, r = new Promise((function(r, i) {
var o = mr(e, r, ye({}, t, {
onError: i
}));
n = function() {
o(), i(new Error("WHEN_CANCELLED"));
};
}));
return r.cancel = n, r;
}
function yr(e) {
return e[Oe];
}
Wn.bound = Te(Yn);
var Ir = {
has: function(e, t) {
return yr(e).has_(t);
},
get: function(e, t) {
return yr(e).get_(t);
},
set: function(e, t, n) {
var r;
return !!te(t) && (null == (r = yr(e).set_(t, n, !0)) || r);
},
deleteProperty: function(e, t) {
var n;
return !!te(t) && (null == (n = yr(e).delete_(t, !0)) || n);
},
defineProperty: function(e, t, n) {
var r;
return null == (r = yr(e).defineProperty_(t, n)) || r;
},
ownKeys: function(e) {
return yr(e).ownKeys_();
},
preventExtensions: function(e) {
V(13);
}
};
function _r(e, t) {
var n, r;
return null != (r = (n = (e = $r(e, t))[Oe]).proxy_) ? r : n.proxy_ = new Proxy(e, Ir);
}
function br(e) {
return void 0 !== e.interceptors_ && e.interceptors_.length > 0;
}
function Sr(e, t) {
var n = e.interceptors_ || (e.interceptors_ = []);
return n.push(t), $((function() {
var e = n.indexOf(t);
-1 !== e && n.splice(e, 1);
}));
}
function vr(e, t) {
var n = qt();
try {
for (var r = [].concat(e.interceptors_ || []), i = 0, o = r.length; i < o && ((t = r[i](t)) && !t.type && V(14), 
t); i++) ;
return t;
} finally {
Yt(n);
}
}
function Tr(e) {
return void 0 !== e.changeListeners_ && e.changeListeners_.length > 0;
}
function Er(e, t) {
var n = e.changeListeners_ || (e.changeListeners_ = []);
return n.push(t), $((function() {
var e = n.indexOf(t);
-1 !== e && n.splice(e, 1);
}));
}
function Pr(e, t) {
var n = qt(), r = e.changeListeners_;
if (r) {
for (var i = 0, o = (r = r.slice()).length; i < o; i++) r[i](t);
Yt(n);
}
}
function Or(e, t, n) {
var r = $r(e, n)[Oe];
cn();
try {
0, null != t || (t = Pe(e)), ue(t).forEach((function(e) {
return r.make_(e, t[e]);
}));
} finally {
dn();
}
return e;
}
var Cr = Symbol("mobx-keys");
var Nr = "splice", Ar = "update", Lr = {
get: function(e, t) {
var n = e[Oe];
return t === Oe ? n : "length" === t ? n.getArrayLength_() : "string" != typeof t || isNaN(t) ? fe(Rr, t) ? Rr[t] : e[t] : n.get_(parseInt(t));
},
set: function(e, t, n) {
var r = e[Oe];
return "length" === t && r.setArrayLength_(n), "symbol" == typeof t || isNaN(t) ? e[t] = n : r.set_(parseInt(t), n), 
!0;
},
preventExtensions: function() {
V(15);
}
}, wr = function() {
function e(e, t, n) {
void 0 === e && (e = "ObservableArray"), this.owned_ = void 0, this.atom_ = void 0, 
this.values_ = [], this.interceptors_ = void 0, this.changeListeners_ = void 0, 
this.enhancer_ = void 0, this.dehancer = void 0, this.proxy_ = void 0, this.lastKnownLength_ = 0, 
this.owned_ = n, this.atom_ = new Ce(e), this.enhancer_ = function(e, n) {
return t(e, n, "ObservableArray[..]");
};
}
var t = e.prototype;
return t.dehanceValue_ = function(e) {
return void 0 !== this.dehancer ? this.dehancer(e) : e;
}, t.dehanceValues_ = function(e) {
return void 0 !== this.dehancer && e.length > 0 ? e.map(this.dehancer) : e;
}, t.intercept_ = function(e) {
return Sr(this, e);
}, t.observe_ = function(e, t) {
return void 0 === t && (t = !1), t && e({
observableKind: "array",
object: this.proxy_,
debugObjectName: this.atom_.name_,
type: "splice",
index: 0,
added: this.values_.slice(),
addedCount: this.values_.length,
removed: [],
removedCount: 0
}), Er(this, e);
}, t.getArrayLength_ = function() {
return this.atom_.reportObserved(), this.values_.length;
}, t.setArrayLength_ = function(e) {
("number" != typeof e || isNaN(e) || e < 0) && V("Out of range: " + e);
var t = this.values_.length;
if (e !== t) if (e > t) {
for (var n = new Array(e - t), r = 0; r < e - t; r++) n[r] = void 0;
this.spliceWithArray_(t, 0, n);
} else this.spliceWithArray_(e, t - e);
}, t.updateArrayLength_ = function(e, t) {
e !== this.lastKnownLength_ && V(16), this.lastKnownLength_ += t;
}, t.spliceWithArray_ = function(e, t, n) {
var r = this;
this.atom_;
var i = this.values_.length;
if (void 0 === e ? e = 0 : e > i ? e = i : e < 0 && (e = Math.max(0, i + e)), t = 1 === arguments.length ? i - e : null == t ? 0 : Math.max(0, Math.min(t, i - e)), 
void 0 === n && (n = W), br(this)) {
var o = vr(this, {
object: this.proxy_,
type: Nr,
index: e,
removedCount: t,
added: n
});
if (!o) return W;
t = o.removedCount, n = o.added;
}
n = 0 === n.length ? n : n.map((function(e) {
return r.enhancer_(e, void 0);
}));
var a = this.spliceItemsIntoValues_(e, t, n);
return 0 === t && 0 === n.length || this.notifyArraySplice_(e, n, a), this.dehanceValues_(a);
}, t.spliceItemsIntoValues_ = function(e, t, n) {
var r;
if (n.length < 1e4) return (r = this.values_).splice.apply(r, [ e, t ].concat(n));
var i = this.values_.slice(e, e + t), o = this.values_.slice(e + t);
this.values_.length += n.length - t;
for (var a = 0; a < n.length; a++) this.values_[e + a] = n[a];
for (var s = 0; s < o.length; s++) this.values_[e + n.length + s] = o[s];
return i;
}, t.notifyArrayChildUpdate_ = function(e, t, n) {
var r = !this.owned_ && !1, i = Tr(this), o = i || r ? {
observableKind: "array",
object: this.proxy_,
type: Ar,
debugObjectName: this.atom_.name_,
index: e,
newValue: t,
oldValue: n
} : null;
this.atom_.reportChanged(), i && Pr(this, o);
}, t.notifyArraySplice_ = function(e, t, n) {
var r = !this.owned_ && !1, i = Tr(this), o = i || r ? {
observableKind: "array",
object: this.proxy_,
debugObjectName: this.atom_.name_,
type: Nr,
index: e,
removed: n,
added: t,
removedCount: n.length,
addedCount: t.length
} : null;
this.atom_.reportChanged(), i && Pr(this, o);
}, t.get_ = function(e) {
if (e < this.values_.length) return this.atom_.reportObserved(), this.dehanceValue_(this.values_[e]);
console.warn("[mobx.array] Attempt to read an array index (" + e + ") that is out of bounds (" + this.values_.length + "). Please check length first. Out of bound indices will not be tracked by MobX");
}, t.set_ = function(e, t) {
var n = this.values_;
if (e < n.length) {
this.atom_;
var r = n[e];
if (br(this)) {
var i = vr(this, {
type: Ar,
object: this.proxy_,
index: e,
newValue: t
});
if (!i) return;
t = i.newValue;
}
(t = this.enhancer_(t, r)) !== r && (n[e] = t, this.notifyArrayChildUpdate_(e, t, r));
} else e === n.length ? this.spliceWithArray_(e, 0, [ t ]) : V(17, e, n.length);
}, e;
}();
function kr(e, t, n, r) {
void 0 === n && (n = "ObservableArray"), void 0 === r && (r = !1);
var i, o = new wr(n, t, r);
i = o.values_, q(i, Oe, {
enumerable: !1,
writable: !1,
configurable: !0,
value: o
});
var a = new Proxy(o.values_, Lr);
if (o.proxy_ = a, e && e.length) {
var s = Lt(!0);
o.spliceWithArray_(0, 0, e), wt(s);
}
return a;
}
var Rr = {
clear: function() {
return this.splice(0);
},
replace: function(e) {
var t = this[Oe];
return t.spliceWithArray_(0, t.values_.length, e);
},
toJSON: function() {
return this.slice();
},
splice: function(e, t) {
for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), i = 2; i < n; i++) r[i - 2] = arguments[i];
var o = this[Oe];
switch (arguments.length) {
case 0:
return [];

case 1:
return o.spliceWithArray_(e);

case 2:
return o.spliceWithArray_(e, t);
}
return o.spliceWithArray_(e, t, r);
},
spliceWithArray: function(e, t, n) {
return this[Oe].spliceWithArray_(e, t, n);
},
push: function() {
for (var e = this[Oe], t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];
return e.spliceWithArray_(e.values_.length, 0, n), e.values_.length;
},
pop: function() {
return this.splice(Math.max(this[Oe].values_.length - 1, 0), 1)[0];
},
shift: function() {
return this.splice(0, 1)[0];
},
unshift: function() {
for (var e = this[Oe], t = arguments.length, n = new Array(t), r = 0; r < t; r++) n[r] = arguments[r];
return e.spliceWithArray_(0, 0, n), e.values_.length;
},
reverse: function() {
return tn.trackingDerivation && V(37, "reverse"), this.replace(this.slice().reverse()), 
this;
},
sort: function() {
tn.trackingDerivation && V(37, "sort");
var e = this.slice();
return e.sort.apply(e, arguments), this.replace(e), this;
},
remove: function(e) {
var t = this[Oe], n = t.dehanceValues_(t.values_).indexOf(e);
return n > -1 && (this.splice(n, 1), !0);
}
};
function xr(e, t) {
"function" == typeof Array.prototype[e] && (Rr[e] = t(e));
}
function Br(e) {
return function() {
var t = this[Oe];
t.atom_.reportObserved();
var n = t.dehanceValues_(t.values_);
return n[e].apply(n, arguments);
};
}
function Dr(e) {
return function(t, n) {
var r = this, i = this[Oe];
return i.atom_.reportObserved(), i.dehanceValues_(i.values_)[e]((function(e, i) {
return t.call(n, e, i, r);
}));
};
}
function Fr(e) {
return function() {
var t = this, n = this[Oe];
n.atom_.reportObserved();
var r = n.dehanceValues_(n.values_), i = arguments[0];
return arguments[0] = function(e, n, r) {
return i(e, n, r, t);
}, r[e].apply(r, arguments);
};
}
xr("concat", Br), xr("flat", Br), xr("includes", Br), xr("indexOf", Br), xr("join", Br), 
xr("lastIndexOf", Br), xr("slice", Br), xr("toString", Br), xr("toLocaleString", Br), 
xr("every", Dr), xr("filter", Dr), xr("find", Dr), xr("findIndex", Dr), xr("flatMap", Dr), 
xr("forEach", Dr), xr("map", Dr), xr("some", Dr), xr("reduce", Fr), xr("reduceRight", Fr);
var Mr = ae("ObservableArrayAdministration", wr);
function Ur(e) {
return ne(e) && Mr(e[Oe]);
}
var Hr = {}, Vr = "add", Jr = "delete", Gr = function(e, t) {
function n(e, t, n) {
var r = this;
void 0 === t && (t = we), void 0 === n && (n = "ObservableMap"), this.enhancer_ = void 0, 
this.name_ = void 0, this[Oe] = Hr, this.data_ = void 0, this.hasMap_ = void 0, 
this.keysAtom_ = void 0, this.interceptors_ = void 0, this.changeListeners_ = void 0, 
this.dehancer = void 0, this.enhancer_ = t, this.name_ = n, ee(Map) || V(18), this.keysAtom_ = Ae("ObservableMap.keys()"), 
this.data_ = new Map, this.hasMap_ = new Map, At(!0, (function() {
r.merge(e);
}));
}
var r = n.prototype;
return r.has_ = function(e) {
return this.data_.has(e);
}, r.has = function(e) {
var t = this;
if (!tn.trackingDerivation) return this.has_(e);
var n = this.hasMap_.get(e);
if (!n) {
var r = n = new xt(this.has_(e), ke, "ObservableMap.key?", !1);
this.hasMap_.set(e, r), Mn(r, (function() {
return t.hasMap_.delete(e);
}));
}
return n.get();
}, r.set = function(e, t) {
var n = this.has_(e);
if (br(this)) {
var r = vr(this, {
type: n ? Ar : Vr,
object: this,
newValue: t,
name: e
});
if (!r) return this;
t = r.newValue;
}
return n ? this.updateValue_(e, t) : this.addValue_(e, t), this;
}, r.delete = function(e) {
var t = this;
if ((this.keysAtom_, br(this)) && !vr(this, {
type: Jr,
object: this,
name: e
})) return !1;
if (this.has_(e)) {
var n = Tr(this), r = n ? {
observableKind: "map",
debugObjectName: this.name_,
type: Jr,
object: this,
oldValue: this.data_.get(e).value_,
name: e
} : null;
return fr((function() {
var n;
t.keysAtom_.reportChanged(), null == (n = t.hasMap_.get(e)) || n.setNewValue_(!1), 
t.data_.get(e).setNewValue_(void 0), t.data_.delete(e);
})), n && Pr(this, r), !0;
}
return !1;
}, r.updateValue_ = function(e, t) {
var n = this.data_.get(e);
if ((t = n.prepareNewValue_(t)) !== tn.UNCHANGED) {
var r = Tr(this), i = r ? {
observableKind: "map",
debugObjectName: this.name_,
type: Ar,
object: this,
oldValue: n.value_,
name: e,
newValue: t
} : null;
n.setNewValue_(t), r && Pr(this, i);
}
}, r.addValue_ = function(e, t) {
var n = this;
this.keysAtom_, fr((function() {
var r, i = new xt(t, n.enhancer_, "ObservableMap.key", !1);
n.data_.set(e, i), t = i.value_, null == (r = n.hasMap_.get(e)) || r.setNewValue_(!0), 
n.keysAtom_.reportChanged();
}));
var r = Tr(this), i = r ? {
observableKind: "map",
debugObjectName: this.name_,
type: Vr,
object: this,
name: e,
newValue: t
} : null;
r && Pr(this, i);
}, r.get = function(e) {
return this.has(e) ? this.dehanceValue_(this.data_.get(e).get()) : this.dehanceValue_(void 0);
}, r.dehanceValue_ = function(e) {
return void 0 !== this.dehancer ? this.dehancer(e) : e;
}, r.keys = function() {
return this.keysAtom_.reportObserved(), this.data_.keys();
}, r.values = function() {
var e = this, t = this.keys();
return di({
next: function() {
var n = t.next(), r = n.done, i = n.value;
return {
done: r,
value: r ? void 0 : e.get(i)
};
}
});
}, r.entries = function() {
var e = this, t = this.keys();
return di({
next: function() {
var n = t.next(), r = n.done, i = n.value;
return {
done: r,
value: r ? void 0 : [ i, e.get(i) ]
};
}
});
}, r[e] = function() {
return this.entries();
}, r.forEach = function(e, t) {
for (var n, r = Se(this); !(n = r()).done; ) {
var i = n.value, o = i[0], a = i[1];
e.call(t, a, o, this);
}
}, r.merge = function(e) {
var t = this;
return zr(e) && (e = new Map(e)), fr((function() {
re(e) ? de(e).forEach((function(n) {
return t.set(n, e[n]);
})) : Array.isArray(e) ? e.forEach((function(e) {
var n = e[0], r = e[1];
return t.set(n, r);
})) : se(e) ? (e.constructor !== Map && V(19, e), e.forEach((function(e, n) {
return t.set(n, e);
}))) : null != e && V(20, e);
})), this;
}, r.clear = function() {
var e = this;
fr((function() {
jt((function() {
for (var t, n = Se(e.keys()); !(t = n()).done; ) {
var r = t.value;
e.delete(r);
}
}));
}));
}, r.replace = function(e) {
var t = this;
return fr((function() {
for (var n, r = jr(e), i = new Map, o = !1, a = Se(t.data_.keys()); !(n = a()).done; ) {
var s = n.value;
if (!r.has(s)) if (t.delete(s)) o = !0; else {
var l = t.data_.get(s);
i.set(s, l);
}
}
for (var c, d = Se(r.entries()); !(c = d()).done; ) {
var u = c.value, p = u[0], f = u[1], h = t.data_.has(p);
if (t.set(p, f), t.data_.has(p)) {
var m = t.data_.get(p);
i.set(p, m), h || (o = !0);
}
}
if (!o) if (t.data_.size !== i.size) t.keysAtom_.reportChanged(); else for (var g = t.data_.keys(), y = i.keys(), I = g.next(), _ = y.next(); !I.done; ) {
if (I.value !== _.value) {
t.keysAtom_.reportChanged();
break;
}
I = g.next(), _ = y.next();
}
t.data_ = i;
})), this;
}, r.toString = function() {
return "[object ObservableMap]";
}, r.toJSON = function() {
return Array.from(this);
}, r.observe_ = function(e, t) {
return Er(this, e);
}, r.intercept_ = function(e) {
return Sr(this, e);
}, ge(n, [ {
key: "size",
get: function() {
return this.keysAtom_.reportObserved(), this.data_.size;
}
}, {
key: t,
get: function() {
return "Map";
}
} ]), n;
}(Symbol.iterator, Symbol.toStringTag), zr = ae("ObservableMap", Gr);
function jr(e) {
if (se(e) || zr(e)) return e;
if (Array.isArray(e)) return new Map(e);
if (re(e)) {
var t = new Map;
for (var n in e) t.set(n, e[n]);
return t;
}
return V(21, e);
}
var qr = {}, Yr = function(e, t) {
function n(e, t, n) {
void 0 === t && (t = we), void 0 === n && (n = "ObservableSet"), this.name_ = void 0, 
this[Oe] = qr, this.data_ = new Set, this.atom_ = void 0, this.changeListeners_ = void 0, 
this.interceptors_ = void 0, this.dehancer = void 0, this.enhancer_ = void 0, this.name_ = n, 
ee(Set) || V(22), this.atom_ = Ae(this.name_), this.enhancer_ = function(e, r) {
return t(e, r, n);
}, e && this.replace(e);
}
var r = n.prototype;
return r.dehanceValue_ = function(e) {
return void 0 !== this.dehancer ? this.dehancer(e) : e;
}, r.clear = function() {
var e = this;
fr((function() {
jt((function() {
for (var t, n = Se(e.data_.values()); !(t = n()).done; ) {
var r = t.value;
e.delete(r);
}
}));
}));
}, r.forEach = function(e, t) {
for (var n, r = Se(this); !(n = r()).done; ) {
var i = n.value;
e.call(t, i, i, this);
}
}, r.add = function(e) {
var t = this;
if ((this.atom_, br(this)) && !vr(this, {
type: Vr,
object: this,
newValue: e
})) return this;
if (!this.has(e)) {
fr((function() {
t.data_.add(t.enhancer_(e, void 0)), t.atom_.reportChanged();
}));
var n = Tr(this), r = n ? {
observableKind: "set",
debugObjectName: this.name_,
type: Vr,
object: this,
newValue: e
} : null;
n && Pr(this, r);
}
return this;
}, r.delete = function(e) {
var t = this;
if (br(this) && !vr(this, {
type: Jr,
object: this,
oldValue: e
})) return !1;
if (this.has(e)) {
var n = Tr(this), r = n ? {
observableKind: "set",
debugObjectName: this.name_,
type: Jr,
object: this,
oldValue: e
} : null;
return fr((function() {
t.atom_.reportChanged(), t.data_.delete(e);
})), n && Pr(this, r), !0;
}
return !1;
}, r.has = function(e) {
return this.atom_.reportObserved(), this.data_.has(this.dehanceValue_(e));
}, r.entries = function() {
var e = 0, t = Array.from(this.keys()), n = Array.from(this.values());
return di({
next: function() {
var r = e;
return e += 1, r < n.length ? {
value: [ t[r], n[r] ],
done: !1
} : {
done: !0
};
}
});
}, r.keys = function() {
return this.values();
}, r.values = function() {
this.atom_.reportObserved();
var e = this, t = 0, n = Array.from(this.data_.values());
return di({
next: function() {
return t < n.length ? {
value: e.dehanceValue_(n[t++]),
done: !1
} : {
done: !0
};
}
});
}, r.replace = function(e) {
var t = this;
return Wr(e) && (e = new Set(e)), fr((function() {
Array.isArray(e) || le(e) ? (t.clear(), e.forEach((function(e) {
return t.add(e);
}))) : null != e && V("Cannot initialize set from " + e);
})), this;
}, r.observe_ = function(e, t) {
return Er(this, e);
}, r.intercept_ = function(e) {
return Sr(this, e);
}, r.toJSON = function() {
return Array.from(this);
}, r.toString = function() {
return "[object ObservableSet]";
}, r[e] = function() {
return this.values();
}, ge(n, [ {
key: "size",
get: function() {
return this.atom_.reportObserved(), this.data_.size;
}
}, {
key: t,
get: function() {
return "Set";
}
} ]), n;
}(Symbol.iterator, Symbol.toStringTag), Wr = ae("ObservableSet", Yr), Kr = Object.create(null), Xr = "remove", Qr = function() {
function e(e, t, n, r) {
void 0 === t && (t = new Map), void 0 === r && (r = $e), this.target_ = void 0, 
this.values_ = void 0, this.name_ = void 0, this.defaultAnnotation_ = void 0, this.keysAtom_ = void 0, 
this.changeListeners_ = void 0, this.interceptors_ = void 0, this.proxy_ = void 0, 
this.isPlainObject_ = void 0, this.appliedAnnotations_ = void 0, this.pendingKeys_ = void 0, 
this.target_ = e, this.values_ = t, this.name_ = n, this.defaultAnnotation_ = r, 
this.keysAtom_ = new Ce("ObservableObject.keys"), this.isPlainObject_ = re(this.target_);
}
var t = e.prototype;
return t.getObservablePropValue_ = function(e) {
return this.values_.get(e).get();
}, t.setObservablePropValue_ = function(e, t) {
var n = this.values_.get(e);
if (n instanceof Dt) return n.set(t), !0;
if (br(this)) {
var r = vr(this, {
type: Ar,
object: this.proxy_ || this.target_,
name: e,
newValue: t
});
if (!r) return null;
t = r.newValue;
}
if ((t = n.prepareNewValue_(t)) !== tn.UNCHANGED) {
var i = Tr(this), o = i ? {
type: Ar,
observableKind: "object",
debugObjectName: this.name_,
object: this.proxy_ || this.target_,
oldValue: n.value_,
name: e,
newValue: t
} : null;
n.setNewValue_(t), i && Pr(this, o);
}
return !0;
}, t.get_ = function(e) {
return tn.trackingDerivation && !fe(this.target_, e) && this.has_(e), this.target_[e];
}, t.set_ = function(e, t, n) {
return void 0 === n && (n = !1), fe(this.target_, e) ? this.values_.has(e) ? this.setObservablePropValue_(e, t) : n ? Reflect.set(this.target_, e, t) : (this.target_[e] = t, 
!0) : this.extend_(e, {
value: t,
enumerable: !0,
writable: !0,
configurable: !0
}, this.defaultAnnotation_, n);
}, t.has_ = function(e) {
if (!tn.trackingDerivation) return e in this.target_;
this.pendingKeys_ || (this.pendingKeys_ = new Map);
var t = this.pendingKeys_.get(e);
return t || (t = new xt(e in this.target_, ke, "ObservableObject.key?", !1), this.pendingKeys_.set(e, t)), 
t.get();
}, t.make_ = function(e, t) {
if (!0 === t && (t = this.defaultAnnotation_), !1 !== t) {
if (!(e in this.target_)) {
var n;
if (null != (n = this.target_[ve]) && n[e]) return;
V(1, t.annotationType_, this.name_ + "." + e.toString());
}
for (var r = this.target_; r && r !== Y; ) {
var i = j(r, e);
if (i) {
var o = t.make_(this, e, i, r);
if (0 === o) return;
if (1 === o) break;
}
r = Object.getPrototypeOf(r);
}
ni(this, t, e);
}
}, t.extend_ = function(e, t, n, r) {
if (void 0 === r && (r = !1), !0 === n && (n = this.defaultAnnotation_), !1 === n) return this.defineProperty_(e, t, r);
var i = n.extend_(this, e, t, r);
return i && ni(this, n, e), i;
}, t.defineProperty_ = function(e, t, n) {
void 0 === n && (n = !1);
try {
cn();
var r = this.delete_(e);
if (!r) return r;
if (br(this)) {
var i = vr(this, {
object: this.proxy_ || this.target_,
name: e,
type: Vr,
newValue: t.value
});
if (!i) return null;
var o = i.newValue;
t.value !== o && (t = ye({}, t, {
value: o
}));
}
if (n) {
if (!Reflect.defineProperty(this.target_, e, t)) return !1;
} else q(this.target_, e, t);
this.notifyPropertyAddition_(e, t.value);
} finally {
dn();
}
return !0;
}, t.defineObservableProperty_ = function(e, t, n, r) {
void 0 === r && (r = !1);
try {
cn();
var i = this.delete_(e);
if (!i) return i;
if (br(this)) {
var o = vr(this, {
object: this.proxy_ || this.target_,
name: e,
type: Vr,
newValue: t
});
if (!o) return null;
t = o.newValue;
}
var a = ei(e), s = {
configurable: !tn.safeDescriptors || this.isPlainObject_,
enumerable: !0,
get: a.get,
set: a.set
};
if (r) {
if (!Reflect.defineProperty(this.target_, e, s)) return !1;
} else q(this.target_, e, s);
var l = new xt(t, n, "ObservableObject.key", !1);
this.values_.set(e, l), this.notifyPropertyAddition_(e, l.value_);
} finally {
dn();
}
return !0;
}, t.defineComputedProperty_ = function(e, t, n) {
void 0 === n && (n = !1);
try {
cn();
var r = this.delete_(e);
if (!r) return r;
if (br(this)) if (!vr(this, {
object: this.proxy_ || this.target_,
name: e,
type: Vr,
newValue: void 0
})) return null;
t.name || (t.name = "ObservableObject.key"), t.context = this.proxy_ || this.target_;
var i = ei(e), o = {
configurable: !tn.safeDescriptors || this.isPlainObject_,
enumerable: !1,
get: i.get,
set: i.set
};
if (n) {
if (!Reflect.defineProperty(this.target_, e, o)) return !1;
} else q(this.target_, e, o);
this.values_.set(e, new Dt(t)), this.notifyPropertyAddition_(e, void 0);
} finally {
dn();
}
return !0;
}, t.delete_ = function(e, t) {
if (void 0 === t && (t = !1), !fe(this.target_, e)) return !0;
if (br(this) && !vr(this, {
object: this.proxy_ || this.target_,
name: e,
type: Xr
})) return null;
try {
var n, r;
cn();
var i, o = Tr(this), a = this.values_.get(e), s = void 0;
if (!a && o) s = null == (i = j(this.target_, e)) ? void 0 : i.value;
if (t) {
if (!Reflect.deleteProperty(this.target_, e)) return !1;
} else delete this.target_[e];
if (a && (this.values_.delete(e), a instanceof xt && (s = a.value_), pn(a)), this.keysAtom_.reportChanged(), 
null == (n = this.pendingKeys_) || null == (r = n.get(e)) || r.set(e in this.target_), 
o) {
var l = {
type: Xr,
observableKind: "object",
object: this.proxy_ || this.target_,
debugObjectName: this.name_,
oldValue: s,
name: e
};
0, o && Pr(this, l);
}
} finally {
dn();
}
return !0;
}, t.observe_ = function(e, t) {
return Er(this, e);
}, t.intercept_ = function(e) {
return Sr(this, e);
}, t.notifyPropertyAddition_ = function(e, t) {
var n, r, i = Tr(this);
if (i) {
var o = i ? {
type: Vr,
observableKind: "object",
debugObjectName: this.name_,
object: this.proxy_ || this.target_,
name: e,
newValue: t
} : null;
i && Pr(this, o);
}
null == (n = this.pendingKeys_) || null == (r = n.get(e)) || r.set(!0), this.keysAtom_.reportChanged();
}, t.ownKeys_ = function() {
return this.keysAtom_.reportObserved(), ue(this.target_);
}, t.keys_ = function() {
return this.keysAtom_.reportObserved(), Object.keys(this.target_);
}, e;
}();
function $r(e, t) {
var n;
if (fe(e, Oe)) return e;
var r = null != (n = null == t ? void 0 : t.name) ? n : "ObservableObject", i = new Qr(e, new Map, String(r), dt(t));
return oe(e, Oe, i), e;
}
var Zr = ae("ObservableObjectAdministration", Qr);
function ei(e) {
return Kr[e] || (Kr[e] = {
get: function() {
return this[Oe].getObservablePropValue_(e);
},
set: function(t) {
return this[Oe].setObservablePropValue_(e, t);
}
});
}
function ti(e) {
return !!ne(e) && Zr(e[Oe]);
}
function ni(e, t, n) {
var r;
null == (r = e.target_[ve]) || delete r[n];
}
function ri(e, t) {
if ("object" == typeof e && null !== e) {
if (Ur(e)) return void 0 !== t && V(23), e[Oe].atom_;
if (Wr(e)) return e[Oe];
if (zr(e)) {
if (void 0 === t) return e.keysAtom_;
var n = e.data_.get(t) || e.hasMap_.get(t);
return n || V(25, t, oi(e)), n;
}
if (ti(e)) {
if (!t) return V(26);
var r = e[Oe].values_.get(t);
return r || V(27, t, oi(e)), r;
}
if (Ne(e) || Ft(e) || _n(e)) return e;
} else if (ee(e) && _n(e[Oe])) return e[Oe];
V(28);
}
function ii(e, t) {
return e || V(29), void 0 !== t ? ii(ri(e, t)) : Ne(e) || Ft(e) || _n(e) || zr(e) || Wr(e) ? e : e[Oe] ? e[Oe] : void V(24, e);
}
function oi(e, t) {
var n;
if (void 0 !== t) n = ri(e, t); else {
if (kn(e)) return e.name;
n = ti(e) || zr(e) || Wr(e) ? ii(e) : ri(e);
}
return n.name_;
}
var ai = Y.toString;
function si(e, t, n) {
return void 0 === n && (n = -1), li(e, t, n);
}
function li(e, t, n, r, i) {
if (e === t) return 0 !== e || 1 / e == 1 / t;
if (null == e || null == t) return !1;
if (e != e) return t != t;
var o = typeof e;
if ("function" !== o && "object" !== o && "object" != typeof t) return !1;
var a = ai.call(e);
if (a !== ai.call(t)) return !1;
switch (a) {
case "[object RegExp]":
case "[object String]":
return "" + e == "" + t;

case "[object Number]":
return +e != +e ? +t != +t : 0 == +e ? 1 / +e == 1 / t : +e == +t;

case "[object Date]":
case "[object Boolean]":
return +e == +t;

case "[object Symbol]":
return "undefined" != typeof Symbol && Symbol.valueOf.call(e) === Symbol.valueOf.call(t);

case "[object Map]":
case "[object Set]":
n >= 0 && n++;
}
e = ci(e), t = ci(t);
var s = "[object Array]" === a;
if (!s) {
if ("object" != typeof e || "object" != typeof t) return !1;
var l = e.constructor, c = t.constructor;
if (l !== c && !(ee(l) && l instanceof l && ee(c) && c instanceof c) && "constructor" in e && "constructor" in t) return !1;
}
if (0 === n) return !1;
n < 0 && (n = -1), i = i || [];
for (var d = (r = r || []).length; d--; ) if (r[d] === e) return i[d] === t;
if (r.push(e), i.push(t), s) {
if ((d = e.length) !== t.length) return !1;
for (;d--; ) if (!li(e[d], t[d], n - 1, r, i)) return !1;
} else {
var u, p = Object.keys(e);
if (d = p.length, Object.keys(t).length !== d) return !1;
for (;d--; ) if (!fe(t, u = p[d]) || !li(e[u], t[u], n - 1, r, i)) return !1;
}
return r.pop(), i.pop(), !0;
}
function ci(e) {
return Ur(e) ? e.slice() : se(e) || zr(e) || le(e) || Wr(e) ? Array.from(e.entries()) : e;
}
function di(e) {
return e[Symbol.iterator] = ui, e;
}
function ui() {
return this;
}
[ "Symbol", "Map", "Set" ].forEach((function(e) {
void 0 === G()[e] && V("MobX requires global '" + e + "' to be available or polyfilled");
})), "object" == typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__ && __MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({
spy: bn,
extras: {
getDebugName: oi
},
$mobx: Oe
});
var pi = Object.freeze({
__proto__: null,
$mobx: Oe,
FlowCancellationError: jn,
ObservableMap: Gr,
ObservableSet: Yr,
Reaction: mn,
_allowStateChanges: At,
_allowStateChangesInsideComputed: wn,
_allowStateReadsEnd: Kt,
_allowStateReadsStart: Wt,
_autoAction: Ln,
_endAction: Nt,
_getAdministration: ii,
_getGlobalState: function() {
return tn;
},
_interceptReads: function(e, t, n) {
var r;
return zr(e) || Ur(e) || Bt(e) ? r = ii(e) : ti(e) && (r = ii(e, t)), r.dehancer = "function" == typeof t ? t : n, 
function() {
r.dehancer = void 0;
};
},
_isComputingDerivation: Vt,
_resetGlobalState: function() {
var e = new $t;
for (var t in e) -1 === Qt.indexOf(t) && (tn[t] = e[t]);
tn.allowStateChanges = !tn.enforceActions;
},
_startAction: Ct,
action: An,
autorun: Rn,
comparer: Le,
computed: _t,
configure: function(e) {
!0 === e.isolateGlobalState && nn();
var t, n, r = e.enforceActions;
if (void 0 !== r) {
var i = r === Hn ? Hn : "observed" === r;
tn.enforceActions = i, tn.allowStateChanges = !0 !== i && i !== Hn;
}
[ "computedRequiresReaction", "reactionRequiresObservable", "observableRequiresReaction", "disableErrorBoundaries", "safeDescriptors" ].forEach((function(t) {
t in e && (tn[t] = !!e[t]);
})), tn.allowStateReads = !tn.observableRequiresReaction, e.reactionScheduler && (t = e.reactionScheduler, 
n = gn, gn = function(e) {
return t((function() {
return n(e);
}));
});
},
createAtom: Ae,
defineProperty: function(e, t, n) {
if (ti(e)) return e[Oe].defineProperty_(t, n);
V(39);
},
entries: function(e) {
return ti(e) ? nr(e).map((function(t) {
return [ t, e[t] ];
})) : zr(e) ? nr(e).map((function(t) {
return [ t, e.get(t) ];
})) : Wr(e) ? Array.from(e.entries()) : Ur(e) ? e.map((function(e, t) {
return [ t, e ];
})) : void V(7);
},
extendObservable: Vn,
flow: Wn,
flowResult: function(e) {
return e;
},
get: function(e, t) {
if (rr(e, t)) return ti(e) ? e[Oe].get_(t) : zr(e) ? e.get(t) : Ur(e) ? e[t] : void V(11);
},
getAtom: ri,
getDebugName: oi,
getDependencyTree: function(e, t) {
return Jn(ri(e, t));
},
getObserverTree: function(e, t) {
return Gn(ri(e, t));
},
has: rr,
intercept: function(e, t, n) {
return ee(n) ? $n(e, t, n) : Qn(e, t);
},
isAction: kn,
isBoxedObservable: Bt,
isComputed: function(e) {
return Zn(e);
},
isComputedProp: function(e, t) {
return Zn(e, t);
},
isFlow: Xn,
isFlowCancellationError: function(e) {
return e instanceof jn;
},
isObservable: tr,
isObservableArray: Ur,
isObservableMap: zr,
isObservableObject: ti,
isObservableProp: function(e, t) {
return er(e, t);
},
isObservableSet: Wr,
keys: nr,
makeAutoObservable: function(e, t, n) {
if (re(e)) return Vn(e, e, t, n);
var r = $r(e, n)[Oe];
if (!e[Cr]) {
var i = Object.getPrototypeOf(e), o = new Set([].concat(ue(e), ue(i)));
o.delete("constructor"), o.delete(Oe), oe(i, Cr, o);
}
cn();
try {
e[Cr].forEach((function(e) {
return r.make_(e, !t || (!(e in t) || t[e]));
}));
} finally {
dn();
}
return e;
},
makeObservable: Or,
observable: mt,
observe: or,
onBecomeObserved: Fn,
onBecomeUnobserved: Mn,
onReactionError: function(e) {
return tn.globalReactionErrorHandlers.push(e), function() {
var t = tn.globalReactionErrorHandlers.indexOf(e);
t >= 0 && tn.globalReactionErrorHandlers.splice(t, 1);
};
},
override: xe,
ownKeys: ir,
reaction: Dn,
remove: function(e, t) {
ti(e) ? e[Oe].delete_(t) : zr(e) || Wr(e) ? e.delete(t) : Ur(e) ? ("number" != typeof t && (t = parseInt(t, 10)), 
e.splice(t, 1)) : V(9);
},
runInAction: wn,
set: function e(t, n, r) {
if (2 !== arguments.length || Wr(t)) ti(t) ? t[Oe].set_(n, r) : zr(t) ? t.set(n, r) : Wr(t) ? t.add(n) : Ur(t) ? ("number" != typeof n && (n = parseInt(n, 10)), 
n < 0 && V("Invalid index: '" + n + "'"), cn(), n >= t.length && (t.length = n + 1), 
t[n] = r, dn()) : V(8); else {
cn();
var i = n;
try {
for (var o in i) e(t, o, i[o]);
} finally {
dn();
}
}
},
spy: bn,
toJS: dr,
trace: ur,
transaction: fr,
untracked: jt,
values: function(e) {
return ti(e) ? nr(e).map((function(t) {
return e[t];
})) : zr(e) ? nr(e).map((function(t) {
return e.get(t);
})) : Wr(e) ? Array.from(e.values()) : Ur(e) ? e.slice() : void V(6);
},
when: hr
}), fi = t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.isUsingStaticRendering = t.enableStaticRendering = void 0;
var n = !1;
t.enableStaticRendering = function(e) {
n = e;
}, t.isUsingStaticRendering = function() {
return n;
};
})), hi = (t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.printDebugValue = void 0, t.printDebugValue = function(e) {
return (0, pi.getDependencyTree)(e);
};
})), t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.CLEANUP_TIMER_LOOP_MILLIS = t.CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS = t.createTrackingData = void 0, 
t.createTrackingData = function(e) {
return {
reaction: e,
mounted: !1,
changedBeforeMount: !1,
cleanAt: Date.now() + t.CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS
};
}, t.CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS = 1e4, t.CLEANUP_TIMER_LOOP_MILLIS = 1e4;
}))), mi = t((function(t, n) {
var r = e && e.__values || function(e) {
var t = "function" == typeof Symbol && Symbol.iterator, n = t && e[t], r = 0;
if (n) return n.call(e);
if (e && "number" == typeof e.length) return {
next: function() {
return e && r >= e.length && (e = void 0), {
value: e && e[r++],
done: !e
};
}
};
throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.");
};
Object.defineProperty(n, "__esModule", {
value: !0
}), n.createTimerBasedReactionCleanupTracking = void 0, n.createTimerBasedReactionCleanupTracking = function() {
var e, t = new Set;
function n() {
void 0 === e && (e = setTimeout(i, hi.CLEANUP_TIMER_LOOP_MILLIS));
}
function i() {
e = void 0;
var r = Date.now();
t.forEach((function(e) {
var n = e.current;
n && r >= n.cleanAt && (n.reaction.dispose(), e.current = null, t.delete(e));
})), t.size > 0 && n();
}
return {
addReactionToTrack: function(e, r, i) {
var o;
return e.current = (0, hi.createTrackingData)(r), o = e, t.add(o), n(), e.current;
},
recordReactionAsCommitted: function(e) {
t.delete(e);
},
forceCleanupTimerToRunNowForTests: function() {
e && (clearTimeout(e), i());
},
resetCleanupScheduleForTests: function() {
var n, i;
if (t.size > 0) {
try {
for (var o = r(t), a = o.next(); !a.done; a = o.next()) {
var s = a.value, l = s.current;
l && (l.reaction.dispose(), s.current = null);
}
} catch (e) {
n = {
error: e
};
} finally {
try {
a && !a.done && (i = o.return) && i.call(o);
} finally {
if (n) throw n.error;
}
}
t.clear();
}
e && (clearTimeout(e), e = void 0);
}
};
};
})), gi = t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.forceCleanupTimerToRunNowForTests = t.resetCleanupScheduleForTests = t.recordReactionAsCommitted = t.addReactionToTrack = void 0;
var n = (0, mi.createTimerBasedReactionCleanupTracking)(), r = n.addReactionToTrack, i = n.recordReactionAsCommitted, o = n.resetCleanupScheduleForTests, a = n.forceCleanupTimerToRunNowForTests;
t.addReactionToTrack = r, t.recordReactionAsCommitted = i, t.resetCleanupScheduleForTests = o, 
t.forceCleanupTimerToRunNowForTests = a;
})), yi = t((function(t, n) {
var r = e && e.__importDefault || function(e) {
return e && e.__esModule ? e : {
default: e
};
};
Object.defineProperty(n, "__esModule", {
value: !0
}), n.useObserver = void 0;
var i = r(H);
function o(e) {
return "observer".concat(e);
}
n.useObserver = function(e, t) {
void 0 === t && (t = "observed");
var n = i.default.useState()[1], r = function() {
return n([]);
}, a = i.default.useRef(null);
if (!a.current) var s = new pi.Reaction(o(t), (function() {
l.mounted ? r() : l.changedBeforeMount = !0;
})), l = (0, gi.addReactionToTrack)(a, s);
var c, d, u = a.current.reaction;
if (i.default.useEffect((function() {
return (0, gi.recordReactionAsCommitted)(a), a.current ? (a.current.mounted = !0, 
a.current.changedBeforeMount && (a.current.changedBeforeMount = !1, r())) : (a.current = {
reaction: new pi.Reaction(o(t), (function() {
r();
})),
mounted: !0,
changedBeforeMount: !1,
cleanAt: 1 / 0
}, r()), function() {
a.current.reaction.dispose(), a.current = null;
};
}), []), u.track((function() {
try {
c = e();
} catch (e) {
d = e;
}
})), d) throw d;
return c;
};
})), Ii = t((function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.observer = void 0;
var n = "function" == typeof Symbol && Symbol.for, r = n ? Symbol.for("react.forward_ref") : "function" == typeof H.forwardRef && (0, 
H.forwardRef)((function(e) {
return null;
})).$$typeof, i = n ? Symbol.for("react.memo") : "function" == typeof H.memo && (0, 
H.memo)((function(e) {
return null;
})).$$typeof;
t.observer = function(e, t) {
var n;
if (i && e.$$typeof === i) throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");
if ((0, fi.isUsingStaticRendering)()) return e;
var a = null !== (n = null == t ? void 0 : t.forwardRef) && void 0 !== n && n, s = e, l = e.displayName || e.name;
if (r && e.$$typeof === r && (a = !0, "function" != typeof (s = e.render))) throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");
var c, d, u = function(e, t) {
return (0, yi.useObserver)((function() {
return s(e, t);
}), l);
};
return "" !== l && (u.displayName = l), e.contextTypes && (u.contextTypes = e.contextTypes), 
a && (u = (0, H.forwardRef)(u)), u = (0, H.memo)(u), c = e, d = u, Object.keys(c).forEach((function(e) {
o[e] || Object.defineProperty(d, e, Object.getOwnPropertyDescriptor(c, e));
})), u;
};
var o = {
$$typeof: !0,
render: !0,
compare: !0,
type: !0,
displayName: !0
};
}));
function _i(e, t) {
return _i = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
return e.__proto__ = t, e;
}, _i(e, t);
}
function bi(e, t) {
e.prototype = Object.create(t.prototype), e.prototype.constructor = e, _i(e, t);
}
/**
	 * @license React
	 * react-is.production.min.js
	 *
	 * Copyright (c) Facebook, Inc. and its affiliates.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */ var Si, vi = Symbol.for("react.element"), Ti = Symbol.for("react.portal"), Ei = Symbol.for("react.fragment"), Pi = Symbol.for("react.strict_mode"), Oi = Symbol.for("react.profiler"), Ci = Symbol.for("react.provider"), Ni = Symbol.for("react.context"), Ai = Symbol.for("react.server_context"), Li = Symbol.for("react.forward_ref"), wi = Symbol.for("react.suspense"), ki = Symbol.for("react.suspense_list"), Ri = Symbol.for("react.memo"), xi = Symbol.for("react.lazy"), Bi = Symbol.for("react.offscreen");
function Di(e) {
if ("object" == typeof e && null !== e) {
var t = e.$$typeof;
switch (t) {
case vi:
switch (e = e.type) {
case Ei:
case Oi:
case Pi:
case wi:
case ki:
return e;

default:
switch (e = e && e.$$typeof) {
case Ai:
case Ni:
case Li:
case xi:
case Ri:
case Ci:
return e;

default:
return t;
}
}

case Ti:
return t;
}
}
}
Si = Symbol.for("react.module.reference");
var Fi = {
ContextConsumer: Ni,
ContextProvider: Ci,
Element: vi,
ForwardRef: Li,
Fragment: Ei,
Lazy: xi,
Memo: Ri,
Portal: Ti,
Profiler: Oi,
StrictMode: Pi,
Suspense: wi,
SuspenseList: ki,
isAsyncMode: function() {
return !1;
},
isConcurrentMode: function() {
return !1;
},
isContextConsumer: function(e) {
return Di(e) === Ni;
},
isContextProvider: function(e) {
return Di(e) === Ci;
},
isElement: function(e) {
return "object" == typeof e && null !== e && e.$$typeof === vi;
},
isForwardRef: function(e) {
return Di(e) === Li;
},
isFragment: function(e) {
return Di(e) === Ei;
},
isLazy: function(e) {
return Di(e) === xi;
},
isMemo: function(e) {
return Di(e) === Ri;
},
isPortal: function(e) {
return Di(e) === Ti;
},
isProfiler: function(e) {
return Di(e) === Oi;
},
isStrictMode: function(e) {
return Di(e) === Pi;
},
isSuspense: function(e) {
return Di(e) === wi;
},
isSuspenseList: function(e) {
return Di(e) === ki;
},
isValidElementType: function(e) {
return "string" == typeof e || "function" == typeof e || e === Ei || e === Oi || e === Pi || e === wi || e === ki || e === Bi || "object" == typeof e && null !== e && (e.$$typeof === xi || e.$$typeof === Ri || e.$$typeof === Ci || e.$$typeof === Ni || e.$$typeof === Li || e.$$typeof === Si || void 0 !== e.getModuleId);
},
typeOf: Di
}, Mi = (t((function(e, t) {})), t((function(e) {
e.exports = Fi;
}))), Ui = Object.getOwnPropertySymbols, Hi = Object.prototype.hasOwnProperty, Vi = Object.prototype.propertyIsEnumerable;
function Ji(e) {
if (null == e) throw new TypeError("Object.assign cannot be called with null or undefined");
return Object(e);
}
(function() {
try {
if (!Object.assign) return !1;
var e = new String("abc");
if (e[5] = "de", "5" === Object.getOwnPropertyNames(e)[0]) return !1;
for (var t = {}, n = 0; n < 10; n++) t["_" + String.fromCharCode(n)] = n;
var r = Object.getOwnPropertyNames(t).map((function(e) {
return t[e];
}));
if ("0123456789" !== r.join("")) return !1;
var i = {};
return "abcdefghijklmnopqrst".split("").forEach((function(e) {
i[e] = e;
})), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, i)).join("");
} catch (e) {
return !1;
}
})() && Object.assign, Function.call.bind(Object.prototype.hasOwnProperty);
function Gi() {}
function zi() {}
zi.resetWarningCache = Gi;
var ji = function() {
function e(e, t, n, r, i, o) {
if ("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED" !== o) {
var a = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");
throw a.name = "Invariant Violation", a;
}
}
function t() {
return e;
}
e.isRequired = e;
var n = {
array: e,
bool: e,
func: e,
number: e,
object: e,
string: e,
symbol: e,
any: e,
arrayOf: t,
element: e,
elementType: e,
instanceOf: t,
node: e,
objectOf: t,
oneOf: t,
oneOfType: t,
shape: t,
exact: t,
checkPropTypes: zi,
resetWarningCache: Gi
};
return n.PropTypes = n, n;
};
t((function(e) {
e.exports = ji();
}));
function qi() {
return qi = Object.assign ? Object.assign.bind() : function(e) {
for (var t = 1; t < arguments.length; t++) {
var n = arguments[t];
for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
}
return e;
}, qi.apply(this, arguments);
}
function Yi(e) {
return "/" === e.charAt(0);
}
function Wi(e, t) {
for (var n = t, r = n + 1, i = e.length; r < i; n += 1, r += 1) e[n] = e[r];
e.pop();
}
function Ki(e, t) {
void 0 === t && (t = "");
var n, r = e && e.split("/") || [], i = t && t.split("/") || [], o = e && Yi(e), a = t && Yi(t), s = o || a;
if (e && Yi(e) ? i = r : r.length && (i.pop(), i = i.concat(r)), !i.length) return "/";
if (i.length) {
var l = i[i.length - 1];
n = "." === l || ".." === l || "" === l;
} else n = !1;
for (var c = 0, d = i.length; d >= 0; d--) {
var u = i[d];
"." === u ? Wi(i, d) : ".." === u ? (Wi(i, d), c++) : c && (Wi(i, d), c--);
}
if (!s) for (;c--; c) i.unshift("..");
!s || "" === i[0] || i[0] && Yi(i[0]) || i.unshift("");
var p = i.join("/");
return n && "/" !== p.substr(-1) && (p += "/"), p;
}
function Xi(e, t) {
if (!e) throw new Error("Invariant failed");
}
function Qi(e) {
var t = e || "/", n = "", r = "", i = t.indexOf("#");
-1 !== i && (r = t.substr(i), t = t.substr(0, i));
var o = t.indexOf("?");
return -1 !== o && (n = t.substr(o), t = t.substr(0, o)), {
pathname: t,
search: "?" === n ? "" : n,
hash: "#" === r ? "" : r
};
}
function $i(e) {
var t = e.pathname, n = e.search, r = e.hash, i = t || "/";
return n && "?" !== n && (i += "?" === n.charAt(0) ? n : "?" + n), r && "#" !== r && (i += "#" === r.charAt(0) ? r : "#" + r), 
i;
}
function Zi(e, t, n, r) {
var i;
"string" == typeof e ? (i = Qi(e)).state = t : (void 0 === (i = qi({}, e)).pathname && (i.pathname = ""), 
i.search ? "?" !== i.search.charAt(0) && (i.search = "?" + i.search) : i.search = "", 
i.hash ? "#" !== i.hash.charAt(0) && (i.hash = "#" + i.hash) : i.hash = "", void 0 !== t && void 0 === i.state && (i.state = t));
try {
i.pathname = decodeURI(i.pathname);
} catch (e) {
throw e instanceof URIError ? new URIError('Pathname "' + i.pathname + '" could not be decoded. This is likely caused by an invalid percent-encoding.') : e;
}
return n && (i.key = n), r ? i.pathname ? "/" !== i.pathname.charAt(0) && (i.pathname = Ki(i.pathname, r.pathname)) : i.pathname = r.pathname : i.pathname || (i.pathname = "/"), 
i;
}
function eo(e, t, n) {
return Math.min(Math.max(e, t), n);
}
function to(e) {
void 0 === e && (e = {});
var t, n, r = e, i = r.getUserConfirmation, o = r.initialEntries, a = void 0 === o ? [ "/" ] : o, s = r.initialIndex, l = void 0 === s ? 0 : s, c = r.keyLength, d = void 0 === c ? 6 : c, u = (t = null, 
n = [], {
setPrompt: function(e) {
return t = e, function() {
t === e && (t = null);
};
},
confirmTransitionTo: function(e, n, r, i) {
if (null != t) {
var o = "function" == typeof t ? t(e, n) : t;
"string" == typeof o ? "function" == typeof r ? r(o, i) : i(!0) : i(!1 !== o);
} else i(!0);
},
appendListener: function(e) {
var t = !0;
function r() {
t && e.apply(void 0, arguments);
}
return n.push(r), function() {
t = !1, n = n.filter((function(e) {
return e !== r;
}));
};
},
notifyListeners: function() {
for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++) t[r] = arguments[r];
n.forEach((function(e) {
return e.apply(void 0, t);
}));
}
});
function p(e) {
qi(I, e), I.length = I.entries.length, u.notifyListeners(I.location, I.action);
}
function f() {
return Math.random().toString(36).substr(2, d);
}
var h = eo(l, 0, a.length - 1), m = a.map((function(e) {
return Zi(e, void 0, "string" == typeof e ? f() : e.key || f());
})), g = $i;
function y(e) {
var t = eo(I.index + e, 0, I.entries.length - 1), n = I.entries[t];
u.confirmTransitionTo(n, "POP", i, (function(e) {
e ? p({
action: "POP",
location: n,
index: t
}) : p();
}));
}
var I = {
length: m.length,
action: "POP",
location: m[h],
index: h,
entries: m,
createHref: g,
push: function(e, t) {
var n = "PUSH", r = Zi(e, t, f(), I.location);
u.confirmTransitionTo(r, n, i, (function(e) {
if (e) {
var t = I.index + 1, i = I.entries.slice(0);
i.length > t ? i.splice(t, i.length - t, r) : i.push(r), p({
action: n,
location: r,
index: t,
entries: i
});
}
}));
},
replace: function(e, t) {
var n = "REPLACE", r = Zi(e, t, f(), I.location);
u.confirmTransitionTo(r, n, i, (function(e) {
e && (I.entries[I.index] = r, p({
action: n,
location: r
}));
}));
},
go: y,
goBack: function() {
y(-1);
},
goForward: function() {
y(1);
},
canGo: function(e) {
var t = I.index + e;
return t >= 0 && t < I.entries.length;
},
block: function(e) {
return void 0 === e && (e = !1), u.setPrompt(e);
},
listen: function(e) {
return u.appendListener(e);
}
};
return I;
}
var no = Array.isArray || function(e) {
return "[object Array]" == Object.prototype.toString.call(e);
}, ro = So, io = co, oo = function(e, t) {
return po(co(e, t), t);
}, ao = po, so = bo, lo = new RegExp([ "(\\\\.)", "([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))" ].join("|"), "g");
function co(e, t) {
for (var n, r = [], i = 0, o = 0, a = "", s = t && t.delimiter || "/"; null != (n = lo.exec(e)); ) {
var l = n[0], c = n[1], d = n.index;
if (a += e.slice(o, d), o = d + l.length, c) a += c[1]; else {
var u = e[o], p = n[2], f = n[3], h = n[4], m = n[5], g = n[6], y = n[7];
a && (r.push(a), a = "");
var I = null != p && null != u && u !== p, _ = "+" === g || "*" === g, b = "?" === g || "*" === g, S = n[2] || s, v = h || m;
r.push({
name: f || i++,
prefix: p || "",
delimiter: S,
optional: b,
repeat: _,
partial: I,
asterisk: !!y,
pattern: v ? ho(v) : y ? ".*" : "[^" + fo(S) + "]+?"
});
}
}
return o < e.length && (a += e.substr(o)), a && r.push(a), r;
}
function uo(e) {
return encodeURI(e).replace(/[\/?#]/g, (function(e) {
return "%" + e.charCodeAt(0).toString(16).toUpperCase();
}));
}
function po(e, t) {
for (var n = new Array(e.length), r = 0; r < e.length; r++) "object" == typeof e[r] && (n[r] = new RegExp("^(?:" + e[r].pattern + ")$", go(t)));
return function(t, r) {
for (var i = "", o = t || {}, a = (r || {}).pretty ? uo : encodeURIComponent, s = 0; s < e.length; s++) {
var l = e[s];
if ("string" != typeof l) {
var c, d = o[l.name];
if (null == d) {
if (l.optional) {
l.partial && (i += l.prefix);
continue;
}
throw new TypeError('Expected "' + l.name + '" to be defined');
}
if (no(d)) {
if (!l.repeat) throw new TypeError('Expected "' + l.name + '" to not repeat, but received `' + JSON.stringify(d) + "`");
if (0 === d.length) {
if (l.optional) continue;
throw new TypeError('Expected "' + l.name + '" to not be empty');
}
for (var u = 0; u < d.length; u++) {
if (c = a(d[u]), !n[s].test(c)) throw new TypeError('Expected all "' + l.name + '" to match "' + l.pattern + '", but received `' + JSON.stringify(c) + "`");
i += (0 === u ? l.prefix : l.delimiter) + c;
}
} else {
if (c = l.asterisk ? encodeURI(d).replace(/[?#]/g, (function(e) {
return "%" + e.charCodeAt(0).toString(16).toUpperCase();
})) : a(d), !n[s].test(c)) throw new TypeError('Expected "' + l.name + '" to match "' + l.pattern + '", but received "' + c + '"');
i += l.prefix + c;
}
} else i += l;
}
return i;
};
}
function fo(e) {
return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g, "\\$1");
}
function ho(e) {
return e.replace(/([=!:$\/()])/g, "\\$1");
}
function mo(e, t) {
return e.keys = t, e;
}
function go(e) {
return e && e.sensitive ? "" : "i";
}
function yo(e, t) {
var n = e.source.match(/\((?!\?)/g);
if (n) for (var r = 0; r < n.length; r++) t.push({
name: r,
prefix: null,
delimiter: null,
optional: !1,
repeat: !1,
partial: !1,
asterisk: !1,
pattern: null
});
return mo(e, t);
}
function Io(e, t, n) {
for (var r = [], i = 0; i < e.length; i++) r.push(So(e[i], t, n).source);
return mo(new RegExp("(?:" + r.join("|") + ")", go(n)), t);
}
function _o(e, t, n) {
return bo(co(e, n), t, n);
}
function bo(e, t, n) {
no(t) || (n = t || n, t = []);
for (var r = (n = n || {}).strict, i = !1 !== n.end, o = "", a = 0; a < e.length; a++) {
var s = e[a];
if ("string" == typeof s) o += fo(s); else {
var l = fo(s.prefix), c = "(?:" + s.pattern + ")";
t.push(s), s.repeat && (c += "(?:" + l + c + ")*"), o += c = s.optional ? s.partial ? l + "(" + c + ")?" : "(?:" + l + "(" + c + "))?" : l + "(" + c + ")";
}
}
var d = fo(n.delimiter || "/"), u = o.slice(-d.length) === d;
return r || (o = (u ? o.slice(0, -d.length) : o) + "(?:" + d + "(?=$))?"), o += i ? "$" : r && u ? "" : "(?=" + d + "|$)", 
mo(new RegExp("^" + o, go(n)), t);
}
function So(e, t, n) {
return no(t) || (n = t || n, t = []), n = n || {}, e instanceof RegExp ? yo(e, t) : no(e) ? Io(e, t, n) : _o(e, t, n);
}
function vo(e, t) {
if (null == e) return {};
var n, r, i = {}, o = Object.keys(e);
for (r = 0; r < o.length; r++) n = o[r], t.indexOf(n) >= 0 || (i[n] = e[n]);
return i;
}
ro.parse = io, ro.compile = oo, ro.tokensToFunction = ao, ro.tokensToRegExp = so;
var To = {};
To[Mi.ForwardRef] = {
$$typeof: !0,
render: !0,
defaultProps: !0,
displayName: !0,
propTypes: !0
}, To[Mi.Memo] = {
$$typeof: !0,
compare: !0,
defaultProps: !0,
displayName: !0,
propTypes: !0,
type: !0
};
var Eo = H.createContext, Po = function(e) {
var t = Eo();
return t.displayName = e, t;
}, Oo = Po("Router-History"), Co = Po("Router"), No = function(e) {
function t(t) {
var n;
return (n = e.call(this, t) || this).state = {
location: t.history.location
}, n._isMounted = !1, n._pendingLocation = null, t.staticContext || (n.unlisten = t.history.listen((function(e) {
n._pendingLocation = e;
}))), n;
}
bi(t, e), t.computeRootMatch = function(e) {
return {
path: "/",
url: "/",
params: {},
isExact: "/" === e
};
};
var n = t.prototype;
return n.componentDidMount = function() {
var e = this;
this._isMounted = !0, this.unlisten && this.unlisten(), this.props.staticContext || (this.unlisten = this.props.history.listen((function(t) {
e._isMounted && e.setState({
location: t
});
}))), this._pendingLocation && this.setState({
location: this._pendingLocation
});
}, n.componentWillUnmount = function() {
this.unlisten && (this.unlisten(), this._isMounted = !1, this._pendingLocation = null);
}, n.render = function() {
return H.createElement(Co.Provider, {
value: {
history: this.props.history,
location: this.state.location,
match: t.computeRootMatch(this.state.location.pathname),
staticContext: this.props.staticContext
}
}, H.createElement(Oo.Provider, {
children: this.props.children || null,
value: this.props.history
}));
}, t;
}(H.Component), Ao = (H.Component, H.Component, {}), Lo = 0;
function wo(e) {
if (Ao[e]) return Ao[e];
var t = ro.compile(e);
return Lo < 1e4 && (Ao[e] = t, Lo++), t;
}
var ko = {}, Ro = 0;
function xo(e, t) {
var n = "" + t.end + t.strict + t.sensitive, r = ko[n] || (ko[n] = {});
if (r[e]) return r[e];
var i = [], o = {
regexp: ro(e, i, t),
keys: i
};
return Ro < 1e4 && (r[e] = o, Ro++), o;
}
function Bo(e, t) {
void 0 === t && (t = {}), ("string" == typeof t || Array.isArray(t)) && (t = {
path: t
});
var n = t, r = n.path, i = n.exact, o = void 0 !== i && i, a = n.strict, s = void 0 !== a && a, l = n.sensitive, c = void 0 !== l && l;
return [].concat(r).reduce((function(t, n) {
if (!n && "" !== n) return null;
if (t) return t;
var r = xo(n, {
end: o,
strict: s,
sensitive: c
}), i = r.regexp, a = r.keys, l = i.exec(e);
if (!l) return null;
var d = l[0], u = l.slice(1), p = e === d;
return o && !p ? null : {
path: n,
url: "/" === n && "" === d ? "/" : d,
isExact: p,
params: a.reduce((function(e, t, n) {
return e[t.name] = u[n], e;
}), {})
};
}), null);
}
function Do(e) {
return 0 === H.Children.count(e);
}
var Fo = function(e) {
function t() {
return e.apply(this, arguments) || this;
}
return bi(t, e), t.prototype.render = function() {
var e = this;
return H.createElement(Co.Consumer, null, (function(t) {
t || Xi(!1);
var n = e.props.location || t.location, r = qi({}, t, {
location: n,
match: e.props.computedMatch ? e.props.computedMatch : e.props.path ? Bo(n.pathname, e.props) : t.match
}), i = e.props, o = i.children, a = i.component, s = i.render;
return Array.isArray(o) && Do(o) && (o = null), H.createElement(Co.Provider, {
value: r
}, r.match ? o ? "function" == typeof o ? o(r) : o : a ? H.createElement(a, r) : s ? s(r) : null : "function" == typeof o ? o(r) : null);
}));
}, t;
}(H.Component);
function Mo(e) {
return "/" === e.charAt(0) ? e : "/" + e;
}
function Uo(e, t) {
return e ? qi({}, t, {
pathname: Mo(e) + t.pathname
}) : t;
}
function Ho(e, t) {
if (!e) return t;
var n = Mo(e);
return 0 !== t.pathname.indexOf(n) ? t : qi({}, t, {
pathname: t.pathname.substr(n.length)
});
}
function Vo(e) {
return "string" == typeof e ? e : $i(e);
}
function Jo(e) {
return function() {
Xi(!1);
};
}
function Go() {}
H.Component, H.Component;
var zo = H.useContext;
function jo() {
return zo(Oo);
}
function qo() {
return zo(Co).location;
}
function Yo() {
var e = zo(Co).match;
return e ? e.params : {};
}
var Wo = t((function(e, t) {
function n(e, t) {
var n = e.length;
e.push(t);
e: for (;0 < n; ) {
var r = n - 1 >>> 1, i = e[r];
if (!(0 < o(i, t))) break e;
e[r] = t, e[n] = i, n = r;
}
}
function r(e) {
return 0 === e.length ? null : e[0];
}
function i(e) {
if (0 === e.length) return null;
var t = e[0], n = e.pop();
if (n !== t) {
e[0] = n;
e: for (var r = 0, i = e.length, a = i >>> 1; r < a; ) {
var s = 2 * (r + 1) - 1, l = e[s], c = s + 1, d = e[c];
if (0 > o(l, n)) c < i && 0 > o(d, l) ? (e[r] = d, e[c] = n, r = c) : (e[r] = l, 
e[s] = n, r = s); else {
if (!(c < i && 0 > o(d, n))) break e;
e[r] = d, e[c] = n, r = c;
}
}
}
return t;
}
function o(e, t) {
var n = e.sortIndex - t.sortIndex;
return 0 !== n ? n : e.id - t.id;
}
if ("object" == typeof performance && "function" == typeof performance.now) {
var a = performance;
t.unstable_now = function() {
return a.now();
};
} else {
var s = Date.now();
t.unstable_now = function() {
return Date.now() - s;
};
}
var l = [], c = [], d = 1, u = null, p = 3, f = !1, h = !1, m = !1;
function g(e) {
for (var t = r(c); null !== t; ) {
if (null === t.callback) i(c); else {
if (!(t.startTime <= e)) break;
i(c), t.sortIndex = t.expirationTime, n(l, t);
}
t = r(c);
}
}
function y(e) {
if (m = !1, g(e), !h) if (null !== r(l)) h = !0, A(I); else {
var t = r(c);
null !== t && L(y, t.startTime - e);
}
}
function I(e, n) {
h = !1, m && (m = !1, clearTimeout(v), v = -1), f = !0;
var o = p;
try {
for (g(n), u = r(l); null !== u && (!(u.expirationTime > n) || e && !P()); ) {
var a = u.callback;
if ("function" == typeof a) {
u.callback = null, p = u.priorityLevel;
var s = a(u.expirationTime <= n);
n = t.unstable_now(), "function" == typeof s ? u.callback = s : u === r(l) && i(l), 
g(n);
} else i(l);
u = r(l);
}
if (null !== u) var d = !0; else {
var I = r(c);
null !== I && L(y, I.startTime - n), d = !1;
}
return d;
} finally {
u = null, p = o, f = !1;
}
}
"undefined" != typeof navigator && void 0 !== navigator.scheduling && void 0 !== navigator.scheduling.isInputPending && navigator.scheduling.isInputPending.bind(navigator.scheduling);
var _, b = !1, S = null, v = -1, T = 5, E = -1;
function P() {
return !(t.unstable_now() - E < T);
}
function O() {
if (null !== S) {
var e = t.unstable_now();
E = e;
var n = !0;
try {
n = S(!0, e);
} finally {
n ? _() : (b = !1, S = null);
}
} else b = !1;
}
if ("undefined" != typeof MessageChannel) {
var C = new MessageChannel, N = C.port2;
C.port1.onmessage = O, _ = function() {
N.postMessage(null);
};
} else _ = function() {
setTimeout(O, 0);
};
function A(e) {
S = e, b || (b = !0, _());
}
function L(e, n) {
v = setTimeout((function() {
e(t.unstable_now());
}), n);
}
t.unstable_IdlePriority = 5, t.unstable_ImmediatePriority = 1, t.unstable_LowPriority = 4, 
t.unstable_NormalPriority = 3, t.unstable_Profiling = null, t.unstable_UserBlockingPriority = 2, 
t.unstable_cancelCallback = function(e) {
e.callback = null;
}, t.unstable_continueExecution = function() {
h || f || (h = !0, A(I));
}, t.unstable_forceFrameRate = function(e) {
0 > e || 125 < e ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : T = 0 < e ? Math.floor(1e3 / e) : 5;
}, t.unstable_getCurrentPriorityLevel = function() {
return p;
}, t.unstable_getFirstCallbackNode = function() {
return r(l);
}, t.unstable_next = function(e) {
switch (p) {
case 1:
case 2:
case 3:
var t = 3;
break;

default:
t = p;
}
var n = p;
p = t;
try {
return e();
} finally {
p = n;
}
}, t.unstable_pauseExecution = function() {}, t.unstable_requestPaint = function() {}, 
t.unstable_runWithPriority = function(e, t) {
switch (e) {
case 1:
case 2:
case 3:
case 4:
case 5:
break;

default:
e = 3;
}
var n = p;
p = e;
try {
return t();
} finally {
p = n;
}
}, t.unstable_scheduleCallback = function(e, i, o) {
var a = t.unstable_now();
switch ("object" == typeof o && null !== o ? o = "number" == typeof (o = o.delay) && 0 < o ? a + o : a : o = a, 
e) {
case 1:
var s = -1;
break;

case 2:
s = 250;
break;

case 5:
s = 1073741823;
break;

case 4:
s = 1e4;
break;

default:
s = 5e3;
}
return e = {
id: d++,
callback: i,
priorityLevel: e,
startTime: o,
expirationTime: s = o + s,
sortIndex: -1
}, o > a ? (e.sortIndex = o, n(c, e), null === r(l) && e === r(c) && (m ? (clearTimeout(v), 
v = -1) : m = !0, L(y, o - a))) : (e.sortIndex = s, n(l, e), h || f || (h = !0, 
A(I))), e;
}, t.unstable_shouldYield = P, t.unstable_wrapCallback = function(e) {
var t = p;
return function() {
var n = p;
p = t;
try {
return e.apply(this, arguments);
} finally {
p = n;
}
};
};
})), Ko = (t((function(e, t) {})), t((function(e) {
e.exports = Wo;
}))), Xo = function(e) {
var t = {}, n = H, r = Ko, i = Object.assign;
function o(e) {
for (var t = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, n = 1; n < arguments.length; n++) t += "&args[]=" + encodeURIComponent(arguments[n]);
return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
}
var a = n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, s = Symbol.for("react.element"), l = Symbol.for("react.portal"), c = Symbol.for("react.fragment"), d = Symbol.for("react.strict_mode"), u = Symbol.for("react.profiler"), p = Symbol.for("react.provider"), f = Symbol.for("react.context"), h = Symbol.for("react.forward_ref"), m = Symbol.for("react.suspense"), g = Symbol.for("react.suspense_list"), y = Symbol.for("react.memo"), I = Symbol.for("react.lazy"), _ = Symbol.for("react.offscreen"), b = Symbol.iterator;
function S(e) {
return null === e || "object" != typeof e ? null : "function" == typeof (e = b && e[b] || e["@@iterator"]) ? e : null;
}
function v(e) {
if (null == e) return null;
if ("function" == typeof e) return e.displayName || e.name || null;
if ("string" == typeof e) return e;
switch (e) {
case c:
return "Fragment";

case l:
return "Portal";

case u:
return "Profiler";

case d:
return "StrictMode";

case m:
return "Suspense";

case g:
return "SuspenseList";
}
if ("object" == typeof e) switch (e.$$typeof) {
case f:
return (e.displayName || "Context") + ".Consumer";

case p:
return (e._context.displayName || "Context") + ".Provider";

case h:
var t = e.render;
return (e = e.displayName) || (e = "" !== (e = t.displayName || t.name || "") ? "ForwardRef(" + e + ")" : "ForwardRef"), 
e;

case y:
return null !== (t = e.displayName || null) ? t : v(e.type) || "Memo";

case I:
t = e._payload, e = e._init;
try {
return v(e(t));
} catch (e) {}
}
return null;
}
function T(e) {
var t = e.type;
switch (e.tag) {
case 24:
return "Cache";

case 9:
return (t.displayName || "Context") + ".Consumer";

case 10:
return (t._context.displayName || "Context") + ".Provider";

case 18:
return "DehydratedFragment";

case 11:
return e = (e = t.render).displayName || e.name || "", t.displayName || ("" !== e ? "ForwardRef(" + e + ")" : "ForwardRef");

case 7:
return "Fragment";

case 5:
return t;

case 4:
return "Portal";

case 3:
return "Root";

case 6:
return "Text";

case 16:
return v(t);

case 8:
return t === d ? "StrictMode" : "Mode";

case 22:
return "Offscreen";

case 12:
return "Profiler";

case 21:
return "Scope";

case 13:
return "Suspense";

case 19:
return "SuspenseList";

case 25:
return "TracingMarker";

case 1:
case 0:
case 17:
case 2:
case 14:
case 15:
if ("function" == typeof t) return t.displayName || t.name || null;
if ("string" == typeof t) return t;
}
return null;
}
function E(e) {
var t = e, n = e;
if (e.alternate) for (;t.return; ) t = t.return; else {
e = t;
do {
0 != (4098 & (t = e).flags) && (n = t.return), e = t.return;
} while (e);
}
return 3 === t.tag ? n : null;
}
function P(e) {
if (E(e) !== e) throw Error(o(188));
}
function O(e) {
var t = e.alternate;
if (!t) {
if (null === (t = E(e))) throw Error(o(188));
return t !== e ? null : e;
}
for (var n = e, r = t; ;) {
var i = n.return;
if (null === i) break;
var a = i.alternate;
if (null === a) {
if (null !== (r = i.return)) {
n = r;
continue;
}
break;
}
if (i.child === a.child) {
for (a = i.child; a; ) {
if (a === n) return P(i), e;
if (a === r) return P(i), t;
a = a.sibling;
}
throw Error(o(188));
}
if (n.return !== r.return) n = i, r = a; else {
for (var s = !1, l = i.child; l; ) {
if (l === n) {
s = !0, n = i, r = a;
break;
}
if (l === r) {
s = !0, r = i, n = a;
break;
}
l = l.sibling;
}
if (!s) {
for (l = a.child; l; ) {
if (l === n) {
s = !0, n = a, r = i;
break;
}
if (l === r) {
s = !0, r = a, n = i;
break;
}
l = l.sibling;
}
if (!s) throw Error(o(189));
}
}
if (n.alternate !== r) throw Error(o(190));
}
if (3 !== n.tag) throw Error(o(188));
return n.stateNode.current === n ? e : t;
}
function C(e) {
return null !== (e = O(e)) ? N(e) : null;
}
function N(e) {
if (5 === e.tag || 6 === e.tag) return e;
for (e = e.child; null !== e; ) {
var t = N(e);
if (null !== t) return t;
e = e.sibling;
}
return null;
}
function A(e) {
if (5 === e.tag || 6 === e.tag) return e;
for (e = e.child; null !== e; ) {
if (4 !== e.tag) {
var t = A(e);
if (null !== t) return t;
}
e = e.sibling;
}
return null;
}
var L, w = Array.isArray, k = e.getPublicInstance, R = e.getRootHostContext, x = e.getChildHostContext, B = e.prepareForCommit, D = e.resetAfterCommit, F = e.createInstance, M = e.appendInitialChild, U = e.finalizeInitialChildren, V = e.prepareUpdate, J = e.shouldSetTextContent, G = e.createTextInstance, z = e.scheduleTimeout, j = e.cancelTimeout, q = e.noTimeout, Y = e.isPrimaryRenderer, W = e.supportsMutation, K = e.supportsPersistence, X = e.supportsHydration, Q = e.getInstanceFromNode, $ = e.preparePortalMount, Z = e.getCurrentEventPriority, ee = e.detachDeletedInstance, te = e.supportsMicrotasks, ne = e.scheduleMicrotask, re = e.supportsTestSelectors, ie = e.findFiberRoot, oe = e.getBoundingRect, ae = e.getTextContent, se = e.isHiddenSubtree, le = e.matchAccessibilityRole, ce = e.setFocusIfFocusable, de = e.setupIntersectionObserver, ue = e.appendChild, pe = e.appendChildToContainer, fe = e.commitTextUpdate, he = e.commitMount, me = e.commitUpdate, ge = e.insertBefore, ye = e.insertInContainerBefore, Ie = e.removeChild, _e = e.removeChildFromContainer, be = e.resetTextContent, Se = e.hideInstance, ve = e.hideTextInstance, Te = e.unhideInstance, Ee = e.unhideTextInstance, Pe = e.clearContainer, Oe = e.cloneInstance, Ce = e.createContainerChildSet, Ne = e.appendChildToContainerChildSet, Ae = e.finalizeContainerChildren, Le = e.replaceContainerChildren, we = e.cloneHiddenInstance, ke = e.cloneHiddenTextInstance, Re = e.canHydrateInstance, xe = e.canHydrateTextInstance, Be = e.canHydrateSuspenseInstance, De = e.isSuspenseInstancePending, Fe = e.isSuspenseInstanceFallback, Me = e.getSuspenseInstanceFallbackErrorDetails, Ue = e.registerSuspenseInstanceRetry, He = e.getNextHydratableSibling, Ve = e.getFirstHydratableChild, Je = e.getFirstHydratableChildWithinContainer, Ge = e.getFirstHydratableChildWithinSuspenseInstance, ze = e.hydrateInstance, je = e.hydrateTextInstance, qe = e.hydrateSuspenseInstance, Ye = e.getNextHydratableInstanceAfterSuspenseInstance, We = e.commitHydratedContainer, Ke = e.commitHydratedSuspenseInstance, Xe = e.clearSuspenseBoundary, Qe = e.clearSuspenseBoundaryFromContainer, $e = e.shouldDeleteUnhydratedTailInstances, Ze = e.didNotMatchHydratedContainerTextInstance, et = e.didNotMatchHydratedTextInstance;
function tt(e) {
if (void 0 === L) try {
throw Error();
} catch (e) {
var t = e.stack.trim().match(/\n( *(at )?)/);
L = t && t[1] || "";
}
return "\n" + L + e;
}
var nt = !1;
function rt(e, t) {
if (!e || nt) return "";
nt = !0;
var n = Error.prepareStackTrace;
Error.prepareStackTrace = void 0;
try {
if (t) if (t = function() {
throw Error();
}, Object.defineProperty(t.prototype, "props", {
set: function() {
throw Error();
}
}), "object" == typeof Reflect && Reflect.construct) {
try {
Reflect.construct(t, []);
} catch (e) {
var r = e;
}
Reflect.construct(e, [], t);
} else {
try {
t.call();
} catch (e) {
r = e;
}
e.call(t.prototype);
} else {
try {
throw Error();
} catch (e) {
r = e;
}
e();
}
} catch (t) {
if (t && r && "string" == typeof t.stack) {
for (var i = t.stack.split("\n"), o = r.stack.split("\n"), a = i.length - 1, s = o.length - 1; 1 <= a && 0 <= s && i[a] !== o[s]; ) s--;
for (;1 <= a && 0 <= s; a--, s--) if (i[a] !== o[s]) {
if (1 !== a || 1 !== s) do {
if (a--, 0 > --s || i[a] !== o[s]) {
var l = "\n" + i[a].replace(" at new ", " at ");
return e.displayName && l.includes("<anonymous>") && (l = l.replace("<anonymous>", e.displayName)), 
l;
}
} while (1 <= a && 0 <= s);
break;
}
}
} finally {
nt = !1, Error.prepareStackTrace = n;
}
return (e = e ? e.displayName || e.name : "") ? tt(e) : "";
}
var it = Object.prototype.hasOwnProperty, ot = [], at = -1;
function st(e) {
return {
current: e
};
}
function lt(e) {
0 > at || (e.current = ot[at], ot[at] = null, at--);
}
function ct(e, t) {
at++, ot[at] = e.current, e.current = t;
}
var dt = {}, ut = st(dt), pt = st(!1), ft = dt;
function ht(e, t) {
var n = e.type.contextTypes;
if (!n) return dt;
var r = e.stateNode;
if (r && r.__reactInternalMemoizedUnmaskedChildContext === t) return r.__reactInternalMemoizedMaskedChildContext;
var i, o = {};
for (i in n) o[i] = t[i];
return r && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = t, 
e.__reactInternalMemoizedMaskedChildContext = o), o;
}
function mt(e) {
return null != (e = e.childContextTypes);
}
function gt() {
lt(pt), lt(ut);
}
function yt(e, t, n) {
if (ut.current !== dt) throw Error(o(168));
ct(ut, t), ct(pt, n);
}
function It(e, t, n) {
var r = e.stateNode;
if (t = t.childContextTypes, "function" != typeof r.getChildContext) return n;
for (var a in r = r.getChildContext()) if (!(a in t)) throw Error(o(108, T(e) || "Unknown", a));
return i({}, n, r);
}
function _t(e) {
return e = (e = e.stateNode) && e.__reactInternalMemoizedMergedChildContext || dt, 
ft = ut.current, ct(ut, e), ct(pt, pt.current), !0;
}
function bt(e, t, n) {
var r = e.stateNode;
if (!r) throw Error(o(169));
n ? (e = It(e, t, ft), r.__reactInternalMemoizedMergedChildContext = e, lt(pt), 
lt(ut), ct(ut, e)) : lt(pt), ct(pt, n);
}
var St = Math.clz32 ? Math.clz32 : function(e) {
return 0 === (e >>>= 0) ? 32 : 31 - (vt(e) / Tt | 0) | 0;
}, vt = Math.log, Tt = Math.LN2;
var Et = 64, Pt = 4194304;
function Ot(e) {
switch (e & -e) {
case 1:
return 1;

case 2:
return 2;

case 4:
return 4;

case 8:
return 8;

case 16:
return 16;

case 32:
return 32;

case 64:
case 128:
case 256:
case 512:
case 1024:
case 2048:
case 4096:
case 8192:
case 16384:
case 32768:
case 65536:
case 131072:
case 262144:
case 524288:
case 1048576:
case 2097152:
return 4194240 & e;

case 4194304:
case 8388608:
case 16777216:
case 33554432:
case 67108864:
return 130023424 & e;

case 134217728:
return 134217728;

case 268435456:
return 268435456;

case 536870912:
return 536870912;

case 1073741824:
return 1073741824;

default:
return e;
}
}
function Ct(e, t) {
var n = e.pendingLanes;
if (0 === n) return 0;
var r = 0, i = e.suspendedLanes, o = e.pingedLanes, a = 268435455 & n;
if (0 !== a) {
var s = a & ~i;
0 !== s ? r = Ot(s) : 0 !== (o &= a) && (r = Ot(o));
} else 0 !== (a = n & ~i) ? r = Ot(a) : 0 !== o && (r = Ot(o));
if (0 === r) return 0;
if (0 !== t && t !== r && 0 == (t & i) && ((i = r & -r) >= (o = t & -t) || 16 === i && 0 != (4194240 & o))) return t;
if (0 != (4 & r) && (r |= 16 & n), 0 !== (t = e.entangledLanes)) for (e = e.entanglements, 
t &= r; 0 < t; ) i = 1 << (n = 31 - St(t)), r |= e[n], t &= ~i;
return r;
}
function Nt(e, t) {
switch (e) {
case 1:
case 2:
case 4:
return t + 250;

case 8:
case 16:
case 32:
case 64:
case 128:
case 256:
case 512:
case 1024:
case 2048:
case 4096:
case 8192:
case 16384:
case 32768:
case 65536:
case 131072:
case 262144:
case 524288:
case 1048576:
case 2097152:
return t + 5e3;

default:
return -1;
}
}
function At(e, t) {
for (var n = e.suspendedLanes, r = e.pingedLanes, i = e.expirationTimes, o = e.pendingLanes; 0 < o; ) {
var a = 31 - St(o), s = 1 << a, l = i[a];
-1 === l ? 0 != (s & n) && 0 == (s & r) || (i[a] = Nt(s, t)) : l <= t && (e.expiredLanes |= s), 
o &= ~s;
}
}
function Lt(e) {
return 0 !== (e = -1073741825 & e.pendingLanes) ? e : 1073741824 & e ? 1073741824 : 0;
}
function wt() {
var e = Et;
return 0 == (4194240 & (Et <<= 1)) && (Et = 64), e;
}
function kt(e) {
for (var t = [], n = 0; 31 > n; n++) t.push(e);
return t;
}
function Rt(e, t, n) {
e.pendingLanes |= t, 536870912 !== t && (e.suspendedLanes = 0, e.pingedLanes = 0), 
(e = e.eventTimes)[t = 31 - St(t)] = n;
}
function xt(e, t) {
var n = e.pendingLanes & ~t;
e.pendingLanes = t, e.suspendedLanes = 0, e.pingedLanes = 0, e.expiredLanes &= t, 
e.mutableReadLanes &= t, e.entangledLanes &= t, t = e.entanglements;
var r = e.eventTimes;
for (e = e.expirationTimes; 0 < n; ) {
var i = 31 - St(n), o = 1 << i;
t[i] = 0, r[i] = -1, e[i] = -1, n &= ~o;
}
}
function Bt(e, t) {
var n = e.entangledLanes |= t;
for (e = e.entanglements; n; ) {
var r = 31 - St(n), i = 1 << r;
i & t | e[r] & t && (e[r] |= t), n &= ~i;
}
}
var Dt = 0;
function Ft(e) {
return 1 < (e &= -e) ? 4 < e ? 0 != (268435455 & e) ? 16 : 536870912 : 4 : 1;
}
var Mt = r.unstable_scheduleCallback, Ut = r.unstable_cancelCallback, Ht = r.unstable_shouldYield, Vt = r.unstable_requestPaint, Jt = r.unstable_now, Gt = r.unstable_ImmediatePriority, zt = r.unstable_UserBlockingPriority, jt = r.unstable_NormalPriority, qt = r.unstable_IdlePriority, Yt = null, Wt = null;
function Kt(e) {
if (Wt && "function" == typeof Wt.onCommitFiberRoot) try {
Wt.onCommitFiberRoot(Yt, e, void 0, 128 == (128 & e.current.flags));
} catch (e) {}
}
var Xt = "function" == typeof Object.is ? Object.is : function(e, t) {
return e === t && (0 !== e || 1 / e == 1 / t) || e != e && t != t;
}, Qt = null, $t = !1, Zt = !1;
function en(e) {
null === Qt ? Qt = [ e ] : Qt.push(e);
}
function tn(e) {
$t = !0, en(e);
}
function nn() {
if (!Zt && null !== Qt) {
Zt = !0;
var e = 0, t = Dt;
try {
var n = Qt;
for (Dt = 1; e < n.length; e++) {
var r = n[e];
do {
r = r(!0);
} while (null !== r);
}
Qt = null, $t = !1;
} catch (t) {
throw null !== Qt && (Qt = Qt.slice(e + 1)), Mt(Gt, nn), t;
} finally {
Dt = t, Zt = !1;
}
}
return null;
}
var rn = [], on = 0, an = null, sn = 0, ln = [], cn = 0, dn = null, un = 1, pn = "";
function fn(e, t) {
rn[on++] = sn, rn[on++] = an, an = e, sn = t;
}
function hn(e, t, n) {
ln[cn++] = un, ln[cn++] = pn, ln[cn++] = dn, dn = e;
var r = un;
e = pn;
var i = 32 - St(r) - 1;
r &= ~(1 << i), n += 1;
var o = 32 - St(t) + i;
if (30 < o) {
var a = i - i % 5;
o = (r & (1 << a) - 1).toString(32), r >>= a, i -= a, un = 1 << 32 - St(t) + i | n << i | r, 
pn = o + e;
} else un = 1 << o | n << i | r, pn = e;
}
function mn(e) {
null !== e.return && (fn(e, 1), hn(e, 1, 0));
}
function gn(e) {
for (;e === an; ) an = rn[--on], rn[on] = null, sn = rn[--on], rn[on] = null;
for (;e === dn; ) dn = ln[--cn], ln[cn] = null, pn = ln[--cn], ln[cn] = null, un = ln[--cn], 
ln[cn] = null;
}
var yn = null, In = null, _n = !1, bn = !1, Sn = null;
function vn(e, t) {
var n = ys(5, null, null, 0);
n.elementType = "DELETED", n.stateNode = t, n.return = e, null === (t = e.deletions) ? (e.deletions = [ n ], 
e.flags |= 16) : t.push(n);
}
function Tn(e, t) {
switch (e.tag) {
case 5:
return null !== (t = Re(t, e.type, e.pendingProps)) && (e.stateNode = t, yn = e, 
In = Ve(t), !0);

case 6:
return null !== (t = xe(t, e.pendingProps)) && (e.stateNode = t, yn = e, In = null, 
!0);

case 13:
if (null !== (t = Be(t))) {
var n = null !== dn ? {
id: un,
overflow: pn
} : null;
return e.memoizedState = {
dehydrated: t,
treeContext: n,
retryLane: 1073741824
}, (n = ys(18, null, null, 0)).stateNode = t, n.return = e, e.child = n, yn = e, 
In = null, !0;
}
return !1;

default:
return !1;
}
}
function En(e) {
return 0 != (1 & e.mode) && 0 == (128 & e.flags);
}
function Pn(e) {
if (_n) {
var t = In;
if (t) {
var n = t;
if (!Tn(e, t)) {
if (En(e)) throw Error(o(418));
t = He(n);
var r = yn;
t && Tn(e, t) ? vn(r, n) : (e.flags = -4097 & e.flags | 2, _n = !1, yn = e);
}
} else {
if (En(e)) throw Error(o(418));
e.flags = -4097 & e.flags | 2, _n = !1, yn = e;
}
}
}
function On(e) {
for (e = e.return; null !== e && 5 !== e.tag && 3 !== e.tag && 13 !== e.tag; ) e = e.return;
yn = e;
}
function Cn(e) {
if (!X || e !== yn) return !1;
if (!_n) return On(e), _n = !0, !1;
if (3 !== e.tag && (5 !== e.tag || $e(e.type) && !J(e.type, e.memoizedProps))) {
var t = In;
if (t) {
if (En(e)) throw Nn(), Error(o(418));
for (;t; ) vn(e, t), t = He(t);
}
}
if (On(e), 13 === e.tag) {
if (!X) throw Error(o(316));
if (!(e = null !== (e = e.memoizedState) ? e.dehydrated : null)) throw Error(o(317));
In = Ye(e);
} else In = yn ? He(e.stateNode) : null;
return !0;
}
function Nn() {
for (var e = In; e; ) e = He(e);
}
function An() {
X && (In = yn = null, bn = _n = !1);
}
function Ln(e) {
null === Sn ? Sn = [ e ] : Sn.push(e);
}
var wn = a.ReactCurrentBatchConfig;
function kn(e, t) {
if (Xt(e, t)) return !0;
if ("object" != typeof e || null === e || "object" != typeof t || null === t) return !1;
var n = Object.keys(e), r = Object.keys(t);
if (n.length !== r.length) return !1;
for (r = 0; r < n.length; r++) {
var i = n[r];
if (!it.call(t, i) || !Xt(e[i], t[i])) return !1;
}
return !0;
}
function Rn(e) {
switch (e.tag) {
case 5:
return tt(e.type);

case 16:
return tt("Lazy");

case 13:
return tt("Suspense");

case 19:
return tt("SuspenseList");

case 0:
case 2:
case 15:
return e = rt(e.type, !1);

case 11:
return e = rt(e.type.render, !1);

case 1:
return e = rt(e.type, !0);

default:
return "";
}
}
function xn(e, t) {
if (e && e.defaultProps) {
for (var n in t = i({}, t), e = e.defaultProps) void 0 === t[n] && (t[n] = e[n]);
return t;
}
return t;
}
var Bn = st(null), Dn = null, Fn = null, Mn = null;
function Un() {
Mn = Fn = Dn = null;
}
function Hn(e, t, n) {
Y ? (ct(Bn, t._currentValue), t._currentValue = n) : (ct(Bn, t._currentValue2), 
t._currentValue2 = n);
}
function Vn(e) {
var t = Bn.current;
lt(Bn), Y ? e._currentValue = t : e._currentValue2 = t;
}
function Jn(e, t, n) {
for (;null !== e; ) {
var r = e.alternate;
if ((e.childLanes & t) !== t ? (e.childLanes |= t, null !== r && (r.childLanes |= t)) : null !== r && (r.childLanes & t) !== t && (r.childLanes |= t), 
e === n) break;
e = e.return;
}
}
function Gn(e, t) {
Dn = e, Mn = Fn = null, null !== (e = e.dependencies) && null !== e.firstContext && (0 != (e.lanes & t) && (Mi = !0), 
e.firstContext = null);
}
function zn(e) {
var t = Y ? e._currentValue : e._currentValue2;
if (Mn !== e) if (e = {
context: e,
memoizedValue: t,
next: null
}, null === Fn) {
if (null === Dn) throw Error(o(308));
Fn = e, Dn.dependencies = {
lanes: 0,
firstContext: e
};
} else Fn = Fn.next = e;
return t;
}
var jn = null;
function qn(e) {
null === jn ? jn = [ e ] : jn.push(e);
}
function Yn(e, t, n, r) {
var i = t.interleaved;
return null === i ? (n.next = n, qn(t)) : (n.next = i.next, i.next = n), t.interleaved = n, 
Wn(e, r);
}
function Wn(e, t) {
e.lanes |= t;
var n = e.alternate;
for (null !== n && (n.lanes |= t), n = e, e = e.return; null !== e; ) e.childLanes |= t, 
null !== (n = e.alternate) && (n.childLanes |= t), n = e, e = e.return;
return 3 === n.tag ? n.stateNode : null;
}
var Kn = !1;
function Xn(e) {
e.updateQueue = {
baseState: e.memoizedState,
firstBaseUpdate: null,
lastBaseUpdate: null,
shared: {
pending: null,
interleaved: null,
lanes: 0
},
effects: null
};
}
function Qn(e, t) {
e = e.updateQueue, t.updateQueue === e && (t.updateQueue = {
baseState: e.baseState,
firstBaseUpdate: e.firstBaseUpdate,
lastBaseUpdate: e.lastBaseUpdate,
shared: e.shared,
effects: e.effects
});
}
function $n(e, t) {
return {
eventTime: e,
lane: t,
tag: 0,
payload: null,
callback: null,
next: null
};
}
function Zn(e, t, n) {
var r = e.updateQueue;
if (null === r) return null;
if (r = r.shared, 0 != (2 & ua)) {
var i = r.pending;
return null === i ? t.next = t : (t.next = i.next, i.next = t), r.pending = t, Wn(e, n);
}
return null === (i = r.interleaved) ? (t.next = t, qn(r)) : (t.next = i.next, i.next = t), 
r.interleaved = t, Wn(e, n);
}
function er(e, t, n) {
if (null !== (t = t.updateQueue) && (t = t.shared, 0 != (4194240 & n))) {
var r = t.lanes;
n |= r &= e.pendingLanes, t.lanes = n, Bt(e, n);
}
}
function tr(e, t) {
var n = e.updateQueue, r = e.alternate;
if (null !== r && n === (r = r.updateQueue)) {
var i = null, o = null;
if (null !== (n = n.firstBaseUpdate)) {
do {
var a = {
eventTime: n.eventTime,
lane: n.lane,
tag: n.tag,
payload: n.payload,
callback: n.callback,
next: null
};
null === o ? i = o = a : o = o.next = a, n = n.next;
} while (null !== n);
null === o ? i = o = t : o = o.next = t;
} else i = o = t;
return n = {
baseState: r.baseState,
firstBaseUpdate: i,
lastBaseUpdate: o,
shared: r.shared,
effects: r.effects
}, void (e.updateQueue = n);
}
null === (e = n.lastBaseUpdate) ? n.firstBaseUpdate = t : e.next = t, n.lastBaseUpdate = t;
}
function nr(e, t, n, r) {
var o = e.updateQueue;
Kn = !1;
var a = o.firstBaseUpdate, s = o.lastBaseUpdate, l = o.shared.pending;
if (null !== l) {
o.shared.pending = null;
var c = l, d = c.next;
c.next = null, null === s ? a = d : s.next = d, s = c;
var u = e.alternate;
null !== u && ((l = (u = u.updateQueue).lastBaseUpdate) !== s && (null === l ? u.firstBaseUpdate = d : l.next = d, 
u.lastBaseUpdate = c));
}
if (null !== a) {
var p = o.baseState;
for (s = 0, u = d = c = null, l = a; ;) {
var f = l.lane, h = l.eventTime;
if ((r & f) === f) {
null !== u && (u = u.next = {
eventTime: h,
lane: 0,
tag: l.tag,
payload: l.payload,
callback: l.callback,
next: null
});
e: {
var m = e, g = l;
switch (f = t, h = n, g.tag) {
case 1:
if ("function" == typeof (m = g.payload)) {
p = m.call(h, p, f);
break e;
}
p = m;
break e;

case 3:
m.flags = -65537 & m.flags | 128;

case 0:
if (null == (f = "function" == typeof (m = g.payload) ? m.call(h, p, f) : m)) break e;
p = i({}, p, f);
break e;

case 2:
Kn = !0;
}
}
null !== l.callback && 0 !== l.lane && (e.flags |= 64, null === (f = o.effects) ? o.effects = [ l ] : f.push(l));
} else h = {
eventTime: h,
lane: f,
tag: l.tag,
payload: l.payload,
callback: l.callback,
next: null
}, null === u ? (d = u = h, c = p) : u = u.next = h, s |= f;
if (null === (l = l.next)) {
if (null === (l = o.shared.pending)) break;
l = (f = l).next, f.next = null, o.lastBaseUpdate = f, o.shared.pending = null;
}
}
if (null === u && (c = p), o.baseState = c, o.firstBaseUpdate = d, o.lastBaseUpdate = u, 
null !== (t = o.shared.interleaved)) {
o = t;
do {
s |= o.lane, o = o.next;
} while (o !== t);
} else null === a && (o.shared.lanes = 0);
_a |= s, e.lanes = s, e.memoizedState = p;
}
}
function rr(e, t, n) {
if (e = t.effects, t.effects = null, null !== e) for (t = 0; t < e.length; t++) {
var r = e[t], i = r.callback;
if (null !== i) {
if (r.callback = null, r = n, "function" != typeof i) throw Error(o(191, i));
i.call(r);
}
}
}
var ir = (new n.Component).refs;
function or(e, t, n, r) {
n = null == (n = n(r, t = e.memoizedState)) ? t : i({}, t, n), e.memoizedState = n, 
0 === e.lanes && (e.updateQueue.baseState = n);
}
var ar = {
isMounted: function(e) {
return !!(e = e._reactInternals) && E(e) === e;
},
enqueueSetState: function(e, t, n) {
e = e._reactInternals;
var r = Ua(), i = Ha(e), o = $n(r, i);
o.payload = t, null != n && (o.callback = n), null !== (t = Zn(e, o, i)) && (Va(t, e, i, r), 
er(t, e, i));
},
enqueueReplaceState: function(e, t, n) {
e = e._reactInternals;
var r = Ua(), i = Ha(e), o = $n(r, i);
o.tag = 1, o.payload = t, null != n && (o.callback = n), null !== (t = Zn(e, o, i)) && (Va(t, e, i, r), 
er(t, e, i));
},
enqueueForceUpdate: function(e, t) {
e = e._reactInternals;
var n = Ua(), r = Ha(e), i = $n(n, r);
i.tag = 2, null != t && (i.callback = t), null !== (t = Zn(e, i, r)) && (Va(t, e, r, n), 
er(t, e, r));
}
};
function sr(e, t, n, r, i, o, a) {
return "function" == typeof (e = e.stateNode).shouldComponentUpdate ? e.shouldComponentUpdate(r, o, a) : !t.prototype || !t.prototype.isPureReactComponent || (!kn(n, r) || !kn(i, o));
}
function lr(e, t, n) {
var r = !1, i = dt, o = t.contextType;
return "object" == typeof o && null !== o ? o = zn(o) : (i = mt(t) ? ft : ut.current, 
o = (r = null != (r = t.contextTypes)) ? ht(e, i) : dt), t = new t(n, o), e.memoizedState = null !== t.state && void 0 !== t.state ? t.state : null, 
t.updater = ar, e.stateNode = t, t._reactInternals = e, r && ((e = e.stateNode).__reactInternalMemoizedUnmaskedChildContext = i, 
e.__reactInternalMemoizedMaskedChildContext = o), t;
}
function cr(e, t, n, r) {
e = t.state, "function" == typeof t.componentWillReceiveProps && t.componentWillReceiveProps(n, r), 
"function" == typeof t.UNSAFE_componentWillReceiveProps && t.UNSAFE_componentWillReceiveProps(n, r), 
t.state !== e && ar.enqueueReplaceState(t, t.state, null);
}
function dr(e, t, n, r) {
var i = e.stateNode;
i.props = n, i.state = e.memoizedState, i.refs = ir, Xn(e);
var o = t.contextType;
"object" == typeof o && null !== o ? i.context = zn(o) : (o = mt(t) ? ft : ut.current, 
i.context = ht(e, o)), i.state = e.memoizedState, "function" == typeof (o = t.getDerivedStateFromProps) && (or(e, t, o, n), 
i.state = e.memoizedState), "function" == typeof t.getDerivedStateFromProps || "function" == typeof i.getSnapshotBeforeUpdate || "function" != typeof i.UNSAFE_componentWillMount && "function" != typeof i.componentWillMount || (t = i.state, 
"function" == typeof i.componentWillMount && i.componentWillMount(), "function" == typeof i.UNSAFE_componentWillMount && i.UNSAFE_componentWillMount(), 
t !== i.state && ar.enqueueReplaceState(i, i.state, null), nr(e, n, i, r), i.state = e.memoizedState), 
"function" == typeof i.componentDidMount && (e.flags |= 4194308);
}
function ur(e, t, n) {
if (null !== (e = n.ref) && "function" != typeof e && "object" != typeof e) {
if (n._owner) {
if (n = n._owner) {
if (1 !== n.tag) throw Error(o(309));
var r = n.stateNode;
}
if (!r) throw Error(o(147, e));
var i = r, a = "" + e;
return null !== t && null !== t.ref && "function" == typeof t.ref && t.ref._stringRef === a ? t.ref : (t = function(e) {
var t = i.refs;
t === ir && (t = i.refs = {}), null === e ? delete t[a] : t[a] = e;
}, t._stringRef = a, t);
}
if ("string" != typeof e) throw Error(o(284));
if (!n._owner) throw Error(o(290, e));
}
return e;
}
function pr(e, t) {
throw e = Object.prototype.toString.call(t), Error(o(31, "[object Object]" === e ? "object with keys {" + Object.keys(t).join(", ") + "}" : e));
}
function fr(e) {
return (0, e._init)(e._payload);
}
function hr(e) {
function t(t, n) {
if (e) {
var r = t.deletions;
null === r ? (t.deletions = [ n ], t.flags |= 16) : r.push(n);
}
}
function n(n, r) {
if (!e) return null;
for (;null !== r; ) t(n, r), r = r.sibling;
return null;
}
function r(e, t) {
for (e = new Map; null !== t; ) null !== t.key ? e.set(t.key, t) : e.set(t.index, t), 
t = t.sibling;
return e;
}
function i(e, t) {
return (e = bs(e, t)).index = 0, e.sibling = null, e;
}
function a(t, n, r) {
return t.index = r, e ? null !== (r = t.alternate) ? (r = r.index) < n ? (t.flags |= 2, 
n) : r : (t.flags |= 2, n) : (t.flags |= 1048576, n);
}
function d(t) {
return e && null === t.alternate && (t.flags |= 2), t;
}
function u(e, t, n, r) {
return null === t || 6 !== t.tag ? ((t = Es(n, e.mode, r)).return = e, t) : ((t = i(t, n)).return = e, 
t);
}
function p(e, t, n, r) {
var o = n.type;
return o === c ? h(e, t, n.props.children, r, n.key) : null !== t && (t.elementType === o || "object" == typeof o && null !== o && o.$$typeof === I && fr(o) === t.type) ? ((r = i(t, n.props)).ref = ur(e, t, n), 
r.return = e, r) : ((r = Ss(n.type, n.key, n.props, null, e.mode, r)).ref = ur(e, t, n), 
r.return = e, r);
}
function f(e, t, n, r) {
return null === t || 4 !== t.tag || t.stateNode.containerInfo !== n.containerInfo || t.stateNode.implementation !== n.implementation ? ((t = Ps(n, e.mode, r)).return = e, 
t) : ((t = i(t, n.children || [])).return = e, t);
}
function h(e, t, n, r, o) {
return null === t || 7 !== t.tag ? ((t = vs(n, e.mode, r, o)).return = e, t) : ((t = i(t, n)).return = e, 
t);
}
function m(e, t, n) {
if ("string" == typeof t && "" !== t || "number" == typeof t) return (t = Es("" + t, e.mode, n)).return = e, 
t;
if ("object" == typeof t && null !== t) {
switch (t.$$typeof) {
case s:
return (n = Ss(t.type, t.key, t.props, null, e.mode, n)).ref = ur(e, null, t), n.return = e, 
n;

case l:
return (t = Ps(t, e.mode, n)).return = e, t;

case I:
return m(e, (0, t._init)(t._payload), n);
}
if (w(t) || S(t)) return (t = vs(t, e.mode, n, null)).return = e, t;
pr(e, t);
}
return null;
}
function g(e, t, n, r) {
var i = null !== t ? t.key : null;
if ("string" == typeof n && "" !== n || "number" == typeof n) return null !== i ? null : u(e, t, "" + n, r);
if ("object" == typeof n && null !== n) {
switch (n.$$typeof) {
case s:
return n.key === i ? p(e, t, n, r) : null;

case l:
return n.key === i ? f(e, t, n, r) : null;

case I:
return g(e, t, (i = n._init)(n._payload), r);
}
if (w(n) || S(n)) return null !== i ? null : h(e, t, n, r, null);
pr(e, n);
}
return null;
}
function y(e, t, n, r, i) {
if ("string" == typeof r && "" !== r || "number" == typeof r) return u(t, e = e.get(n) || null, "" + r, i);
if ("object" == typeof r && null !== r) {
switch (r.$$typeof) {
case s:
return p(t, e = e.get(null === r.key ? n : r.key) || null, r, i);

case l:
return f(t, e = e.get(null === r.key ? n : r.key) || null, r, i);

case I:
return y(e, t, n, (0, r._init)(r._payload), i);
}
if (w(r) || S(r)) return h(t, e = e.get(n) || null, r, i, null);
pr(t, r);
}
return null;
}
function _(i, o, s, l) {
for (var c = null, d = null, u = o, p = o = 0, f = null; null !== u && p < s.length; p++) {
u.index > p ? (f = u, u = null) : f = u.sibling;
var h = g(i, u, s[p], l);
if (null === h) {
null === u && (u = f);
break;
}
e && u && null === h.alternate && t(i, u), o = a(h, o, p), null === d ? c = h : d.sibling = h, 
d = h, u = f;
}
if (p === s.length) return n(i, u), _n && fn(i, p), c;
if (null === u) {
for (;p < s.length; p++) null !== (u = m(i, s[p], l)) && (o = a(u, o, p), null === d ? c = u : d.sibling = u, 
d = u);
return _n && fn(i, p), c;
}
for (u = r(i, u); p < s.length; p++) null !== (f = y(u, i, p, s[p], l)) && (e && null !== f.alternate && u.delete(null === f.key ? p : f.key), 
o = a(f, o, p), null === d ? c = f : d.sibling = f, d = f);
return e && u.forEach((function(e) {
return t(i, e);
})), _n && fn(i, p), c;
}
function b(i, s, l, c) {
var d = S(l);
if ("function" != typeof d) throw Error(o(150));
if (null == (l = d.call(l))) throw Error(o(151));
for (var u = d = null, p = s, f = s = 0, h = null, I = l.next(); null !== p && !I.done; f++, 
I = l.next()) {
p.index > f ? (h = p, p = null) : h = p.sibling;
var _ = g(i, p, I.value, c);
if (null === _) {
null === p && (p = h);
break;
}
e && p && null === _.alternate && t(i, p), s = a(_, s, f), null === u ? d = _ : u.sibling = _, 
u = _, p = h;
}
if (I.done) return n(i, p), _n && fn(i, f), d;
if (null === p) {
for (;!I.done; f++, I = l.next()) null !== (I = m(i, I.value, c)) && (s = a(I, s, f), 
null === u ? d = I : u.sibling = I, u = I);
return _n && fn(i, f), d;
}
for (p = r(i, p); !I.done; f++, I = l.next()) null !== (I = y(p, i, f, I.value, c)) && (e && null !== I.alternate && p.delete(null === I.key ? f : I.key), 
s = a(I, s, f), null === u ? d = I : u.sibling = I, u = I);
return e && p.forEach((function(e) {
return t(i, e);
})), _n && fn(i, f), d;
}
return function e(r, o, a, u) {
if ("object" == typeof a && null !== a && a.type === c && null === a.key && (a = a.props.children), 
"object" == typeof a && null !== a) {
switch (a.$$typeof) {
case s:
e: {
for (var p = a.key, f = o; null !== f; ) {
if (f.key === p) {
if ((p = a.type) === c) {
if (7 === f.tag) {
n(r, f.sibling), (o = i(f, a.props.children)).return = r, r = o;
break e;
}
} else if (f.elementType === p || "object" == typeof p && null !== p && p.$$typeof === I && fr(p) === f.type) {
n(r, f.sibling), (o = i(f, a.props)).ref = ur(r, f, a), o.return = r, r = o;
break e;
}
n(r, f);
break;
}
t(r, f), f = f.sibling;
}
a.type === c ? ((o = vs(a.props.children, r.mode, u, a.key)).return = r, r = o) : ((u = Ss(a.type, a.key, a.props, null, r.mode, u)).ref = ur(r, o, a), 
u.return = r, r = u);
}
return d(r);

case l:
e: {
for (f = a.key; null !== o; ) {
if (o.key === f) {
if (4 === o.tag && o.stateNode.containerInfo === a.containerInfo && o.stateNode.implementation === a.implementation) {
n(r, o.sibling), (o = i(o, a.children || [])).return = r, r = o;
break e;
}
n(r, o);
break;
}
t(r, o), o = o.sibling;
}
(o = Ps(a, r.mode, u)).return = r, r = o;
}
return d(r);

case I:
return e(r, o, (f = a._init)(a._payload), u);
}
if (w(a)) return _(r, o, a, u);
if (S(a)) return b(r, o, a, u);
pr(r, a);
}
return "string" == typeof a && "" !== a || "number" == typeof a ? (a = "" + a, null !== o && 6 === o.tag ? (n(r, o.sibling), 
(o = i(o, a)).return = r, r = o) : (n(r, o), (o = Es(a, r.mode, u)).return = r, 
r = o), d(r)) : n(r, o);
};
}
var mr = hr(!0), gr = hr(!1), yr = {}, Ir = st(yr), _r = st(yr), br = st(yr);
function Sr(e) {
if (e === yr) throw Error(o(174));
return e;
}
function vr(e, t) {
ct(br, t), ct(_r, e), ct(Ir, yr), e = R(t), lt(Ir), ct(Ir, e);
}
function Tr() {
lt(Ir), lt(_r), lt(br);
}
function Er(e) {
var t = Sr(br.current), n = Sr(Ir.current);
n !== (t = x(n, e.type, t)) && (ct(_r, e), ct(Ir, t));
}
function Pr(e) {
_r.current === e && (lt(Ir), lt(_r));
}
var Or = st(0);
function Cr(e) {
for (var t = e; null !== t; ) {
if (13 === t.tag) {
var n = t.memoizedState;
if (null !== n && (null === (n = n.dehydrated) || De(n) || Fe(n))) return t;
} else if (19 === t.tag && void 0 !== t.memoizedProps.revealOrder) {
if (0 != (128 & t.flags)) return t;
} else if (null !== t.child) {
t.child.return = t, t = t.child;
continue;
}
if (t === e) break;
for (;null === t.sibling; ) {
if (null === t.return || t.return === e) return null;
t = t.return;
}
t.sibling.return = t.return, t = t.sibling;
}
return null;
}
var Nr = [];
function Ar() {
for (var e = 0; e < Nr.length; e++) {
var t = Nr[e];
Y ? t._workInProgressVersionPrimary = null : t._workInProgressVersionSecondary = null;
}
Nr.length = 0;
}
var Lr = a.ReactCurrentDispatcher, wr = a.ReactCurrentBatchConfig, kr = 0, Rr = null, xr = null, Br = null, Dr = !1, Fr = !1, Mr = 0, Ur = 0;
function Hr() {
throw Error(o(321));
}
function Vr(e, t) {
if (null === t) return !1;
for (var n = 0; n < t.length && n < e.length; n++) if (!Xt(e[n], t[n])) return !1;
return !0;
}
function Jr(e, t, n, r, i, a) {
if (kr = a, Rr = t, t.memoizedState = null, t.updateQueue = null, t.lanes = 0, Lr.current = null === e || null === e.memoizedState ? Pi : Oi, 
e = n(r, i), Fr) {
a = 0;
do {
if (Fr = !1, Mr = 0, 25 <= a) throw Error(o(301));
a += 1, Br = xr = null, t.updateQueue = null, Lr.current = Ci, e = n(r, i);
} while (Fr);
}
if (Lr.current = Ei, t = null !== xr && null !== xr.next, kr = 0, Br = xr = Rr = null, 
Dr = !1, t) throw Error(o(300));
return e;
}
function Gr() {
var e = 0 !== Mr;
return Mr = 0, e;
}
function zr() {
var e = {
memoizedState: null,
baseState: null,
baseQueue: null,
queue: null,
next: null
};
return null === Br ? Rr.memoizedState = Br = e : Br = Br.next = e, Br;
}
function jr() {
if (null === xr) {
var e = Rr.alternate;
e = null !== e ? e.memoizedState : null;
} else e = xr.next;
var t = null === Br ? Rr.memoizedState : Br.next;
if (null !== t) Br = t, xr = e; else {
if (null === e) throw Error(o(310));
e = {
memoizedState: (xr = e).memoizedState,
baseState: xr.baseState,
baseQueue: xr.baseQueue,
queue: xr.queue,
next: null
}, null === Br ? Rr.memoizedState = Br = e : Br = Br.next = e;
}
return Br;
}
function qr(e, t) {
return "function" == typeof t ? t(e) : t;
}
function Yr(e) {
var t = jr(), n = t.queue;
if (null === n) throw Error(o(311));
n.lastRenderedReducer = e;
var r = xr, i = r.baseQueue, a = n.pending;
if (null !== a) {
if (null !== i) {
var s = i.next;
i.next = a.next, a.next = s;
}
r.baseQueue = i = a, n.pending = null;
}
if (null !== i) {
a = i.next, r = r.baseState;
var l = s = null, c = null, d = a;
do {
var u = d.lane;
if ((kr & u) === u) null !== c && (c = c.next = {
lane: 0,
action: d.action,
hasEagerState: d.hasEagerState,
eagerState: d.eagerState,
next: null
}), r = d.hasEagerState ? d.eagerState : e(r, d.action); else {
var p = {
lane: u,
action: d.action,
hasEagerState: d.hasEagerState,
eagerState: d.eagerState,
next: null
};
null === c ? (l = c = p, s = r) : c = c.next = p, Rr.lanes |= u, _a |= u;
}
d = d.next;
} while (null !== d && d !== a);
null === c ? s = r : c.next = l, Xt(r, t.memoizedState) || (Mi = !0), t.memoizedState = r, 
t.baseState = s, t.baseQueue = c, n.lastRenderedState = r;
}
if (null !== (e = n.interleaved)) {
i = e;
do {
a = i.lane, Rr.lanes |= a, _a |= a, i = i.next;
} while (i !== e);
} else null === i && (n.lanes = 0);
return [ t.memoizedState, n.dispatch ];
}
function Wr(e) {
var t = jr(), n = t.queue;
if (null === n) throw Error(o(311));
n.lastRenderedReducer = e;
var r = n.dispatch, i = n.pending, a = t.memoizedState;
if (null !== i) {
n.pending = null;
var s = i = i.next;
do {
a = e(a, s.action), s = s.next;
} while (s !== i);
Xt(a, t.memoizedState) || (Mi = !0), t.memoizedState = a, null === t.baseQueue && (t.baseState = a), 
n.lastRenderedState = a;
}
return [ a, r ];
}
function Kr() {}
function Xr(e, t) {
var n = Rr, r = jr(), i = t(), a = !Xt(r.memoizedState, i);
if (a && (r.memoizedState = i, Mi = !0), r = r.queue, li(Zr.bind(null, n, r, e), [ e ]), 
r.getSnapshot !== t || a || null !== Br && 1 & Br.memoizedState.tag) {
if (n.flags |= 2048, ri(9, $r.bind(null, n, r, i, t), void 0, null), null === pa) throw Error(o(349));
0 != (30 & kr) || Qr(n, t, i);
}
return i;
}
function Qr(e, t, n) {
e.flags |= 16384, e = {
getSnapshot: t,
value: n
}, null === (t = Rr.updateQueue) ? (t = {
lastEffect: null,
stores: null
}, Rr.updateQueue = t, t.stores = [ e ]) : null === (n = t.stores) ? t.stores = [ e ] : n.push(e);
}
function $r(e, t, n, r) {
t.value = n, t.getSnapshot = r, ei(t) && ti(e);
}
function Zr(e, t, n) {
return n((function() {
ei(t) && ti(e);
}));
}
function ei(e) {
var t = e.getSnapshot;
e = e.value;
try {
var n = t();
return !Xt(e, n);
} catch (e) {
return !0;
}
}
function ti(e) {
var t = Wn(e, 1);
null !== t && Va(t, e, 1, -1);
}
function ni(e) {
var t = zr();
return "function" == typeof e && (e = e()), t.memoizedState = t.baseState = e, e = {
pending: null,
interleaved: null,
lanes: 0,
dispatch: null,
lastRenderedReducer: qr,
lastRenderedState: e
}, t.queue = e, e = e.dispatch = bi.bind(null, Rr, e), [ t.memoizedState, e ];
}
function ri(e, t, n, r) {
return e = {
tag: e,
create: t,
destroy: n,
deps: r,
next: null
}, null === (t = Rr.updateQueue) ? (t = {
lastEffect: null,
stores: null
}, Rr.updateQueue = t, t.lastEffect = e.next = e) : null === (n = t.lastEffect) ? t.lastEffect = e.next = e : (r = n.next, 
n.next = e, e.next = r, t.lastEffect = e), e;
}
function ii() {
return jr().memoizedState;
}
function oi(e, t, n, r) {
var i = zr();
Rr.flags |= e, i.memoizedState = ri(1 | t, n, void 0, void 0 === r ? null : r);
}
function ai(e, t, n, r) {
var i = jr();
r = void 0 === r ? null : r;
var o = void 0;
if (null !== xr) {
var a = xr.memoizedState;
if (o = a.destroy, null !== r && Vr(r, a.deps)) return void (i.memoizedState = ri(t, n, o, r));
}
Rr.flags |= e, i.memoizedState = ri(1 | t, n, o, r);
}
function si(e, t) {
return oi(8390656, 8, e, t);
}
function li(e, t) {
return ai(2048, 8, e, t);
}
function ci(e, t) {
return ai(4, 2, e, t);
}
function di(e, t) {
return ai(4, 4, e, t);
}
function ui(e, t) {
return "function" == typeof t ? (e = e(), t(e), function() {
t(null);
}) : null != t ? (e = e(), t.current = e, function() {
t.current = null;
}) : void 0;
}
function pi(e, t, n) {
return n = null != n ? n.concat([ e ]) : null, ai(4, 4, ui.bind(null, t, e), n);
}
function fi() {}
function hi(e, t) {
var n = jr();
t = void 0 === t ? null : t;
var r = n.memoizedState;
return null !== r && null !== t && Vr(t, r[1]) ? r[0] : (n.memoizedState = [ e, t ], 
e);
}
function mi(e, t) {
var n = jr();
t = void 0 === t ? null : t;
var r = n.memoizedState;
return null !== r && null !== t && Vr(t, r[1]) ? r[0] : (e = e(), n.memoizedState = [ e, t ], 
e);
}
function gi(e, t, n) {
return 0 == (21 & kr) ? (e.baseState && (e.baseState = !1, Mi = !0), e.memoizedState = n) : (Xt(n, t) || (n = wt(), 
Rr.lanes |= n, _a |= n, e.baseState = !0), t);
}
function yi(e, t) {
var n = Dt;
Dt = 0 !== n && 4 > n ? n : 4, e(!0);
var r = wr.transition;
wr.transition = {};
try {
e(!1), t();
} finally {
Dt = n, wr.transition = r;
}
}
function Ii() {
return jr().memoizedState;
}
function _i(e, t, n) {
var r = Ha(e);
if (n = {
lane: r,
action: n,
hasEagerState: !1,
eagerState: null,
next: null
}, Si(e)) vi(t, n); else if (null !== (n = Yn(e, t, n, r))) {
Va(n, e, r, Ua()), Ti(n, t, r);
}
}
function bi(e, t, n) {
var r = Ha(e), i = {
lane: r,
action: n,
hasEagerState: !1,
eagerState: null,
next: null
};
if (Si(e)) vi(t, i); else {
var o = e.alternate;
if (0 === e.lanes && (null === o || 0 === o.lanes) && null !== (o = t.lastRenderedReducer)) try {
var a = t.lastRenderedState, s = o(a, n);
if (i.hasEagerState = !0, i.eagerState = s, Xt(s, a)) {
var l = t.interleaved;
return null === l ? (i.next = i, qn(t)) : (i.next = l.next, l.next = i), void (t.interleaved = i);
}
} catch (e) {}
null !== (n = Yn(e, t, i, r)) && (Va(n, e, r, i = Ua()), Ti(n, t, r));
}
}
function Si(e) {
var t = e.alternate;
return e === Rr || null !== t && t === Rr;
}
function vi(e, t) {
Fr = Dr = !0;
var n = e.pending;
null === n ? t.next = t : (t.next = n.next, n.next = t), e.pending = t;
}
function Ti(e, t, n) {
if (0 != (4194240 & n)) {
var r = t.lanes;
n |= r &= e.pendingLanes, t.lanes = n, Bt(e, n);
}
}
var Ei = {
readContext: zn,
useCallback: Hr,
useContext: Hr,
useEffect: Hr,
useImperativeHandle: Hr,
useInsertionEffect: Hr,
useLayoutEffect: Hr,
useMemo: Hr,
useReducer: Hr,
useRef: Hr,
useState: Hr,
useDebugValue: Hr,
useDeferredValue: Hr,
useTransition: Hr,
useMutableSource: Hr,
useSyncExternalStore: Hr,
useId: Hr,
unstable_isNewReconciler: !1
}, Pi = {
readContext: zn,
useCallback: function(e, t) {
return zr().memoizedState = [ e, void 0 === t ? null : t ], e;
},
useContext: zn,
useEffect: si,
useImperativeHandle: function(e, t, n) {
return n = null != n ? n.concat([ e ]) : null, oi(4194308, 4, ui.bind(null, t, e), n);
},
useLayoutEffect: function(e, t) {
return oi(4194308, 4, e, t);
},
useInsertionEffect: function(e, t) {
return oi(4, 2, e, t);
},
useMemo: function(e, t) {
var n = zr();
return t = void 0 === t ? null : t, e = e(), n.memoizedState = [ e, t ], e;
},
useReducer: function(e, t, n) {
var r = zr();
return t = void 0 !== n ? n(t) : t, r.memoizedState = r.baseState = t, e = {
pending: null,
interleaved: null,
lanes: 0,
dispatch: null,
lastRenderedReducer: e,
lastRenderedState: t
}, r.queue = e, e = e.dispatch = _i.bind(null, Rr, e), [ r.memoizedState, e ];
},
useRef: function(e) {
return e = {
current: e
}, zr().memoizedState = e;
},
useState: ni,
useDebugValue: fi,
useDeferredValue: function(e) {
return zr().memoizedState = e;
},
useTransition: function() {
var e = ni(!1), t = e[0];
return e = yi.bind(null, e[1]), zr().memoizedState = e, [ t, e ];
},
useMutableSource: function() {},
useSyncExternalStore: function(e, t, n) {
var r = Rr, i = zr();
if (_n) {
if (void 0 === n) throw Error(o(407));
n = n();
} else {
if (n = t(), null === pa) throw Error(o(349));
0 != (30 & kr) || Qr(r, t, n);
}
i.memoizedState = n;
var a = {
value: n,
getSnapshot: t
};
return i.queue = a, si(Zr.bind(null, r, a, e), [ e ]), r.flags |= 2048, ri(9, $r.bind(null, r, a, n, t), void 0, null), 
n;
},
useId: function() {
var e = zr(), t = pa.identifierPrefix;
if (_n) {
var n = pn;
t = ":" + t + "R" + (n = (un & ~(1 << 32 - St(un) - 1)).toString(32) + n), 0 < (n = Mr++) && (t += "H" + n.toString(32)), 
t += ":";
} else t = ":" + t + "r" + (n = Ur++).toString(32) + ":";
return e.memoizedState = t;
},
unstable_isNewReconciler: !1
}, Oi = {
readContext: zn,
useCallback: hi,
useContext: zn,
useEffect: li,
useImperativeHandle: pi,
useInsertionEffect: ci,
useLayoutEffect: di,
useMemo: mi,
useReducer: Yr,
useRef: ii,
useState: function() {
return Yr(qr);
},
useDebugValue: fi,
useDeferredValue: function(e) {
return gi(jr(), xr.memoizedState, e);
},
useTransition: function() {
return [ Yr(qr)[0], jr().memoizedState ];
},
useMutableSource: Kr,
useSyncExternalStore: Xr,
useId: Ii,
unstable_isNewReconciler: !1
}, Ci = {
readContext: zn,
useCallback: hi,
useContext: zn,
useEffect: li,
useImperativeHandle: pi,
useInsertionEffect: ci,
useLayoutEffect: di,
useMemo: mi,
useReducer: Wr,
useRef: ii,
useState: function() {
return Wr(qr);
},
useDebugValue: fi,
useDeferredValue: function(e) {
var t = jr();
return null === xr ? t.memoizedState = e : gi(t, xr.memoizedState, e);
},
useTransition: function() {
return [ Wr(qr)[0], jr().memoizedState ];
},
useMutableSource: Kr,
useSyncExternalStore: Xr,
useId: Ii,
unstable_isNewReconciler: !1
};
function Ni(e, t) {
try {
var n = "", r = t;
do {
n += Rn(r), r = r.return;
} while (r);
var i = n;
} catch (e) {
i = "\nError generating stack: " + e.message + "\n" + e.stack;
}
return {
value: e,
source: t,
stack: i,
digest: null
};
}
function Ai(e, t, n) {
return {
value: e,
source: null,
stack: null != n ? n : null,
digest: null != t ? t : null
};
}
function Li(e, t) {
try {
console.error(t.value);
} catch (e) {
setTimeout((function() {
throw e;
}));
}
}
var wi = "function" == typeof WeakMap ? WeakMap : Map;
function ki(e, t, n) {
(n = $n(-1, n)).tag = 3, n.payload = {
element: null
};
var r = t.value;
return n.callback = function() {
Aa || (Aa = !0, La = r), Li(0, t);
}, n;
}
function Ri(e, t, n) {
(n = $n(-1, n)).tag = 3;
var r = e.type.getDerivedStateFromError;
if ("function" == typeof r) {
var i = t.value;
n.payload = function() {
return r(i);
}, n.callback = function() {
Li(0, t);
};
}
var o = e.stateNode;
return null !== o && "function" == typeof o.componentDidCatch && (n.callback = function() {
Li(0, t), "function" != typeof r && (null === wa ? wa = new Set([ this ]) : wa.add(this));
var e = t.stack;
this.componentDidCatch(t.value, {
componentStack: null !== e ? e : ""
});
}), n;
}
function xi(e, t, n) {
var r = e.pingCache;
if (null === r) {
r = e.pingCache = new wi;
var i = new Set;
r.set(t, i);
} else void 0 === (i = r.get(t)) && (i = new Set, r.set(t, i));
i.has(n) || (i.add(n), e = us.bind(null, e, t, n), t.then(e, e));
}
function Bi(e) {
do {
var t;
if ((t = 13 === e.tag) && (t = null === (t = e.memoizedState) || null !== t.dehydrated), 
t) return e;
e = e.return;
} while (null !== e);
return null;
}
function Di(e, t, n, r, i) {
return 0 == (1 & e.mode) ? (e === t ? e.flags |= 65536 : (e.flags |= 128, n.flags |= 131072, 
n.flags &= -52805, 1 === n.tag && (null === n.alternate ? n.tag = 17 : ((t = $n(-1, 1)).tag = 2, 
Zn(n, t, 1))), n.lanes |= 1), e) : (e.flags |= 65536, e.lanes = i, e);
}
var Fi = a.ReactCurrentOwner, Mi = !1;
function Ui(e, t, n, r) {
t.child = null === e ? gr(t, null, n, r) : mr(t, e.child, n, r);
}
function Hi(e, t, n, r, i) {
n = n.render;
var o = t.ref;
return Gn(t, i), r = Jr(e, t, n, r, o, i), n = Gr(), null === e || Mi ? (_n && n && mn(t), 
t.flags |= 1, Ui(e, t, r, i), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -2053, 
e.lanes &= ~i, uo(e, t, i));
}
function Vi(e, t, n, r, i) {
if (null === e) {
var o = n.type;
return "function" != typeof o || Is(o) || void 0 !== o.defaultProps || null !== n.compare || void 0 !== n.defaultProps ? ((e = Ss(n.type, null, r, t, t.mode, i)).ref = t.ref, 
e.return = t, t.child = e) : (t.tag = 15, t.type = o, Ji(e, t, o, r, i));
}
if (o = e.child, 0 == (e.lanes & i)) {
var a = o.memoizedProps;
if ((n = null !== (n = n.compare) ? n : kn)(a, r) && e.ref === t.ref) return uo(e, t, i);
}
return t.flags |= 1, (e = bs(o, r)).ref = t.ref, e.return = t, t.child = e;
}
function Ji(e, t, n, r, i) {
if (null !== e) {
var o = e.memoizedProps;
if (kn(o, r) && e.ref === t.ref) {
if (Mi = !1, t.pendingProps = r = o, 0 == (e.lanes & i)) return t.lanes = e.lanes, 
uo(e, t, i);
0 != (131072 & e.flags) && (Mi = !0);
}
}
return ji(e, t, n, r, i);
}
function Gi(e, t, n) {
var r = t.pendingProps, i = r.children, o = null !== e ? e.memoizedState : null;
if ("hidden" === r.mode) if (0 == (1 & t.mode)) t.memoizedState = {
baseLanes: 0,
cachePool: null,
transitions: null
}, ct(ga, ma), ma |= n; else {
if (0 == (1073741824 & n)) return e = null !== o ? o.baseLanes | n : n, t.lanes = t.childLanes = 1073741824, 
t.memoizedState = {
baseLanes: e,
cachePool: null,
transitions: null
}, t.updateQueue = null, ct(ga, ma), ma |= e, null;
t.memoizedState = {
baseLanes: 0,
cachePool: null,
transitions: null
}, r = null !== o ? o.baseLanes : n, ct(ga, ma), ma |= r;
} else null !== o ? (r = o.baseLanes | n, t.memoizedState = null) : r = n, ct(ga, ma), 
ma |= r;
return Ui(e, t, i, n), t.child;
}
function zi(e, t) {
var n = t.ref;
(null === e && null !== n || null !== e && e.ref !== n) && (t.flags |= 512, t.flags |= 2097152);
}
function ji(e, t, n, r, i) {
var o = mt(n) ? ft : ut.current;
return o = ht(t, o), Gn(t, i), n = Jr(e, t, n, r, o, i), r = Gr(), null === e || Mi ? (_n && r && mn(t), 
t.flags |= 1, Ui(e, t, n, i), t.child) : (t.updateQueue = e.updateQueue, t.flags &= -2053, 
e.lanes &= ~i, uo(e, t, i));
}
function qi(e, t, n, r, i) {
if (mt(n)) {
var o = !0;
_t(t);
} else o = !1;
if (Gn(t, i), null === t.stateNode) co(e, t), lr(t, n, r), dr(t, n, r, i), r = !0; else if (null === e) {
var a = t.stateNode, s = t.memoizedProps;
a.props = s;
var l = a.context, c = n.contextType;
"object" == typeof c && null !== c ? c = zn(c) : c = ht(t, c = mt(n) ? ft : ut.current);
var d = n.getDerivedStateFromProps, u = "function" == typeof d || "function" == typeof a.getSnapshotBeforeUpdate;
u || "function" != typeof a.UNSAFE_componentWillReceiveProps && "function" != typeof a.componentWillReceiveProps || (s !== r || l !== c) && cr(t, a, r, c), 
Kn = !1;
var p = t.memoizedState;
a.state = p, nr(t, r, a, i), l = t.memoizedState, s !== r || p !== l || pt.current || Kn ? ("function" == typeof d && (or(t, n, d, r), 
l = t.memoizedState), (s = Kn || sr(t, n, s, r, p, l, c)) ? (u || "function" != typeof a.UNSAFE_componentWillMount && "function" != typeof a.componentWillMount || ("function" == typeof a.componentWillMount && a.componentWillMount(), 
"function" == typeof a.UNSAFE_componentWillMount && a.UNSAFE_componentWillMount()), 
"function" == typeof a.componentDidMount && (t.flags |= 4194308)) : ("function" == typeof a.componentDidMount && (t.flags |= 4194308), 
t.memoizedProps = r, t.memoizedState = l), a.props = r, a.state = l, a.context = c, 
r = s) : ("function" == typeof a.componentDidMount && (t.flags |= 4194308), r = !1);
} else {
a = t.stateNode, Qn(e, t), s = t.memoizedProps, c = t.type === t.elementType ? s : xn(t.type, s), 
a.props = c, u = t.pendingProps, p = a.context, "object" == typeof (l = n.contextType) && null !== l ? l = zn(l) : l = ht(t, l = mt(n) ? ft : ut.current);
var f = n.getDerivedStateFromProps;
(d = "function" == typeof f || "function" == typeof a.getSnapshotBeforeUpdate) || "function" != typeof a.UNSAFE_componentWillReceiveProps && "function" != typeof a.componentWillReceiveProps || (s !== u || p !== l) && cr(t, a, r, l), 
Kn = !1, p = t.memoizedState, a.state = p, nr(t, r, a, i);
var h = t.memoizedState;
s !== u || p !== h || pt.current || Kn ? ("function" == typeof f && (or(t, n, f, r), 
h = t.memoizedState), (c = Kn || sr(t, n, c, r, p, h, l) || !1) ? (d || "function" != typeof a.UNSAFE_componentWillUpdate && "function" != typeof a.componentWillUpdate || ("function" == typeof a.componentWillUpdate && a.componentWillUpdate(r, h, l), 
"function" == typeof a.UNSAFE_componentWillUpdate && a.UNSAFE_componentWillUpdate(r, h, l)), 
"function" == typeof a.componentDidUpdate && (t.flags |= 4), "function" == typeof a.getSnapshotBeforeUpdate && (t.flags |= 1024)) : ("function" != typeof a.componentDidUpdate || s === e.memoizedProps && p === e.memoizedState || (t.flags |= 4), 
"function" != typeof a.getSnapshotBeforeUpdate || s === e.memoizedProps && p === e.memoizedState || (t.flags |= 1024), 
t.memoizedProps = r, t.memoizedState = h), a.props = r, a.state = h, a.context = l, 
r = c) : ("function" != typeof a.componentDidUpdate || s === e.memoizedProps && p === e.memoizedState || (t.flags |= 4), 
"function" != typeof a.getSnapshotBeforeUpdate || s === e.memoizedProps && p === e.memoizedState || (t.flags |= 1024), 
r = !1);
}
return Yi(e, t, n, r, o, i);
}
function Yi(e, t, n, r, i, o) {
zi(e, t);
var a = 0 != (128 & t.flags);
if (!r && !a) return i && bt(t, n, !1), uo(e, t, o);
r = t.stateNode, Fi.current = t;
var s = a && "function" != typeof n.getDerivedStateFromError ? null : r.render();
return t.flags |= 1, null !== e && a ? (t.child = mr(t, e.child, null, o), t.child = mr(t, null, s, o)) : Ui(e, t, s, o), 
t.memoizedState = r.state, i && bt(t, n, !0), t.child;
}
function Wi(e) {
var t = e.stateNode;
t.pendingContext ? yt(0, t.pendingContext, t.pendingContext !== t.context) : t.context && yt(0, t.context, !1), 
vr(e, t.containerInfo);
}
function Ki(e, t, n, r, i) {
return An(), Ln(i), t.flags |= 256, Ui(e, t, n, r), t.child;
}
var Xi, Qi, $i, Zi, eo = {
dehydrated: null,
treeContext: null,
retryLane: 0
};
function to(e) {
return {
baseLanes: e,
cachePool: null,
transitions: null
};
}
function no(e, t, n) {
var r, i = t.pendingProps, o = Or.current, a = !1, s = 0 != (128 & t.flags);
if ((r = s) || (r = (null === e || null !== e.memoizedState) && 0 != (2 & o)), r ? (a = !0, 
t.flags &= -129) : null !== e && null === e.memoizedState || (o |= 1), ct(Or, 1 & o), 
null === e) return Pn(t), null !== (e = t.memoizedState) && null !== (e = e.dehydrated) ? (0 == (1 & t.mode) ? t.lanes = 1 : Fe(e) ? t.lanes = 8 : t.lanes = 1073741824, 
null) : (s = i.children, e = i.fallback, a ? (i = t.mode, a = t.child, s = {
mode: "hidden",
children: s
}, 0 == (1 & i) && null !== a ? (a.childLanes = 0, a.pendingProps = s) : a = Ts(s, i, 0, null), 
e = vs(e, i, n, null), a.return = t, e.return = t, a.sibling = e, t.child = a, t.child.memoizedState = to(n), 
t.memoizedState = eo, e) : ro(t, s));
if (null !== (o = e.memoizedState) && null !== (r = o.dehydrated)) return oo(e, t, s, i, r, o, n);
if (a) {
a = i.fallback, s = t.mode, r = (o = e.child).sibling;
var l = {
mode: "hidden",
children: i.children
};
return 0 == (1 & s) && t.child !== o ? ((i = t.child).childLanes = 0, i.pendingProps = l, 
t.deletions = null) : (i = bs(o, l)).subtreeFlags = 14680064 & o.subtreeFlags, null !== r ? a = bs(r, a) : (a = vs(a, s, n, null)).flags |= 2, 
a.return = t, i.return = t, i.sibling = a, t.child = i, i = a, a = t.child, s = null === (s = e.child.memoizedState) ? to(n) : {
baseLanes: s.baseLanes | n,
cachePool: null,
transitions: s.transitions
}, a.memoizedState = s, a.childLanes = e.childLanes & ~n, t.memoizedState = eo, 
i;
}
return e = (a = e.child).sibling, i = bs(a, {
mode: "visible",
children: i.children
}), 0 == (1 & t.mode) && (i.lanes = n), i.return = t, i.sibling = null, null !== e && (null === (n = t.deletions) ? (t.deletions = [ e ], 
t.flags |= 16) : n.push(e)), t.child = i, t.memoizedState = null, i;
}
function ro(e, t) {
return (t = Ts({
mode: "visible",
children: t
}, e.mode, 0, null)).return = e, e.child = t;
}
function io(e, t, n, r) {
return null !== r && Ln(r), mr(t, e.child, null, n), (e = ro(t, t.pendingProps.children)).flags |= 2, 
t.memoizedState = null, e;
}
function oo(e, t, n, r, i, a, s) {
if (n) return 256 & t.flags ? (t.flags &= -257, io(e, t, s, r = Ai(Error(o(422))))) : null !== t.memoizedState ? (t.child = e.child, 
t.flags |= 128, null) : (a = r.fallback, i = t.mode, r = Ts({
mode: "visible",
children: r.children
}, i, 0, null), (a = vs(a, i, s, null)).flags |= 2, r.return = t, a.return = t, 
r.sibling = a, t.child = r, 0 != (1 & t.mode) && mr(t, e.child, null, s), t.child.memoizedState = to(s), 
t.memoizedState = eo, a);
if (0 == (1 & t.mode)) return io(e, t, s, null);
if (Fe(i)) return r = Me(i).digest, io(e, t, s, r = Ai(a = Error(o(419)), r, void 0));
if (n = 0 != (s & e.childLanes), Mi || n) {
if (null !== (r = pa)) {
switch (s & -s) {
case 4:
i = 2;
break;

case 16:
i = 8;
break;

case 64:
case 128:
case 256:
case 512:
case 1024:
case 2048:
case 4096:
case 8192:
case 16384:
case 32768:
case 65536:
case 131072:
case 262144:
case 524288:
case 1048576:
case 2097152:
case 4194304:
case 8388608:
case 16777216:
case 33554432:
case 67108864:
i = 32;
break;

case 536870912:
i = 268435456;
break;

default:
i = 0;
}
0 !== (i = 0 != (i & (r.suspendedLanes | s)) ? 0 : i) && i !== a.retryLane && (a.retryLane = i, 
Wn(e, i), Va(r, e, i, -1));
}
return es(), io(e, t, s, r = Ai(Error(o(421))));
}
return De(i) ? (t.flags |= 128, t.child = e.child, t = fs.bind(null, e), Ue(i, t), 
null) : (e = a.treeContext, X && (In = Ge(i), yn = t, _n = !0, Sn = null, bn = !1, 
null !== e && (ln[cn++] = un, ln[cn++] = pn, ln[cn++] = dn, un = e.id, pn = e.overflow, 
dn = t)), (t = ro(t, r.children)).flags |= 4096, t);
}
function ao(e, t, n) {
e.lanes |= t;
var r = e.alternate;
null !== r && (r.lanes |= t), Jn(e.return, t, n);
}
function so(e, t, n, r, i) {
var o = e.memoizedState;
null === o ? e.memoizedState = {
isBackwards: t,
rendering: null,
renderingStartTime: 0,
last: r,
tail: n,
tailMode: i
} : (o.isBackwards = t, o.rendering = null, o.renderingStartTime = 0, o.last = r, 
o.tail = n, o.tailMode = i);
}
function lo(e, t, n) {
var r = t.pendingProps, i = r.revealOrder, o = r.tail;
if (Ui(e, t, r.children, n), 0 != (2 & (r = Or.current))) r = 1 & r | 2, t.flags |= 128; else {
if (null !== e && 0 != (128 & e.flags)) e: for (e = t.child; null !== e; ) {
if (13 === e.tag) null !== e.memoizedState && ao(e, n, t); else if (19 === e.tag) ao(e, n, t); else if (null !== e.child) {
e.child.return = e, e = e.child;
continue;
}
if (e === t) break e;
for (;null === e.sibling; ) {
if (null === e.return || e.return === t) break e;
e = e.return;
}
e.sibling.return = e.return, e = e.sibling;
}
r &= 1;
}
if (ct(Or, r), 0 == (1 & t.mode)) t.memoizedState = null; else switch (i) {
case "forwards":
for (n = t.child, i = null; null !== n; ) null !== (e = n.alternate) && null === Cr(e) && (i = n), 
n = n.sibling;
null === (n = i) ? (i = t.child, t.child = null) : (i = n.sibling, n.sibling = null), 
so(t, !1, i, n, o);
break;

case "backwards":
for (n = null, i = t.child, t.child = null; null !== i; ) {
if (null !== (e = i.alternate) && null === Cr(e)) {
t.child = i;
break;
}
e = i.sibling, i.sibling = n, n = i, i = e;
}
so(t, !0, n, null, o);
break;

case "together":
so(t, !1, null, null, void 0);
break;

default:
t.memoizedState = null;
}
return t.child;
}
function co(e, t) {
0 == (1 & t.mode) && null !== e && (e.alternate = null, t.alternate = null, t.flags |= 2);
}
function uo(e, t, n) {
if (null !== e && (t.dependencies = e.dependencies), _a |= t.lanes, 0 == (n & t.childLanes)) return null;
if (null !== e && t.child !== e.child) throw Error(o(153));
if (null !== t.child) {
for (n = bs(e = t.child, e.pendingProps), t.child = n, n.return = t; null !== e.sibling; ) e = e.sibling, 
(n = n.sibling = bs(e, e.pendingProps)).return = t;
n.sibling = null;
}
return t.child;
}
function po(e, t, n) {
switch (t.tag) {
case 3:
Wi(t), An();
break;

case 5:
Er(t);
break;

case 1:
mt(t.type) && _t(t);
break;

case 4:
vr(t, t.stateNode.containerInfo);
break;

case 10:
Hn(0, t.type._context, t.memoizedProps.value);
break;

case 13:
var r = t.memoizedState;
if (null !== r) return null !== r.dehydrated ? (ct(Or, 1 & Or.current), t.flags |= 128, 
null) : 0 != (n & t.child.childLanes) ? no(e, t, n) : (ct(Or, 1 & Or.current), null !== (e = uo(e, t, n)) ? e.sibling : null);
ct(Or, 1 & Or.current);
break;

case 19:
if (r = 0 != (n & t.childLanes), 0 != (128 & e.flags)) {
if (r) return lo(e, t, n);
t.flags |= 128;
}
var i = t.memoizedState;
if (null !== i && (i.rendering = null, i.tail = null, i.lastEffect = null), ct(Or, Or.current), 
r) break;
return null;

case 22:
case 23:
return t.lanes = 0, Gi(e, t, n);
}
return uo(e, t, n);
}
function fo(e) {
e.flags |= 4;
}
function ho(e, t) {
if (null !== e && e.child === t.child) return !0;
if (0 != (16 & t.flags)) return !1;
for (e = t.child; null !== e; ) {
if (0 != (12854 & e.flags) || 0 != (12854 & e.subtreeFlags)) return !1;
e = e.sibling;
}
return !0;
}
if (W) Xi = function(e, t) {
for (var n = t.child; null !== n; ) {
if (5 === n.tag || 6 === n.tag) M(e, n.stateNode); else if (4 !== n.tag && null !== n.child) {
n.child.return = n, n = n.child;
continue;
}
if (n === t) break;
for (;null === n.sibling; ) {
if (null === n.return || n.return === t) return;
n = n.return;
}
n.sibling.return = n.return, n = n.sibling;
}
}, Qi = function() {}, $i = function(e, t, n, r, i) {
if ((e = e.memoizedProps) !== r) {
var o = t.stateNode, a = Sr(Ir.current);
n = V(o, n, e, r, i, a), (t.updateQueue = n) && fo(t);
}
}, Zi = function(e, t, n, r) {
n !== r && fo(t);
}; else if (K) {
Xi = function(e, t, n, r) {
for (var i = t.child; null !== i; ) {
if (5 === i.tag) {
var o = i.stateNode;
n && r && (o = we(o, i.type, i.memoizedProps, i)), M(e, o);
} else if (6 === i.tag) o = i.stateNode, n && r && (o = ke(o, i.memoizedProps, i)), 
M(e, o); else if (4 !== i.tag) if (22 === i.tag && null !== i.memoizedState) null !== (o = i.child) && (o.return = i), 
Xi(e, i, !0, !0); else if (null !== i.child) {
i.child.return = i, i = i.child;
continue;
}
if (i === t) break;
for (;null === i.sibling; ) {
if (null === i.return || i.return === t) return;
i = i.return;
}
i.sibling.return = i.return, i = i.sibling;
}
};
var mo = function(e, t, n, r) {
for (var i = t.child; null !== i; ) {
if (5 === i.tag) {
var o = i.stateNode;
n && r && (o = we(o, i.type, i.memoizedProps, i)), Ne(e, o);
} else if (6 === i.tag) o = i.stateNode, n && r && (o = ke(o, i.memoizedProps, i)), 
Ne(e, o); else if (4 !== i.tag) if (22 === i.tag && null !== i.memoizedState) null !== (o = i.child) && (o.return = i), 
mo(e, i, !0, !0); else if (null !== i.child) {
i.child.return = i, i = i.child;
continue;
}
if (i === t) break;
for (;null === i.sibling; ) {
if (null === i.return || i.return === t) return;
i = i.return;
}
i.sibling.return = i.return, i = i.sibling;
}
};
Qi = function(e, t) {
var n = t.stateNode;
if (!ho(e, t)) {
e = n.containerInfo;
var r = Ce(e);
mo(r, t, !1, !1), n.pendingChildren = r, fo(t), Ae(e, r);
}
}, $i = function(e, t, n, r, i) {
var o = e.stateNode, a = e.memoizedProps;
if ((e = ho(e, t)) && a === r) t.stateNode = o; else {
var s = t.stateNode, l = Sr(Ir.current), c = null;
a !== r && (c = V(s, n, a, r, i, l)), e && null === c ? t.stateNode = o : (o = Oe(o, c, n, a, r, t, e, s), 
U(o, n, r, i, l) && fo(t), t.stateNode = o, e ? fo(t) : Xi(o, t, !1, !1));
}
}, Zi = function(e, t, n, r) {
n !== r ? (e = Sr(br.current), n = Sr(Ir.current), t.stateNode = G(r, e, n, t), 
fo(t)) : t.stateNode = e.stateNode;
};
} else Qi = function() {}, $i = function() {}, Zi = function() {};
function go(e, t) {
if (!_n) switch (e.tailMode) {
case "hidden":
t = e.tail;
for (var n = null; null !== t; ) null !== t.alternate && (n = t), t = t.sibling;
null === n ? e.tail = null : n.sibling = null;
break;

case "collapsed":
n = e.tail;
for (var r = null; null !== n; ) null !== n.alternate && (r = n), n = n.sibling;
null === r ? t || null === e.tail ? e.tail = null : e.tail.sibling = null : r.sibling = null;
}
}
function yo(e) {
var t = null !== e.alternate && e.alternate.child === e.child, n = 0, r = 0;
if (t) for (var i = e.child; null !== i; ) n |= i.lanes | i.childLanes, r |= 14680064 & i.subtreeFlags, 
r |= 14680064 & i.flags, i.return = e, i = i.sibling; else for (i = e.child; null !== i; ) n |= i.lanes | i.childLanes, 
r |= i.subtreeFlags, r |= i.flags, i.return = e, i = i.sibling;
return e.subtreeFlags |= r, e.childLanes = n, t;
}
function Io(e, t, n) {
var r = t.pendingProps;
switch (gn(t), t.tag) {
case 2:
case 16:
case 15:
case 0:
case 11:
case 7:
case 8:
case 12:
case 9:
case 14:
return yo(t), null;

case 1:
case 17:
return mt(t.type) && gt(), yo(t), null;

case 3:
return n = t.stateNode, Tr(), lt(pt), lt(ut), Ar(), n.pendingContext && (n.context = n.pendingContext, 
n.pendingContext = null), null !== e && null !== e.child || (Cn(t) ? fo(t) : null === e || e.memoizedState.isDehydrated && 0 == (256 & t.flags) || (t.flags |= 1024, 
null !== Sn && (ja(Sn), Sn = null))), Qi(e, t), yo(t), null;

case 5:
Pr(t), n = Sr(br.current);
var i = t.type;
if (null !== e && null != t.stateNode) $i(e, t, i, r, n), e.ref !== t.ref && (t.flags |= 512, 
t.flags |= 2097152); else {
if (!r) {
if (null === t.stateNode) throw Error(o(166));
return yo(t), null;
}
if (e = Sr(Ir.current), Cn(t)) {
if (!X) throw Error(o(175));
e = ze(t.stateNode, t.type, t.memoizedProps, n, e, t, !bn), t.updateQueue = e, null !== e && fo(t);
} else {
var a = F(i, r, n, e, t);
Xi(a, t, !1, !1), t.stateNode = a, U(a, i, r, n, e) && fo(t);
}
null !== t.ref && (t.flags |= 512, t.flags |= 2097152);
}
return yo(t), null;

case 6:
if (e && null != t.stateNode) Zi(e, t, e.memoizedProps, r); else {
if ("string" != typeof r && null === t.stateNode) throw Error(o(166));
if (e = Sr(br.current), n = Sr(Ir.current), Cn(t)) {
if (!X) throw Error(o(176));
if (e = t.stateNode, n = t.memoizedProps, (r = je(e, n, t, !bn)) && null !== (i = yn)) switch (i.tag) {
case 3:
Ze(i.stateNode.containerInfo, e, n, 0 != (1 & i.mode));
break;

case 5:
et(i.type, i.memoizedProps, i.stateNode, e, n, 0 != (1 & i.mode));
}
r && fo(t);
} else t.stateNode = G(r, e, n, t);
}
return yo(t), null;

case 13:
if (lt(Or), r = t.memoizedState, null === e || null !== e.memoizedState && null !== e.memoizedState.dehydrated) {
if (_n && null !== In && 0 != (1 & t.mode) && 0 == (128 & t.flags)) Nn(), An(), 
t.flags |= 98560, i = !1; else if (i = Cn(t), null !== r && null !== r.dehydrated) {
if (null === e) {
if (!i) throw Error(o(318));
if (!X) throw Error(o(344));
if (!(i = null !== (i = t.memoizedState) ? i.dehydrated : null)) throw Error(o(317));
qe(i, t);
} else An(), 0 == (128 & t.flags) && (t.memoizedState = null), t.flags |= 4;
yo(t), i = !1;
} else null !== Sn && (ja(Sn), Sn = null), i = !0;
if (!i) return 65536 & t.flags ? t : null;
}
return 0 != (128 & t.flags) ? (t.lanes = n, t) : ((n = null !== r) !== (null !== e && null !== e.memoizedState) && n && (t.child.flags |= 8192, 
0 != (1 & t.mode) && (null === e || 0 != (1 & Or.current) ? 0 === ya && (ya = 3) : es())), 
null !== t.updateQueue && (t.flags |= 4), yo(t), null);

case 4:
return Tr(), Qi(e, t), null === e && $(t.stateNode.containerInfo), yo(t), null;

case 10:
return Vn(t.type._context), yo(t), null;

case 19:
if (lt(Or), null === (i = t.memoizedState)) return yo(t), null;
if (r = 0 != (128 & t.flags), null === (a = i.rendering)) if (r) go(i, !1); else {
if (0 !== ya || null !== e && 0 != (128 & e.flags)) for (e = t.child; null !== e; ) {
if (null !== (a = Cr(e))) {
for (t.flags |= 128, go(i, !1), null !== (e = a.updateQueue) && (t.updateQueue = e, 
t.flags |= 4), t.subtreeFlags = 0, e = n, n = t.child; null !== n; ) i = e, (r = n).flags &= 14680066, 
null === (a = r.alternate) ? (r.childLanes = 0, r.lanes = i, r.child = null, r.subtreeFlags = 0, 
r.memoizedProps = null, r.memoizedState = null, r.updateQueue = null, r.dependencies = null, 
r.stateNode = null) : (r.childLanes = a.childLanes, r.lanes = a.lanes, r.child = a.child, 
r.subtreeFlags = 0, r.deletions = null, r.memoizedProps = a.memoizedProps, r.memoizedState = a.memoizedState, 
r.updateQueue = a.updateQueue, r.type = a.type, i = a.dependencies, r.dependencies = null === i ? null : {
lanes: i.lanes,
firstContext: i.firstContext
}), n = n.sibling;
return ct(Or, 1 & Or.current | 2), t.child;
}
e = e.sibling;
}
null !== i.tail && Jt() > Pa && (t.flags |= 128, r = !0, go(i, !1), t.lanes = 4194304);
} else {
if (!r) if (null !== (e = Cr(a))) {
if (t.flags |= 128, r = !0, null !== (e = e.updateQueue) && (t.updateQueue = e, 
t.flags |= 4), go(i, !0), null === i.tail && "hidden" === i.tailMode && !a.alternate && !_n) return yo(t), 
null;
} else 2 * Jt() - i.renderingStartTime > Pa && 1073741824 !== n && (t.flags |= 128, 
r = !0, go(i, !1), t.lanes = 4194304);
i.isBackwards ? (a.sibling = t.child, t.child = a) : (null !== (e = i.last) ? e.sibling = a : t.child = a, 
i.last = a);
}
return null !== i.tail ? (t = i.tail, i.rendering = t, i.tail = t.sibling, i.renderingStartTime = Jt(), 
t.sibling = null, e = Or.current, ct(Or, r ? 1 & e | 2 : 1 & e), t) : (yo(t), null);

case 22:
case 23:
return Xa(), n = null !== t.memoizedState, null !== e && null !== e.memoizedState !== n && (t.flags |= 8192), 
n && 0 != (1 & t.mode) ? 0 != (1073741824 & ma) && (yo(t), W && 6 & t.subtreeFlags && (t.flags |= 8192)) : yo(t), 
null;

case 24:
case 25:
return null;
}
throw Error(o(156, t.tag));
}
function _o(e, t) {
switch (gn(t), t.tag) {
case 1:
return mt(t.type) && gt(), 65536 & (e = t.flags) ? (t.flags = -65537 & e | 128, 
t) : null;

case 3:
return Tr(), lt(pt), lt(ut), Ar(), 0 != (65536 & (e = t.flags)) && 0 == (128 & e) ? (t.flags = -65537 & e | 128, 
t) : null;

case 5:
return Pr(t), null;

case 13:
if (lt(Or), null !== (e = t.memoizedState) && null !== e.dehydrated) {
if (null === t.alternate) throw Error(o(340));
An();
}
return 65536 & (e = t.flags) ? (t.flags = -65537 & e | 128, t) : null;

case 19:
return lt(Or), null;

case 4:
return Tr(), null;

case 10:
return Vn(t.type._context), null;

case 22:
case 23:
return Xa(), null;

default:
return null;
}
}
var bo = !1, So = !1, vo = "function" == typeof WeakSet ? WeakSet : Set, To = null;
function Eo(e, t) {
var n = e.ref;
if (null !== n) if ("function" == typeof n) try {
n(null);
} catch (n) {
ds(e, t, n);
} else n.current = null;
}
function Po(e, t, n) {
try {
n();
} catch (n) {
ds(e, t, n);
}
}
var Oo = !1;
function Co(e, t) {
for (B(e.containerInfo), To = t; null !== To; ) if (t = (e = To).child, 0 != (1028 & e.subtreeFlags) && null !== t) t.return = e, 
To = t; else for (;null !== To; ) {
e = To;
try {
var n = e.alternate;
if (0 != (1024 & e.flags)) switch (e.tag) {
case 0:
case 11:
case 15:
case 5:
case 6:
case 4:
case 17:
break;

case 1:
if (null !== n) {
var r = n.memoizedProps, i = n.memoizedState, a = e.stateNode, s = a.getSnapshotBeforeUpdate(e.elementType === e.type ? r : xn(e.type, r), i);
a.__reactInternalSnapshotBeforeUpdate = s;
}
break;

case 3:
W && Pe(e.stateNode.containerInfo);
break;

default:
throw Error(o(163));
}
} catch (t) {
ds(e, e.return, t);
}
if (null !== (t = e.sibling)) {
t.return = e.return, To = t;
break;
}
To = e.return;
}
return n = Oo, Oo = !1, n;
}
function No(e, t, n) {
var r = t.updateQueue;
if (null !== (r = null !== r ? r.lastEffect : null)) {
var i = r = r.next;
do {
if ((i.tag & e) === e) {
var o = i.destroy;
i.destroy = void 0, void 0 !== o && Po(t, n, o);
}
i = i.next;
} while (i !== r);
}
}
function Ao(e, t) {
if (null !== (t = null !== (t = t.updateQueue) ? t.lastEffect : null)) {
var n = t = t.next;
do {
if ((n.tag & e) === e) {
var r = n.create;
n.destroy = r();
}
n = n.next;
} while (n !== t);
}
}
function Lo(e) {
var t = e.ref;
if (null !== t) {
var n = e.stateNode;
if (5 === e.tag) e = k(n); else e = n;
"function" == typeof t ? t(e) : t.current = e;
}
}
function wo(e) {
var t = e.alternate;
null !== t && (e.alternate = null, wo(t)), e.child = null, e.deletions = null, e.sibling = null, 
5 === e.tag && (null !== (t = e.stateNode) && ee(t)), e.stateNode = null, e.return = null, 
e.dependencies = null, e.memoizedProps = null, e.memoizedState = null, e.pendingProps = null, 
e.stateNode = null, e.updateQueue = null;
}
function ko(e) {
return 5 === e.tag || 3 === e.tag || 4 === e.tag;
}
function Ro(e) {
e: for (;;) {
for (;null === e.sibling; ) {
if (null === e.return || ko(e.return)) return null;
e = e.return;
}
for (e.sibling.return = e.return, e = e.sibling; 5 !== e.tag && 6 !== e.tag && 18 !== e.tag; ) {
if (2 & e.flags) continue e;
if (null === e.child || 4 === e.tag) continue e;
e.child.return = e, e = e.child;
}
if (!(2 & e.flags)) return e.stateNode;
}
}
function xo(e, t, n) {
var r = e.tag;
if (5 === r || 6 === r) e = e.stateNode, t ? ye(n, e, t) : pe(n, e); else if (4 !== r && null !== (e = e.child)) for (xo(e, t, n), 
e = e.sibling; null !== e; ) xo(e, t, n), e = e.sibling;
}
function Bo(e, t, n) {
var r = e.tag;
if (5 === r || 6 === r) e = e.stateNode, t ? ge(n, e, t) : ue(n, e); else if (4 !== r && null !== (e = e.child)) for (Bo(e, t, n), 
e = e.sibling; null !== e; ) Bo(e, t, n), e = e.sibling;
}
var Do = null, Fo = !1;
function Mo(e, t, n) {
for (n = n.child; null !== n; ) Uo(e, t, n), n = n.sibling;
}
function Uo(e, t, n) {
if (Wt && "function" == typeof Wt.onCommitFiberUnmount) try {
Wt.onCommitFiberUnmount(Yt, n);
} catch (e) {}
switch (n.tag) {
case 5:
So || Eo(n, t);

case 6:
if (W) {
var r = Do, i = Fo;
Do = null, Mo(e, t, n), Fo = i, null !== (Do = r) && (Fo ? _e(Do, n.stateNode) : Ie(Do, n.stateNode));
} else Mo(e, t, n);
break;

case 18:
W && null !== Do && (Fo ? Qe(Do, n.stateNode) : Xe(Do, n.stateNode));
break;

case 4:
W ? (r = Do, i = Fo, Do = n.stateNode.containerInfo, Fo = !0, Mo(e, t, n), Do = r, 
Fo = i) : (K && (r = n.stateNode.containerInfo, i = Ce(r), Le(r, i)), Mo(e, t, n));
break;

case 0:
case 11:
case 14:
case 15:
if (!So && (null !== (r = n.updateQueue) && null !== (r = r.lastEffect))) {
i = r = r.next;
do {
var o = i, a = o.destroy;
o = o.tag, void 0 !== a && (0 != (2 & o) || 0 != (4 & o)) && Po(n, t, a), i = i.next;
} while (i !== r);
}
Mo(e, t, n);
break;

case 1:
if (!So && (Eo(n, t), "function" == typeof (r = n.stateNode).componentWillUnmount)) try {
r.props = n.memoizedProps, r.state = n.memoizedState, r.componentWillUnmount();
} catch (e) {
ds(n, t, e);
}
Mo(e, t, n);
break;

case 21:
Mo(e, t, n);
break;

case 22:
1 & n.mode ? (So = (r = So) || null !== n.memoizedState, Mo(e, t, n), So = r) : Mo(e, t, n);
break;

default:
Mo(e, t, n);
}
}
function Ho(e) {
var t = e.updateQueue;
if (null !== t) {
e.updateQueue = null;
var n = e.stateNode;
null === n && (n = e.stateNode = new vo), t.forEach((function(t) {
var r = hs.bind(null, e, t);
n.has(t) || (n.add(t), t.then(r, r));
}));
}
}
function Vo(e, t) {
var n = t.deletions;
if (null !== n) for (var r = 0; r < n.length; r++) {
var i = n[r];
try {
var a = e, s = t;
if (W) {
var l = s;
e: for (;null !== l; ) {
switch (l.tag) {
case 5:
Do = l.stateNode, Fo = !1;
break e;

case 3:
case 4:
Do = l.stateNode.containerInfo, Fo = !0;
break e;
}
l = l.return;
}
if (null === Do) throw Error(o(160));
Uo(a, s, i), Do = null, Fo = !1;
} else Uo(a, s, i);
var c = i.alternate;
null !== c && (c.return = null), i.return = null;
} catch (e) {
ds(i, t, e);
}
}
if (12854 & t.subtreeFlags) for (t = t.child; null !== t; ) Jo(t, e), t = t.sibling;
}
function Jo(e, t) {
var n = e.alternate, r = e.flags;
switch (e.tag) {
case 0:
case 11:
case 14:
case 15:
if (Vo(t, e), Go(e), 4 & r) {
try {
No(3, e, e.return), Ao(3, e);
} catch (t) {
ds(e, e.return, t);
}
try {
No(5, e, e.return);
} catch (t) {
ds(e, e.return, t);
}
}
break;

case 1:
Vo(t, e), Go(e), 512 & r && null !== n && Eo(n, n.return);
break;

case 5:
if (Vo(t, e), Go(e), 512 & r && null !== n && Eo(n, n.return), W) {
if (32 & e.flags) {
var i = e.stateNode;
try {
be(i);
} catch (t) {
ds(e, e.return, t);
}
}
if (4 & r && null != (i = e.stateNode)) {
var a = e.memoizedProps;
if (n = null !== n ? n.memoizedProps : a, r = e.type, t = e.updateQueue, e.updateQueue = null, 
null !== t) try {
me(i, t, r, n, a, e);
} catch (t) {
ds(e, e.return, t);
}
}
}
break;

case 6:
if (Vo(t, e), Go(e), 4 & r && W) {
if (null === e.stateNode) throw Error(o(162));
i = e.stateNode, a = e.memoizedProps, n = null !== n ? n.memoizedProps : a;
try {
fe(i, n, a);
} catch (t) {
ds(e, e.return, t);
}
}
break;

case 3:
if (Vo(t, e), Go(e), 4 & r) {
if (W && X && null !== n && n.memoizedState.isDehydrated) try {
We(t.containerInfo);
} catch (t) {
ds(e, e.return, t);
}
if (K) {
i = t.containerInfo, a = t.pendingChildren;
try {
Le(i, a);
} catch (t) {
ds(e, e.return, t);
}
}
}
break;

case 4:
if (Vo(t, e), Go(e), 4 & r && K) {
i = (a = e.stateNode).containerInfo, a = a.pendingChildren;
try {
Le(i, a);
} catch (t) {
ds(e, e.return, t);
}
}
break;

case 13:
Vo(t, e), Go(e), 8192 & (i = e.child).flags && (a = null !== i.memoizedState, i.stateNode.isHidden = a, 
!a || null !== i.alternate && null !== i.alternate.memoizedState || (Ea = Jt())), 
4 & r && Ho(e);
break;

case 22:
var s = null !== n && null !== n.memoizedState;
if (1 & e.mode ? (So = (n = So) || s, Vo(t, e), So = n) : Vo(t, e), Go(e), 8192 & r) {
if (n = null !== e.memoizedState, (e.stateNode.isHidden = n) && !s && 0 != (1 & e.mode)) for (To = e, 
r = e.child; null !== r; ) {
for (t = To = r; null !== To; ) {
var l = (s = To).child;
switch (s.tag) {
case 0:
case 11:
case 14:
case 15:
No(4, s, s.return);
break;

case 1:
Eo(s, s.return);
var c = s.stateNode;
if ("function" == typeof c.componentWillUnmount) {
var d = s, u = s.return;
try {
var p = d;
c.props = p.memoizedProps, c.state = p.memoizedState, c.componentWillUnmount();
} catch (e) {
ds(d, u, e);
}
}
break;

case 5:
Eo(s, s.return);
break;

case 22:
if (null !== s.memoizedState) {
Yo(t);
continue;
}
}
null !== l ? (l.return = s, To = l) : Yo(t);
}
r = r.sibling;
}
if (W) e: if (r = null, W) for (t = e; ;) {
if (5 === t.tag) {
if (null === r) {
r = t;
try {
i = t.stateNode, n ? Se(i) : Te(t.stateNode, t.memoizedProps);
} catch (t) {
ds(e, e.return, t);
}
}
} else if (6 === t.tag) {
if (null === r) try {
a = t.stateNode, n ? ve(a) : Ee(a, t.memoizedProps);
} catch (t) {
ds(e, e.return, t);
}
} else if ((22 !== t.tag && 23 !== t.tag || null === t.memoizedState || t === e) && null !== t.child) {
t.child.return = t, t = t.child;
continue;
}
if (t === e) break e;
for (;null === t.sibling; ) {
if (null === t.return || t.return === e) break e;
r === t && (r = null), t = t.return;
}
r === t && (r = null), t.sibling.return = t.return, t = t.sibling;
}
}
break;

case 19:
Vo(t, e), Go(e), 4 & r && Ho(e);
break;

case 21:
break;

default:
Vo(t, e), Go(e);
}
}
function Go(e) {
var t = e.flags;
if (2 & t) {
try {
if (W) {
e: {
for (var n = e.return; null !== n; ) {
if (ko(n)) {
var r = n;
break e;
}
n = n.return;
}
throw Error(o(160));
}
switch (r.tag) {
case 5:
var i = r.stateNode;
32 & r.flags && (be(i), r.flags &= -33), Bo(e, Ro(e), i);
break;

case 3:
case 4:
var a = r.stateNode.containerInfo;
xo(e, Ro(e), a);
break;

default:
throw Error(o(161));
}
}
} catch (t) {
ds(e, e.return, t);
}
e.flags &= -3;
}
4096 & t && (e.flags &= -4097);
}
function zo(e, t, n) {
To = e, jo(e);
}
function jo(e, t, n) {
for (var r = 0 != (1 & e.mode); null !== To; ) {
var i = To, o = i.child;
if (22 === i.tag && r) {
var a = null !== i.memoizedState || bo;
if (!a) {
var s = i.alternate, l = null !== s && null !== s.memoizedState || So;
s = bo;
var c = So;
if (bo = a, (So = l) && !c) for (To = i; null !== To; ) l = (a = To).child, 22 === a.tag && null !== a.memoizedState ? Wo(i) : null !== l ? (l.return = a, 
To = l) : Wo(i);
for (;null !== o; ) To = o, jo(o), o = o.sibling;
To = i, bo = s, So = c;
}
qo(e);
} else 0 != (8772 & i.subtreeFlags) && null !== o ? (o.return = i, To = o) : qo(e);
}
}
function qo(e) {
for (;null !== To; ) {
var t = To;
if (0 != (8772 & t.flags)) {
var n = t.alternate;
try {
if (0 != (8772 & t.flags)) switch (t.tag) {
case 0:
case 11:
case 15:
So || Ao(5, t);
break;

case 1:
var r = t.stateNode;
if (4 & t.flags && !So) if (null === n) r.componentDidMount(); else {
var i = t.elementType === t.type ? n.memoizedProps : xn(t.type, n.memoizedProps);
r.componentDidUpdate(i, n.memoizedState, r.__reactInternalSnapshotBeforeUpdate);
}
var a = t.updateQueue;
null !== a && rr(t, a, r);
break;

case 3:
var s = t.updateQueue;
if (null !== s) {
if (n = null, null !== t.child) switch (t.child.tag) {
case 5:
n = k(t.child.stateNode);
break;

case 1:
n = t.child.stateNode;
}
rr(t, s, n);
}
break;

case 5:
var l = t.stateNode;
null === n && 4 & t.flags && he(l, t.type, t.memoizedProps, t);
break;

case 6:
case 4:
case 12:
case 19:
case 17:
case 21:
case 22:
case 23:
case 25:
break;

case 13:
if (X && null === t.memoizedState) {
var c = t.alternate;
if (null !== c) {
var d = c.memoizedState;
if (null !== d) {
var u = d.dehydrated;
null !== u && Ke(u);
}
}
}
break;

default:
throw Error(o(163));
}
So || 512 & t.flags && Lo(t);
} catch (e) {
ds(t, t.return, e);
}
}
if (t === e) {
To = null;
break;
}
if (null !== (n = t.sibling)) {
n.return = t.return, To = n;
break;
}
To = t.return;
}
}
function Yo(e) {
for (;null !== To; ) {
var t = To;
if (t === e) {
To = null;
break;
}
var n = t.sibling;
if (null !== n) {
n.return = t.return, To = n;
break;
}
To = t.return;
}
}
function Wo(e) {
for (;null !== To; ) {
var t = To;
try {
switch (t.tag) {
case 0:
case 11:
case 15:
var n = t.return;
try {
Ao(4, t);
} catch (e) {
ds(t, n, e);
}
break;

case 1:
var r = t.stateNode;
if ("function" == typeof r.componentDidMount) {
var i = t.return;
try {
r.componentDidMount();
} catch (e) {
ds(t, i, e);
}
}
var o = t.return;
try {
Lo(t);
} catch (e) {
ds(t, o, e);
}
break;

case 5:
var a = t.return;
try {
Lo(t);
} catch (e) {
ds(t, a, e);
}
}
} catch (e) {
ds(t, t.return, e);
}
if (t === e) {
To = null;
break;
}
var s = t.sibling;
if (null !== s) {
s.return = t.return, To = s;
break;
}
To = t.return;
}
}
var Xo = 0, Qo = 1, $o = 2, Zo = 3, ea = 4;
if ("function" == typeof Symbol && Symbol.for) {
var ta = Symbol.for;
Xo = ta("selector.component"), Qo = ta("selector.has_pseudo_class"), $o = ta("selector.role"), 
Zo = ta("selector.test_id"), ea = ta("selector.text");
}
function na(e) {
var t = Q(e);
if (null != t) {
if ("string" != typeof t.memoizedProps["data-testname"]) throw Error(o(364));
return t;
}
if (null === (e = ie(e))) throw Error(o(362));
return e.stateNode.current;
}
function ra(e, t) {
switch (t.$$typeof) {
case Xo:
if (e.type === t.value) return !0;
break;

case Qo:
e: {
t = t.value, e = [ e, 0 ];
for (var n = 0; n < e.length; ) {
var r = e[n++], i = e[n++], a = t[i];
if (5 !== r.tag || !se(r)) {
for (;null != a && ra(r, a); ) a = t[++i];
if (i === t.length) {
t = !0;
break e;
}
for (r = r.child; null !== r; ) e.push(r, i), r = r.sibling;
}
}
t = !1;
}
return t;

case $o:
if (5 === e.tag && le(e.stateNode, t.value)) return !0;
break;

case ea:
if ((5 === e.tag || 6 === e.tag) && (null !== (e = ae(e)) && 0 <= e.indexOf(t.value))) return !0;
break;

case Zo:
if (5 === e.tag && ("string" == typeof (e = e.memoizedProps["data-testname"]) && e.toLowerCase() === t.value.toLowerCase())) return !0;
break;

default:
throw Error(o(365));
}
return !1;
}
function ia(e) {
switch (e.$$typeof) {
case Xo:
return "<" + (v(e.value) || "Unknown") + ">";

case Qo:
return ":has(" + (ia(e) || "") + ")";

case $o:
return '[role="' + e.value + '"]';

case ea:
return '"' + e.value + '"';

case Zo:
return '[data-testname="' + e.value + '"]';

default:
throw Error(o(365));
}
}
function oa(e, t) {
var n = [];
e = [ e, 0 ];
for (var r = 0; r < e.length; ) {
var i = e[r++], o = e[r++], a = t[o];
if (5 !== i.tag || !se(i)) {
for (;null != a && ra(i, a); ) a = t[++o];
if (o === t.length) n.push(i); else for (i = i.child; null !== i; ) e.push(i, o), 
i = i.sibling;
}
}
return n;
}
function aa(e, t) {
if (!re) throw Error(o(363));
e = oa(e = na(e), t), t = [], e = Array.from(e);
for (var n = 0; n < e.length; ) {
var r = e[n++];
if (5 === r.tag) se(r) || t.push(r.stateNode); else for (r = r.child; null !== r; ) e.push(r), 
r = r.sibling;
}
return t;
}
var sa = Math.ceil, la = a.ReactCurrentDispatcher, ca = a.ReactCurrentOwner, da = a.ReactCurrentBatchConfig, ua = 0, pa = null, fa = null, ha = 0, ma = 0, ga = st(0), ya = 0, Ia = null, _a = 0, ba = 0, Sa = 0, va = null, Ta = null, Ea = 0, Pa = 1 / 0, Oa = null;
function Ca() {
Pa = Jt() + 500;
}
var Na, Aa = !1, La = null, wa = null, ka = !1, Ra = null, xa = 0, Ba = 0, Da = null, Fa = -1, Ma = 0;
function Ua() {
return 0 != (6 & ua) ? Jt() : -1 !== Fa ? Fa : Fa = Jt();
}
function Ha(e) {
return 0 == (1 & e.mode) ? 1 : 0 != (2 & ua) && 0 !== ha ? ha & -ha : null !== wn.transition ? (0 === Ma && (Ma = wt()), 
Ma) : 0 !== (e = Dt) ? e : Z();
}
function Va(e, t, n, r) {
if (50 < Ba) throw Ba = 0, Da = null, Error(o(185));
Rt(e, n, r), 0 != (2 & ua) && e === pa || (e === pa && (0 == (2 & ua) && (ba |= n), 
4 === ya && Ya(e, ha)), Ja(e, r), 1 === n && 0 === ua && 0 == (1 & t.mode) && (Ca(), 
$t && nn()));
}
function Ja(e, t) {
var n = e.callbackNode;
At(e, t);
var r = Ct(e, e === pa ? ha : 0);
if (0 === r) null !== n && Ut(n), e.callbackNode = null, e.callbackPriority = 0; else if (t = r & -r, 
e.callbackPriority !== t) {
if (null != n && Ut(n), 1 === t) 0 === e.tag ? tn(Wa.bind(null, e)) : en(Wa.bind(null, e)), 
te ? ne((function() {
0 == (6 & ua) && nn();
})) : Mt(Gt, nn), n = null; else {
switch (Ft(r)) {
case 1:
n = Gt;
break;

case 4:
n = zt;
break;

case 16:
default:
n = jt;
break;

case 536870912:
n = qt;
}
n = ms(n, Ga.bind(null, e));
}
e.callbackPriority = t, e.callbackNode = n;
}
}
function Ga(e, t) {
if (Fa = -1, Ma = 0, 0 != (6 & ua)) throw Error(o(327));
var n = e.callbackNode;
if (ls() && e.callbackNode !== n) return null;
var r = Ct(e, e === pa ? ha : 0);
if (0 === r) return null;
if (0 != (30 & r) || 0 != (r & e.expiredLanes) || t) t = ts(e, r); else {
t = r;
var i = ua;
ua |= 2;
var a = Za();
for (pa === e && ha === t || (Oa = null, Ca(), Qa(e, t)); ;) try {
rs();
break;
} catch (t) {
$a(e, t);
}
Un(), la.current = a, ua = i, null !== fa ? t = 0 : (pa = null, ha = 0, t = ya);
}
if (0 !== t) {
if (2 === t && (0 !== (i = Lt(e)) && (r = i, t = za(e, i))), 1 === t) throw n = Ia, 
Qa(e, 0), Ya(e, r), Ja(e, Jt()), n;
if (6 === t) Ya(e, r); else {
if (i = e.current.alternate, 0 == (30 & r) && !qa(i) && (2 === (t = ts(e, r)) && (0 !== (a = Lt(e)) && (r = a, 
t = za(e, a))), 1 === t)) throw n = Ia, Qa(e, 0), Ya(e, r), Ja(e, Jt()), n;
switch (e.finishedWork = i, e.finishedLanes = r, t) {
case 0:
case 1:
throw Error(o(345));

case 2:
case 5:
as(e, Ta, Oa);
break;

case 3:
if (Ya(e, r), (130023424 & r) === r && 10 < (t = Ea + 500 - Jt())) {
if (0 !== Ct(e, 0)) break;
if (((i = e.suspendedLanes) & r) !== r) {
Ua(), e.pingedLanes |= e.suspendedLanes & i;
break;
}
e.timeoutHandle = z(as.bind(null, e, Ta, Oa), t);
break;
}
as(e, Ta, Oa);
break;

case 4:
if (Ya(e, r), (4194240 & r) === r) break;
for (t = e.eventTimes, i = -1; 0 < r; ) {
var s = 31 - St(r);
a = 1 << s, (s = t[s]) > i && (i = s), r &= ~a;
}
if (r = i, 10 < (r = (120 > (r = Jt() - r) ? 120 : 480 > r ? 480 : 1080 > r ? 1080 : 1920 > r ? 1920 : 3e3 > r ? 3e3 : 4320 > r ? 4320 : 1960 * sa(r / 1960)) - r)) {
e.timeoutHandle = z(as.bind(null, e, Ta, Oa), r);
break;
}
as(e, Ta, Oa);
break;

default:
throw Error(o(329));
}
}
}
return Ja(e, Jt()), e.callbackNode === n ? Ga.bind(null, e) : null;
}
function za(e, t) {
var n = va;
return e.current.memoizedState.isDehydrated && (Qa(e, t).flags |= 256), 2 !== (e = ts(e, t)) && (t = Ta, 
Ta = n, null !== t && ja(t)), e;
}
function ja(e) {
null === Ta ? Ta = e : Ta.push.apply(Ta, e);
}
function qa(e) {
for (var t = e; ;) {
if (16384 & t.flags) {
var n = t.updateQueue;
if (null !== n && null !== (n = n.stores)) for (var r = 0; r < n.length; r++) {
var i = n[r], o = i.getSnapshot;
i = i.value;
try {
if (!Xt(o(), i)) return !1;
} catch (e) {
return !1;
}
}
}
if (n = t.child, 16384 & t.subtreeFlags && null !== n) n.return = t, t = n; else {
if (t === e) break;
for (;null === t.sibling; ) {
if (null === t.return || t.return === e) return !0;
t = t.return;
}
t.sibling.return = t.return, t = t.sibling;
}
}
return !0;
}
function Ya(e, t) {
for (t &= ~Sa, t &= ~ba, e.suspendedLanes |= t, e.pingedLanes &= ~t, e = e.expirationTimes; 0 < t; ) {
var n = 31 - St(t), r = 1 << n;
e[n] = -1, t &= ~r;
}
}
function Wa(e) {
if (0 != (6 & ua)) throw Error(o(327));
ls();
var t = Ct(e, 0);
if (0 == (1 & t)) return Ja(e, Jt()), null;
var n = ts(e, t);
if (0 !== e.tag && 2 === n) {
var r = Lt(e);
0 !== r && (t = r, n = za(e, r));
}
if (1 === n) throw n = Ia, Qa(e, 0), Ya(e, t), Ja(e, Jt()), n;
if (6 === n) throw Error(o(345));
return e.finishedWork = e.current.alternate, e.finishedLanes = t, as(e, Ta, Oa), 
Ja(e, Jt()), null;
}
function Ka(e) {
null !== Ra && 0 === Ra.tag && 0 == (6 & ua) && ls();
var t = ua;
ua |= 1;
var n = da.transition, r = Dt;
try {
if (da.transition = null, Dt = 1, e) return e();
} finally {
Dt = r, da.transition = n, 0 == (6 & (ua = t)) && nn();
}
}
function Xa() {
ma = ga.current, lt(ga);
}
function Qa(e, t) {
e.finishedWork = null, e.finishedLanes = 0;
var n = e.timeoutHandle;
if (n !== q && (e.timeoutHandle = q, j(n)), null !== fa) for (n = fa.return; null !== n; ) {
var r = n;
switch (gn(r), r.tag) {
case 1:
null != (r = r.type.childContextTypes) && gt();
break;

case 3:
Tr(), lt(pt), lt(ut), Ar();
break;

case 5:
Pr(r);
break;

case 4:
Tr();
break;

case 13:
case 19:
lt(Or);
break;

case 10:
Vn(r.type._context);
break;

case 22:
case 23:
Xa();
}
n = n.return;
}
if (pa = e, fa = e = bs(e.current, null), ha = ma = t, ya = 0, Ia = null, Sa = ba = _a = 0, 
Ta = va = null, null !== jn) {
for (t = 0; t < jn.length; t++) if (null !== (r = (n = jn[t]).interleaved)) {
n.interleaved = null;
var i = r.next, o = n.pending;
if (null !== o) {
var a = o.next;
o.next = i, r.next = a;
}
n.pending = r;
}
jn = null;
}
return e;
}
function $a(e, t) {
for (;;) {
var n = fa;
try {
if (Un(), Lr.current = Ei, Dr) {
for (var r = Rr.memoizedState; null !== r; ) {
var i = r.queue;
null !== i && (i.pending = null), r = r.next;
}
Dr = !1;
}
if (kr = 0, Br = xr = Rr = null, Fr = !1, Mr = 0, ca.current = null, null === n || null === n.return) {
ya = 1, Ia = t, fa = null;
break;
}
e: {
var a = e, s = n.return, l = n, c = t;
if (t = ha, l.flags |= 32768, null !== c && "object" == typeof c && "function" == typeof c.then) {
var d = c, u = l, p = u.tag;
if (0 == (1 & u.mode) && (0 === p || 11 === p || 15 === p)) {
var f = u.alternate;
f ? (u.updateQueue = f.updateQueue, u.memoizedState = f.memoizedState, u.lanes = f.lanes) : (u.updateQueue = null, 
u.memoizedState = null);
}
var h = Bi(s);
if (null !== h) {
h.flags &= -257, Di(h, s, l, 0, t), 1 & h.mode && xi(a, d, t), c = d;
var m = (t = h).updateQueue;
if (null === m) {
var g = new Set;
g.add(c), t.updateQueue = g;
} else m.add(c);
break e;
}
if (0 == (1 & t)) {
xi(a, d, t), es();
break e;
}
c = Error(o(426));
} else if (_n && 1 & l.mode) {
var y = Bi(s);
if (null !== y) {
0 == (65536 & y.flags) && (y.flags |= 256), Di(y, s, l, 0, t), Ln(Ni(c, l));
break e;
}
}
a = c = Ni(c, l), 4 !== ya && (ya = 2), null === va ? va = [ a ] : va.push(a), a = s;
do {
switch (a.tag) {
case 3:
a.flags |= 65536, t &= -t, a.lanes |= t, tr(a, ki(0, c, t));
break e;

case 1:
l = c;
var I = a.type, _ = a.stateNode;
if (0 == (128 & a.flags) && ("function" == typeof I.getDerivedStateFromError || null !== _ && "function" == typeof _.componentDidCatch && (null === wa || !wa.has(_)))) {
a.flags |= 65536, t &= -t, a.lanes |= t, tr(a, Ri(a, l, t));
break e;
}
}
a = a.return;
} while (null !== a);
}
os(n);
} catch (e) {
t = e, fa === n && null !== n && (fa = n = n.return);
continue;
}
break;
}
}
function Za() {
var e = la.current;
return la.current = Ei, null === e ? Ei : e;
}
function es() {
0 !== ya && 3 !== ya && 2 !== ya || (ya = 4), null === pa || 0 == (268435455 & _a) && 0 == (268435455 & ba) || Ya(pa, ha);
}
function ts(e, t) {
var n = ua;
ua |= 2;
var r = Za();
for (pa === e && ha === t || (Oa = null, Qa(e, t)); ;) try {
ns();
break;
} catch (t) {
$a(e, t);
}
if (Un(), ua = n, la.current = r, null !== fa) throw Error(o(261));
return pa = null, ha = 0, ya;
}
function ns() {
for (;null !== fa; ) is(fa);
}
function rs() {
for (;null !== fa && !Ht(); ) is(fa);
}
function is(e) {
var t = Na(e.alternate, e, ma);
e.memoizedProps = e.pendingProps, null === t ? os(e) : fa = t, ca.current = null;
}
function os(e) {
var t = e;
do {
var n = t.alternate;
if (e = t.return, 0 == (32768 & t.flags)) {
if (null !== (n = Io(n, t, ma))) return void (fa = n);
} else {
if (null !== (n = _o(n, t))) return n.flags &= 32767, void (fa = n);
if (null === e) return ya = 6, void (fa = null);
e.flags |= 32768, e.subtreeFlags = 0, e.deletions = null;
}
if (null !== (t = t.sibling)) return void (fa = t);
fa = t = e;
} while (null !== t);
0 === ya && (ya = 5);
}
function as(e, t, n) {
var r = Dt, i = da.transition;
try {
da.transition = null, Dt = 1, ss(e, t, n, r);
} finally {
da.transition = i, Dt = r;
}
return null;
}
function ss(e, t, n, r) {
do {
ls();
} while (null !== Ra);
if (0 != (6 & ua)) throw Error(o(327));
n = e.finishedWork;
var i = e.finishedLanes;
if (null === n) return null;
if (e.finishedWork = null, e.finishedLanes = 0, n === e.current) throw Error(o(177));
e.callbackNode = null, e.callbackPriority = 0;
var a = n.lanes | n.childLanes;
if (xt(e, a), e === pa && (fa = pa = null, ha = 0), 0 == (2064 & n.subtreeFlags) && 0 == (2064 & n.flags) || ka || (ka = !0, 
ms(jt, (function() {
return ls(), null;
}))), a = 0 != (15990 & n.flags), 0 != (15990 & n.subtreeFlags) || a) {
a = da.transition, da.transition = null;
var s = Dt;
Dt = 1;
var l = ua;
ua |= 4, ca.current = null, Co(e, n), Jo(n, e), D(e.containerInfo), e.current = n, 
zo(n), Vt(), ua = l, Dt = s, da.transition = a;
} else e.current = n;
if (ka && (ka = !1, Ra = e, xa = i), 0 === (a = e.pendingLanes) && (wa = null), 
Kt(n.stateNode), Ja(e, Jt()), null !== t) for (r = e.onRecoverableError, n = 0; n < t.length; n++) r((i = t[n]).value, {
componentStack: i.stack,
digest: i.digest
});
if (Aa) throw Aa = !1, e = La, La = null, e;
return 0 != (1 & xa) && 0 !== e.tag && ls(), 0 != (1 & (a = e.pendingLanes)) ? e === Da ? Ba++ : (Ba = 0, 
Da = e) : Ba = 0, nn(), null;
}
function ls() {
if (null !== Ra) {
var e = Ft(xa), t = da.transition, n = Dt;
try {
if (da.transition = null, Dt = 16 > e ? 16 : e, null === Ra) var r = !1; else {
if (e = Ra, Ra = null, xa = 0, 0 != (6 & ua)) throw Error(o(331));
var i = ua;
for (ua |= 4, To = e.current; null !== To; ) {
var a = To, s = a.child;
if (0 != (16 & To.flags)) {
var l = a.deletions;
if (null !== l) {
for (var c = 0; c < l.length; c++) {
var d = l[c];
for (To = d; null !== To; ) {
var u = To;
switch (u.tag) {
case 0:
case 11:
case 15:
No(8, u, a);
}
var p = u.child;
if (null !== p) p.return = u, To = p; else for (;null !== To; ) {
var f = (u = To).sibling, h = u.return;
if (wo(u), u === d) {
To = null;
break;
}
if (null !== f) {
f.return = h, To = f;
break;
}
To = h;
}
}
}
var m = a.alternate;
if (null !== m) {
var g = m.child;
if (null !== g) {
m.child = null;
do {
var y = g.sibling;
g.sibling = null, g = y;
} while (null !== g);
}
}
To = a;
}
}
if (0 != (2064 & a.subtreeFlags) && null !== s) s.return = a, To = s; else e: for (;null !== To; ) {
if (0 != (2048 & (a = To).flags)) switch (a.tag) {
case 0:
case 11:
case 15:
No(9, a, a.return);
}
var I = a.sibling;
if (null !== I) {
I.return = a.return, To = I;
break e;
}
To = a.return;
}
}
var _ = e.current;
for (To = _; null !== To; ) {
var b = (s = To).child;
if (0 != (2064 & s.subtreeFlags) && null !== b) b.return = s, To = b; else e: for (s = _; null !== To; ) {
if (0 != (2048 & (l = To).flags)) try {
switch (l.tag) {
case 0:
case 11:
case 15:
Ao(9, l);
}
} catch (e) {
ds(l, l.return, e);
}
if (l === s) {
To = null;
break e;
}
var S = l.sibling;
if (null !== S) {
S.return = l.return, To = S;
break e;
}
To = l.return;
}
}
if (ua = i, nn(), Wt && "function" == typeof Wt.onPostCommitFiberRoot) try {
Wt.onPostCommitFiberRoot(Yt, e);
} catch (e) {}
r = !0;
}
return r;
} finally {
Dt = n, da.transition = t;
}
}
return !1;
}
function cs(e, t, n) {
e = Zn(e, t = ki(0, t = Ni(n, t), 1), 1), t = Ua(), null !== e && (Rt(e, 1, t), 
Ja(e, t));
}
function ds(e, t, n) {
if (3 === e.tag) cs(e, e, n); else for (;null !== t; ) {
if (3 === t.tag) {
cs(t, e, n);
break;
}
if (1 === t.tag) {
var r = t.stateNode;
if ("function" == typeof t.type.getDerivedStateFromError || "function" == typeof r.componentDidCatch && (null === wa || !wa.has(r))) {
t = Zn(t, e = Ri(t, e = Ni(n, e), 1), 1), e = Ua(), null !== t && (Rt(t, 1, e), 
Ja(t, e));
break;
}
}
t = t.return;
}
}
function us(e, t, n) {
var r = e.pingCache;
null !== r && r.delete(t), t = Ua(), e.pingedLanes |= e.suspendedLanes & n, pa === e && (ha & n) === n && (4 === ya || 3 === ya && (130023424 & ha) === ha && 500 > Jt() - Ea ? Qa(e, 0) : Sa |= n), 
Ja(e, t);
}
function ps(e, t) {
0 === t && (0 == (1 & e.mode) ? t = 1 : (t = Pt, 0 == (130023424 & (Pt <<= 1)) && (Pt = 4194304)));
var n = Ua();
null !== (e = Wn(e, t)) && (Rt(e, t, n), Ja(e, n));
}
function fs(e) {
var t = e.memoizedState, n = 0;
null !== t && (n = t.retryLane), ps(e, n);
}
function hs(e, t) {
var n = 0;
switch (e.tag) {
case 13:
var r = e.stateNode, i = e.memoizedState;
null !== i && (n = i.retryLane);
break;

case 19:
r = e.stateNode;
break;

default:
throw Error(o(314));
}
null !== r && r.delete(t), ps(e, n);
}
function ms(e, t) {
return Mt(e, t);
}
function gs(e, t, n, r) {
this.tag = e, this.key = n, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, 
this.index = 0, this.ref = null, this.pendingProps = t, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, 
this.mode = r, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, 
this.alternate = null;
}
function ys(e, t, n, r) {
return new gs(e, t, n, r);
}
function Is(e) {
return !(!(e = e.prototype) || !e.isReactComponent);
}
function _s(e) {
if ("function" == typeof e) return Is(e) ? 1 : 0;
if (null != e) {
if ((e = e.$$typeof) === h) return 11;
if (e === y) return 14;
}
return 2;
}
function bs(e, t) {
var n = e.alternate;
return null === n ? ((n = ys(e.tag, t, e.key, e.mode)).elementType = e.elementType, 
n.type = e.type, n.stateNode = e.stateNode, n.alternate = e, e.alternate = n) : (n.pendingProps = t, 
n.type = e.type, n.flags = 0, n.subtreeFlags = 0, n.deletions = null), n.flags = 14680064 & e.flags, 
n.childLanes = e.childLanes, n.lanes = e.lanes, n.child = e.child, n.memoizedProps = e.memoizedProps, 
n.memoizedState = e.memoizedState, n.updateQueue = e.updateQueue, t = e.dependencies, 
n.dependencies = null === t ? null : {
lanes: t.lanes,
firstContext: t.firstContext
}, n.sibling = e.sibling, n.index = e.index, n.ref = e.ref, n;
}
function Ss(e, t, n, r, i, a) {
var s = 2;
if (r = e, "function" == typeof e) Is(e) && (s = 1); else if ("string" == typeof e) s = 5; else e: switch (e) {
case c:
return vs(n.children, i, a, t);

case d:
s = 8, i |= 8;
break;

case u:
return (e = ys(12, n, t, 2 | i)).elementType = u, e.lanes = a, e;

case m:
return (e = ys(13, n, t, i)).elementType = m, e.lanes = a, e;

case g:
return (e = ys(19, n, t, i)).elementType = g, e.lanes = a, e;

case _:
return Ts(n, i, a, t);

default:
if ("object" == typeof e && null !== e) switch (e.$$typeof) {
case p:
s = 10;
break e;

case f:
s = 9;
break e;

case h:
s = 11;
break e;

case y:
s = 14;
break e;

case I:
s = 16, r = null;
break e;
}
throw Error(o(130, null == e ? e : typeof e, ""));
}
return (t = ys(s, n, t, i)).elementType = e, t.type = r, t.lanes = a, t;
}
function vs(e, t, n, r) {
return (e = ys(7, e, r, t)).lanes = n, e;
}
function Ts(e, t, n, r) {
return (e = ys(22, e, r, t)).elementType = _, e.lanes = n, e.stateNode = {
isHidden: !1
}, e;
}
function Es(e, t, n) {
return (e = ys(6, e, null, t)).lanes = n, e;
}
function Ps(e, t, n) {
return (t = ys(4, null !== e.children ? e.children : [], e.key, t)).lanes = n, t.stateNode = {
containerInfo: e.containerInfo,
pendingChildren: null,
implementation: e.implementation
}, t;
}
function Os(e, t, n, r, i) {
this.tag = t, this.containerInfo = e, this.finishedWork = this.pingCache = this.current = this.pendingChildren = null, 
this.timeoutHandle = q, this.callbackNode = this.pendingContext = this.context = null, 
this.callbackPriority = 0, this.eventTimes = kt(0), this.expirationTimes = kt(-1), 
this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, 
this.entanglements = kt(0), this.identifierPrefix = r, this.onRecoverableError = i, 
X && (this.mutableSourceEagerHydrationData = null);
}
function Cs(e, t, n, r, i, o, a, s, l) {
return e = new Os(e, t, n, s, l), 1 === t ? (t = 1, !0 === o && (t |= 8)) : t = 0, 
o = ys(3, null, null, t), e.current = o, o.stateNode = e, o.memoizedState = {
element: r,
isDehydrated: n,
cache: null,
transitions: null,
pendingSuspenseBoundaries: null
}, Xn(o), e;
}
function Ns(e) {
if (!e) return dt;
e: {
if (E(e = e._reactInternals) !== e || 1 !== e.tag) throw Error(o(170));
var t = e;
do {
switch (t.tag) {
case 3:
t = t.stateNode.context;
break e;

case 1:
if (mt(t.type)) {
t = t.stateNode.__reactInternalMemoizedMergedChildContext;
break e;
}
}
t = t.return;
} while (null !== t);
throw Error(o(171));
}
if (1 === e.tag) {
var n = e.type;
if (mt(n)) return It(e, n, t);
}
return t;
}
function As(e) {
var t = e._reactInternals;
if (void 0 === t) {
if ("function" == typeof e.render) throw Error(o(188));
throw e = Object.keys(e).join(","), Error(o(268, e));
}
return null === (e = C(t)) ? null : e.stateNode;
}
function Ls(e, t) {
if (null !== (e = e.memoizedState) && null !== e.dehydrated) {
var n = e.retryLane;
e.retryLane = 0 !== n && n < t ? n : t;
}
}
function ws(e, t) {
Ls(e, t), (e = e.alternate) && Ls(e, t);
}
function ks(e) {
return null === (e = C(e)) ? null : e.stateNode;
}
function Rs() {
return null;
}
return Na = function(e, t, n) {
if (null !== e) if (e.memoizedProps !== t.pendingProps || pt.current) Mi = !0; else {
if (0 == (e.lanes & n) && 0 == (128 & t.flags)) return Mi = !1, po(e, t, n);
Mi = 0 != (131072 & e.flags);
} else Mi = !1, _n && 0 != (1048576 & t.flags) && hn(t, sn, t.index);
switch (t.lanes = 0, t.tag) {
case 2:
var r = t.type;
co(e, t), e = t.pendingProps;
var i = ht(t, ut.current);
Gn(t, n), i = Jr(null, t, r, e, i, n);
var a = Gr();
return t.flags |= 1, "object" == typeof i && null !== i && "function" == typeof i.render && void 0 === i.$$typeof ? (t.tag = 1, 
t.memoizedState = null, t.updateQueue = null, mt(r) ? (a = !0, _t(t)) : a = !1, 
t.memoizedState = null !== i.state && void 0 !== i.state ? i.state : null, Xn(t), 
i.updater = ar, t.stateNode = i, i._reactInternals = t, dr(t, r, e, n), t = Yi(null, t, r, !0, a, n)) : (t.tag = 0, 
_n && a && mn(t), Ui(null, t, i, n), t = t.child), t;

case 16:
r = t.elementType;
e: {
switch (co(e, t), e = t.pendingProps, r = (i = r._init)(r._payload), t.type = r, 
i = t.tag = _s(r), e = xn(r, e), i) {
case 0:
t = ji(null, t, r, e, n);
break e;

case 1:
t = qi(null, t, r, e, n);
break e;

case 11:
t = Hi(null, t, r, e, n);
break e;

case 14:
t = Vi(null, t, r, xn(r.type, e), n);
break e;
}
throw Error(o(306, r, ""));
}
return t;

case 0:
return r = t.type, i = t.pendingProps, ji(e, t, r, i = t.elementType === r ? i : xn(r, i), n);

case 1:
return r = t.type, i = t.pendingProps, qi(e, t, r, i = t.elementType === r ? i : xn(r, i), n);

case 3:
e: {
if (Wi(t), null === e) throw Error(o(387));
r = t.pendingProps, i = (a = t.memoizedState).element, Qn(e, t), nr(t, r, null, n);
var s = t.memoizedState;
if (r = s.element, X && a.isDehydrated) {
if (a = {
element: r,
isDehydrated: !1,
cache: s.cache,
pendingSuspenseBoundaries: s.pendingSuspenseBoundaries,
transitions: s.transitions
}, t.updateQueue.baseState = a, t.memoizedState = a, 256 & t.flags) {
t = Ki(e, t, r, n, i = Ni(Error(o(423)), t));
break e;
}
if (r !== i) {
t = Ki(e, t, r, n, i = Ni(Error(o(424)), t));
break e;
}
for (X && (In = Je(t.stateNode.containerInfo), yn = t, _n = !0, Sn = null, bn = !1), 
n = gr(t, null, r, n), t.child = n; n; ) n.flags = -3 & n.flags | 4096, n = n.sibling;
} else {
if (An(), r === i) {
t = uo(e, t, n);
break e;
}
Ui(e, t, r, n);
}
t = t.child;
}
return t;

case 5:
return Er(t), null === e && Pn(t), r = t.type, i = t.pendingProps, a = null !== e ? e.memoizedProps : null, 
s = i.children, J(r, i) ? s = null : null !== a && J(r, a) && (t.flags |= 32), zi(e, t), 
Ui(e, t, s, n), t.child;

case 6:
return null === e && Pn(t), null;

case 13:
return no(e, t, n);

case 4:
return vr(t, t.stateNode.containerInfo), r = t.pendingProps, null === e ? t.child = mr(t, null, r, n) : Ui(e, t, r, n), 
t.child;

case 11:
return r = t.type, i = t.pendingProps, Hi(e, t, r, i = t.elementType === r ? i : xn(r, i), n);

case 7:
return Ui(e, t, t.pendingProps, n), t.child;

case 8:
case 12:
return Ui(e, t, t.pendingProps.children, n), t.child;

case 10:
e: {
if (r = t.type._context, i = t.pendingProps, a = t.memoizedProps, Hn(0, r, s = i.value), 
null !== a) if (Xt(a.value, s)) {
if (a.children === i.children && !pt.current) {
t = uo(e, t, n);
break e;
}
} else for (null !== (a = t.child) && (a.return = t); null !== a; ) {
var l = a.dependencies;
if (null !== l) {
s = a.child;
for (var c = l.firstContext; null !== c; ) {
if (c.context === r) {
if (1 === a.tag) {
(c = $n(-1, n & -n)).tag = 2;
var d = a.updateQueue;
if (null !== d) {
var u = (d = d.shared).pending;
null === u ? c.next = c : (c.next = u.next, u.next = c), d.pending = c;
}
}
a.lanes |= n, null !== (c = a.alternate) && (c.lanes |= n), Jn(a.return, n, t), 
l.lanes |= n;
break;
}
c = c.next;
}
} else if (10 === a.tag) s = a.type === t.type ? null : a.child; else if (18 === a.tag) {
if (null === (s = a.return)) throw Error(o(341));
s.lanes |= n, null !== (l = s.alternate) && (l.lanes |= n), Jn(s, n, t), s = a.sibling;
} else s = a.child;
if (null !== s) s.return = a; else for (s = a; null !== s; ) {
if (s === t) {
s = null;
break;
}
if (null !== (a = s.sibling)) {
a.return = s.return, s = a;
break;
}
s = s.return;
}
a = s;
}
Ui(e, t, i.children, n), t = t.child;
}
return t;

case 9:
return i = t.type, r = t.pendingProps.children, Gn(t, n), r = r(i = zn(i)), t.flags |= 1, 
Ui(e, t, r, n), t.child;

case 14:
return i = xn(r = t.type, t.pendingProps), Vi(e, t, r, i = xn(r.type, i), n);

case 15:
return Ji(e, t, t.type, t.pendingProps, n);

case 17:
return r = t.type, i = t.pendingProps, i = t.elementType === r ? i : xn(r, i), co(e, t), 
t.tag = 1, mt(r) ? (e = !0, _t(t)) : e = !1, Gn(t, n), lr(t, r, i), dr(t, r, i, n), 
Yi(null, t, r, !0, e, n);

case 19:
return lo(e, t, n);

case 22:
return Gi(e, t, n);
}
throw Error(o(156, t.tag));
}, t.attemptContinuousHydration = function(e) {
if (13 === e.tag) {
var t = Wn(e, 134217728);
if (null !== t) Va(t, e, 134217728, Ua());
ws(e, 134217728);
}
}, t.attemptDiscreteHydration = function(e) {
if (13 === e.tag) {
var t = Wn(e, 1);
if (null !== t) Va(t, e, 1, Ua());
ws(e, 1);
}
}, t.attemptHydrationAtCurrentPriority = function(e) {
if (13 === e.tag) {
var t = Ha(e), n = Wn(e, t);
if (null !== n) Va(n, e, t, Ua());
ws(e, t);
}
}, t.attemptSynchronousHydration = function(e) {
switch (e.tag) {
case 3:
var t = e.stateNode;
if (t.current.memoizedState.isDehydrated) {
var n = Ot(t.pendingLanes);
0 !== n && (Bt(t, 1 | n), Ja(t, Jt()), 0 == (6 & ua) && (Ca(), nn()));
}
break;

case 13:
Ka((function() {
var t = Wn(e, 1);
if (null !== t) {
var n = Ua();
Va(t, e, 1, n);
}
})), ws(e, 1);
}
}, t.batchedUpdates = function(e, t) {
var n = ua;
ua |= 1;
try {
return e(t);
} finally {
0 === (ua = n) && (Ca(), $t && nn());
}
}, t.createComponentSelector = function(e) {
return {
$$typeof: Xo,
value: e
};
}, t.createContainer = function(e, t, n, r, i, o, a) {
return Cs(e, t, !1, null, 0, r, 0, o, a);
}, t.createHasPseudoClassSelector = function(e) {
return {
$$typeof: Qo,
value: e
};
}, t.createHydrationContainer = function(e, t, n, r, i, o, a, s, l) {
return (e = Cs(n, r, !0, e, 0, o, 0, s, l)).context = Ns(null), n = e.current, (o = $n(r = Ua(), i = Ha(n))).callback = null != t ? t : null, 
Zn(n, o, i), e.current.lanes = i, Rt(e, i, r), Ja(e, r), e;
}, t.createPortal = function(e, t, n) {
var r = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;
return {
$$typeof: l,
key: null == r ? null : "" + r,
children: e,
containerInfo: t,
implementation: n
};
}, t.createRoleSelector = function(e) {
return {
$$typeof: $o,
value: e
};
}, t.createTestNameSelector = function(e) {
return {
$$typeof: Zo,
value: e
};
}, t.createTextSelector = function(e) {
return {
$$typeof: ea,
value: e
};
}, t.deferredUpdates = function(e) {
var t = Dt, n = da.transition;
try {
return da.transition = null, Dt = 16, e();
} finally {
Dt = t, da.transition = n;
}
}, t.discreteUpdates = function(e, t, n, r, i) {
var o = Dt, a = da.transition;
try {
return da.transition = null, Dt = 1, e(t, n, r, i);
} finally {
Dt = o, da.transition = a, 0 === ua && Ca();
}
}, t.findAllNodes = aa, t.findBoundingRects = function(e, t) {
if (!re) throw Error(o(363));
t = aa(e, t), e = [];
for (var n = 0; n < t.length; n++) e.push(oe(t[n]));
for (t = e.length - 1; 0 < t; t--) for (var r = (n = e[t]).x, i = r + n.width, a = n.y, s = a + n.height, l = t - 1; 0 <= l; l--) if (t !== l) {
var c = e[l], d = c.x, u = d + c.width, p = c.y, f = p + c.height;
if (r >= d && a >= p && i <= u && s <= f) {
e.splice(t, 1);
break;
}
if (!(r !== d || n.width !== c.width || f < a || p > s)) {
p > a && (c.height += p - a, c.y = a), f < s && (c.height = s - p), e.splice(t, 1);
break;
}
if (!(a !== p || n.height !== c.height || u < r || d > i)) {
d > r && (c.width += d - r, c.x = r), u < i && (c.width = i - d), e.splice(t, 1);
break;
}
}
return e;
}, t.findHostInstance = As, t.findHostInstanceWithNoPortals = function(e) {
return null === (e = null !== (e = O(e)) ? A(e) : null) ? null : e.stateNode;
}, t.findHostInstanceWithWarning = function(e) {
return As(e);
}, t.flushControlled = function(e) {
var t = ua;
ua |= 1;
var n = da.transition, r = Dt;
try {
da.transition = null, Dt = 1, e();
} finally {
Dt = r, da.transition = n, 0 === (ua = t) && (Ca(), nn());
}
}, t.flushPassiveEffects = ls, t.flushSync = Ka, t.focusWithin = function(e, t) {
if (!re) throw Error(o(363));
for (t = oa(e = na(e), t), t = Array.from(t), e = 0; e < t.length; ) {
var n = t[e++];
if (!se(n)) {
if (5 === n.tag && ce(n.stateNode)) return !0;
for (n = n.child; null !== n; ) t.push(n), n = n.sibling;
}
}
return !1;
}, t.getCurrentUpdatePriority = function() {
return Dt;
}, t.getFindAllNodesFailureDescription = function(e, t) {
if (!re) throw Error(o(363));
var n = 0, r = [];
e = [ na(e), 0 ];
for (var i = 0; i < e.length; ) {
var a = e[i++], s = e[i++], l = t[s];
if ((5 !== a.tag || !se(a)) && (ra(a, l) && (r.push(ia(l)), ++s > n && (n = s)), 
s < t.length)) for (a = a.child; null !== a; ) e.push(a, s), a = a.sibling;
}
if (n < t.length) {
for (e = []; n < t.length; n++) e.push(ia(t[n]));
return "findAllNodes was able to match part of the selector:\n  " + r.join(" > ") + "\n\nNo matching component was found for:\n  " + e.join(" > ");
}
return null;
}, t.getPublicRootInstance = function(e) {
return (e = e.current).child ? 5 === e.child.tag ? k(e.child.stateNode) : e.child.stateNode : null;
}, t.injectIntoDevTools = function(e) {
if (e = {
bundleType: e.bundleType,
version: e.version,
rendererPackageName: e.rendererPackageName,
rendererConfig: e.rendererConfig,
overrideHookState: null,
overrideHookStateDeletePath: null,
overrideHookStateRenamePath: null,
overrideProps: null,
overridePropsDeletePath: null,
overridePropsRenamePath: null,
setErrorHandler: null,
setSuspenseHandler: null,
scheduleUpdate: null,
currentDispatcherRef: a.ReactCurrentDispatcher,
findHostInstanceByFiber: ks,
findFiberByHostInstance: e.findFiberByHostInstance || Rs,
findHostInstancesForRefresh: null,
scheduleRefresh: null,
scheduleRoot: null,
setRefreshHandler: null,
getCurrentFiber: null,
reconcilerVersion: "18.2.0"
}, "undefined" == typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) e = !1; else {
var t = __REACT_DEVTOOLS_GLOBAL_HOOK__;
if (t.isDisabled || !t.supportsFiber) e = !0; else {
try {
Yt = t.inject(e), Wt = t;
} catch (e) {}
e = !!t.checkDCE;
}
}
return e;
}, t.isAlreadyRendering = function() {
return !1;
}, t.observeVisibleRects = function(e, t, n, r) {
if (!re) throw Error(o(363));
e = aa(e, t);
var i = de(e, n, r).disconnect;
return {
disconnect: function() {
i();
}
};
}, t.registerMutableSourceForHydration = function(e, t) {
var n = t._getVersion;
n = n(t._source), null == e.mutableSourceEagerHydrationData ? e.mutableSourceEagerHydrationData = [ t, n ] : e.mutableSourceEagerHydrationData.push(t, n);
}, t.runWithPriority = function(e, t) {
var n = Dt;
try {
return Dt = e, t();
} finally {
Dt = n;
}
}, t.shouldError = function() {
return null;
}, t.shouldSuspend = function() {
return !1;
}, t.updateContainer = function(e, t, n, r) {
var i = t.current, o = Ua(), a = Ha(i);
return n = Ns(n), null === t.context ? t.context = n : t.pendingContext = n, (t = $n(o, a)).payload = {
element: e
}, null !== (r = void 0 === r ? null : r) && (t.callback = r), null !== (e = Zn(i, t, a)) && (Va(e, i, a, o), 
er(e, i, a)), a;
}, t;
}, Qo = (t((function(e) {})), t((function(e) {
e.exports = Xo;
}))), $o = {
ConcurrentRoot: 1,
ContinuousEventPriority: 4,
DefaultEventPriority: 16,
DiscreteEventPriority: 1,
IdleEventPriority: 536870912,
LegacyRoot: 0
}, Zo = (t((function(e, t) {})), t((function(e) {
e.exports = $o;
}))), ea = function(e, t) {
var n = new Array(arguments.length - 1), r = 0, i = 2, o = !0;
for (;i < arguments.length; ) n[r++] = arguments[i++];
return new Promise((function(i, a) {
n[r] = function(e) {
if (o) if (o = !1, e) a(e); else {
for (var t = new Array(arguments.length - 1), n = 0; n < t.length; ) t[n++] = arguments[n];
i.apply(null, t);
}
};
try {
e.apply(t || null, n);
} catch (e) {
o && (o = !1, a(e));
}
}));
};
var ta = t((function(e, t) {
var n = t;
n.length = function(e) {
var t = e.length;
if (!t) return 0;
for (var n = 0; --t % 4 > 1 && "=" === e.charAt(t); ) ++n;
return Math.ceil(3 * e.length) / 4 - n;
};
for (var r = new Array(64), i = new Array(123), o = 0; o < 64; ) i[r[o] = o < 26 ? o + 65 : o < 52 ? o + 71 : o < 62 ? o - 4 : o - 59 | 43] = o++;
n.encode = function(e, t, n) {
for (var i, o = null, a = [], s = 0, l = 0; t < n; ) {
var c = e[t++];
switch (l) {
case 0:
a[s++] = r[c >> 2], i = (3 & c) << 4, l = 1;
break;

case 1:
a[s++] = r[i | c >> 4], i = (15 & c) << 2, l = 2;
break;

case 2:
a[s++] = r[i | c >> 6], a[s++] = r[63 & c], l = 0;
}
s > 8191 && ((o || (o = [])).push(String.fromCharCode.apply(String, a)), s = 0);
}
return l && (a[s++] = r[i], a[s++] = 61, 1 === l && (a[s++] = 61)), o ? (s && o.push(String.fromCharCode.apply(String, a.slice(0, s))), 
o.join("")) : String.fromCharCode.apply(String, a.slice(0, s));
};
var a = "invalid encoding";
n.decode = function(e, t, n) {
for (var r, o = n, s = 0, l = 0; l < e.length; ) {
var c = e.charCodeAt(l++);
if (61 === c && s > 1) break;
if (void 0 === (c = i[c])) throw Error(a);
switch (s) {
case 0:
r = c, s = 1;
break;

case 1:
t[n++] = r << 2 | (48 & c) >> 4, r = c, s = 2;
break;

case 2:
t[n++] = (15 & r) << 4 | (60 & c) >> 2, r = c, s = 3;
break;

case 3:
t[n++] = (3 & r) << 6 | c, s = 0;
}
}
if (1 === s) throw Error(a);
return n - o;
}, n.test = function(e) {
return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e);
};
})), na = ra;
function ra() {
this._listeners = {};
}
ra.prototype.on = function(e, t, n) {
return (this._listeners[e] || (this._listeners[e] = [])).push({
fn: t,
ctx: n || this
}), this;
}, ra.prototype.off = function(e, t) {
if (void 0 === e) this._listeners = {}; else if (void 0 === t) this._listeners[e] = []; else for (var n = this._listeners[e], r = 0; r < n.length; ) n[r].fn === t ? n.splice(r, 1) : ++r;
return this;
}, ra.prototype.emit = function(e) {
var t = this._listeners[e];
if (t) {
for (var n = [], r = 1; r < arguments.length; ) n.push(arguments[r++]);
for (r = 0; r < t.length; ) t[r].fn.apply(t[r++].ctx, n);
}
return this;
};
var ia = oa(oa);
function oa(e) {
return "undefined" != typeof Float32Array ? function() {
var t = new Float32Array([ -0 ]), n = new Uint8Array(t.buffer), r = 128 === n[3];
function i(e, r, i) {
t[0] = e, r[i] = n[0], r[i + 1] = n[1], r[i + 2] = n[2], r[i + 3] = n[3];
}
function o(e, r, i) {
t[0] = e, r[i] = n[3], r[i + 1] = n[2], r[i + 2] = n[1], r[i + 3] = n[0];
}
function a(e, r) {
return n[0] = e[r], n[1] = e[r + 1], n[2] = e[r + 2], n[3] = e[r + 3], t[0];
}
function s(e, r) {
return n[3] = e[r], n[2] = e[r + 1], n[1] = e[r + 2], n[0] = e[r + 3], t[0];
}
e.writeFloatLE = r ? i : o, e.writeFloatBE = r ? o : i, e.readFloatLE = r ? a : s, 
e.readFloatBE = r ? s : a;
}() : function() {
function t(e, t, n, r) {
var i = t < 0 ? 1 : 0;
if (i && (t = -t), 0 === t) e(1 / t > 0 ? 0 : 2147483648, n, r); else if (isNaN(t)) e(2143289344, n, r); else if (t > 34028234663852886e22) e((i << 31 | 2139095040) >>> 0, n, r); else if (t < 11754943508222875e-54) e((i << 31 | Math.round(t / 1401298464324817e-60)) >>> 0, n, r); else {
var o = Math.floor(Math.log(t) / Math.LN2);
e((i << 31 | o + 127 << 23 | 8388607 & Math.round(t * Math.pow(2, -o) * 8388608)) >>> 0, n, r);
}
}
function n(e, t, n) {
var r = e(t, n), i = 2 * (r >> 31) + 1, o = r >>> 23 & 255, a = 8388607 & r;
return 255 === o ? a ? NaN : i * (1 / 0) : 0 === o ? 1401298464324817e-60 * i * a : i * Math.pow(2, o - 150) * (a + 8388608);
}
e.writeFloatLE = t.bind(null, aa), e.writeFloatBE = t.bind(null, sa), e.readFloatLE = n.bind(null, la), 
e.readFloatBE = n.bind(null, ca);
}(), "undefined" != typeof Float64Array ? function() {
var t = new Float64Array([ -0 ]), n = new Uint8Array(t.buffer), r = 128 === n[7];
function i(e, r, i) {
t[0] = e, r[i] = n[0], r[i + 1] = n[1], r[i + 2] = n[2], r[i + 3] = n[3], r[i + 4] = n[4], 
r[i + 5] = n[5], r[i + 6] = n[6], r[i + 7] = n[7];
}
function o(e, r, i) {
t[0] = e, r[i] = n[7], r[i + 1] = n[6], r[i + 2] = n[5], r[i + 3] = n[4], r[i + 4] = n[3], 
r[i + 5] = n[2], r[i + 6] = n[1], r[i + 7] = n[0];
}
function a(e, r) {
return n[0] = e[r], n[1] = e[r + 1], n[2] = e[r + 2], n[3] = e[r + 3], n[4] = e[r + 4], 
n[5] = e[r + 5], n[6] = e[r + 6], n[7] = e[r + 7], t[0];
}
function s(e, r) {
return n[7] = e[r], n[6] = e[r + 1], n[5] = e[r + 2], n[4] = e[r + 3], n[3] = e[r + 4], 
n[2] = e[r + 5], n[1] = e[r + 6], n[0] = e[r + 7], t[0];
}
e.writeDoubleLE = r ? i : o, e.writeDoubleBE = r ? o : i, e.readDoubleLE = r ? a : s, 
e.readDoubleBE = r ? s : a;
}() : function() {
function t(e, t, n, r, i, o) {
var a = r < 0 ? 1 : 0;
if (a && (r = -r), 0 === r) e(0, i, o + t), e(1 / r > 0 ? 0 : 2147483648, i, o + n); else if (isNaN(r)) e(0, i, o + t), 
e(2146959360, i, o + n); else if (r > 17976931348623157e292) e(0, i, o + t), e((a << 31 | 2146435072) >>> 0, i, o + n); else {
var s;
if (r < 22250738585072014e-324) e((s = r / 5e-324) >>> 0, i, o + t), e((a << 31 | s / 4294967296) >>> 0, i, o + n); else {
var l = Math.floor(Math.log(r) / Math.LN2);
1024 === l && (l = 1023), e(4503599627370496 * (s = r * Math.pow(2, -l)) >>> 0, i, o + t), 
e((a << 31 | l + 1023 << 20 | 1048576 * s & 1048575) >>> 0, i, o + n);
}
}
}
function n(e, t, n, r, i) {
var o = e(r, i + t), a = e(r, i + n), s = 2 * (a >> 31) + 1, l = a >>> 20 & 2047, c = 4294967296 * (1048575 & a) + o;
return 2047 === l ? c ? NaN : s * (1 / 0) : 0 === l ? 5e-324 * s * c : s * Math.pow(2, l - 1075) * (c + 4503599627370496);
}
e.writeDoubleLE = t.bind(null, aa, 0, 4), e.writeDoubleBE = t.bind(null, sa, 4, 0), 
e.readDoubleLE = n.bind(null, la, 0, 4), e.readDoubleBE = n.bind(null, ca, 4, 0);
}(), e;
}
function aa(e, t, n) {
t[n] = 255 & e, t[n + 1] = e >>> 8 & 255, t[n + 2] = e >>> 16 & 255, t[n + 3] = e >>> 24;
}
function sa(e, t, n) {
t[n] = e >>> 24, t[n + 1] = e >>> 16 & 255, t[n + 2] = e >>> 8 & 255, t[n + 3] = 255 & e;
}
function la(e, t) {
return (e[t] | e[t + 1] << 8 | e[t + 2] << 16 | e[t + 3] << 24) >>> 0;
}
function ca(e, t) {
return (e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3]) >>> 0;
}
var da = function() {
return null;
}, ua = t((function(e, t) {
var n = t;
n.length = function(e) {
for (var t = 0, n = 0, r = 0; r < e.length; ++r) (n = e.charCodeAt(r)) < 128 ? t += 1 : n < 2048 ? t += 2 : 55296 == (64512 & n) && 56320 == (64512 & e.charCodeAt(r + 1)) ? (++r, 
t += 4) : t += 3;
return t;
}, n.read = function(e, t, n) {
if (n - t < 1) return "";
for (var r, i = null, o = [], a = 0; t < n; ) (r = e[t++]) < 128 ? o[a++] = r : r > 191 && r < 224 ? o[a++] = (31 & r) << 6 | 63 & e[t++] : r > 239 && r < 365 ? (r = ((7 & r) << 18 | (63 & e[t++]) << 12 | (63 & e[t++]) << 6 | 63 & e[t++]) - 65536, 
o[a++] = 55296 + (r >> 10), o[a++] = 56320 + (1023 & r)) : o[a++] = (15 & r) << 12 | (63 & e[t++]) << 6 | 63 & e[t++], 
a > 8191 && ((i || (i = [])).push(String.fromCharCode.apply(String, o)), a = 0);
return i ? (a && i.push(String.fromCharCode.apply(String, o.slice(0, a))), i.join("")) : String.fromCharCode.apply(String, o.slice(0, a));
}, n.write = function(e, t, n) {
for (var r, i, o = n, a = 0; a < e.length; ++a) (r = e.charCodeAt(a)) < 128 ? t[n++] = r : r < 2048 ? (t[n++] = r >> 6 | 192, 
t[n++] = 63 & r | 128) : 55296 == (64512 & r) && 56320 == (64512 & (i = e.charCodeAt(a + 1))) ? (r = 65536 + ((1023 & r) << 10) + (1023 & i), 
++a, t[n++] = r >> 18 | 240, t[n++] = r >> 12 & 63 | 128, t[n++] = r >> 6 & 63 | 128, 
t[n++] = 63 & r | 128) : (t[n++] = r >> 12 | 224, t[n++] = r >> 6 & 63 | 128, t[n++] = 63 & r | 128);
return n - o;
};
})), pa = function(e, t, n) {
var r = n || 8192, i = r >>> 1, o = null, a = r;
return function(n) {
if (n < 1 || n > i) return e(n);
a + n > r && (o = e(r), a = 0);
var s = t.call(o, a, a += n);
return 7 & a && (a = 1 + (7 | a)), s;
};
};
var fa = ha;
function ha(e, t) {
this.lo = e >>> 0, this.hi = t >>> 0;
}
var ma = ha.zero = new ha(0, 0);
ma.toNumber = function() {
return 0;
}, ma.zzEncode = ma.zzDecode = function() {
return this;
}, ma.length = function() {
return 1;
};
var ga = ha.zeroHash = "\0\0\0\0\0\0\0\0";
ha.fromNumber = function(e) {
if (0 === e) return ma;
var t = e < 0;
t && (e = -e);
var n = e >>> 0, r = (e - n) / 4294967296 >>> 0;
return t && (r = ~r >>> 0, n = ~n >>> 0, ++n > 4294967295 && (n = 0, ++r > 4294967295 && (r = 0))), 
new ha(n, r);
}, ha.from = function(e) {
if ("number" == typeof e) return ha.fromNumber(e);
if (_a.isString(e)) {
if (!_a.Long) return ha.fromNumber(parseInt(e, 10));
e = _a.Long.fromString(e);
}
return e.low || e.high ? new ha(e.low >>> 0, e.high >>> 0) : ma;
}, ha.prototype.toNumber = function(e) {
if (!e && this.hi >>> 31) {
var t = 1 + ~this.lo >>> 0, n = ~this.hi >>> 0;
return t || (n = n + 1 >>> 0), -(t + 4294967296 * n);
}
return this.lo + 4294967296 * this.hi;
}, ha.prototype.toLong = function(e) {
return _a.Long ? new _a.Long(0 | this.lo, 0 | this.hi, Boolean(e)) : {
low: 0 | this.lo,
high: 0 | this.hi,
unsigned: Boolean(e)
};
};
var ya = String.prototype.charCodeAt;
ha.fromHash = function(e) {
return e === ga ? ma : new ha((ya.call(e, 0) | ya.call(e, 1) << 8 | ya.call(e, 2) << 16 | ya.call(e, 3) << 24) >>> 0, (ya.call(e, 4) | ya.call(e, 5) << 8 | ya.call(e, 6) << 16 | ya.call(e, 7) << 24) >>> 0);
}, ha.prototype.toHash = function() {
return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);
}, ha.prototype.zzEncode = function() {
var e = this.hi >> 31;
return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e) >>> 0, this.lo = (this.lo << 1 ^ e) >>> 0, 
this;
}, ha.prototype.zzDecode = function() {
var e = -(1 & this.lo);
return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e) >>> 0, this.hi = (this.hi >>> 1 ^ e) >>> 0, 
this;
}, ha.prototype.length = function() {
var e = this.lo, t = (this.lo >>> 28 | this.hi << 4) >>> 0, n = this.hi >>> 24;
return 0 === n ? 0 === t ? e < 16384 ? e < 128 ? 1 : 2 : e < 2097152 ? 3 : 4 : t < 16384 ? t < 128 ? 5 : 6 : t < 2097152 ? 7 : 8 : n < 128 ? 9 : 10;
};
var Ia, _a = t((function(t, n) {
var r = n;
function i(e, t, n) {
for (var r = Object.keys(t), i = 0; i < r.length; ++i) void 0 !== e[r[i]] && n || (e[r[i]] = t[r[i]]);
return e;
}
function o(e) {
function t(e, n) {
if (!(this instanceof t)) return new t(e, n);
Object.defineProperty(this, "message", {
get: function() {
return e;
}
}), Error.captureStackTrace ? Error.captureStackTrace(this, t) : Object.defineProperty(this, "stack", {
value: (new Error).stack || ""
}), n && i(this, n);
}
return (t.prototype = Object.create(Error.prototype)).constructor = t, Object.defineProperty(t.prototype, "name", {
get: function() {
return e;
}
}), t.prototype.toString = function() {
return this.name + ": " + this.message;
}, t;
}
r.asPromise = ea, r.base64 = ta, r.EventEmitter = na, r.float = ia, r.inquire = da, 
r.utf8 = ua, r.pool = pa, r.LongBits = fa, r.isNode = Boolean(void 0 !== e && e && e.process && e.process.versions && e.process.versions.node), 
r.global = r.isNode && e || "undefined" != typeof window && window || "undefined" != typeof self && self || e, 
r.emptyArray = Object.freeze ? Object.freeze([]) : [], r.emptyObject = Object.freeze ? Object.freeze({}) : {}, 
r.isInteger = Number.isInteger || function(e) {
return "number" == typeof e && isFinite(e) && Math.floor(e) === e;
}, r.isString = function(e) {
return "string" == typeof e || e instanceof String;
}, r.isObject = function(e) {
return e && "object" == typeof e;
}, r.isset = r.isSet = function(e, t) {
var n = e[t];
return !(null == n || !e.hasOwnProperty(t)) && ("object" != typeof n || (Array.isArray(n) ? n.length : Object.keys(n).length) > 0);
}, r.Buffer = function() {
try {
var e = r.inquire("buffer").Buffer;
return e.prototype.utf8Write ? e : null;
} catch (e) {
return null;
}
}(), r._Buffer_from = null, r._Buffer_allocUnsafe = null, r.newBuffer = function(e) {
return "number" == typeof e ? r.Buffer ? r._Buffer_allocUnsafe(e) : new r.Array(e) : r.Buffer ? r._Buffer_from(e) : "undefined" == typeof Uint8Array ? e : new Uint8Array(e);
}, r.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, r.Long = void 0, 
r.key2Re = /^true|false|0|1$/, r.key32Re = /^-?(?:0|[1-9][0-9]*)$/, r.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, 
r.longToHash = function(e) {
return e ? r.LongBits.from(e).toHash() : r.LongBits.zeroHash;
}, r.longFromHash = function(e, t) {
var n = r.LongBits.fromHash(e);
return r.Long ? r.Long.fromBits(n.lo, n.hi, t) : n.toNumber(Boolean(t));
}, r.merge = i, r.lcFirst = function(e) {
return e.charAt(0).toLowerCase() + e.substring(1);
}, r.newError = o, r.ProtocolError = o("ProtocolError"), r.oneOfGetter = function(e) {
for (var t = {}, n = 0; n < e.length; ++n) t[e[n]] = 1;
return function() {
for (var e = Object.keys(this), n = e.length - 1; n > -1; --n) if (1 === t[e[n]] && void 0 !== this[e[n]] && null !== this[e[n]]) return e[n];
};
}, r.oneOfSetter = function(e) {
return function(t) {
for (var n = 0; n < e.length; ++n) e[n] !== t && delete this[e[n]];
};
}, r.toJSONOptions = {
longs: String,
enums: String,
bytes: String,
json: !0
}, r._configure = function() {
var e = r.Buffer;
e ? (r._Buffer_from = e.from !== Uint8Array.from && e.from || function(t, n) {
return new e(t, n);
}, r._Buffer_allocUnsafe = e.allocUnsafe || function(t) {
return new e(t);
}) : r._Buffer_from = r._Buffer_allocUnsafe = null;
};
})), ba = Ca, Sa = _a.LongBits, va = _a.base64, Ta = _a.utf8;
function Ea(e, t, n) {
this.fn = e, this.len = t, this.next = void 0, this.val = n;
}
function Pa() {}
function Oa(e) {
this.head = e.head, this.tail = e.tail, this.len = e.len, this.next = e.states;
}
function Ca() {
this.len = 0, this.head = new Ea(Pa, 0, 0), this.tail = this.head, this.states = null;
}
var Na = function() {
return _a.Buffer ? function() {
return (Ca.create = function() {
return new Ia;
})();
} : function() {
return new Ca;
};
};
function Aa(e, t, n) {
t[n] = 255 & e;
}
function La(e, t) {
this.len = e, this.next = void 0, this.val = t;
}
function wa(e, t, n) {
for (;e.hi; ) t[n++] = 127 & e.lo | 128, e.lo = (e.lo >>> 7 | e.hi << 25) >>> 0, 
e.hi >>>= 7;
for (;e.lo > 127; ) t[n++] = 127 & e.lo | 128, e.lo = e.lo >>> 7;
t[n++] = e.lo;
}
function ka(e, t, n) {
t[n] = 255 & e, t[n + 1] = e >>> 8 & 255, t[n + 2] = e >>> 16 & 255, t[n + 3] = e >>> 24;
}
Ca.create = Na(), Ca.alloc = function(e) {
return new _a.Array(e);
}, _a.Array !== Array && (Ca.alloc = _a.pool(Ca.alloc, _a.Array.prototype.subarray)), 
Ca.prototype._push = function(e, t, n) {
return this.tail = this.tail.next = new Ea(e, t, n), this.len += t, this;
}, La.prototype = Object.create(Ea.prototype), La.prototype.fn = function(e, t, n) {
for (;e > 127; ) t[n++] = 127 & e | 128, e >>>= 7;
t[n] = e;
}, Ca.prototype.uint32 = function(e) {
return this.len += (this.tail = this.tail.next = new La((e >>>= 0) < 128 ? 1 : e < 16384 ? 2 : e < 2097152 ? 3 : e < 268435456 ? 4 : 5, e)).len, 
this;
}, Ca.prototype.int32 = function(e) {
return e < 0 ? this._push(wa, 10, Sa.fromNumber(e)) : this.uint32(e);
}, Ca.prototype.sint32 = function(e) {
return this.uint32((e << 1 ^ e >> 31) >>> 0);
}, Ca.prototype.uint64 = function(e) {
var t = Sa.from(e);
return this._push(wa, t.length(), t);
}, Ca.prototype.int64 = Ca.prototype.uint64, Ca.prototype.sint64 = function(e) {
var t = Sa.from(e).zzEncode();
return this._push(wa, t.length(), t);
}, Ca.prototype.bool = function(e) {
return this._push(Aa, 1, e ? 1 : 0);
}, Ca.prototype.fixed32 = function(e) {
return this._push(ka, 4, e >>> 0);
}, Ca.prototype.sfixed32 = Ca.prototype.fixed32, Ca.prototype.fixed64 = function(e) {
var t = Sa.from(e);
return this._push(ka, 4, t.lo)._push(ka, 4, t.hi);
}, Ca.prototype.sfixed64 = Ca.prototype.fixed64, Ca.prototype.float = function(e) {
return this._push(_a.float.writeFloatLE, 4, e);
}, Ca.prototype.double = function(e) {
return this._push(_a.float.writeDoubleLE, 8, e);
};
var Ra = _a.Array.prototype.set ? function(e, t, n) {
t.set(e, n);
} : function(e, t, n) {
for (var r = 0; r < e.length; ++r) t[n + r] = e[r];
};
Ca.prototype.bytes = function(e) {
var t = e.length >>> 0;
if (!t) return this._push(Aa, 1, 0);
if (_a.isString(e)) {
var n = Ca.alloc(t = va.length(e));
va.decode(e, n, 0), e = n;
}
return this.uint32(t)._push(Ra, t, e);
}, Ca.prototype.string = function(e) {
var t = Ta.length(e);
return t ? this.uint32(t)._push(Ta.write, t, e) : this._push(Aa, 1, 0);
}, Ca.prototype.fork = function() {
return this.states = new Oa(this), this.head = this.tail = new Ea(Pa, 0, 0), this.len = 0, 
this;
}, Ca.prototype.reset = function() {
return this.states ? (this.head = this.states.head, this.tail = this.states.tail, 
this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new Ea(Pa, 0, 0), 
this.len = 0), this;
}, Ca.prototype.ldelim = function() {
var e = this.head, t = this.tail, n = this.len;
return this.reset().uint32(n), n && (this.tail.next = e.next, this.tail = t, this.len += n), 
this;
}, Ca.prototype.finish = function() {
for (var e = this.head.next, t = this.constructor.alloc(this.len), n = 0; e; ) e.fn(e.val, t, n), 
n += e.len, e = e.next;
return t;
}, Ca._configure = function(e) {
Ia = e, Ca.create = Na(), Ia._configure();
};
var xa = Ba;
function Ba() {
ba.call(this);
}
function Da(e, t, n) {
e.length < 40 ? _a.utf8.write(e, t, n) : t.utf8Write ? t.utf8Write(e, n) : t.write(e, n);
}
(Ba.prototype = Object.create(ba.prototype)).constructor = Ba, Ba._configure = function() {
Ba.alloc = _a._Buffer_allocUnsafe, Ba.writeBytesBuffer = _a.Buffer && _a.Buffer.prototype instanceof Uint8Array && "set" === _a.Buffer.prototype.set.name ? function(e, t, n) {
t.set(e, n);
} : function(e, t, n) {
if (e.copy) e.copy(t, n, 0, e.length); else for (var r = 0; r < e.length; ) t[n++] = e[r++];
};
}, Ba.prototype.bytes = function(e) {
_a.isString(e) && (e = _a._Buffer_from(e, "base64"));
var t = e.length >>> 0;
return this.uint32(t), t && this._push(Ba.writeBytesBuffer, t, e), this;
}, Ba.prototype.string = function(e) {
var t = _a.Buffer.byteLength(e);
return this.uint32(t), t && this._push(Da, t, e), this;
}, Ba._configure();
var Fa, Ma = Ja, Ua = _a.LongBits, Ha = _a.utf8;
function Va(e, t) {
return RangeError("index out of range: " + e.pos + " + " + (t || 1) + " > " + e.len);
}
function Ja(e) {
this.buf = e, this.pos = 0, this.len = e.length;
}
var Ga, za = "undefined" != typeof Uint8Array ? function(e) {
if (e instanceof Uint8Array || Array.isArray(e)) return new Ja(e);
throw Error("illegal buffer");
} : function(e) {
if (Array.isArray(e)) return new Ja(e);
throw Error("illegal buffer");
}, ja = function() {
return _a.Buffer ? function(e) {
return (Ja.create = function(e) {
return _a.Buffer.isBuffer(e) ? new Fa(e) : za(e);
})(e);
} : za;
};
function qa() {
var e = new Ua(0, 0), t = 0;
if (!(this.len - this.pos > 4)) {
for (;t < 3; ++t) {
if (this.pos >= this.len) throw Va(this);
if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, this.buf[this.pos++] < 128) return e;
}
return e.lo = (e.lo | (127 & this.buf[this.pos++]) << 7 * t) >>> 0, e;
}
for (;t < 4; ++t) if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t) >>> 0, 
this.buf[this.pos++] < 128) return e;
if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e.hi = (e.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, 
this.buf[this.pos++] < 128) return e;
if (t = 0, this.len - this.pos > 4) {
for (;t < 5; ++t) if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, 
this.buf[this.pos++] < 128) return e;
} else for (;t < 5; ++t) {
if (this.pos >= this.len) throw Va(this);
if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t + 3) >>> 0, this.buf[this.pos++] < 128) return e;
}
throw Error("invalid varint encoding");
}
function Ya(e, t) {
return (e[t - 4] | e[t - 3] << 8 | e[t - 2] << 16 | e[t - 1] << 24) >>> 0;
}
function Wa() {
if (this.pos + 8 > this.len) throw Va(this, 8);
return new Ua(Ya(this.buf, this.pos += 4), Ya(this.buf, this.pos += 4));
}
Ja.create = ja(), Ja.prototype._slice = _a.Array.prototype.subarray || _a.Array.prototype.slice, 
Ja.prototype.uint32 = (Ga = 4294967295, function() {
if (Ga = (127 & this.buf[this.pos]) >>> 0, this.buf[this.pos++] < 128) return Ga;
if (Ga = (Ga | (127 & this.buf[this.pos]) << 7) >>> 0, this.buf[this.pos++] < 128) return Ga;
if (Ga = (Ga | (127 & this.buf[this.pos]) << 14) >>> 0, this.buf[this.pos++] < 128) return Ga;
if (Ga = (Ga | (127 & this.buf[this.pos]) << 21) >>> 0, this.buf[this.pos++] < 128) return Ga;
if (Ga = (Ga | (15 & this.buf[this.pos]) << 28) >>> 0, this.buf[this.pos++] < 128) return Ga;
if ((this.pos += 5) > this.len) throw this.pos = this.len, Va(this, 10);
return Ga;
}), Ja.prototype.int32 = function() {
return 0 | this.uint32();
}, Ja.prototype.sint32 = function() {
var e = this.uint32();
return e >>> 1 ^ -(1 & e) | 0;
}, Ja.prototype.bool = function() {
return 0 !== this.uint32();
}, Ja.prototype.fixed32 = function() {
if (this.pos + 4 > this.len) throw Va(this, 4);
return Ya(this.buf, this.pos += 4);
}, Ja.prototype.sfixed32 = function() {
if (this.pos + 4 > this.len) throw Va(this, 4);
return 0 | Ya(this.buf, this.pos += 4);
}, Ja.prototype.float = function() {
if (this.pos + 4 > this.len) throw Va(this, 4);
var e = _a.float.readFloatLE(this.buf, this.pos);
return this.pos += 4, e;
}, Ja.prototype.double = function() {
if (this.pos + 8 > this.len) throw Va(this, 4);
var e = _a.float.readDoubleLE(this.buf, this.pos);
return this.pos += 8, e;
}, Ja.prototype.bytes = function() {
var e = this.uint32(), t = this.pos, n = this.pos + e;
if (n > this.len) throw Va(this, e);
return this.pos += e, Array.isArray(this.buf) ? this.buf.slice(t, n) : t === n ? new this.buf.constructor(0) : this._slice.call(this.buf, t, n);
}, Ja.prototype.string = function() {
var e = this.bytes();
return Ha.read(e, 0, e.length);
}, Ja.prototype.skip = function(e) {
if ("number" == typeof e) {
if (this.pos + e > this.len) throw Va(this, e);
this.pos += e;
} else do {
if (this.pos >= this.len) throw Va(this);
} while (128 & this.buf[this.pos++]);
return this;
}, Ja.prototype.skipType = function(e) {
switch (e) {
case 0:
this.skip();
break;

case 1:
this.skip(8);
break;

case 2:
this.skip(this.uint32());
break;

case 3:
for (;4 != (e = 7 & this.uint32()); ) this.skipType(e);
break;

case 5:
this.skip(4);
break;

default:
throw Error("invalid wire type " + e + " at offset " + this.pos);
}
return this;
}, Ja._configure = function(e) {
Fa = e, Ja.create = ja(), Fa._configure();
var t = _a.Long ? "toLong" : "toNumber";
_a.merge(Ja.prototype, {
int64: function() {
return qa.call(this)[t](!1);
},
uint64: function() {
return qa.call(this)[t](!0);
},
sint64: function() {
return qa.call(this).zzDecode()[t](!1);
},
fixed64: function() {
return Wa.call(this)[t](!0);
},
sfixed64: function() {
return Wa.call(this)[t](!1);
}
});
};
var Ka = Xa;
function Xa(e) {
Ma.call(this, e);
}
(Xa.prototype = Object.create(Ma.prototype)).constructor = Xa, Xa._configure = function() {
_a.Buffer && (Xa.prototype._slice = _a.Buffer.prototype.slice);
}, Xa.prototype.string = function() {
var e = this.uint32();
return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + e, this.len));
}, Xa._configure();
var Qa = $a;
function $a(e, t, n) {
if ("function" != typeof e) throw TypeError("rpcImpl must be a function");
_a.EventEmitter.call(this), this.rpcImpl = e, this.requestDelimited = Boolean(t), 
this.responseDelimited = Boolean(n);
}
($a.prototype = Object.create(_a.EventEmitter.prototype)).constructor = $a, $a.prototype.rpcCall = function e(t, n, r, i, o) {
if (!i) throw TypeError("request must be specified");
var a = this;
if (!o) return _a.asPromise(e, a, t, n, r, i);
if (a.rpcImpl) try {
return a.rpcImpl(t, n[a.requestDelimited ? "encodeDelimited" : "encode"](i).finish(), (function(e, n) {
if (e) return a.emit("error", e, t), o(e);
if (null !== n) {
if (!(n instanceof r)) try {
n = r[a.responseDelimited ? "decodeDelimited" : "decode"](n);
} catch (e) {
return a.emit("error", e, t), o(e);
}
return a.emit("data", n, t), o(null, n);
}
a.end(!0);
}));
} catch (e) {
return a.emit("error", e, t), void setTimeout((function() {
o(e);
}), 0);
} else setTimeout((function() {
o(Error("already ended"));
}), 0);
}, $a.prototype.end = function(e) {
return this.rpcImpl && (e || this.rpcImpl(null, null, null), this.rpcImpl = null, 
this.emit("end").off()), this;
};
var Za = t((function(e, t) {
t.Service = Qa;
})), es = {}, ts = t((function(e, t) {
var n = t;
function r() {
n.util._configure(), n.Writer._configure(n.BufferWriter), n.Reader._configure(n.BufferReader);
}
n.build = "minimal", n.Writer = ba, n.BufferWriter = xa, n.Reader = Ma, n.BufferReader = Ka, 
n.util = _a, n.rpc = Za, n.roots = es, n.configure = r, r();
})), ns = ts, rs = t((function(e, t) {
e.exports = function() {
var e = Math.imul, t = Math.clz32;
function n(e) {
"@babel/helpers - typeof";
return n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
return typeof e;
} : function(e) {
return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
}, n(e);
}
function r(e, t) {
if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
}
function i(e, t) {
for (var n, r = 0; r < t.length; r++) (n = t[r]).enumerable = n.enumerable || !1, 
n.configurable = !0, "value" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);
}
function o(e, t, n) {
return t && i(e.prototype, t), n && i(e, n), Object.defineProperty(e, "prototype", {
writable: !1
}), e;
}
function a(e, t) {
if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
e.prototype = Object.create(t && t.prototype, {
constructor: {
value: e,
writable: !0,
configurable: !0
}
}), Object.defineProperty(e, "prototype", {
writable: !1
}), t && l(e, t);
}
function s(e) {
return s = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
return e.__proto__ || Object.getPrototypeOf(e);
}, s(e);
}
function l(e, t) {
return l = Object.setPrototypeOf || function(e, t) {
return e.__proto__ = t, e;
}, l(e, t);
}
function c() {
if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
if (Reflect.construct.sham) return !1;
if ("function" == typeof Proxy) return !0;
try {
return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}))), 
!0;
} catch (e) {
return !1;
}
}
function d() {
return d = c() ? Reflect.construct : function(e, t, n) {
var r = [ null ];
r.push.apply(r, t);
var i = new (Function.bind.apply(e, r));
return n && l(i, n.prototype), i;
}, d.apply(null, arguments);
}
function u(e) {
return -1 !== Function.toString.call(e).indexOf("[native code]");
}
function p(e) {
var t = "function" == typeof Map ? new Map : void 0;
return p = function(e) {
function n() {
return d(e, arguments, s(this).constructor);
}
if (null === e || !u(e)) return e;
if ("function" != typeof e) throw new TypeError("Super expression must either be null or a function");
if (void 0 !== t) {
if (t.has(e)) return t.get(e);
t.set(e, n);
}
return n.prototype = Object.create(e.prototype, {
constructor: {
value: n,
enumerable: !1,
writable: !0,
configurable: !0
}
}), l(n, e);
}, p(e);
}
function f(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function h(e, t) {
if (t && ("object" == typeof t || "function" == typeof t)) return t;
if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined");
return f(e);
}
function m(e) {
var t = c();
return function() {
var n, r = s(e);
if (t) {
var i = s(this).constructor;
n = Reflect.construct(r, arguments, i);
} else n = r.apply(this, arguments);
return h(this, n);
};
}
function g(e, t) {
return y(e) || I(e, t) || _(e, t) || S();
}
function y(e) {
if (Array.isArray(e)) return e;
}
function I(e, t) {
var n = null == e ? null : "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
if (null != n) {
var r, i, o = [], a = !0, s = !1;
try {
for (n = n.call(e); !(a = (r = n.next()).done) && (o.push(r.value), !t || o.length !== t); a = !0) ;
} catch (e) {
s = !0, i = e;
} finally {
try {
a || null == n.return || n.return();
} finally {
if (s) throw i;
}
}
return o;
}
}
function _(e, t) {
if (e) {
if ("string" == typeof e) return b(e, t);
var n = Object.prototype.toString.call(e).slice(8, -1);
return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? b(e, t) : void 0;
}
}
function b(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var n = 0, r = Array(t); n < t; n++) r[n] = e[n];
return r;
}
function S() {
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function v(e, t) {
var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
if (!n) {
if (Array.isArray(e) || (n = _(e)) || t && e && "number" == typeof e.length) {
n && (e = n);
var r = 0, i = function() {};
return {
s: i,
n: function() {
return r >= e.length ? {
done: !0
} : {
done: !1,
value: e[r++]
};
},
e: function(e) {
throw e;
},
f: i
};
}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
var o, a = !0, s = !1;
return {
s: function() {
n = n.call(e);
},
n: function() {
var e = n.next();
return a = e.done, e;
},
e: function(e) {
s = !0, o = e;
},
f: function() {
try {
a || null == n.return || n.return();
} finally {
if (s) throw o;
}
}
};
}
var T = function(e) {
var t = Math.abs, i = Math.max, s = Math.floor;
function l(e, t) {
var n;
if (r(this, l), (n = c.call(this, e)).sign = t, Object.setPrototypeOf(f(n), l.prototype), 
e > l.__kMaxLength) throw new RangeError("Maximum BigInt size exceeded");
return n;
}
a(l, e);
var c = m(l);
return o(l, [ {
key: "toDebugString",
value: function() {
var e, t = [ "BigInt[" ], n = v(this);
try {
for (n.s(); !(e = n.n()).done; ) {
var r = e.value;
t.push((r ? (r >>> 0).toString(16) : r) + ", ");
}
} catch (e) {
n.e(e);
} finally {
n.f();
}
return t.push("]"), t.join("");
}
}, {
key: "toString",
value: function() {
var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 10;
if (2 > e || 36 < e) throw new RangeError("toString() radix argument must be between 2 and 36");
return 0 === this.length ? "0" : 0 == (e & e - 1) ? l.__toStringBasePowerOfTwo(this, e) : l.__toStringGeneric(this, e, !1);
}
}, {
key: "valueOf",
value: function() {
throw new Error("Convert JSBI instances to native numbers using `toNumber`.");
}
}, {
key: "__copy",
value: function() {
for (var e = new l(this.length, this.sign), t = 0; t < this.length; t++) e[t] = this[t];
return e;
}
}, {
key: "__trim",
value: function() {
for (var e = this.length, t = this[e - 1]; 0 === t; ) t = this[--e - 1], this.pop();
return 0 === e && (this.sign = !1), this;
}
}, {
key: "__initializeDigits",
value: function() {
for (var e = 0; e < this.length; e++) this[e] = 0;
}
}, {
key: "__clzmsd",
value: function() {
return l.__clz30(this.__digit(this.length - 1));
}
}, {
key: "__inplaceMultiplyAdd",
value: function(e, t, n) {
n > this.length && (n = this.length);
for (var r = 32767 & e, i = e >>> 15, o = 0, a = t, s = 0; s < n; s++) {
var c = this.__digit(s), d = 32767 & c, u = c >>> 15, p = l.__imul(d, r), f = l.__imul(d, i), h = l.__imul(u, r), m = a + p + o;
o = m >>> 30, m &= 1073741823, o += (m += ((32767 & f) << 15) + ((32767 & h) << 15)) >>> 30, 
a = l.__imul(u, i) + (f >>> 15) + (h >>> 15), this.__setDigit(s, 1073741823 & m);
}
if (0 !== o || 0 !== a) throw new Error("implementation bug");
}
}, {
key: "__inplaceAdd",
value: function(e, t, n) {
for (var r, i = 0, o = 0; o < n; o++) i = (r = this.__halfDigit(t + o) + e.__halfDigit(o) + i) >>> 15, 
this.__setHalfDigit(t + o, 32767 & r);
return i;
}
}, {
key: "__inplaceSub",
value: function(e, t, n) {
var r = 0;
if (1 & t) {
t >>= 1;
for (var i = this.__digit(t), o = 32767 & i, a = 0; a < n - 1 >>> 1; a++) {
var s = e.__digit(a), l = (i >>> 15) - (32767 & s) - r;
r = 1 & l >>> 15, this.__setDigit(t + a, (32767 & l) << 15 | 32767 & o), r = 1 & (o = (32767 & (i = this.__digit(t + a + 1))) - (s >>> 15) - r) >>> 15;
}
var c = e.__digit(a), d = (i >>> 15) - (32767 & c) - r;
if (r = 1 & d >>> 15, this.__setDigit(t + a, (32767 & d) << 15 | 32767 & o), t + a + 1 >= this.length) throw new RangeError("out of bounds");
0 == (1 & n) && (r = 1 & (o = (32767 & (i = this.__digit(t + a + 1))) - (c >>> 15) - r) >>> 15, 
this.__setDigit(t + e.length, 1073709056 & i | 32767 & o));
} else {
t >>= 1;
for (var u = 0; u < e.length - 1; u++) {
var p = this.__digit(t + u), f = e.__digit(u), h = (32767 & p) - (32767 & f) - r, m = (p >>> 15) - (f >>> 15) - (r = 1 & h >>> 15);
r = 1 & m >>> 15, this.__setDigit(t + u, (32767 & m) << 15 | 32767 & h);
}
var g = this.__digit(t + u), y = e.__digit(u), I = (32767 & g) - (32767 & y) - r;
r = 1 & I >>> 15;
var _ = 0;
0 == (1 & n) && (r = 1 & (_ = (g >>> 15) - (y >>> 15) - r) >>> 15), this.__setDigit(t + u, (32767 & _) << 15 | 32767 & I);
}
return r;
}
}, {
key: "__inplaceRightShift",
value: function(e) {
if (0 !== e) {
for (var t, n = this.__digit(0) >>> e, r = this.length - 1, i = 0; i < r; i++) t = this.__digit(i + 1), 
this.__setDigit(i, 1073741823 & t << 30 - e | n), n = t >>> e;
this.__setDigit(r, n);
}
}
}, {
key: "__digit",
value: function(e) {
return this[e];
}
}, {
key: "__unsignedDigit",
value: function(e) {
return this[e] >>> 0;
}
}, {
key: "__setDigit",
value: function(e, t) {
this[e] = 0 | t;
}
}, {
key: "__setDigitGrow",
value: function(e, t) {
this[e] = 0 | t;
}
}, {
key: "__halfDigitLength",
value: function() {
var e = this.length;
return 32767 >= this.__unsignedDigit(e - 1) ? 2 * e - 1 : 2 * e;
}
}, {
key: "__halfDigit",
value: function(e) {
return 32767 & this[e >>> 1] >>> 15 * (1 & e);
}
}, {
key: "__setHalfDigit",
value: function(e, t) {
var n = e >>> 1, r = this.__digit(n), i = 1 & e ? 32767 & r | t << 15 : 1073709056 & r | 32767 & t;
this.__setDigit(n, i);
}
} ], [ {
key: "BigInt",
value: function(e) {
var t = Number.isFinite;
if ("number" == typeof e) {
if (0 === e) return l.__zero();
if (l.__isOneDigitInt(e)) return 0 > e ? l.__oneDigit(-e, !0) : l.__oneDigit(e, !1);
if (!t(e) || s(e) !== e) throw new RangeError("The number " + e + " cannot be converted to BigInt because it is not an integer");
return l.__fromDouble(e);
}
if ("string" == typeof e) {
var r = l.__fromString(e);
if (null === r) throw new SyntaxError("Cannot convert " + e + " to a BigInt");
return r;
}
if ("boolean" == typeof e) return !0 === e ? l.__oneDigit(1, !1) : l.__zero();
if ("object" === n(e)) {
if (e.constructor === l) return e;
var i = l.__toPrimitive(e);
return l.BigInt(i);
}
throw new TypeError("Cannot convert " + e + " to a BigInt");
}
}, {
key: "toNumber",
value: function(e) {
var t = e.length;
if (0 === t) return 0;
if (1 === t) {
var n = e.__unsignedDigit(0);
return e.sign ? -n : n;
}
var r = e.__digit(t - 1), i = l.__clz30(r), o = 30 * t - i;
if (1024 < o) return e.sign ? -1 / 0 : 1 / 0;
var a = o - 1, s = r, c = t - 1, d = i + 3, u = 32 === d ? 0 : s << d;
u >>>= 12;
var p = d - 12, f = 12 <= d ? 0 : s << 20 + d, h = 20 + d;
for (0 < p && 0 < c && (c--, u |= (s = e.__digit(c)) >>> 30 - p, f = s << p + 2, 
h = p + 2); 0 < h && 0 < c; ) c--, s = e.__digit(c), f |= 30 <= h ? s << h - 30 : s >>> 30 - h, 
h -= 30;
var m = l.__decideRounding(e, h, c, s);
if ((1 === m || 0 === m && 1 == (1 & f)) && 0 == (f = f + 1 >>> 0) && 0 != ++u >>> 20 && (u = 0, 
1023 < ++a)) return e.sign ? -1 / 0 : 1 / 0;
var g = e.sign ? -2147483648 : 0;
return a = a + 1023 << 20, l.__kBitConversionInts[1] = g | a | u, l.__kBitConversionInts[0] = f, 
l.__kBitConversionDouble[0];
}
}, {
key: "unaryMinus",
value: function(e) {
if (0 === e.length) return e;
var t = e.__copy();
return t.sign = !e.sign, t;
}
}, {
key: "bitwiseNot",
value: function(e) {
return e.sign ? l.__absoluteSubOne(e).__trim() : l.__absoluteAddOne(e, !0);
}
}, {
key: "exponentiate",
value: function(e, t) {
if (t.sign) throw new RangeError("Exponent must be positive");
if (0 === t.length) return l.__oneDigit(1, !1);
if (0 === e.length) return e;
if (1 === e.length && 1 === e.__digit(0)) return e.sign && 0 == (1 & t.__digit(0)) ? l.unaryMinus(e) : e;
if (1 < t.length) throw new RangeError("BigInt too big");
var n = t.__unsignedDigit(0);
if (1 === n) return e;
if (n >= l.__kMaxLengthBits) throw new RangeError("BigInt too big");
if (1 === e.length && 2 === e.__digit(0)) {
var r = 1 + (0 | n / 30), i = new l(r, e.sign && 0 != (1 & n));
i.__initializeDigits();
var o = 1 << n % 30;
return i.__setDigit(r - 1, o), i;
}
var a = null, s = e;
for (0 != (1 & n) && (a = e), n >>= 1; 0 !== n; n >>= 1) s = l.multiply(s, s), 0 != (1 & n) && (a = null === a ? s : l.multiply(a, s));
return a;
}
}, {
key: "multiply",
value: function(e, t) {
if (0 === e.length) return e;
if (0 === t.length) return t;
var n = e.length + t.length;
30 <= e.__clzmsd() + t.__clzmsd() && n--;
var r = new l(n, e.sign !== t.sign);
r.__initializeDigits();
for (var i = 0; i < e.length; i++) l.__multiplyAccumulate(t, e.__digit(i), r, i);
return r.__trim();
}
}, {
key: "divide",
value: function(e, t) {
if (0 === t.length) throw new RangeError("Division by zero");
if (0 > l.__absoluteCompare(e, t)) return l.__zero();
var n, r = e.sign !== t.sign, i = t.__unsignedDigit(0);
if (1 === t.length && 32767 >= i) {
if (1 === i) return r === e.sign ? e : l.unaryMinus(e);
n = l.__absoluteDivSmall(e, i, null);
} else n = l.__absoluteDivLarge(e, t, !0, !1);
return n.sign = r, n.__trim();
}
}, {
key: "remainder",
value: function(e, t) {
if (0 === t.length) throw new RangeError("Division by zero");
if (0 > l.__absoluteCompare(e, t)) return e;
var n = t.__unsignedDigit(0);
if (1 === t.length && 32767 >= n) {
if (1 === n) return l.__zero();
var r = l.__absoluteModSmall(e, n);
return 0 === r ? l.__zero() : l.__oneDigit(r, e.sign);
}
var i = l.__absoluteDivLarge(e, t, !1, !0);
return i.sign = e.sign, i.__trim();
}
}, {
key: "add",
value: function(e, t) {
var n = e.sign;
return n === t.sign ? l.__absoluteAdd(e, t, n) : 0 <= l.__absoluteCompare(e, t) ? l.__absoluteSub(e, t, n) : l.__absoluteSub(t, e, !n);
}
}, {
key: "subtract",
value: function(e, t) {
var n = e.sign;
return n === t.sign ? 0 <= l.__absoluteCompare(e, t) ? l.__absoluteSub(e, t, n) : l.__absoluteSub(t, e, !n) : l.__absoluteAdd(e, t, n);
}
}, {
key: "leftShift",
value: function(e, t) {
return 0 === t.length || 0 === e.length ? e : t.sign ? l.__rightShiftByAbsolute(e, t) : l.__leftShiftByAbsolute(e, t);
}
}, {
key: "signedRightShift",
value: function(e, t) {
return 0 === t.length || 0 === e.length ? e : t.sign ? l.__leftShiftByAbsolute(e, t) : l.__rightShiftByAbsolute(e, t);
}
}, {
key: "unsignedRightShift",
value: function() {
throw new TypeError("BigInts have no unsigned right shift; use >> instead");
}
}, {
key: "lessThan",
value: function(e, t) {
return 0 > l.__compareToBigInt(e, t);
}
}, {
key: "lessThanOrEqual",
value: function(e, t) {
return 0 >= l.__compareToBigInt(e, t);
}
}, {
key: "greaterThan",
value: function(e, t) {
return 0 < l.__compareToBigInt(e, t);
}
}, {
key: "greaterThanOrEqual",
value: function(e, t) {
return 0 <= l.__compareToBigInt(e, t);
}
}, {
key: "equal",
value: function(e, t) {
if (e.sign !== t.sign) return !1;
if (e.length !== t.length) return !1;
for (var n = 0; n < e.length; n++) if (e.__digit(n) !== t.__digit(n)) return !1;
return !0;
}
}, {
key: "notEqual",
value: function(e, t) {
return !l.equal(e, t);
}
}, {
key: "bitwiseAnd",
value: function(e, t) {
if (!e.sign && !t.sign) return l.__absoluteAnd(e, t).__trim();
if (e.sign && t.sign) {
var n = i(e.length, t.length) + 1, r = l.__absoluteSubOne(e, n), o = l.__absoluteSubOne(t);
return r = l.__absoluteOr(r, o, r), l.__absoluteAddOne(r, !0, r).__trim();
}
if (e.sign) {
var a = [ t, e ];
e = a[0], t = a[1];
}
return l.__absoluteAndNot(e, l.__absoluteSubOne(t)).__trim();
}
}, {
key: "bitwiseXor",
value: function(e, t) {
if (!e.sign && !t.sign) return l.__absoluteXor(e, t).__trim();
if (e.sign && t.sign) {
var n = i(e.length, t.length), r = l.__absoluteSubOne(e, n), o = l.__absoluteSubOne(t);
return l.__absoluteXor(r, o, r).__trim();
}
var a = i(e.length, t.length) + 1;
if (e.sign) {
var s = [ t, e ];
e = s[0], t = s[1];
}
var c = l.__absoluteSubOne(t, a);
return c = l.__absoluteXor(c, e, c), l.__absoluteAddOne(c, !0, c).__trim();
}
}, {
key: "bitwiseOr",
value: function(e, t) {
var n = i(e.length, t.length);
if (!e.sign && !t.sign) return l.__absoluteOr(e, t).__trim();
if (e.sign && t.sign) {
var r = l.__absoluteSubOne(e, n), o = l.__absoluteSubOne(t);
return r = l.__absoluteAnd(r, o, r), l.__absoluteAddOne(r, !0, r).__trim();
}
if (e.sign) {
var a = [ t, e ];
e = a[0], t = a[1];
}
var s = l.__absoluteSubOne(t, n);
return s = l.__absoluteAndNot(s, e, s), l.__absoluteAddOne(s, !0, s).__trim();
}
}, {
key: "asIntN",
value: function(e, t) {
if (0 === t.length) return t;
if (0 > (e = s(e))) throw new RangeError("Invalid value: not (convertible to) a safe integer");
if (0 === e) return l.__zero();
if (e >= l.__kMaxLengthBits) return t;
var n = 0 | (e + 29) / 30;
if (t.length < n) return t;
var r = t.__unsignedDigit(n - 1), i = 1 << (e - 1) % 30;
if (t.length === n && r < i) return t;
if ((r & i) !== i) return l.__truncateToNBits(e, t);
if (!t.sign) return l.__truncateAndSubFromPowerOfTwo(e, t, !0);
if (0 == (r & i - 1)) {
for (var o = n - 2; 0 <= o; o--) if (0 !== t.__digit(o)) return l.__truncateAndSubFromPowerOfTwo(e, t, !1);
return t.length === n && r === i ? t : l.__truncateToNBits(e, t);
}
return l.__truncateAndSubFromPowerOfTwo(e, t, !1);
}
}, {
key: "asUintN",
value: function(e, t) {
if (0 === t.length) return t;
if (0 > (e = s(e))) throw new RangeError("Invalid value: not (convertible to) a safe integer");
if (0 === e) return l.__zero();
if (t.sign) {
if (e > l.__kMaxLengthBits) throw new RangeError("BigInt too big");
return l.__truncateAndSubFromPowerOfTwo(e, t, !1);
}
if (e >= l.__kMaxLengthBits) return t;
var n = 0 | (e + 29) / 30;
if (t.length < n) return t;
var r = e % 30;
if (t.length == n) {
if (0 === r) return t;
if (0 == t.__digit(n - 1) >>> r) return t;
}
return l.__truncateToNBits(e, t);
}
}, {
key: "ADD",
value: function(e, t) {
if (e = l.__toPrimitive(e), t = l.__toPrimitive(t), "string" == typeof e) return "string" != typeof t && (t = t.toString()), 
e + t;
if ("string" == typeof t) return e.toString() + t;
if (e = l.__toNumeric(e), t = l.__toNumeric(t), l.__isBigInt(e) && l.__isBigInt(t)) return l.add(e, t);
if ("number" == typeof e && "number" == typeof t) return e + t;
throw new TypeError("Cannot mix BigInt and other types, use explicit conversions");
}
}, {
key: "LT",
value: function(e, t) {
return l.__compare(e, t, 0);
}
}, {
key: "LE",
value: function(e, t) {
return l.__compare(e, t, 1);
}
}, {
key: "GT",
value: function(e, t) {
return l.__compare(e, t, 2);
}
}, {
key: "GE",
value: function(e, t) {
return l.__compare(e, t, 3);
}
}, {
key: "EQ",
value: function(e, t) {
for (;;) {
if (l.__isBigInt(e)) return l.__isBigInt(t) ? l.equal(e, t) : l.EQ(t, e);
if ("number" == typeof e) {
if (l.__isBigInt(t)) return l.__equalToNumber(t, e);
if ("object" !== n(t)) return e == t;
t = l.__toPrimitive(t);
} else if ("string" == typeof e) {
if (l.__isBigInt(t)) return null !== (e = l.__fromString(e)) && l.equal(e, t);
if ("object" !== n(t)) return e == t;
t = l.__toPrimitive(t);
} else if ("boolean" == typeof e) {
if (l.__isBigInt(t)) return l.__equalToNumber(t, +e);
if ("object" !== n(t)) return e == t;
t = l.__toPrimitive(t);
} else if ("symbol" === n(e)) {
if (l.__isBigInt(t)) return !1;
if ("object" !== n(t)) return e == t;
t = l.__toPrimitive(t);
} else {
if ("object" !== n(e)) return e == t;
if ("object" === n(t) && t.constructor !== l) return e == t;
e = l.__toPrimitive(e);
}
}
}
}, {
key: "NE",
value: function(e, t) {
return !l.EQ(e, t);
}
}, {
key: "DataViewGetBigInt64",
value: function(e, t) {
var n = !!(2 < arguments.length && void 0 !== arguments[2]) && arguments[2];
return l.asIntN(64, l.DataViewGetBigUint64(e, t, n));
}
}, {
key: "DataViewGetBigUint64",
value: function(e, t) {
var n = !!(2 < arguments.length && void 0 !== arguments[2]) && arguments[2], r = g(n ? [ 4, 0 ] : [ 0, 4 ], 2), i = r[0], o = r[1], a = e.getUint32(t + i, n), s = e.getUint32(t + o, n), c = new l(3, !1);
return c.__setDigit(0, 1073741823 & s), c.__setDigit(1, (268435455 & a) << 2 | s >>> 30), 
c.__setDigit(2, a >>> 28), c.__trim();
}
}, {
key: "DataViewSetBigInt64",
value: function(e, t, n) {
var r = !!(3 < arguments.length && void 0 !== arguments[3]) && arguments[3];
l.DataViewSetBigUint64(e, t, n, r);
}
}, {
key: "DataViewSetBigUint64",
value: function(e, t, n) {
var r = !!(3 < arguments.length && void 0 !== arguments[3]) && arguments[3], i = 0, o = 0;
if (0 < (n = l.asUintN(64, n)).length && (o = n.__digit(0), 1 < n.length)) {
var a = n.__digit(1);
o |= a << 30, i = a >>> 2, 2 < n.length && (i |= n.__digit(2) << 28);
}
var s = g(r ? [ 4, 0 ] : [ 0, 4 ], 2), c = s[0], d = s[1];
e.setUint32(t + c, i, r), e.setUint32(t + d, o, r);
}
}, {
key: "__zero",
value: function() {
return new l(0, !1);
}
}, {
key: "__oneDigit",
value: function(e, t) {
var n = new l(1, t);
return n.__setDigit(0, e), n;
}
}, {
key: "__decideRounding",
value: function(e, t, n, r) {
if (0 < t) return -1;
var i;
if (0 > t) i = -t - 1; else {
if (0 === n) return -1;
n--, r = e.__digit(n), i = 29;
}
var o = 1 << i;
if (0 == (r & o)) return -1;
if (0 != (r & (o -= 1))) return 1;
for (;0 < n; ) if (n--, 0 !== e.__digit(n)) return 1;
return 0;
}
}, {
key: "__fromDouble",
value: function(e) {
l.__kBitConversionDouble[0] = e;
var t, n = (2047 & l.__kBitConversionInts[1] >>> 20) - 1023, r = 1 + (0 | n / 30), i = new l(r, 0 > e), o = 1048575 & l.__kBitConversionInts[1] | 1048576, a = l.__kBitConversionInts[0], s = 20, c = n % 30, d = 0;
if (c < s) {
var u = s - c;
d = u + 32, t = o >>> u, o = o << 32 - u | a >>> u, a <<= 32 - u;
} else if (c === s) d = 32, t = o, o = a, a = 0; else {
var p = c - s;
d = 32 - p, t = o << p | a >>> 32 - p, o = a << p, a = 0;
}
i.__setDigit(r - 1, t);
for (var f = r - 2; 0 <= f; f--) 0 < d ? (d -= 30, t = o >>> 2, o = o << 30 | a >>> 2, 
a <<= 30) : t = 0, i.__setDigit(f, t);
return i.__trim();
}
}, {
key: "__isWhitespace",
value: function(e) {
return !!(13 >= e && 9 <= e) || (159 >= e ? 32 == e : 131071 >= e ? 160 == e || 5760 == e : 196607 >= e ? 10 >= (e &= 131071) || 40 == e || 41 == e || 47 == e || 95 == e || 4096 == e : 65279 == e);
}
}, {
key: "__fromString",
value: function(e) {
var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 0, n = 0, r = e.length, i = 0;
if (i === r) return l.__zero();
for (var o = e.charCodeAt(i); l.__isWhitespace(o); ) {
if (++i === r) return l.__zero();
o = e.charCodeAt(i);
}
if (43 === o) {
if (++i === r) return null;
o = e.charCodeAt(i), n = 1;
} else if (45 === o) {
if (++i === r) return null;
o = e.charCodeAt(i), n = -1;
}
if (0 === t) {
if (t = 10, 48 === o) {
if (++i === r) return l.__zero();
if (88 === (o = e.charCodeAt(i)) || 120 === o) {
if (t = 16, ++i === r) return null;
o = e.charCodeAt(i);
} else if (79 === o || 111 === o) {
if (t = 8, ++i === r) return null;
o = e.charCodeAt(i);
} else if (66 === o || 98 === o) {
if (t = 2, ++i === r) return null;
o = e.charCodeAt(i);
}
}
} else if (16 === t && 48 === o) {
if (++i === r) return l.__zero();
if (88 === (o = e.charCodeAt(i)) || 120 === o) {
if (++i === r) return null;
o = e.charCodeAt(i);
}
}
if (0 !== n && 10 !== t) return null;
for (;48 === o; ) {
if (++i === r) return l.__zero();
o = e.charCodeAt(i);
}
var a = r - i, s = l.__kMaxBitsPerChar[t], c = l.__kBitsPerCharTableMultiplier - 1;
if (a > 1073741824 / s) return null;
var d = new l(0 | (29 + (s * a + c >>> l.__kBitsPerCharTableShift)) / 30, !1), u = 10 > t ? t : 10, p = 10 < t ? t - 10 : 0;
if (0 == (t & t - 1)) {
s >>= l.__kBitsPerCharTableShift;
var f = [], h = [], m = !1;
do {
for (var g, y = 0, I = 0; ;) {
if (g = void 0, o - 48 >>> 0 < u) g = o - 48; else {
if (!((32 | o) - 97 >>> 0 < p)) {
m = !0;
break;
}
g = (32 | o) - 87;
}
if (I += s, y = y << s | g, ++i === r) {
m = !0;
break;
}
if (o = e.charCodeAt(i), 30 < I + s) break;
}
f.push(y), h.push(I);
} while (!m);
l.__fillFromParts(d, f, h);
} else {
d.__initializeDigits();
var _ = !1, b = 0;
do {
for (var S, v = 0, T = 1; ;) {
if (S = void 0, o - 48 >>> 0 < u) S = o - 48; else {
if (!((32 | o) - 97 >>> 0 < p)) {
_ = !0;
break;
}
S = (32 | o) - 87;
}
var E = T * t;
if (1073741823 < E) break;
if (T = E, v = v * t + S, b++, ++i === r) {
_ = !0;
break;
}
o = e.charCodeAt(i);
}
var P = 0 | (s * b + (c = 30 * l.__kBitsPerCharTableMultiplier - 1) >>> l.__kBitsPerCharTableShift) / 30;
d.__inplaceMultiplyAdd(T, v, P);
} while (!_);
}
if (i !== r) {
if (!l.__isWhitespace(o)) return null;
for (i++; i < r; i++) if (o = e.charCodeAt(i), !l.__isWhitespace(o)) return null;
}
return d.sign = -1 === n, d.__trim();
}
}, {
key: "__fillFromParts",
value: function(e, t, n) {
for (var r = 0, i = 0, o = 0, a = t.length - 1; 0 <= a; a--) {
var s = t[a], l = n[a];
i |= s << o, 30 === (o += l) ? (e.__setDigit(r++, i), o = 0, i = 0) : 30 < o && (e.__setDigit(r++, 1073741823 & i), 
i = s >>> l - (o -= 30));
}
if (0 !== i) {
if (r >= e.length) throw new Error("implementation bug");
e.__setDigit(r++, i);
}
for (;r < e.length; r++) e.__setDigit(r, 0);
}
}, {
key: "__toStringBasePowerOfTwo",
value: function(e, t) {
var n = e.length, r = t - 1, i = r = (15 & (r = (51 & (r = (85 & r >>> 1) + (85 & r)) >>> 2) + (51 & r)) >>> 4) + (15 & r), o = t - 1, a = e.__digit(n - 1), s = 0 | (30 * n - l.__clz30(a) + i - 1) / i;
if (e.sign && s++, 268435456 < s) throw new Error("string too long");
for (var c = Array(s), d = s - 1, u = 0, p = 0, f = 0; f < n - 1; f++) {
var h = e.__digit(f), m = (u | h << p) & o;
c[d--] = l.__kConversionChars[m];
var g = i - p;
for (u = h >>> g, p = 30 - g; p >= i; ) c[d--] = l.__kConversionChars[u & o], u >>>= i, 
p -= i;
}
var y = (u | a << p) & o;
for (c[d--] = l.__kConversionChars[y], u = a >>> i - p; 0 !== u; ) c[d--] = l.__kConversionChars[u & o], 
u >>>= i;
if (e.sign && (c[d--] = "-"), -1 !== d) throw new Error("implementation bug");
return c.join("");
}
}, {
key: "__toStringGeneric",
value: function(e, t, n) {
var r = e.length;
if (0 === r) return "";
if (1 === r) {
var i = e.__unsignedDigit(0).toString(t);
return !1 === n && e.sign && (i = "-" + i), i;
}
var o, a, s = 30 * r - l.__clz30(e.__digit(r - 1)), c = l.__kMaxBitsPerChar[t] - 1, d = s * l.__kBitsPerCharTableMultiplier, u = 1 + (d = 0 | (d += c - 1) / c) >> 1, p = l.exponentiate(l.__oneDigit(t, !1), l.__oneDigit(u, !1)), f = p.__unsignedDigit(0);
if (1 === p.length && 32767 >= f) {
(o = new l(e.length, !1)).__initializeDigits();
for (var h, m = 0, g = 2 * e.length - 1; 0 <= g; g--) h = m << 15 | e.__halfDigit(g), 
o.__setHalfDigit(g, 0 | h / f), m = 0 | h % f;
a = m.toString(t);
} else {
var y = l.__absoluteDivLarge(e, p, !0, !0);
o = y.quotient;
var I = y.remainder.__trim();
a = l.__toStringGeneric(I, t, !0);
}
o.__trim();
for (var _ = l.__toStringGeneric(o, t, !0); a.length < u; ) a = "0" + a;
return !1 === n && e.sign && (_ = "-" + _), _ + a;
}
}, {
key: "__unequalSign",
value: function(e) {
return e ? -1 : 1;
}
}, {
key: "__absoluteGreater",
value: function(e) {
return e ? -1 : 1;
}
}, {
key: "__absoluteLess",
value: function(e) {
return e ? 1 : -1;
}
}, {
key: "__compareToBigInt",
value: function(e, t) {
var n = e.sign;
if (n !== t.sign) return l.__unequalSign(n);
var r = l.__absoluteCompare(e, t);
return 0 < r ? l.__absoluteGreater(n) : 0 > r ? l.__absoluteLess(n) : 0;
}
}, {
key: "__compareToNumber",
value: function(e, n) {
if (l.__isOneDigitInt(n)) {
var r = e.sign, i = 0 > n;
if (r !== i) return l.__unequalSign(r);
if (0 === e.length) {
if (i) throw new Error("implementation bug");
return 0 === n ? 0 : -1;
}
if (1 < e.length) return l.__absoluteGreater(r);
var o = t(n), a = e.__unsignedDigit(0);
return a > o ? l.__absoluteGreater(r) : a < o ? l.__absoluteLess(r) : 0;
}
return l.__compareToDouble(e, n);
}
}, {
key: "__compareToDouble",
value: function(e, t) {
if (t != t) return t;
if (t === 1 / 0) return -1;
if (t === -1 / 0) return 1;
var n = e.sign;
if (n !== 0 > t) return l.__unequalSign(n);
if (0 === t) throw new Error("implementation bug: should be handled elsewhere");
if (0 === e.length) return -1;
l.__kBitConversionDouble[0] = t;
var r = 2047 & l.__kBitConversionInts[1] >>> 20;
if (2047 == r) throw new Error("implementation bug: handled elsewhere");
var i = r - 1023;
if (0 > i) return l.__absoluteGreater(n);
var o = e.length, a = e.__digit(o - 1), s = l.__clz30(a), c = 30 * o - s, d = i + 1;
if (c < d) return l.__absoluteLess(n);
if (c > d) return l.__absoluteGreater(n);
var u = 1048576 | 1048575 & l.__kBitConversionInts[1], p = l.__kBitConversionInts[0], f = 20, h = 29 - s;
if (h !== (0 | (c - 1) % 30)) throw new Error("implementation bug");
var m, g = 0;
if (h < f) {
var y = f - h;
g = y + 32, m = u >>> y, u = u << 32 - y | p >>> y, p <<= 32 - y;
} else if (h === f) g = 32, m = u, u = p, p = 0; else {
var I = h - f;
g = 32 - I, m = u << I | p >>> 32 - I, u = p << I, p = 0;
}
if ((a >>>= 0) > (m >>>= 0)) return l.__absoluteGreater(n);
if (a < m) return l.__absoluteLess(n);
for (var _ = o - 2; 0 <= _; _--) {
0 < g ? (g -= 30, m = u >>> 2, u = u << 30 | p >>> 2, p <<= 30) : m = 0;
var b = e.__unsignedDigit(_);
if (b > m) return l.__absoluteGreater(n);
if (b < m) return l.__absoluteLess(n);
}
if (0 !== u || 0 !== p) {
if (0 === g) throw new Error("implementation bug");
return l.__absoluteLess(n);
}
return 0;
}
}, {
key: "__equalToNumber",
value: function(e, n) {
return l.__isOneDigitInt(n) ? 0 === n ? 0 === e.length : 1 === e.length && e.sign === 0 > n && e.__unsignedDigit(0) === t(n) : 0 === l.__compareToDouble(e, n);
}
}, {
key: "__comparisonResultToBool",
value: function(e, t) {
return 0 === t ? 0 > e : 1 === t ? 0 >= e : 2 === t ? 0 < e : 3 === t ? 0 <= e : void 0;
}
}, {
key: "__compare",
value: function(e, t, n) {
if (e = l.__toPrimitive(e), t = l.__toPrimitive(t), "string" == typeof e && "string" == typeof t) switch (n) {
case 0:
return e < t;

case 1:
return e <= t;

case 2:
return e > t;

case 3:
return e >= t;
}
if (l.__isBigInt(e) && "string" == typeof t) return null !== (t = l.__fromString(t)) && l.__comparisonResultToBool(l.__compareToBigInt(e, t), n);
if ("string" == typeof e && l.__isBigInt(t)) return null !== (e = l.__fromString(e)) && l.__comparisonResultToBool(l.__compareToBigInt(e, t), n);
if (e = l.__toNumeric(e), t = l.__toNumeric(t), l.__isBigInt(e)) {
if (l.__isBigInt(t)) return l.__comparisonResultToBool(l.__compareToBigInt(e, t), n);
if ("number" != typeof t) throw new Error("implementation bug");
return l.__comparisonResultToBool(l.__compareToNumber(e, t), n);
}
if ("number" != typeof e) throw new Error("implementation bug");
if (l.__isBigInt(t)) return l.__comparisonResultToBool(l.__compareToNumber(t, e), 2 ^ n);
if ("number" != typeof t) throw new Error("implementation bug");
return 0 === n ? e < t : 1 === n ? e <= t : 2 === n ? e > t : 3 === n ? e >= t : void 0;
}
}, {
key: "__absoluteAdd",
value: function(e, t, n) {
if (e.length < t.length) return l.__absoluteAdd(t, e, n);
if (0 === e.length) return e;
if (0 === t.length) return e.sign === n ? e : l.unaryMinus(e);
var r = e.length;
(0 === e.__clzmsd() || t.length === e.length && 0 === t.__clzmsd()) && r++;
for (var i, o = new l(r, n), a = 0, s = 0; s < t.length; s++) a = (i = e.__digit(s) + t.__digit(s) + a) >>> 30, 
o.__setDigit(s, 1073741823 & i);
for (;s < e.length; s++) {
var c = e.__digit(s) + a;
a = c >>> 30, o.__setDigit(s, 1073741823 & c);
}
return s < o.length && o.__setDigit(s, a), o.__trim();
}
}, {
key: "__absoluteSub",
value: function(e, t, n) {
if (0 === e.length) return e;
if (0 === t.length) return e.sign === n ? e : l.unaryMinus(e);
for (var r, i = new l(e.length, n), o = 0, a = 0; a < t.length; a++) o = 1 & (r = e.__digit(a) - t.__digit(a) - o) >>> 30, 
i.__setDigit(a, 1073741823 & r);
for (;a < e.length; a++) {
var s = e.__digit(a) - o;
o = 1 & s >>> 30, i.__setDigit(a, 1073741823 & s);
}
return i.__trim();
}
}, {
key: "__absoluteAddOne",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length;
null === n ? n = new l(r, t) : n.sign = t;
for (var i, o = 1, a = 0; a < r; a++) o = (i = e.__digit(a) + o) >>> 30, n.__setDigit(a, 1073741823 & i);
return 0 !== o && n.__setDigitGrow(r, 1), n;
}
}, {
key: "__absoluteSubOne",
value: function(e, t) {
for (var n, r = e.length, i = new l(t = t || r, !1), o = 1, a = 0; a < r; a++) o = 1 & (n = e.__digit(a) - o) >>> 30, 
i.__setDigit(a, 1073741823 & n);
if (0 !== o) throw new Error("implementation bug");
for (var s = r; s < t; s++) i.__setDigit(s, 0);
return i;
}
}, {
key: "__absoluteAnd",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length, i = t.length, o = i;
if (r < i) {
o = r;
var a = e, s = r;
e = t, r = i, t = a, i = s;
}
var c = o;
null === n ? n = new l(c, !1) : c = n.length;
for (var d = 0; d < o; d++) n.__setDigit(d, e.__digit(d) & t.__digit(d));
for (;d < c; d++) n.__setDigit(d, 0);
return n;
}
}, {
key: "__absoluteAndNot",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length, i = t.length, o = i;
r < i && (o = r);
var a = r;
null === n ? n = new l(a, !1) : a = n.length;
for (var s = 0; s < o; s++) n.__setDigit(s, e.__digit(s) & ~t.__digit(s));
for (;s < r; s++) n.__setDigit(s, e.__digit(s));
for (;s < a; s++) n.__setDigit(s, 0);
return n;
}
}, {
key: "__absoluteOr",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length, i = t.length, o = i;
if (r < i) {
o = r;
var a = e, s = r;
e = t, r = i, t = a, i = s;
}
var c = r;
null === n ? n = new l(c, !1) : c = n.length;
for (var d = 0; d < o; d++) n.__setDigit(d, e.__digit(d) | t.__digit(d));
for (;d < r; d++) n.__setDigit(d, e.__digit(d));
for (;d < c; d++) n.__setDigit(d, 0);
return n;
}
}, {
key: "__absoluteXor",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null, r = e.length, i = t.length, o = i;
if (r < i) {
o = r;
var a = e, s = r;
e = t, r = i, t = a, i = s;
}
var c = r;
null === n ? n = new l(c, !1) : c = n.length;
for (var d = 0; d < o; d++) n.__setDigit(d, e.__digit(d) ^ t.__digit(d));
for (;d < r; d++) n.__setDigit(d, e.__digit(d));
for (;d < c; d++) n.__setDigit(d, 0);
return n;
}
}, {
key: "__absoluteCompare",
value: function(e, t) {
var n = e.length - t.length;
if (0 != n) return n;
for (var r = e.length - 1; 0 <= r && e.__digit(r) === t.__digit(r); ) r--;
return 0 > r ? 0 : e.__unsignedDigit(r) > t.__unsignedDigit(r) ? 1 : -1;
}
}, {
key: "__multiplyAccumulate",
value: function(e, t, n, r) {
if (0 !== t) {
for (var i = 32767 & t, o = t >>> 15, a = 0, s = 0, c = 0; c < e.length; c++, r++) {
var d = n.__digit(r), u = e.__digit(c), p = 32767 & u, f = u >>> 15, h = l.__imul(p, i), m = l.__imul(p, o), g = l.__imul(f, i);
a = (d += s + h + a) >>> 30, d &= 1073741823, a += (d += ((32767 & m) << 15) + ((32767 & g) << 15)) >>> 30, 
s = l.__imul(f, o) + (m >>> 15) + (g >>> 15), n.__setDigit(r, 1073741823 & d);
}
for (;0 !== a || 0 !== s; r++) {
var y = n.__digit(r);
y += a + s, s = 0, a = y >>> 30, n.__setDigit(r, 1073741823 & y);
}
}
}
}, {
key: "__internalMultiplyAdd",
value: function(e, t, n, r, i) {
for (var o = n, a = 0, s = 0; s < r; s++) {
var c = e.__digit(s), d = l.__imul(32767 & c, t), u = l.__imul(c >>> 15, t), p = d + ((32767 & u) << 15) + a + o;
o = p >>> 30, a = u >>> 15, i.__setDigit(s, 1073741823 & p);
}
if (i.length > r) for (i.__setDigit(r++, o + a); r < i.length; ) i.__setDigit(r++, 0); else if (0 !== o + a) throw new Error("implementation bug");
}
}, {
key: "__absoluteDivSmall",
value: function(e, t) {
var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;
null === n && (n = new l(e.length, !1));
for (var r = 0, i = 2 * e.length - 1; 0 <= i; i -= 2) {
var o = (r << 15 | e.__halfDigit(i)) >>> 0, a = 0 | o / t, s = 0 | (o = ((r = 0 | o % t) << 15 | e.__halfDigit(i - 1)) >>> 0) / t;
r = 0 | o % t, n.__setDigit(i >>> 1, a << 15 | s);
}
return n;
}
}, {
key: "__absoluteModSmall",
value: function(e, t) {
for (var n = 0, r = 2 * e.length - 1; 0 <= r; r--) n = 0 | ((n << 15 | e.__halfDigit(r)) >>> 0) % t;
return n;
}
}, {
key: "__absoluteDivLarge",
value: function(e, t, n, r) {
var i = t.__halfDigitLength(), o = t.length, a = e.__halfDigitLength() - i, s = null;
n && (s = new l(a + 2 >>> 1, !1)).__initializeDigits();
var c = new l(i + 2 >>> 1, !1);
c.__initializeDigits();
var d = l.__clz15(t.__halfDigit(i - 1));
0 < d && (t = l.__specialLeftShift(t, d, 0));
for (var u = l.__specialLeftShift(e, d, 1), p = t.__halfDigit(i - 1), f = 0, h = a; 0 <= h; h--) {
var m = 32767, g = u.__halfDigit(h + i);
if (g !== p) {
var y = (g << 15 | u.__halfDigit(h + i - 1)) >>> 0;
m = 0 | y / p;
for (var I = 0 | y % p, _ = t.__halfDigit(i - 2), b = u.__halfDigit(h + i - 2); l.__imul(m, _) >>> 0 > (I << 16 | b) >>> 0 && (m--, 
!(32767 < (I += p))); ) ;
}
l.__internalMultiplyAdd(t, m, 0, o, c);
var S = u.__inplaceSub(c, h, i + 1);
0 !== S && (S = u.__inplaceAdd(t, h, i), u.__setHalfDigit(h + i, 32767 & u.__halfDigit(h + i) + S), 
m--), n && (1 & h ? f = m << 15 : s.__setDigit(h >>> 1, f | m));
}
if (r) return u.__inplaceRightShift(d), n ? {
quotient: s,
remainder: u
} : u;
if (n) return s;
throw new Error("unreachable");
}
}, {
key: "__clz15",
value: function(e) {
return l.__clz30(e) - 15;
}
}, {
key: "__specialLeftShift",
value: function(e, t, n) {
var r = e.length, i = new l(r + n, !1);
if (0 === t) {
for (var o = 0; o < r; o++) i.__setDigit(o, e.__digit(o));
return 0 < n && i.__setDigit(r, 0), i;
}
for (var a, s = 0, c = 0; c < r; c++) a = e.__digit(c), i.__setDigit(c, 1073741823 & a << t | s), 
s = a >>> 30 - t;
return 0 < n && i.__setDigit(r, s), i;
}
}, {
key: "__leftShiftByAbsolute",
value: function(e, t) {
var n = l.__toShiftAmount(t);
if (0 > n) throw new RangeError("BigInt too big");
var r = 0 | n / 30, i = n % 30, o = e.length, a = 0 !== i && 0 != e.__digit(o - 1) >>> 30 - i, s = o + r + (a ? 1 : 0), c = new l(s, e.sign);
if (0 === i) {
for (var d = 0; d < r; d++) c.__setDigit(d, 0);
for (;d < s; d++) c.__setDigit(d, e.__digit(d - r));
} else {
for (var u = 0, p = 0; p < r; p++) c.__setDigit(p, 0);
for (var f, h = 0; h < o; h++) f = e.__digit(h), c.__setDigit(h + r, 1073741823 & f << i | u), 
u = f >>> 30 - i;
if (a) c.__setDigit(o + r, u); else if (0 !== u) throw new Error("implementation bug");
}
return c.__trim();
}
}, {
key: "__rightShiftByAbsolute",
value: function(e, t) {
var n = e.length, r = e.sign, i = l.__toShiftAmount(t);
if (0 > i) return l.__rightShiftByMaximum(r);
var o = 0 | i / 30, a = i % 30, s = n - o;
if (0 >= s) return l.__rightShiftByMaximum(r);
var c = !1;
if (r) if (0 != (e.__digit(o) & (1 << a) - 1)) c = !0; else for (var d = 0; d < o; d++) if (0 !== e.__digit(d)) {
c = !0;
break;
}
c && 0 === a && 0 == ~e.__digit(n - 1) && s++;
var u = new l(s, r);
if (0 === a) {
u.__setDigit(s - 1, 0);
for (var p = o; p < n; p++) u.__setDigit(p - o, e.__digit(p));
} else {
for (var f, h = e.__digit(o) >>> a, m = n - o - 1, g = 0; g < m; g++) f = e.__digit(g + o + 1), 
u.__setDigit(g, 1073741823 & f << 30 - a | h), h = f >>> a;
u.__setDigit(m, h);
}
return c && (u = l.__absoluteAddOne(u, !0, u)), u.__trim();
}
}, {
key: "__rightShiftByMaximum",
value: function(e) {
return e ? l.__oneDigit(1, !0) : l.__zero();
}
}, {
key: "__toShiftAmount",
value: function(e) {
if (1 < e.length) return -1;
var t = e.__unsignedDigit(0);
return t > l.__kMaxLengthBits ? -1 : t;
}
}, {
key: "__toPrimitive",
value: function(e) {
var t = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "default";
if ("object" !== n(e)) return e;
if (e.constructor === l) return e;
if ("undefined" != typeof Symbol && "symbol" === n(Symbol.toPrimitive)) {
var r = e[Symbol.toPrimitive];
if (r) {
var i = r(t);
if ("object" !== n(i)) return i;
throw new TypeError("Cannot convert object to primitive value");
}
}
var o = e.valueOf;
if (o) {
var a = o.call(e);
if ("object" !== n(a)) return a;
}
var s = e.toString;
if (s) {
var c = s.call(e);
if ("object" !== n(c)) return c;
}
throw new TypeError("Cannot convert object to primitive value");
}
}, {
key: "__toNumeric",
value: function(e) {
return l.__isBigInt(e) ? e : +e;
}
}, {
key: "__isBigInt",
value: function(e) {
return "object" === n(e) && null !== e && e.constructor === l;
}
}, {
key: "__truncateToNBits",
value: function(e, t) {
for (var n = 0 | (e + 29) / 30, r = new l(n, t.sign), i = n - 1, o = 0; o < i; o++) r.__setDigit(o, t.__digit(o));
var a = t.__digit(i);
if (0 != e % 30) {
var s = 32 - e % 30;
a = a << s >>> s;
}
return r.__setDigit(i, a), r.__trim();
}
}, {
key: "__truncateAndSubFromPowerOfTwo",
value: function(e, t, n) {
for (var r, i = Math.min, o = 0 | (e + 29) / 30, a = new l(o, n), s = 0, c = o - 1, d = 0, u = i(c, t.length); s < u; s++) d = 1 & (r = 0 - t.__digit(s) - d) >>> 30, 
a.__setDigit(s, 1073741823 & r);
for (;s < c; s++) a.__setDigit(s, 0 | 1073741823 & -d);
var p, f = c < t.length ? t.__digit(c) : 0, h = e % 30;
if (0 === h) p = 0 - f - d, p &= 1073741823; else {
var m = 32 - h, g = 1 << 32 - m;
p = g - (f = f << m >>> m) - d, p &= g - 1;
}
return a.__setDigit(c, p), a.__trim();
}
}, {
key: "__digitPow",
value: function(e, t) {
for (var n = 1; 0 < t; ) 1 & t && (n *= e), t >>>= 1, e *= e;
return n;
}
}, {
key: "__isOneDigitInt",
value: function(e) {
return (1073741823 & e) === e;
}
} ]), l;
}(p(Array));
return T.__kMaxLength = 33554432, T.__kMaxLengthBits = T.__kMaxLength << 5, T.__kMaxBitsPerChar = [ 0, 0, 32, 51, 64, 75, 83, 90, 96, 102, 107, 111, 115, 119, 122, 126, 128, 131, 134, 136, 139, 141, 143, 145, 147, 149, 151, 153, 154, 156, 158, 159, 160, 162, 163, 165, 166 ], 
T.__kBitsPerCharTableShift = 5, T.__kBitsPerCharTableMultiplier = 1 << T.__kBitsPerCharTableShift, 
T.__kConversionChars = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z" ], 
T.__kBitConversionBuffer = new ArrayBuffer(8), T.__kBitConversionDouble = new Float64Array(T.__kBitConversionBuffer), 
T.__kBitConversionInts = new Int32Array(T.__kBitConversionBuffer), T.__clz30 = t ? function(e) {
return t(e) - 2;
} : function(e) {
var t = Math.LN2, n = Math.log;
return 0 === e ? 30 : 0 | 29 - (0 | n(e >>> 0) / t);
}, T.__imul = e || function(e, t) {
return 0 | e * t;
}, T;
}();
})), is = Function("return this")();
var os = class {
constructor(e) {
this.debugName = e, this.callbacks = [];
}
subscribe(e) {
return this.callbacks.push(e), () => {
const t = this.callbacks.indexOf(e);
t > -1 && this.callbacks.splice(t, 1);
};
}
listenOnce(e) {
const t = this.subscribe(((...n) => {
t(), e(...n);
}));
return t;
}
trigger(...e) {
if (this.callbacks.length) {
this.callbacks.slice().forEach((t => {
t(...e);
}));
}
}
}, as = class {
constructor(e = {}) {
this.data = e.data ?? new os, this.end = e.end ?? new os, this.error = e.error ?? new os;
}
start() {}
close() {
this.end.trigger(), this.end.callbacks.length = 0, this.data.callbacks.length = 0, 
this.error.callbacks.length = 0;
}
}, ss = class extends as {
constructor(e, t, n) {
super({
error: e.error
}), this.upstream = e, this.transformer = t, this.transformedStreamOptions = n, 
this.unsubscribeUpstreamEnd = this.upstream.end.subscribe((() => {
this.cleanup();
}));
}
start() {
this.unsubscribeUpstreamData = this.upstream.data.subscribe((e => {
this.transformer(e, this);
})), this.upstream.start();
}
close() {
this.cleanup(), this.transformedStreamOptions?.keepAliveUpstreamOnClose || (this.unsubscribeUpstreamEnd?.(), 
this.upstream.close());
}
cleanup() {
this.unsubscribeUpstreamData?.(), super.close();
}
}, ls = class extends ss {
constructor(e, t, n) {
super(e, (e => {
const t = this.batcher(e);
0 === this.batchDuration ? this.data.trigger([ t ]) : (this.buffer.push(t), this.scheduleBatch());
}), n), this.batcher = t, this.buffer = [], this.isFirstBatch = !0, this.batchDuration = n.batchDuration, 
this.initialBatchDuration = n.initialBatchDuration;
}
batch() {
this.buffer.length && this.data.trigger(this.buffer.splice(0, this.buffer.length));
}
scheduleBatch() {
if (this.timeout) return;
let e = this.batchDuration;
this.isFirstBatch && void 0 !== this.initialBatchDuration && (e = this.initialBatchDuration), 
this.isFirstBatch = !1, this.timeout = setTimeout((() => {
this.batch(), this.timeout = void 0;
}), e);
}
cleanup() {
this.batch(), this.timeout && (clearTimeout(this.timeout), this.timeout = void 0), 
this.buffer.length = 0, super.cleanup();
}
close() {
this.cleanup(), super.close();
}
}, cs = "__twinkle_error__", ds = class extends as {
constructor(e, t) {
super(), this.streamId = e, this.callNativeClose = t;
}
close() {
this.callNativeClose();
}
}, us = 0, ps = class {
constructor(e) {
this.nativeApi = e, this.id = 1, this.handlers = {}, this._streams = {}, this._methodAvailableCache = {}, 
this._eventAvailableCache = {};
}
_registerBinding(e) {
this.nativeApi.registerAsyncJsCallResponseHandler(((e, t, n, r, i, o) => {
if (e === this._bindingName) {
if (0 === t) return;
const a = this.handlers[t];
if (a) if (delete this.handlers[t], "string" == typeof r) {
let e = r;
void 0 !== o && (e += " [" + o + "]"), void 0 !== i && (e += " (" + i + ")"), a(void 0, new Error(e));
} else a(n, void 0); else console.error(`No handler for response ${t} at ${e}`);
}
})), this.nativeApi.registerJsBindingEventHandler(((t, n, r) => {
if (t === this._bindingName) {
e(n, r);
}
}));
}
getBindingStructure() {
return this._syncCall("__structure__", {});
}
getMethodStructure(e) {
return this.getBindingStructure()?.methods[e];
}
getEventStructure(e) {
return this.getBindingStructure()?.events[e];
}
isMethodAvailable(e) {
let t = this._methodAvailableCache[e];
return void 0 === t && (t = !!this.getMethodStructure(e), this._methodAvailableCache[e] = t), 
t;
}
isEventAvailable(e) {
let t = this._eventAvailableCache[e];
return void 0 === t && (t = !!this.getEventStructure(e), this._eventAvailableCache[e] = t), 
t;
}
_hasMethodOrEvent(e, t) {
const n = e + "." + t;
let r = this._methodAvailableCache[n];
return void 0 === r && (r = !!this._syncCall("__isMethodOrEventAvailable__", {
api: e,
methodOrEvent: t
}), this._methodAvailableCache[n] = r), r;
}
_hasMethod(e, t, n) {
return is.TwinkleConstants?.featureFlags?.hasMethodOrEventAvailable ? this._hasMethodOrEvent(t, n) : this.isMethodAvailable(e + "." + t + "." + n);
}
_hasEvent(e, t, n) {
return is.TwinkleConstants?.featureFlags?.hasMethodOrEventAvailable ? this._hasMethodOrEvent(t, n) : this.isEventAvailable(e + "." + t + "." + n);
}
_syncCall(e, t) {
const n = this.nativeApi.callJsBindingSync(this._bindingName, e, t);
if ("string" == typeof n && n.startsWith(cs)) throw new Error(n.substr(cs.length));
return n;
}
_asyncCall(e, t) {
return this._asyncPromise(e, t);
}
_asyncMethodCall(e, t, n) {
if (!n) return this._asyncPromise(e, t);
this._asyncCallback(e, t, n);
}
_asyncCallback(e, t, n) {
const r = this.id++;
this.handlers[r] = n, this.nativeApi.callJsBindingAsync(r, this._bindingName, e, t);
}
_asyncPromise(e, t) {
return new Promise(((n, r) => {
this._asyncCallback(e, t, ((e, t) => {
void 0 === t ? n(e) : r(t);
}));
}));
}
_fireAndForgetCall(e, t) {
this.nativeApi.callJsBindingAsync(0, this._bindingName, e, t);
}
async _streamCall(e, t, n) {
const r = us++, i = new ds(r, (() => {
this._asyncCall(t, {
id: r
}).catch((n => {
console.error("Failed when calling " + t + " to end stream " + e + ": " + n.message);
}));
}));
i.end.subscribe((() => {
delete this._streams[r], i.end.callbacks.length = 0, i.data.callbacks.length = 0, 
i.error.callbacks.length = 0;
})), this._streams[r + ""] = i;
const o = await this._asyncCall(e, {
id: r,
request: n
});
return {
stream: i,
response: o
};
}
}, fs = class extends ps {
constructor() {
super(...arguments), this._bindingName = "TwinkleJsBindings", this.Asset = {
onJsFileRequest: new os,
onAssetLoaded: new os,
jsFileResponse: e => this._syncCall("TwinkleJsBindings.Asset.jsFileResponse", e),
getCachePath: e => this._syncCall("TwinkleJsBindings.Asset.getCachePath", e),
loadAsset: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Asset.loadAsset", e, t),
downloadAssetToCache: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Asset.downloadAssetToCache", e, t)
}, this.Bootflow = {
onJsBootBegin: e => this._syncCall("TwinkleJsBindings.Bootflow.onJsBootBegin", e),
onJsBootEnd: e => this._syncCall("TwinkleJsBindings.Bootflow.onJsBootEnd", e)
}, this.Clipboard = {
getText: e => this._syncCall("TwinkleJsBindings.Clipboard.getText", e),
setText: e => this._syncCall("TwinkleJsBindings.Clipboard.setText", e)
}, this.DebugUI = {
onWindowStatus: new os,
onTrigger: new os,
onBool: new os,
onString: new os,
createWindow: e => this._syncCall("TwinkleJsBindings.DebugUI.createWindow", e),
updateWindow: e => this._syncCall("TwinkleJsBindings.DebugUI.updateWindow", e),
destroyWindow: e => this._syncCall("TwinkleJsBindings.DebugUI.destroyWindow", e),
destroyAllWindows: e => this._syncCall("TwinkleJsBindings.DebugUI.destroyAllWindows", e)
}, this.FileSystem = {
getPersistentStorageDir: e => this._syncCall("TwinkleJsBindings.FileSystem.getPersistentStorageDir", e),
getTemporaryStorageDir: e => this._syncCall("TwinkleJsBindings.FileSystem.getTemporaryStorageDir", e),
deleteFile: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.deleteFile", e, t),
listFiles: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.listFiles", e, t),
fileExist: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.fileExist", e, t),
readFile: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.readFile", e, t),
writeFile: (e, t) => this._asyncMethodCall("TwinkleJsBindings.FileSystem.writeFile", e, t)
}, this.Font = {
setFontSettings: e => this._syncCall("TwinkleJsBindings.Font.setFontSettings", e),
getFontSettings: e => this._syncCall("TwinkleJsBindings.Font.getFontSettings", e),
resetToDefaultFontSettings: e => this._syncCall("TwinkleJsBindings.Font.resetToDefaultFontSettings", e),
canTextBeRenderedInFont: e => this._syncCall("TwinkleJsBindings.Font.canTextBeRenderedInFont", e)
}, this.Http = {
onDebugHttpRequest: new os,
bytesToString: e => this._syncCall("TwinkleJsBindings.Http.bytesToString", e),
stringToBytes: e => this._syncCall("TwinkleJsBindings.Http.stringToBytes", e),
setMaxActiveRequestLimit: e => this._syncCall("TwinkleJsBindings.Http.setMaxActiveRequestLimit", e),
getMaxActiveRequestLimit: e => this._syncCall("TwinkleJsBindings.Http.getMaxActiveRequestLimit", e),
httpRequest: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Http.httpRequest", e, t),
sendDebugHttpResponse: e => {
this._fireAndForgetCall("TwinkleJsBindings.Http.sendDebugHttpResponse", e);
}
}, this.Http2 = {
onRequestError: new os,
onRequestHeaders: new os,
onRequestData: new os,
onRequestEnd: new os,
createHttp2Connection: e => this._syncCall("TwinkleJsBindings.Http2.createHttp2Connection", e),
closeHttp2Connection: e => this._syncCall("TwinkleJsBindings.Http2.closeHttp2Connection", e),
openStream: e => this._syncCall("TwinkleJsBindings.Http2.openStream", e),
sendData: e => this._syncCall("TwinkleJsBindings.Http2.sendData", e),
signalEndOfTransmission: e => this._syncCall("TwinkleJsBindings.Http2.signalEndOfTransmission", e),
closeStream: e => this._syncCall("TwinkleJsBindings.Http2.closeStream", e),
addCACertificate: e => this._syncCall("TwinkleJsBindings.Http2.addCACertificate", e)
}, this.Input = {
onInputDeviceChange: new os,
onButtonStateChanged: new os,
onFocusNotificationConfigChanged: new os,
onFocusNotificationButtonPressed: new os,
onFocusNotificationButtonReleased: new os,
onTypingInput: new os,
onMouseMove: new os,
onMouseEvents: new os,
onTouchEvent: new os,
getCurrentInputDevice: e => this._syncCall("TwinkleJsBindings.Input.getCurrentInputDevice", e),
showVirtualKeyboard: e => this._syncCall("TwinkleJsBindings.Input.showVirtualKeyboard", e),
hideVirtualKeyboard: e => this._syncCall("TwinkleJsBindings.Input.hideVirtualKeyboard", e),
getFocusNotificationConfig: e => this._syncCall("TwinkleJsBindings.Input.getFocusNotificationConfig", e),
setFocusNotificationRequireHold: e => this._syncCall("TwinkleJsBindings.Input.setFocusNotificationRequireHold", e)
}, this.KvStore = {
infoSync: e => this._syncCall("TwinkleJsBindings.KvStore.infoSync", e),
getStringSync: e => this._syncCall("TwinkleJsBindings.KvStore.getStringSync", e),
getBytesSync: e => this._syncCall("TwinkleJsBindings.KvStore.getBytesSync", e),
setStringSync: e => this._syncCall("TwinkleJsBindings.KvStore.setStringSync", e),
setBytesSync: e => this._syncCall("TwinkleJsBindings.KvStore.setBytesSync", e),
removeSync: e => this._syncCall("TwinkleJsBindings.KvStore.removeSync", e),
removeAllSync: e => this._syncCall("TwinkleJsBindings.KvStore.removeAllSync", e),
info: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.info", e, t),
getString: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.getString", e, t),
getBytes: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.getBytes", e, t),
setString: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.setString", e, t),
setBytes: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.setBytes", e, t),
remove: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.remove", e, t),
removeAll: (e, t) => this._asyncMethodCall("TwinkleJsBindings.KvStore.removeAll", e, t)
}, this.Layout = {
onWindowSizeChanged: new os,
enableMouseMove: e => this._syncCall("TwinkleJsBindings.Layout.enableMouseMove", e),
getWindowSize: e => this._syncCall("TwinkleJsBindings.Layout.getWindowSize", e),
SetLayoutMode: e => this._syncCall("TwinkleJsBindings.Layout.SetLayoutMode", e),
debugSelectSurfaces: e => {
this._fireAndForgetCall("TwinkleJsBindings.Layout.debugSelectSurfaces", e);
},
debugClearAllSurfaces: e => {
this._fireAndForgetCall("TwinkleJsBindings.Layout.debugClearAllSurfaces", e);
},
playSpriteAnimation: e => {
this._fireAndForgetCall("TwinkleJsBindings.Layout.playSpriteAnimation", e);
}
}, this.Metrics = {
onFontQualityLoweredBecauseGlyphCacheFull: new os,
getJsMemoryStats: e => this._syncCall("TwinkleJsBindings.Metrics.getJsMemoryStats", e),
getJsCpuUsage: e => this._syncCall("TwinkleJsBindings.Metrics.getJsCpuUsage", e),
getJsMemoryUsage: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Metrics.getJsMemoryUsage", e, t)
}, this.Surface = {
onSurfaceBoundsChanged: new os,
createStyleSync: e => this._syncCall("TwinkleJsBindings.Surface.createStyleSync", e),
getStyle: e => this._syncCall("TwinkleJsBindings.Surface.getStyle", e),
getSurfaceBounds: e => this._syncCall("TwinkleJsBindings.Surface.getSurfaceBounds", e),
getSurfacesBounds: e => this._syncCall("TwinkleJsBindings.Surface.getSurfacesBounds", e),
getSurfaceChainAtPosition: e => this._syncCall("TwinkleJsBindings.Surface.getSurfaceChainAtPosition", e),
getTextMeasurements: e => this._syncCall("TwinkleJsBindings.Surface.getTextMeasurements", e),
createOrUpdateRichTextObject: e => this._syncCall("TwinkleJsBindings.Surface.createOrUpdateRichTextObject", e),
removeRichTextObject: e => this._syncCall("TwinkleJsBindings.Surface.removeRichTextObject", e),
createStyle: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.createStyle", e);
},
deleteStyle: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.deleteStyle", e);
},
createRootSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.createRootSurface", e);
},
updateSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.updateSurface", e);
},
replaceUpdateSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.replaceUpdateSurface", e);
},
replaceSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.replaceSurface", e);
},
updateSurfaceChildren: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.updateSurfaceChildren", e);
},
insertChildAt: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.insertChildAt", e);
},
moveChild: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.moveChild", e);
},
removeChild: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.removeChild", e);
},
createDetachedSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.createDetachedSurface", e);
},
setDetachedSurfaceAsRoot: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.setDetachedSurfaceAsRoot", e);
},
attachDetachedSurfaceAsChildAt: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.attachDetachedSurfaceAsChildAt", e);
},
detachSurface: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.detachSurface", e);
},
surfaceDebugHighlight: e => {
this._fireAndForgetCall("TwinkleJsBindings.Surface.surfaceDebugHighlight", e);
}
}, this.Telemetry = {
sendTelemetryEvent: new os
}, this.Texture = {
onTextureLoaded: new os,
onTextureUnloaded: new os,
loadRoundedRectTexture: e => this._syncCall("TwinkleJsBindings.Texture.loadRoundedRectTexture", e),
createDynamicAtlas: e => this._syncCall("TwinkleJsBindings.Texture.createDynamicAtlas", e),
destroyAtlas: e => this._syncCall("TwinkleJsBindings.Texture.destroyAtlas", e)
}, this.Tween = {
onTweenStatus: new os,
getTweenValueSync: e => this._syncCall("TwinkleJsBindings.Tween.getTweenValueSync", e),
createTween: e => {
this._fireAndForgetCall("TwinkleJsBindings.Tween.createTween", e);
},
updateTweens: e => {
this._fireAndForgetCall("TwinkleJsBindings.Tween.updateTweens", e);
},
destroyTween: e => {
this._fireAndForgetCall("TwinkleJsBindings.Tween.destroyTween", e);
}
}, this.Utilities = {
onAssetLoaded: new os,
onSendErrorToJs: new os,
openUrl: e => this._syncCall("TwinkleJsBindings.Utilities.openUrl", e),
reloadScriptEngine: e => this._syncCall("TwinkleJsBindings.Utilities.reloadScriptEngine", e),
triggerGC: e => this._syncCall("TwinkleJsBindings.Utilities.triggerGC", e),
enableGC: e => this._syncCall("TwinkleJsBindings.Utilities.enableGC", e),
isGCEnabled: e => this._syncCall("TwinkleJsBindings.Utilities.isGCEnabled", e),
verifyCodeSignature: e => this._syncCall("TwinkleJsBindings.Utilities.verifyCodeSignature", e),
showError: e => this._syncCall("TwinkleJsBindings.Utilities.showError", e),
log: e => this._syncCall("TwinkleJsBindings.Utilities.log", e),
getConfigStringValue: e => this._syncCall("TwinkleJsBindings.Utilities.getConfigStringValue", e),
getConfigBoolValue: e => this._syncCall("TwinkleJsBindings.Utilities.getConfigBoolValue", e),
getConfigFloatValue: e => this._syncCall("TwinkleJsBindings.Utilities.getConfigFloatValue", e),
getSystemTimeInMs: e => this._syncCall("TwinkleJsBindings.Utilities.getSystemTimeInMs", e),
loadFont: e => this._syncCall("TwinkleJsBindings.Utilities.loadFont", e),
setGlyphTextureSize: e => this._syncCall("TwinkleJsBindings.Utilities.setGlyphTextureSize", e),
setGlyphSamples: e => this._syncCall("TwinkleJsBindings.Utilities.setGlyphSamples", e),
setFullscreenResample: e => this._syncCall("TwinkleJsBindings.Utilities.setFullscreenResample", e),
enablePostProcessing: e => this._syncCall("TwinkleJsBindings.Utilities.enablePostProcessing", e),
isPostProcessingEnabled: e => this._syncCall("TwinkleJsBindings.Utilities.isPostProcessingEnabled", e),
getFullScreenRenderTargetCount: e => this._syncCall("TwinkleJsBindings.Utilities.getFullScreenRenderTargetCount", e),
addTimeout: (e, t) => this._asyncMethodCall("TwinkleJsBindings.Utilities.addTimeout", e, t)
};
}
hasMethod(e, t) {
return this._hasMethod("TwinkleJsBindings", e, t);
}
hasEvent(e, t) {
return this._hasEvent("TwinkleJsBindings", e, t);
}
registerBinding() {
return this._registerBinding(((e, t) => {
switch (e) {
case "TwinkleJsBindings.Asset.onJsFileRequest":
return this.Asset.onJsFileRequest.trigger(t), !0;

case "TwinkleJsBindings.Asset.onAssetLoaded":
return this.Asset.onAssetLoaded.trigger(t), !0;

case "TwinkleJsBindings.DebugUI.onWindowStatus":
return this.DebugUI.onWindowStatus.trigger(t), !0;

case "TwinkleJsBindings.DebugUI.onTrigger":
return this.DebugUI.onTrigger.trigger(t), !0;

case "TwinkleJsBindings.DebugUI.onBool":
return this.DebugUI.onBool.trigger(t), !0;

case "TwinkleJsBindings.DebugUI.onString":
return this.DebugUI.onString.trigger(t), !0;

case "TwinkleJsBindings.Http.onDebugHttpRequest":
return this.Http.onDebugHttpRequest.trigger(t), !0;

case "TwinkleJsBindings.Http2.onRequestError":
return this.Http2.onRequestError.trigger(t), !0;

case "TwinkleJsBindings.Http2.onRequestHeaders":
return this.Http2.onRequestHeaders.trigger(t), !0;

case "TwinkleJsBindings.Http2.onRequestData":
return this.Http2.onRequestData.trigger(t), !0;

case "TwinkleJsBindings.Http2.onRequestEnd":
return this.Http2.onRequestEnd.trigger(t), !0;

case "TwinkleJsBindings.Input.onInputDeviceChange":
return this.Input.onInputDeviceChange.trigger(t), !0;

case "TwinkleJsBindings.Input.onButtonStateChanged":
return this.Input.onButtonStateChanged.trigger(t), !0;

case "TwinkleJsBindings.Input.onFocusNotificationConfigChanged":
return this.Input.onFocusNotificationConfigChanged.trigger(t), !0;

case "TwinkleJsBindings.Input.onFocusNotificationButtonPressed":
return this.Input.onFocusNotificationButtonPressed.trigger(t), !0;

case "TwinkleJsBindings.Input.onFocusNotificationButtonReleased":
return this.Input.onFocusNotificationButtonReleased.trigger(t), !0;

case "TwinkleJsBindings.Input.onTypingInput":
return this.Input.onTypingInput.trigger(t), !0;

case "TwinkleJsBindings.Input.onMouseMove":
return this.Input.onMouseMove.trigger(t), !0;

case "TwinkleJsBindings.Input.onMouseEvents":
return this.Input.onMouseEvents.trigger(t), !0;

case "TwinkleJsBindings.Input.onTouchEvent":
return this.Input.onTouchEvent.trigger(t), !0;

case "TwinkleJsBindings.Layout.onWindowSizeChanged":
return this.Layout.onWindowSizeChanged.trigger(t), !0;

case "TwinkleJsBindings.Metrics.onFontQualityLoweredBecauseGlyphCacheFull":
return this.Metrics.onFontQualityLoweredBecauseGlyphCacheFull.trigger(t), !0;

case "TwinkleJsBindings.Surface.onSurfaceBoundsChanged":
return this.Surface.onSurfaceBoundsChanged.trigger(t), !0;

case "TwinkleJsBindings.Telemetry.sendTelemetryEvent":
return this.Telemetry.sendTelemetryEvent.trigger(t), !0;

case "TwinkleJsBindings.Texture.onTextureLoaded":
return this.Texture.onTextureLoaded.trigger(t), !0;

case "TwinkleJsBindings.Texture.onTextureUnloaded":
return this.Texture.onTextureUnloaded.trigger(t), !0;

case "TwinkleJsBindings.Tween.onTweenStatus":
return this.Tween.onTweenStatus.trigger(t), !0;

case "TwinkleJsBindings.Utilities.onAssetLoaded":
return this.Utilities.onAssetLoaded.trigger(t), !0;

case "TwinkleJsBindings.Utilities.onSendErrorToJs":
return this.Utilities.onSendErrorToJs.trigger(t), !0;
}
return !1;
}));
}
};
function hs(e, t) {
return is.TwinkleNative.bindingCall("TwinkleJsBindings", e, t, void 0);
}
(e => {
let t, n, r, i, o, a, s, l, c;
(e => {
let t;
var n;
(n = t = e.WidthModifier || (e.WidthModifier = {}))[n.Default = 1] = "Default", 
n[n.WindowFactor = 2] = "WindowFactor", n[n.ContainerFactor = 3] = "ContainerFactor";
})(t = e.DebugUI || (e.DebugUI = {})), (e => {
let t;
var n;
let r;
var i;
(n = t = e.ScreenColorType || (e.ScreenColorType = {}))[n.kSCT_Unknown = 0] = "kSCT_Unknown", 
n[n.kSCT_LCD_H_RGB = 1] = "kSCT_LCD_H_RGB", n[n.kSCT_LCD_H_BGR = 2] = "kSCT_LCD_H_BGR", 
n[n.kSCT_LCD_V_RGB = 3] = "kSCT_LCD_V_RGB", n[n.kSCT_LCD_V_BGR = 4] = "kSCT_LCD_V_BGR", 
n[n.kSCT_LCD_Other = 5] = "kSCT_LCD_Other", (i = r = e.MatchOption || (e.MatchOption = {}))[i.kMatchOptionNone = 0] = "kMatchOptionNone", 
i[i.kMatchOptionAssert = 1] = "kMatchOptionAssert", i[i.kMatchOptionFail = 2] = "kMatchOptionFail";
})(n = e.Font || (e.Font = {})), (e => {
let t;
var n;
(n = t = e.HttpMethod || (e.HttpMethod = {}))[n.Get = 1] = "Get", n[n.Post = 2] = "Post", 
n[n.Put = 3] = "Put", n[n.Delete = 4] = "Delete", n[n.Patch = 5] = "Patch", n[n.Options = 6] = "Options", 
n[n.Connect = 7] = "Connect", n[n.Head = 8] = "Head";
})(r = e.Http || (e.Http = {})), (e => {
let t;
var n;
(n = t = e.RequestType || (e.RequestType = {}))[n.Get = 0] = "Get", n[n.Put = 1] = "Put", 
n[n.Post = 2] = "Post";
})(i = e.Http2 || (e.Http2 = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
let s;
var l;
let c;
var d;
let u;
var p;
(n = t = e.GamePadInput || (e.GamePadInput = {}))[n.NotBound = 0] = "NotBound", 
n[n.DPadRight = 1] = "DPadRight", n[n.DPadLeft = 2] = "DPadLeft", n[n.DPadUp = 3] = "DPadUp", 
n[n.DPadDown = 4] = "DPadDown", n[n.LeftJoystickUp = 5] = "LeftJoystickUp", n[n.LeftJoystickDown = 6] = "LeftJoystickDown", 
n[n.LeftJoystickLeft = 7] = "LeftJoystickLeft", n[n.LeftJoystickRight = 8] = "LeftJoystickRight", 
n[n.LeftJoystickPress = 9] = "LeftJoystickPress", n[n.RightJoystickUp = 10] = "RightJoystickUp", 
n[n.RightJoystickDown = 11] = "RightJoystickDown", n[n.RightJoystickLeft = 12] = "RightJoystickLeft", 
n[n.RightJoystickRight = 13] = "RightJoystickRight", n[n.RightJoystickPress = 14] = "RightJoystickPress", 
n[n.FaceButtonTop = 15] = "FaceButtonTop", n[n.FaceButtonRight = 16] = "FaceButtonRight", 
n[n.FaceButtonBottom = 18] = "FaceButtonBottom", n[n.FaceButtonLeft = 19] = "FaceButtonLeft", 
n[n.SpecialLeft = 20] = "SpecialLeft", n[n.SpecialRight = 21] = "SpecialRight", 
n[n.ShoulderRight = 22] = "ShoulderRight", n[n.ShoulderLeft = 23] = "ShoulderLeft", 
n[n.TriggerRight = 24] = "TriggerRight", n[n.TriggerLeft = 25] = "TriggerLeft", 
n[n.ButtonYTriangleUp = 15] = "ButtonYTriangleUp", n[n.ButtonBCircleRight = 16] = "ButtonBCircleRight", 
n[n.ButtonACrossDown = 18] = "ButtonACrossDown", n[n.ButtonXSquareLeft = 19] = "ButtonXSquareLeft", 
n[n.MiddleOption = 20] = "MiddleOption", n[n.MiddleMenu = 21] = "MiddleMenu", n[n.BumperRight = 22] = "BumperRight", 
n[n.BumperLeft = 23] = "BumperLeft", (i = r = e.ButtonState || (e.ButtonState = {}))[i.Down = 1] = "Down", 
i[i.Up = 2] = "Up", (a = o = e.DeviceType || (e.DeviceType = {}))[a.NotSet = 0] = "NotSet", 
a[a.MouseAndKeyboard = 1] = "MouseAndKeyboard", a[a.Xbox = 2] = "Xbox", a[a.Playstation = 3] = "Playstation", 
a[a.Stadia = 4] = "Stadia", a[a.Switch = 5] = "Switch", a[a.Touch = 6] = "Touch", 
(l = s = e.KeyboardCharType || (e.KeyboardCharType = {}))[l.LocaleDefault = 1] = "LocaleDefault", 
l[l.LatinFull = 2] = "LatinFull", l[l.Numeric = 4] = "Numeric", l[l.Alphabet = 8] = "Alphabet", 
l[l.Email = 16] = "Email", l[l.Password = 32] = "Password", l[l.AlphabetSpace = 64] = "AlphabetSpace", 
(d = c = e.MouseEventType || (e.MouseEventType = {}))[d.Unknown = 0] = "Unknown", 
d[d.Up = 1] = "Up", d[d.Down = 2] = "Down", d[d.Click = 3] = "Click", d[d.DoubleClick = 4] = "DoubleClick", 
d[d.Scroll = 5] = "Scroll", d[d.Enter = 6] = "Enter", d[d.Leave = 7] = "Leave", 
(p = u = e.MouseButton || (e.MouseButton = {}))[p.None = 0] = "None", p[p.Left = 1] = "Left", 
p[p.Right = 2] = "Right", p[p.Middle = 3] = "Middle", p[p.Button3 = 4] = "Button3", 
p[p.Button4 = 5] = "Button4";
})(o = e.Input || (e.Input = {})), (e => {
let t;
var n;
(n = t = e.LayoutMode || (e.LayoutMode = {}))[n.Yoga = 2] = "Yoga";
})(a = e.Layout || (e.Layout = {})), (e => {
let t;
var n;
(n = t = e.PixelFormat || (e.PixelFormat = {}))[n.RGBA = 1] = "RGBA", n[n.BC1 = 2] = "BC1", 
n[n.BC2 = 3] = "BC2", n[n.BC3 = 4] = "BC3", n[n.BC4 = 5] = "BC4", n[n.BC5 = 6] = "BC5", 
n[n.BC7 = 7] = "BC7";
})(s = e.Texture || (e.Texture = {})), (e => {
let t;
var n;
let r;
var i;
(n = t = e.Easing || (e.Easing = {}))[n.Linear = 1] = "Linear", n[n.QuadraticIn = 2] = "QuadraticIn", 
n[n.QuadraticOut = 3] = "QuadraticOut", n[n.QuadraticInOut = 4] = "QuadraticInOut", 
n[n.CubicIn = 5] = "CubicIn", n[n.CubicOut = 6] = "CubicOut", n[n.CubicInOut = 7] = "CubicInOut", 
n[n.SineIn = 8] = "SineIn", n[n.SineOut = 9] = "SineOut", n[n.SineInOut = 10] = "SineInOut", 
n[n.Bezier = 11] = "Bezier", n[n.CubicOutBack = 12] = "CubicOutBack", (i = r = e.TweenStatus || (e.TweenStatus = {}))[i.Finished = 0] = "Finished";
})(l = e.Tween || (e.Tween = {})), (e => {
let t;
var n;
(n = t = e.LogLevel || (e.LogLevel = {}))[n.Trace = 1] = "Trace", n[n.Debug = 2] = "Debug", 
n[n.Log = 3] = "Log", n[n.Info = 4] = "Info", n[n.Warning = 5] = "Warning", n[n.Error = 6] = "Error";
})(c = e.Utilities || (e.Utilities = {}));
})(fs || (fs = {}));
var ms = 0, gs = 0, ys = [];
if (is.TwinkleNative && !is.console) {
const e = function(...e) {
hs("TwinkleJsBindings.Utilities.log", {
level: fs.Utilities.LogLevel.Info,
filename: "Javascript",
lineno: 0,
message: e.join("\t")
});
};
is.console = {
log: e,
warn: e,
error: e,
exception: e,
info: e,
debug: e
};
}
if (is.TwinkleNative && !is.performance) {
const e = Date.now(), t = hs("TwinkleJsBindings.Utilities.getSystemTimeInMs", {})?.timeInMs ?? 0;
is.performance = {
now: () => {
const n = hs("TwinkleJsBindings.Utilities.getSystemTimeInMs", {})?.timeInMs ?? 0;
return e + (n - t);
}
};
}
is.requestAnimationFrame = function(e) {
if (0 === ys.length) {
const e = performance.now(), t = Math.max(0, 16.666666666666668 - (e - ms));
ms = t + e, setTimeout((() => {
const e = ys.slice(0);
ys.length = 0;
for (let t = 0; t < e.length; t++) if (!e[t].cancelled) try {
e[t].callback(ms);
} catch (e) {
setTimeout((() => {
throw e;
}), 0);
}
}), Math.round(t));
}
return ys.push({
handle: ++gs,
callback: e,
cancelled: !1
}), gs;
}, is.cancelAnimationFrame = function(e) {
for (let t = 0; t < ys.length; t++) ys[t].handle === e && (ys[t].cancelled = !0);
};
var Is = (e => (e.XboxOne = "XBOXONE", e.Xbsx = "XBSX", e.Ps4 = "PS4", e.Ps5 = "PS5", 
e.Nx = "NX", e.Ios = "IOS", e.Android = "ANDROID", e.Web = "WEB", e.Pc = "PC", e.Unknown = "UNKNOWN", 
e))(Is || {}), _s = new Set(Object.values(Is)), bs = e => {
const t = "object" == typeof e ? e.id : e;
return "string" == typeof (n = t) && _s.has(n) ? t : "UNKNOWN";
var n;
}, Ss = {
hasTextDirectionFix: !1,
hasSpriteFrameProperty: !1,
hasMouseEnabledTransparentSurfacesFix: !1,
hasBigIntSupport: !1,
yogaVersion: 0,
hasMethodOrEventAvailable: !1,
hasOnUnhandledPromiseRejection: !1,
hasHttpTimeoutSupport: !1,
closeStreamOnError: !1,
hasAllHttpMethod: !1,
hasTweenStartEndValueRounding: !1,
hasRtlEllipsizeTextLayoutingFix: !1,
hasRichTextSupport: !1
};
var vs = function(e) {
const t = e?.locale?.toLowerCase() ?? "en-us", n = e?.isRightToLeftLanguage ?? !1, r = {
...Ss,
...e?.featureFlags
};
let i = e?.devicePlatformId ? bs(e.devicePlatformId) : "PC";
return {
locale: t,
isRTL: n,
devicePlatformId: i,
isPC: "PC" === i,
bundleUrlUnsafe: e?.bundleUrl_UNSAFE || "",
featureFlags: r,
gitSha: e?.gitSha?.slice(0, 8) || "0",
svgSupport: r.hasBigIntSupport
};
}(is.TwinkleConstants), Ts = "https://artifactory.ea.com/artifactory/eax-generic-local/photon", Es = [ "https://assets.layer.ea.com", "https://assets.layer2.ea.com", "https://assets-dev.layer.ea.com", "https://assets-dev.layer2.ea.com", Ts ];
function Ps(e) {
for (const t of Es) if (e.startsWith(t)) return t;
}
var Os = (Ps(vs.bundleUrlUnsafe) || Ts) + "/assets";
function Cs(e) {
return Os + e;
}
var Ns = {
"ar-sa": "ar_SA-d016a39f.json",
"cs-cz": "cs_CZ-ec7fa7ef.json",
"da-dk": "da_DK-9d8fada2.json",
"de-de": "de_DE-81eae586.json",
"en-us": "en_US-2a7ad504.json",
"es-es": "es_ES-5ca6d135.json",
"es-mx": "es_MX-10a15351.json",
"fi-fi": "fi_FI-d59659b4.json",
"fr-fr": "fr_FR-634972b2.json",
"it-it": "it_IT-a266effe.json",
"ja-jp": "ja_JP-3db1c330.json",
"ko-kr": "ko_KR-39398224.json",
"nl-nl": "nl_NL-0b823fac.json",
"nb-no": "nb_NO-482531ad.json",
"no-no": "nb_NO-482531ad.json",
"pl-pl": "pl_PL-3ce01218.json",
"pt-br": "pt_BR-56e306c7.json",
"pt-pt": "pt_PT-bdc4a534.json",
"ru-ru": "ru_RU-e4475a93.json",
"sv-se": "sv_SE-f1bbc9b3.json",
"tr-tr": "tr_TR-c242d5bc.json",
"zh-cn": "zh_CN-05e56b4a.json",
"zh-tw": "zh_TW-4b853a5d.json",
"zh-hk": "zh_TW-4b853a5d.json"
}, As = new Set(Object.keys(Ns)), Ls = "en-us";
function ws(e) {
return As.has(e) ? e : Ls;
}
function ks(e) {
return !!As.has(e) && vs.isRTL;
}
function Rs(e, t) {
const n = "/translations/" + Ns[e], r = vs.bundleUrlUnsafe;
if (!!Ps(r)) {
return r.split("/").slice(0, -1).join("/") + n;
}
return "https://artifactory.ea.com/artifactory/eax-generic-local/photon/main/latest" + n;
}
var xs = (e => (e.UNKNOWN = "unknown", e.TEST = "test", e.DEV = "dev", e.LOAD = "load", 
e.CERT = "cert", e.PROD = "prod", e))(xs || {}), Bs = [ "prod", "cert" ], Ds = {
usesSingleEventForPartyAndLobbyChanges: !1,
setCurrentVoipProfileDoesNotAssert: !1,
hasTertiaryAction: !1
};
var Fs = function(e, t) {
const n = t?.gameVersion ?? "0", r = t?.nativeVersion ?? "0", i = ws(e.locale), o = xs[t?.envId ?? "TEST"] ?? "unknown", a = void 0 === t?.partiesEnabled || t.partiesEnabled, s = void 0 !== t?.tightlyCoupledParties && t.tightlyCoupledParties, l = t?.productId ?? "NOT_SET", c = !!t?.playerListsEnabled, d = {
...Ds,
...e.featureFlags,
...t?.featureFlags
};
return {
...e,
locale: i,
nativeVersion: r,
environment: o,
isPartyEnabled: a,
isTightlyCoupledParties: s,
productId: l,
gameVersion: n,
playerListsEnabled: c,
featureFlags: d
};
}(vs, is.AppConstants), Ms = "0zjw", Us = "01e75742-3d23-c703-14ac-54c9d34006e2", Hs = "dx3a", Vs = "y88j", Js = "e731d440-9e5d-9869-7c5f-433e2d7126b1", Gs = new Set([ Us, Hs, Vs, Js ]), zs = new Set([ Hs, Ms ]), js = new Set([ Hs, Vs, Js ]), qs = new Set([ Vs, Js ]), Ys = new Set([ "09e141d6-9cb3-6f6c-750b-36468e5ccf61" ]);
var Ws = function({productId: e, gameVersion: t, devicePlatformId: n}) {
const r = "NX" === n && !zs.has(e), i = Gs.has(e), o = t.indexOf("beta") > -1;
return {
betaWatermark: js.has(e) && o,
legacySimplifiedPlatformRepresentations: e === Us,
preTranslatedRichPresence: i,
disableFirstPartyFriends: r,
supportsUnfinishedFeatures: e === Ms,
disableFTUE: qs.has(e),
isPlatformFriendsListenerBroken: e === Us,
joinableByDefault: Ys.has(e)
};
}(Fs), Ks = {}[Fs.productId];
function Xs(e, t) {
throw new Error(e);
}
function Qs(e) {
const t = H.createContext(void 0);
return t.displayName = e, [ t, function() {
const n = H.useContext(t);
if (void 0 === n) throw new Error(`Missing '${e}' in context`);
return n;
} ];
}
is.QuantumTheme = Ks;
var $s = e => e, Zs = class extends Gr {
constructor(e, t) {
super(e, $s, t);
}
get(e) {
return this.has_(e) || this.has(e) ? this.dehanceValue_(this.data_.get(e).get()) : this.dehanceValue_(void 0);
}
};
function el(e, t) {
return e.key + "[" + t + "]";
}
function tl(e) {
return "function" == typeof e;
}
var nl = jt, rl = class {
constructor() {
this.state = new Zs([]), this.computed = {}, this.singletons = {}, this.pendingReset = {}, 
this.computedPropsUntracked = {
get: e => this.getUntracked(e),
getItem: (e, t) => this.getItemUntracked(e, t)
}, this.computedProps = {
get: e => this.get(e),
getItem: (e, t) => this.getItem(e, t)
}, this.set = (e, t) => {
const n = tl(t) ? t(this.getUntracked(e)) : t;
(e.equals || Le.structural)(n, e.defaultValue()) ? this.reset(e) : this.state.set(e.key, n);
}, this.setItem = (e, t, n) => {
const r = tl(n) ? n(this.getItemUntracked(e, t)) : n;
(e.equals || Le.structural)(r, e.defaultValue(t)) ? this.resetItem(e, t) : this.state.set(el(e, t), r);
}, this.reset = e => {
this.state.delete(e.key);
}, this.resetItem = (e, t) => {
this.state.delete(el(e, t));
}, this.getUntracked = e => nl((() => this.get(e))), this.getItemUntracked = (e, t) => nl((() => this.getItem(e, t))), 
this.get = e => {
switch (e.type) {
case "mobyState":
return this.state.has(e.key) ? this.state.get(e.key) : e.defaultValue();

case "mobyComputed":
{
let t = this.computed[e.key];
if (!t) {
if (!Vt()) return e.get(this.computedPropsUntracked);
const n = {
equals: e.equals || Le.structural
};
t = _t((() => e.get(this.computedProps)), n), this.computed[e.key] = t, Mn(t, (() => {
delete this.computed[e.key];
}));
}
return t.get();
}

case "mobySingleton":
{
let t = this.singletons[e.key];
if (!t) {
if (e.key in this.singletons) throw console.error("Circular creation of singleton " + e.key), 
new Error("Circular creation of singleton " + e.key);
this.singletons[e.key] = !1;
try {
t = e.create(this), this.singletons[e.key] = t;
} catch (t) {
throw delete this.singletons[e.key], t;
}
}
return t;
}

default:
Xs("Unknown state: " + e);
}
}, this.getItem = (e, t) => {
const n = el(e, t);
switch (e.type) {
case "mobyStateMap":
return this.state.has(n) ? this.state.get(n) : e.defaultValue(t);

case "mobyComputedMap":
{
let r = this.computed[n];
if (!r) {
if (!Vt()) return e.get(t, this.computedPropsUntracked);
const i = {
equals: e.equals || Le.structural
};
r = _t((() => e.get(t, this.computedProps)), i), this.computed[n] = r, Mn(r, (() => {
delete this.computed[n];
}));
}
return r.get();
}

default:
Xs("Unknown state: " + e);
}
}, this.dispose = () => {
Object.values(this.singletons).forEach((e => {
"function" == typeof e.dispose && e.dispose();
}));
};
}
subscribeToUpdates(e, t, n) {
return Dn((() => this.get(e)), t, {
equals: e.equals || Le.structural,
fireImmediately: n
});
}
subscribeToItemUpdates(e, t, n, r) {
return Dn((() => this.getItem(e, t)), n, {
equals: e.equals || Le.structural,
fireImmediately: r
});
}
subscribeToUpdatesWithCleanup(e, t, n) {
let r;
const i = Dn((() => this.get(e)), ((e, n) => {
r?.(), r = t(e, n);
}), {
equals: e.equals || Le.structural,
fireImmediately: n
});
return () => {
r?.(), i();
};
}
subscribeToItemUpdatesWithCleanup(e, t, n, r) {
let i;
const o = Dn((() => this.getItem(e, t)), ((e, t) => {
i?.(), i = n(e, t);
}), {
equals: e.equals || Le.structural,
fireImmediately: r
});
return () => {
i?.(), o();
};
}
keepAlive(e) {
const t = Rn((() => {
this.get(e);
}), void 0);
return () => {
t(), this.cleanUpOnUnobserved(e);
};
}
cleanUpOnUnobserved(e) {
const t = this.state.has(e.key) && ri(this.state, e.key);
if (t) {
if (!t.isBeingObserved_) return void this.reset(e);
if (!this.pendingReset[e.key]) {
let n;
this.pendingReset[e.key] = !0;
const r = Mn(t, (() => {
n = setTimeout((() => {
delete this.pendingReset[e.key], r(), this.cleanUpOnUnobserved(e);
}), e.ttl);
const i = Fn(t, (() => {
i(), clearTimeout(n);
}));
}));
}
}
}
addExternalSingletonState(e, t) {
if (e.key in this.singletons && this.singletons[e.key] !== t) throw new Error(`Tried to add external singleton state to an already initiated singleton '${e.key}'`);
this.singletons[e.key] = t;
}
}, [il, ol] = Qs("MobyRoot"), al = e => {
const [t] = H.useState((() => e.moby || new rl));
return H.useEffect((() => () => t.dispose()), [ t ]), H.createElement(il.Provider, {
value: t
}, e.children);
};
function sl(e, t, n, r = !1) {
const i = ol();
H.useEffect((() => i.subscribeToUpdates(n, e, r)), [ ...t, i, n, r ]);
}
function ll(e, t, n, r = !1) {
const i = ol();
H.useEffect((() => i.subscribeToUpdatesWithCleanup(n, e, r)), [ ...t, i, n, r ]);
}
function cl(e, t, n, r, i = !1) {
const o = ol();
H.useEffect((() => o.subscribeToItemUpdatesWithCleanup(n, r, e, i)), [ ...t, o, n, r, i ]);
}
function dl(e) {
return ol().get(e);
}
function ul(e, t) {
return ol().getItem(e, t);
}
function pl(e) {
const t = ol();
return H.useCallback((n => {
t.set(e, n);
}), [ e, t ]);
}
function fl(e) {
const t = ol();
return H.useEffect((() => t.keepAlive(e)), [ e, t ]), H.useCallback((n => {
t.set(e, n);
}), [ e, t ]);
}
function hl(e, t) {
const n = ol();
return H.useCallback((r => {
n.setItem(e, t, r);
}), [ e, t, n ]);
}
function ml(e) {
return [ dl(e), pl(e) ];
}
function gl(e) {
const t = ol();
return H.useCallback((() => {
t.reset(e);
}), [ t, e ]);
}
function yl(e, t) {
const n = ol();
return H.useCallback((() => {
n.resetItem(e, t);
}), [ n, e, t ]);
}
function Il(e, t, n) {
const r = ol();
H.useEffect((() => Rn((() => {
e(r.computedProps);
}), n)), [ ...t, r ]);
}
function _l(e, t) {
const n = ol();
return H.useCallback(((...t) => fr((() => e(n.computedPropsUntracked)(...t)))), [ ...t, n ]);
}
var bl = 0;
function Sl(e) {
const t = "" + bl++;
return {
get: e.get,
key: t,
type: "mobyComputed",
equals: e.equals
};
}
function vl(e) {
return {
type: "mobyComputedMap",
key: "" + bl++,
get: e.get,
equals: e.equals
};
}
var Tl = 0;
function El(e) {
const t = {
create: e.create,
key: "" + Tl++,
type: "mobySingleton"
};
return [ t, () => ol().get(t) ];
}
function Pl(e) {
const t = El({
...e,
create: () => {
throw new Error("External singleton '" + t[0].key + "' needs to be added to moby before use");
}
});
return t;
}
var Ol = 0;
function Cl(e) {
return {
defaultValue: () => e.default,
key: "" + Ol++,
type: "mobyState",
equals: e.equals
};
}
function Nl(e) {
return {
...Cl(e),
ttl: e.ttl ?? 1e3,
equals: e.equals
};
}
function Al(e) {
return {
type: "mobyStateMap",
key: "" + Ol++,
defaultValue: e.default,
equals: e.equals
};
}
var [Ll, wl] = Qs("FocusContext"), [kl, Rl] = Qs("FocusBoundaryContext"), xl = new os("onClick"), Bl = Al({
debugName: "boundsForFocusIdState",
default: () => {}
}), Dl = Cl({
debugName: "focusedIdWithSourceState",
default: void 0
}), Fl = Sl({
debugName: "focusedId",
get: function({get: e}) {
return e(Dl)?.focusId;
}
}), Ml = Cl({
debugName: "pressedId",
default: void 0
}), Ul = vl({
debugName: "isFocusIdFocusedState",
get: function(e, {get: t}) {
return e === t(Fl);
}
}), Hl = vl({
debugName: "isFocusIdPressedState",
get: function(e, {get: t}) {
return e === t(Ml);
}
}), Vl = Cl({
debugName: "mouseModeState",
default: !1
}), Jl = (Cl({
debugName: "inputModeState",
default: "unhandled"
}), Al({
debugName: "childBoundaryIdsForBoundaryIdState",
default: () => []
})), Gl = Al({
debugName: "childFocusIdsForBoundaryIdState",
default: () => []
}), zl = Al({
debugName: "parentBoundaryIdForBoundaryIdState",
default: () => {}
}), jl = Al({
debugName: "parentBoundaryIdForFocusIdState",
default: () => {}
}), ql = Al({
debugName: "disabledStateForMouseModeForBoundaryIdState",
default: () => !1
}), Yl = Al({
debugName: "disabledStateForControllerModeForBoundaryIdState",
default: () => !1
}), Wl = Al({
debugName: "disabledStateForAutoFocusForBoundaryIdState",
default: () => !1
}), Kl = vl({
debugName: "disabledStateForBoundaryIdState",
get: function(e, {get: t, getItem: n}) {
return t(Vl) ? n(ql, e) : n(Yl, e);
}
}), Xl = vl({
debugName: "focusIdBoundsForChildrenOfBoundaryIdState",
get: function(e, {getItem: t}) {
const n = t(Gl, e), r = {};
return n.forEach((e => {
r[e] = t(Bl, e);
})), r;
}
});
function Ql(e, t, n) {
const {getItem: r} = t;
if (r(Kl, e)) return [];
const i = r(Gl, e), o = r(Jl, e), a = [ ...i ];
for (const e of o) a.push(...r(n, e));
return a;
}
var $l = vl({
debugName: "validFocusIdsDescendantsOfBoundaryIdState",
get: function(e, t) {
return Ql(e, t, $l);
}
}), Zl = vl({
debugName: "validAutoFocusIdsDescendantsOfBoundaryIdState",
get: function(e, t) {
return t.getItem(Wl, e) ? [] : Ql(e, t, Zl);
}
}), ec = vl({
debugName: "boundaryIdAncestorsForBoundaryIdState",
get: function(e, {getItem: t}) {
const n = [];
let r = t(zl, e);
for (;r; ) n.push(r), r = t(zl, r);
return n;
}
}), tc = (e, t) => {
const n = vl({
debugName: e,
get: function(e, {getItem: r}) {
if (!e) return !1;
if (r(t, e)) return !0;
const i = r(zl, e);
return !!i && r(n, i);
}
});
return n;
}, nc = tc("disabledStateForBoundaryOrParentBoundaryIdState", Kl), rc = tc("disabledStateForControllerModeForBoundaryOrParentBoundaryIdState", Yl), ic = tc("disabledStateForMouseModeForBoundaryOrParentBoundaryIdState", ql), oc = (e, t) => vl({
debugName: e,
get: function(e, {getItem: n}) {
if (!e) return !1;
const r = n(jl, e);
return !!r && n(t, r);
}
}), ac = oc("disabledStateForControllerModeForFocusIdState", rc), sc = oc("disabledStateForMouseModeForFocusIdState", ic), lc = vl({
debugName: "disabledStateForFocusIdState",
get: function(e, {get: t, getItem: n}) {
return !!e && (t(Vl) ? n(sc, e) : n(ac, e));
}
}), cc = Cl({
debugName: "isolatedBoundaryIdListState",
default: []
}), dc = Sl({
debugName: "currentIsolatedBoundaryIdState",
get: function({get: e}) {
const t = e(cc);
return t[t.length - 1];
}
}), uc = vl({
debugName: "isBoundaryIdActiveState",
get: function(e, {get: t, getItem: n}) {
if (n(nc, e)) return !1;
const r = t(dc);
if (!r || !e || e === r) return !0;
return n(ec, e).includes(r);
}
}), pc = vl({
debugName: "focusedIdDescendantOfBoundaryIdState",
get: function(e, {get: t, getItem: n}) {
const r = t(Fl);
if (!r) return;
return n($l, e).includes(r) ? r : void 0;
}
}), fc = vl({
debugName: "focusedIdDescendantOfBoundaryIdState",
get: function(e, {getItem: t}) {
return !!t(pc, e);
}
}), hc = () => ({
isPressed: !1,
isHovered: !1
});
function mc(e) {
return e.isPressed || e.isHovered ? {
isPressed: !1,
isHovered: !1
} : e;
}
function gc({onClick: e, disabled: t, ignoreBoundaryIsolation: n}) {
const r = ol(), i = Rl(), [o, a] = H.useState(hc);
H.useEffect((() => {
if (t) return void a(mc);
if (n) return;
return Rn((() => {
r.getItem(uc, i) || a(mc);
}));
}), [ r, i, t, n ]);
const s = H.useMemo((() => {
const o = (o, s) => {
if (!t && (n || r.getItemUntracked(uc, i))) switch (o.event) {
case fs.Input.MouseEventType.Click:
o.button === fs.Input.MouseButton.Left && (o.stopPropagation(), e(o, s));
break;

case fs.Input.MouseEventType.Enter:
a((e => ({
...e,
isHovered: !0
})));
break;

case fs.Input.MouseEventType.Leave:
a({
isPressed: !1,
isHovered: !1
});
break;

case fs.Input.MouseEventType.Down:
a((e => ({
...e,
isPressed: !0
})));
break;

case fs.Input.MouseEventType.Up:
a((e => ({
...e,
isPressed: !1
})));
}
};
return {
onClick: o,
onMouseEnter: o,
onMouseLeave: o,
onMouseDown: o,
onMouseUp: o
};
}), [ r, i, t, n, e ]);
return {
isPressed: o.isPressed,
isHovered: o.isHovered,
hooks: s
};
}
var yc = 9, Ic = 13, _c = 27, bc = 37, Sc = 38, vc = 39, Tc = 40, Ec = 65, Pc = 68, Oc = 69, Cc = 70, Nc = 81, Ac = 83, Lc = 87, wc = 112, kc = 113, Rc = 114, xc = 115, Bc = 116, Dc = fs.Input.GamePadInput, Fc = fs.Input.DeviceType, Mc = {
[Fc.Playstation]: {
[Dc.FaceButtonBottom]: "Cross",
[Dc.FaceButtonRight]: "Circle",
[Dc.FaceButtonLeft]: "Square",
[Dc.FaceButtonTop]: "Triangle",
[Dc.TriggerLeft]: "L2",
[Dc.TriggerRight]: "R2",
[Dc.ShoulderLeft]: "L1",
[Dc.ShoulderRight]: "R1",
[Dc.SpecialLeft]: "Touchpad",
[Dc.SpecialRight]: "Option",
[Dc.LeftJoystickPress]: "L3_Ps",
[Dc.RightJoystickPress]: "R3_Ps"
},
[Fc.Xbox]: {
[Dc.FaceButtonBottom]: "A",
[Dc.FaceButtonRight]: "B",
[Dc.FaceButtonLeft]: "X",
[Dc.FaceButtonTop]: "Y",
[Dc.TriggerLeft]: "LT",
[Dc.TriggerRight]: "RT",
[Dc.ShoulderLeft]: "LB",
[Dc.ShoulderRight]: "RB",
[Dc.SpecialLeft]: "View",
[Dc.SpecialRight]: "Menu",
[Dc.LeftJoystickPress]: "L3_Xbox",
[Dc.RightJoystickPress]: "R3_Xbox"
},
[Fc.Switch]: {
[Dc.FaceButtonBottom]: "B_Nx",
[Dc.FaceButtonRight]: "A_Nx",
[Dc.FaceButtonLeft]: "Y_Nx",
[Dc.FaceButtonTop]: "X_Nx",
[Dc.TriggerLeft]: "ZL_Nx",
[Dc.TriggerRight]: "ZR_Nx",
[Dc.ShoulderLeft]: "L_Nx",
[Dc.ShoulderRight]: "R_Nx",
[Dc.SpecialLeft]: "MapMenu_Nx",
[Dc.SpecialRight]: "Pause_Nx",
[Dc.LeftJoystickPress]: "L3_Nx",
[Dc.RightJoystickPress]: "R3_Nx"
},
[Fc.MouseAndKeyboard]: {
[Ic]: "ENTER"
}
}, Uc = e => !e.gamePadInput || e.device !== Fc.Xbox && e.device !== Fc.Playstation && e.device !== Fc.Switch ? e.keyboardKeycode ? Mc[Fc.MouseAndKeyboard][e.keyboardKeycode] : void 0 : Mc[e.device][e.gamePadInput], Hc = "PS4" === vs.devicePlatformId || "XBOXONE" === vs.devicePlatformId || "NX" === vs.devicePlatformId ? 1 : 2;
function Vc(e) {
return "number" == typeof e ? e * Hc : e.map((e => e * Hc));
}
var Jc = e => e * Hc * .75, Gc = e => e[Hc], zc = e => {
const t = {};
return Object.keys(e).forEach((n => {
t[n] = Gc(e[n]);
})), t;
}, jc = {}, qc = {}, Yc = [], Wc = 1;
function Kc() {
let e = Yc.pop();
return e || (e = Wc++), e;
}
function Xc(e, t) {
jc[e] = {
style: t,
synced: !1
};
}
function Qc(e) {
const t = Kc();
return Xc(t, e), t;
}
function $c(e) {
delete jc[e], Yc.push(e);
}
function Zc(e, t, n) {
for (const r of t) {
const t = jc[r];
t && (t.synced || (n ? e.createStyleSync({
id: r,
style: t.style
}) : e.createStyle({
id: r,
style: t.style
}), t.synced = !0));
}
}
function ed() {
for (const e of Object.values(jc)) e.synced = !1;
}
function td(e, t) {
const n = t ? Qc(t) : void 0, r = {};
return function(t) {
const i = typeof t + ":" + t;
if (r[i]) return r[i];
const o = e(t), a = [];
for (const e in o) a.push(rd(e, o[e]));
return n && a.push(n), r[i] = a, a;
};
}
var nd = Qc({});
function rd(e, t) {
let n = qc[e];
if (!n) {
const t = {};
n = function(n) {
if (void 0 === n) return nd;
const r = typeof n + ":" + n;
let i = t[r];
return i || (i = Qc({
[e]: n
}), t[r] = i), i;
}, qc[e] = n;
}
return n(t);
}
function id(e, t) {
const {id: n, styleCallback: r} = H.useMemo((() => {
const t = Kc();
let n = !1;
return {
id: t,
styleCallback: () => {
if (!n) {
n = !0;
const r = e();
Xc(t, r);
}
return t;
}
};
}), t);
return H.useEffect((() => () => {
$c(n);
}), [ n ]), r;
}
var od = zc({
A: {
1: Cs("/photon/quantum/icons/buttons/console/A-8dd77a8f.png"),
2: Cs("/photon/quantum/icons/buttons/console/A@2x-daf48afe.png")
},
B: {
1: Cs("/photon/quantum/icons/buttons/console/B-6324d7ef.png"),
2: Cs("/photon/quantum/icons/buttons/console/B@2x-7d9bfd26.png")
},
LB: {
1: Cs("/photon/quantum/icons/buttons/xbox/LB-86220347.png"),
2: Cs("/photon/quantum/icons/buttons/xbox/LB@2x-45bf4ede.png")
},
LT: {
1: Cs("/photon/quantum/icons/buttons/xbox/LT-5d83d406.png"),
2: Cs("/photon/quantum/icons/buttons/xbox/LT@2x-e48e251a.png")
},
Menu: {
1: Cs("/photon/quantum/icons/buttons/xbox/Menu-80a9c3ed.png"),
2: Cs("/photon/quantum/icons/buttons/xbox/Menu@2x-58b3c04b.png")
},
View: {
1: Cs("/photon/quantum/icons/buttons/xbox/Change_View-0b9d4821.png"),
2: Cs("/photon/quantum/icons/buttons/xbox/Change_View@2x-313379db.png")
},
RB: {
1: Cs("/photon/quantum/icons/buttons/xbox/RB-741a5b67.png"),
2: Cs("/photon/quantum/icons/buttons/xbox/RB@2x-e50d4979.png")
},
RT: {
1: Cs("/photon/quantum/icons/buttons/xbox/RT-d5de4bf8.png"),
2: Cs("/photon/quantum/icons/buttons/xbox/RT@2x-37833b92.png")
},
X: {
1: Cs("/photon/quantum/icons/buttons/console/X-0eec8545.png"),
2: Cs("/photon/quantum/icons/buttons/console/X@2x-5d97d8d4.png")
},
Y: {
1: Cs("/photon/quantum/icons/buttons/console/Y-5fc29454.png"),
2: Cs("/photon/quantum/icons/buttons/console/Y@2x-858f6ff0.png")
},
L3_Xbox: {
1: Cs("/photon/quantum/icons/buttons/console/LeftStickPress-0af47dba.png"),
2: Cs("/photon/quantum/icons/buttons/console/LeftStickPress@2x-30193db7.png")
},
R3_Xbox: {
1: Cs("/photon/quantum/icons/buttons/console/RightStickPress-27afe739.png"),
2: Cs("/photon/quantum/icons/buttons/console/RightStickPress@2x-bf927d14.png")
}
}), ad = {
A: Vc([ 32, 32 ]),
B: Vc([ 32, 32 ]),
LB: Vc([ 60, 36 ]),
LT: Vc([ 32, 32 ]),
Menu: Vc([ 32, 32 ]),
View: Vc([ 32, 32 ]),
RB: Vc([ 60, 36 ]),
RT: Vc([ 32, 32 ]),
X: Vc([ 32, 32 ]),
Y: Vc([ 32, 32 ]),
L3_Xbox: Vc([ 35, 32 ]),
R3_Xbox: Vc([ 35, 32 ])
}, sd = zc({
A_Nx: {
1: Cs("/photon/quantum/icons/buttons/console/A-8dd77a8f.png"),
2: Cs("/photon/quantum/icons/buttons/console/A@2x-daf48afe.png")
},
B_Nx: {
1: Cs("/photon/quantum/icons/buttons/console/B-6324d7ef.png"),
2: Cs("/photon/quantum/icons/buttons/console/B@2x-7d9bfd26.png")
},
X_Nx: {
1: Cs("/photon/quantum/icons/buttons/console/X-0eec8545.png"),
2: Cs("/photon/quantum/icons/buttons/console/X@2x-5d97d8d4.png")
},
Y_Nx: {
1: Cs("/photon/quantum/icons/buttons/console/Y-5fc29454.png"),
2: Cs("/photon/quantum/icons/buttons/console/Y@2x-858f6ff0.png")
},
MapMenu_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/minus-86aa7f38.png"),
2: Cs("/photon/quantum/icons/buttons/switch/minus@2x-8a519fd9.png")
},
Pause_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/plus-8c860b8e.png"),
2: Cs("/photon/quantum/icons/buttons/switch/plus@2x-f4b87fa6.png")
},
Left_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/Left-0c262fa0.png"),
2: Cs("/photon/quantum/icons/buttons/switch/Left@2x-7d8ee9ab.png")
},
Up_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/Up-f279a076.png"),
2: Cs("/photon/quantum/icons/buttons/switch/Up@2x-ff24bfe3.png")
},
Right_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/Right-ef22a6bd.png"),
2: Cs("/photon/quantum/icons/buttons/switch/Right@2x-419f7983.png")
},
Down_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/Down-7ac09c29.png"),
2: Cs("/photon/quantum/icons/buttons/switch/Down@2x-ac7800d7.png")
},
L3_Nx: {
1: Cs("/photon/quantum/icons/buttons/console/LeftStickPress-0af47dba.png"),
2: Cs("/photon/quantum/icons/buttons/console/LeftStickPress@2x-30193db7.png")
},
R3_Nx: {
1: Cs("/photon/quantum/icons/buttons/console/RightStickPress-27afe739.png"),
2: Cs("/photon/quantum/icons/buttons/console/RightStickPress@2x-bf927d14.png")
},
L_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/L-38b7944b.png"),
2: Cs("/photon/quantum/icons/buttons/switch/L@2x-b0699c7c.png")
},
R_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/R-bc0f10f2.png"),
2: Cs("/photon/quantum/icons/buttons/switch/R@2x-c8c44d04.png")
},
ZL_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/ZL-f254f9d2.png"),
2: Cs("/photon/quantum/icons/buttons/switch/ZL@2x-7e32123a.png")
},
ZR_Nx: {
1: Cs("/photon/quantum/icons/buttons/switch/ZR-55b5dee4.png"),
2: Cs("/photon/quantum/icons/buttons/switch/ZR@2x-996fa537.png")
}
}), ld = {
A_Nx: Vc([ 32, 32 ]),
B_Nx: Vc([ 32, 32 ]),
X_Nx: Vc([ 32, 32 ]),
Y_Nx: Vc([ 32, 32 ]),
MapMenu_Nx: Vc([ 32, 32 ]),
Pause_Nx: Vc([ 32, 32 ]),
Left_Nx: Vc([ 32, 32 ]),
Up_Nx: Vc([ 32, 32 ]),
Right_Nx: Vc([ 32, 32 ]),
Down_Nx: Vc([ 32, 32 ]),
L3_Nx: Vc([ 35, 32 ]),
R3_Nx: Vc([ 35, 32 ]),
L_Nx: Vc([ 32, 32 ]),
R_Nx: Vc([ 32, 32 ]),
ZL_Nx: Vc([ 32, 32 ]),
ZR_Nx: Vc([ 32, 32 ])
}, cd = "PS5" === vs.devicePlatformId ? {
1: Cs("/photon/quantum/icons/buttons/playstation/Options-ps5-7a52c78a.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/Options-ps5@2x-cbb1c76b.png"),
size: Vc([ 32, 32 ])
} : {
1: Cs("/photon/quantum/icons/buttons/playstation/Options-99cbd400.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/Options@2x-1208264e.png"),
size: Vc([ 82, 32 ])
}, dd = "PS5" === vs.devicePlatformId ? {
1: Cs("/photon/quantum/icons/buttons/playstation/Touchpad-ps5-db77da5e.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/Touchpad-ps5@2x-cec6035e.png"),
size: Vc([ 54, 32 ])
} : {
1: Cs("/photon/quantum/icons/buttons/playstation/Touchpad-b91080f7.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/Touchpad@2x-9d41ff7c.png"),
size: Vc([ 48, 32 ])
}, ud = zc({
Circle: {
1: Cs("/photon/quantum/icons/buttons/playstation/Circle-5d2ed786.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/Circle@2x-503649cf.png")
},
L1: {
1: Cs("/photon/quantum/icons/buttons/console/L1-827ee30a.png"),
2: Cs("/photon/quantum/icons/buttons/console/L1@2x-76ad6d8f.png")
},
L2: {
1: Cs("/photon/quantum/icons/buttons/console/L2-31f080f4.png"),
2: Cs("/photon/quantum/icons/buttons/console/L2@2x-07f923e5.png")
},
R1: {
1: Cs("/photon/quantum/icons/buttons/console/R1-fd84454a.png"),
2: Cs("/photon/quantum/icons/buttons/console/R1@2x-032edcaf.png")
},
R2: {
1: Cs("/photon/quantum/icons/buttons/console/R2-03aa6f93.png"),
2: Cs("/photon/quantum/icons/buttons/console/R2@2x-1aad2a61.png")
},
Square: {
1: Cs("/photon/quantum/icons/buttons/playstation/Square-ee30a845.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/Square@2x-2e8d61e9.png")
},
Triangle: {
1: Cs("/photon/quantum/icons/buttons/playstation/Triangle-13104262.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/Triangle@2x-63f95e2e.png")
},
Cross: {
1: Cs("/photon/quantum/icons/buttons/playstation/X-7eb1cd88.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/X@2x-4d4d7b3c.png")
},
Option: cd,
Touchpad: dd,
L3_Ps: {
1: Cs("/photon/quantum/icons/buttons/playstation/L3-ff96c246.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/L3@2x-89f68e31.png")
},
R3_Ps: {
1: Cs("/photon/quantum/icons/buttons/playstation/R3-9fef3f45.png"),
2: Cs("/photon/quantum/icons/buttons/playstation/R3@2x-b70c97d8.png")
}
}), pd = {
Circle: Vc([ 32, 32 ]),
L1: Vc([ 48, 32 ]),
L2: Vc([ 41, 32 ]),
R1: Vc([ 48, 32 ]),
R2: Vc([ 41, 32 ]),
Square: Vc([ 32, 32 ]),
Triangle: Vc([ 32, 32 ]),
Cross: Vc([ 32, 32 ]),
Option: cd.size,
Touchpad: dd.size,
L3_Ps: Vc([ 32, 32 ]),
R3_Ps: Vc([ 32, 32 ])
}, fd = zc({
ENTER: {
1: Cs("/photon/quantum/icons/buttons/pc/Enter_Return-7043f781.png"),
2: Cs("/photon/quantum/icons/buttons/pc/Enter_Return@2x-a99324d2.png")
}
}), hd = {
ENTER: Vc([ 48, 32 ])
}, md = {
...od,
...sd,
...ud,
...fd
}, gd = {
...ad,
...ld,
...pd,
...hd
}, yd = md, Id = {
_0: "#93b5feff",
_100: "#7da6fdff",
_1000: "#14357eff",
_200: "#6897fdff",
_300: "#5288fdff",
_400: "#3d79fcff",
_500: "#276afcff",
_600: "#235fe3ff",
_700: "#1f55caff",
_800: "#1b4ab0ff",
_900: "#174097ff"
}, _d = {
_0: "#ffffffff",
_100: "#d1d0d5ff",
_1000: "#000000ff",
_200: "#908e97ff",
_300: "#62626fff",
_400: "#343647ff",
_500: "#1d2033ff",
_600: "#1a1d2eff",
_700: "#171a29ff",
_800: "#141724ff",
_900: "#0b0e15ff"
}, bd = {
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
}, Sd = {
_0: "#80ffc2ff",
_100: "#66ffb5ff",
_1000: "#008042ff",
_200: "#4dffa9ff",
_300: "#33ff9dff",
_400: "#1aff90ff",
_500: "#00ff84ff",
_600: "#00e677ff",
_700: "#00cc6aff",
_800: "#00b35cff",
_900: "#00994fff"
}, vd = {
alt1: "#ffffffff",
alt2: "#343647ff",
alt3: "#d1d0d5ff",
base: "#1d2033ff",
body: "#141724ff"
}, Td = {
alert: "#ff4747ff",
default: "#141724ff",
emphasized: "#000000ff",
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
}, Ed = {
alert: "#ff4747ff",
default: "#908e97ff",
emphasized: "#ffffffff",
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
}, Pd = {
disabled: "#62626fff",
focusHover: "#276afcff",
selected: "#1f55caff",
selectedAlt: "#1d2033ff"
}, Od = {
alert: "#ff4747ff",
default: "#141724ff",
emphasized: "#000000ff",
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
}, Cd = {
alert: "#ff4747ff",
default: "#908e97ff",
emphasized: "#ffffffff",
error: "#ff4747ff",
success: "#00ff84ff",
warning: "#ffe66bff"
}, Nd = {
large: 128,
larger: 160,
largest: 192,
macro: 224,
medium: 96,
micro: 24,
none: 0,
small: 64,
smaller: 48,
smallest: 32
}, Ad = {
_10: .1,
_20: .2,
_30: .3,
_40: .4,
_50: .5,
_60: .6,
_70: .7,
_80: .8,
_90: .9,
_95: .95
}, Ld = {
large: 24,
larger: 32,
largest: 48,
macro: 64,
medium: 16,
micro: 2,
none: 0,
small: 12,
smaller: 8,
smallest: 4
}, wd = {
large: 24,
larger: 32,
largest: 48,
macro: 64,
medium: 16,
micro: 2,
none: 0,
small: 12,
smaller: 8,
smallest: 4
}, kd = (() => {
const e = is.QuantumTheme;
if (null !== e && "object" == typeof e && "tokens" in e && "componentTokens" in e && "id" in e) return e;
})(), Rd = (e => {
if (!kd?.tokens) return e;
const t = {
...e
};
for (const [n, r] of Object.entries(kd.tokens)) t[n] = {
...e[n],
...r
};
return t;
})({
ColorBrandPrimary: {
_500: Id._500,
_700: Id._700,
_800: Id._800
},
ColorNeutral: {
_0: _d._0,
_200: _d._200,
_300: _d._300,
_400: _d._400,
_500: _d._500,
_800: _d._800
},
ColorSystem: {
error: bd.error,
success: bd.success,
warning: bd.warning
},
ColorSystemSuccess: {
_300: Sd._300
},
BackgroundColor: {
alt1: vd.alt1,
alt2: vd.alt2,
base: vd.base,
body: vd.body
},
IconColorInverted: {
default: Td.default
},
IconColorStandard: {
alert: Ed.alert,
default: Ed.default,
emphasized: Ed.emphasized,
error: Ed.error,
success: Ed.success
},
InteractiveColor: {
focusHover: Pd.focusHover,
selected: Pd.selected,
selectedAlt: Pd.selectedAlt
},
TextColorInverted: {
default: Od.default
},
TextColorStandard: {
default: Cd.default,
emphasized: Cd.emphasized,
error: Cd.error,
warning: Cd.warning
},
DimensionLayout: Nd,
FillAlpha: Ad,
BorderRadius: Ld,
DimensionSpace: wd,
AnimationEasing: {
ease: [ .48, 0, .24, 1 ],
accelerate: [ .24, 1, .32, 1 ]
},
AnimationTime: {
rapid: 100,
fastest: 250,
faster: 300,
fast: 350,
average: 400,
slow: 500,
slower: 700,
slowest: 1e3,
toast_delay: 5e3
},
ScrollFactor: {
fast: 100
},
DangerZone: {
width: 96,
height: 54
},
ButtonScale: {
large: .993,
medium: .98,
small: .96
},
OverlayBackgroundColor: "#04091Aff",
TextSizeDisplay: {
medium: 60
},
TextSizeHeading: {
medium: 40,
small: 36,
smaller: 32
},
TextSizeLabel: {
medium: 26,
small: 24
}
}), xd = e => md[e], Bd = e => gd[e], Dd = zc({
buttonBorder: {
1: Cs("/photon/quantum/borders/w4px_r4px_ffffff-transparent-e688f0af.png"),
2: Cs("/photon/quantum/borders/w4px_r4px_ffffff-transparent-2x-9d845976.png")
}
}), Fd = Qc({
height: Vc(32),
texture: Dd.buttonBorder,
borderCenter: !0,
textureBorder: Vc(4),
justifyContent: "center",
alignItems: "center",
paddingLeft: Vc(10),
paddingRight: Vc(10)
}), Md = Qc({
fontSize: Jc(19)
}), Ud = ({type: e, buttonLabel: t, color: n = Rd.IconColorStandard.default, style: r, onClick: i, onSurfaceId: o}) => {
if (e) {
const t = xd(e), [a, s] = Bd(e);
return H.createElement("surface", {
style: [ rd("texture", t), rd("width", a), rd("minWidth", a), rd("height", s), rd("color", n), r ],
onClick: i,
onSurfaceId: o
});
}
return t ? H.createElement("surface", {
onClick: i,
onSurfaceId: o,
style: [ rd("zOffset", 1), Fd, rd("color", n), r ]
}, H.createElement("surface", {
style: [ Md, rd("color", n) ],
text: t
})) : null;
}, Hd = {
lrm: String.fromCharCode(8206),
nbsp: String.fromCharCode(160),
wordJoiner: String.fromCharCode(8288)
}, Vd = {
name: "Almarai Regular",
url: Cs("/photon/fonts/Almarai-Regular-7bdf9d83.ttf")
}, Jd = {
name: "Almarai Bold",
url: Cs("/photon/fonts/Almarai-Bold-b028f5b0.ttf")
}, Gd = {
name: "Noto Sans KR Regular",
url: Cs("/photon/fonts/NotoSansKR-Regular-913f146b.otf")
}, zd = {
name: "Noto Sans JP Regular",
url: Cs("/photon/fonts/NotoSansJP-Regular-ecfed48e.otf")
}, jd = {
name: "Noto Sans SC Regular",
url: Cs("/photon/fonts/NotoSansSC-Regular-370c2c5d.otf")
}, qd = {
name: "Noto Sans TC Regular",
url: Cs("/photon/fonts/NotoSansTC-Regular-d6b43f66.otf")
}, Yd = {
name: "Electronic Arts Display",
url: Cs("/photon/fonts/electronic-arts-display-regular-a4361191.otf")
}, Wd = {
name: "Electronic Arts Display Bold",
url: Cs("/photon/fonts/electronic-arts-display-bold-5d556d29.otf")
}, Kd = {
name: "Electronic Arts Text",
url: Cs("/photon/fonts/electronic-arts-text-regular-91c23ee4.otf")
}, Xd = {
name: "Electronic Arts Text Bold",
url: Cs("/photon/fonts/electronic-arts-text-bold-97ba7e39.otf")
}, Qd = {
eaDisplay: Vd,
eaDisplayBold: Vd,
eaText: Vd,
eaTextBold: Jd
}, $d = {
eaDisplay: zd,
eaDisplayBold: zd,
eaText: zd,
eaTextBold: zd
}, Zd = {
eaDisplay: Gd,
eaDisplayBold: Gd,
eaText: Gd,
eaTextBold: Gd
}, eu = {
eaDisplay: jd,
eaDisplayBold: jd,
eaText: jd,
eaTextBold: jd
}, tu = {
eaDisplay: qd,
eaDisplayBold: qd,
eaText: qd,
eaTextBold: qd
}, nu = {
eaDisplay: Yd,
eaDisplayBold: Wd,
eaText: Kd,
eaTextBold: Xd
}, ru = {
name: "ea-icons",
url: Cs("/photon/fonts/photon-icons-b2895de0.otf")
}, iu = new Set([ "ar-sa" ]), ou = new Set([ "ja-jp" ]), au = new Set([ "ko-kr", "ru-ru" ]), su = new Set([ "zh-cn" ]), lu = new Set([ "zh-tw", "zh-hk" ]), cu = new Set([ ...iu, ...ou, ...au, ...su, ...lu ]);
function du(e, t) {
const n = !cu.has(e), r = !cu.has(t);
return n ? r : iu.has(e) ? iu.has(t) : au.has(e) ? au.has(t) : ou.has(e) ? ou.has(t) : su.has(e) ? su.has(t) : !!lu.has(e) && lu.has(t);
}
var {eaIcons: uu, eaDisplay: pu, eaDisplayBold: fu, eaText: hu, eaTextBold: mu} = function(e) {
const t = e.toLowerCase();
return iu.has(t) ? {
eaIcons: ru,
...Qd
} : ou.has(t) ? {
eaIcons: ru,
...$d
} : au.has(t) ? {
eaIcons: ru,
...Zd
} : su.has(t) ? {
eaIcons: ru,
...eu
} : lu.has(t) ? {
eaIcons: ru,
...tu
} : {
eaIcons: ru,
...nu
};
}(vs.locale), gu = vs.featureFlags.hasTextDirectionFix && iu.has(vs.locale) ? "right-to-left" : void 0, yu = Qc({
fontFamily: pu.name,
textDirection: gu,
textLetterSpacing: 1,
textSoftness: 1,
textEdgeOffset: .3,
fontSize: Jc(26)
}), Iu = Qc({
fontFamily: fu.name,
textDirection: gu,
textLetterSpacing: 1,
textSoftness: 1,
textEdgeOffset: .3,
fontSize: Jc(26)
}), _u = Qc({
fontFamily: hu.name,
textDirection: gu,
textLetterSpacing: 1,
textSoftness: 1,
textEdgeOffset: .3,
fontSize: Jc(26)
}), bu = Qc({
fontFamily: mu.name,
textDirection: gu,
textLetterSpacing: 1,
textSoftness: 1,
textEdgeOffset: .3,
fontSize: Jc(26)
}), Su = {
ea: String.fromCharCode(57344),
epicGames: String.fromCharCode(57345),
genericCloud: String.fromCharCode(57346),
genericConsole: String.fromCharCode(57347),
genericPc: String.fromCharCode(57348),
playstation: String.fromCharCode(57349),
steam: String.fromCharCode(57350),
xbox: String.fromCharCode(57351),
switch: String.fromCharCode(57352),
...Hd
}, vu = {
ActionIdentifier: {
Label: {
color: Rd.TextColorStandard.emphasized
},
Icon: {
marginStart: Rd.DimensionSpace.small,
color: Rd.IconColorStandard.emphasized
}
},
ActionIdentifierInverted: {
Label: {
color: Rd.TextColorInverted.default
},
Icon: {
color: Rd.IconColorInverted.default
}
}
}, Tu = {
Block: {
Text: {
marginBottom: Rd.DimensionSpace.large
},
Title: {
color: Rd.TextColorStandard.emphasized
},
Headline: {
color: Rd.TextColorStandard.emphasized
},
Body: {
color: Rd.TextColorStandard.default
}
}
}, Eu = {
ButtonBase: {
Container: {
borderRadius: Rd.BorderRadius.medium,
paddingTop: Rd.DimensionSpace.small,
paddingEnd: Rd.DimensionSpace.large,
paddingBottom: Rd.DimensionSpace.small,
paddingStart: Rd.DimensionSpace.large
},
Stroke: {
color: Rd.ColorBrandPrimary._500
}
},
ButtonPrimaryDefault: {
Container: {
backgroundColor: Rd.ColorBrandPrimary._500
},
LabelText: {
color: Rd.ColorNeutral._0
}
},
ButtonPrimaryDisabled: {
Container: {
backgroundColor: Rd.ColorBrandPrimary._800
},
LabelText: {
color: Rd.ColorNeutral._200
}
},
ButtonSecondaryDefault: {
Container: {
backgroundColor: Rd.ColorNeutral._500
},
LabelText: {
color: Rd.ColorNeutral._0
}
},
ButtonSecondaryDisabled: {
Container: {
backgroundColor: Rd.ColorNeutral._800
},
LabelText: {
color: Rd.ColorNeutral._200
}
}
}, Pu = {
ButtonIcon: {
Container: {
color: Rd.IconColorStandard.default
}
}
}, Ou = {
Card: {
Container: {
borderRadius: Rd.BorderRadius.medium,
color: Rd.BackgroundColor.base,
paddingX: Rd.DimensionSpace.largest,
paddingY: Rd.DimensionSpace.larger
},
Headline: {
color: Rd.TextColorStandard.emphasized,
marginBottom: Rd.DimensionSpace.smaller
},
Body: {
color: Rd.TextColorStandard.emphasized
}
}
}, Cu = {
DetailCardGameInfo: {
Texture: {
borderRadius: Rd.BorderRadius.smaller,
marginEnd: Rd.DimensionSpace.larger
},
Title: {
color: Rd.TextColorStandard.emphasized,
marginBottom: Rd.DimensionSpace.small
},
Body: {
marginBottom: Rd.DimensionSpace.small
},
Body1: {
color: Rd.TextColorStandard.default
},
Body2: {
color: Rd.TextColorStandard.default
}
},
DetailCardGameInfoInactive: {
Texture: {
opacity: Rd.FillAlpha._50
},
Body1: {
color: Rd.TextColorStandard.error
}
}
}, Nu = {
DigitBadge: {
LabelText: {
color: Rd.TextColorInverted.default,
fontSize: Rd.TextSizeLabel.small
}
}
}, Au = {
DotBadge: {
Container: {
width: Rd.DimensionSpace.small,
height: Rd.DimensionSpace.small
}
}
}, Lu = {
InputField: {
Cursor: {
backgroundColor: Rd.TextColorStandard.emphasized
},
LabelText: {
color: Rd.TextColorStandard.emphasized
},
AssistiveText: {
marginTop: Rd.DimensionSpace.smallest
}
}
}, wu = {
ActionIdentifierListControl: {
Content: {
paddingStart: Rd.DimensionSpace.smaller
},
UnseenMarker: {
marginStart: Rd.DimensionSpace.small
}
}
};
function ku(e, t) {
if (9 === e.length) {
const n = Math.floor(255 * t).toString(16);
return e.substring(0, e.length - 2) + n;
}
return e;
}
var Ru = Rd.DimensionSpace.small, xu = Rd.DimensionSpace.small, Bu = 37 + Ru + xu, Du = {
ListControlBase: {
Container: {
minHeight: Bu,
borderRadius: Rd.BorderRadius.medium,
backgroundColor: Rd.BackgroundColor.base
},
ContainerBorderOutside: {
borderRadius: Rd.BorderRadius.smaller
},
Border: {
top: -Rd.DimensionSpace.smaller,
right: -Rd.DimensionSpace.smaller,
bottom: -Rd.DimensionSpace.smaller,
left: -Rd.DimensionSpace.smaller
},
Content: {
paddingTop: Rd.DimensionSpace.none,
paddingEnd: Rd.DimensionSpace.large,
paddingBottom: Rd.DimensionSpace.none,
paddingStart: Rd.DimensionSpace.large
},
Action: {
minHeight: Bu,
paddingTop: Ru,
paddingEnd: Rd.DimensionSpace.large,
paddingBottom: xu,
paddingStart: Rd.DimensionSpace.large,
borderRadius: Rd.BorderRadius.smaller,
color: Rd.TextColorStandard.emphasized
},
Divider: {
marginStart: Rd.DimensionSpace.small,
marginEnd: Rd.DimensionSpace.small,
width: Rd.DimensionSpace.micro,
height: Rd.DimensionSpace.larger,
backgroundColor: Rd.ColorNeutral._400
},
PrimaryID: {
marginStart: Rd.DimensionSpace.large
},
LabelText: {
minHeight: Bu,
paddingTop: Ru,
paddingEnd: Rd.DimensionSpace.none,
paddingBottom: xu,
paddingStart: Rd.DimensionSpace.none,
color: Rd.TextColorStandard.emphasized
},
Skeleton: {
height: Rd.DimensionSpace.medium,
width: Rd.DimensionLayout.macro,
marginStart: Rd.DimensionSpace.large
}
},
ListControlBaseActive: {
Container: {
backgroundColor: Rd.BackgroundColor.alt1,
backgroundColor2: Rd.BackgroundColor.body
},
LabelText: {
color: Rd.TextColorInverted.default,
colorFocusable: Rd.TextColorStandard.emphasized
}
},
ListControlBaseDisabled: {
Container: {
backgroundColor: Rd.BackgroundColor.body
},
LabelText: {
color: Rd.ColorNeutral._300
}
},
ListControlBaseFocused: {
LabelText: {
color: Rd.TextColorStandard.emphasized
}
},
ListControlBaseDimmed: {
LabelText: {
color: Rd.TextColorStandard.default
}
},
ListControlBaseActionPrimary: {
Container: {
backgroundColor: Rd.ColorBrandPrimary._500
}
},
ListControlBaseActionSecondary: {
Container: {
backgroundColor: ku(Rd.ColorNeutral._300, .5)
}
},
ListControlBaseActionPrimaryHover: {
Container: {
backgroundColor: Rd.ColorBrandPrimary._700
}
},
ListControlBaseActionSecondaryHover: {
Container: {
backgroundColor: Rd.ColorNeutral._400
}
},
ListControlBaseActionPrimaryPressed: {
Container: {
backgroundColor: Rd.InteractiveColor.selected
}
},
ListControlBaseActionSecondaryPressed: {
Container: {
backgroundColor: Rd.InteractiveColor.selectedAlt
}
},
ListControlBaseActionPrimaryDisabled: {
Container: {
backgroundColor: Rd.BackgroundColor.alt2
}
},
ListControlBaseActionSecondaryDisabled: {
Container: {
backgroundColor: Rd.BackgroundColor.alt2
}
}
}, Fu = {
ListControlMenuItem: {
Container: {
marginBottom: Rd.DimensionSpace.smaller
},
Icon: {
marginStart: Rd.DimensionSpace.small,
marginEnd: Rd.DimensionSpace.small
}
},
ListControlMenuItemDisabled: {
Container: {
marginBottom: Rd.DimensionSpace.smaller
}
},
ListControlMenu: {
Title: {
color: Rd.ColorNeutral._0,
marginTop: Rd.DimensionSpace.larger,
marginBottom: Rd.DimensionSpace.small
}
},
ListControlMenuSkeleton: {
Container: {
margin: Rd.DimensionSpace.medium,
marginStart: Rd.DimensionSpace.large
}
}
}, Mu = {
Modal: {
CenteredContainer: {
marginTop: Rd.DimensionLayout.medium,
marginBottom: Rd.DimensionLayout.medium
},
ChoiceContainer: {
marginTop: Rd.DimensionSpace.largest
},
ChoiceButton: {
marginBottom: Rd.DimensionSpace.medium,
marginTop: Rd.DimensionSpace.larger
}
}
}, Uu = {
ModalContainer: {
Container: {
padding: Rd.DimensionSpace.large
},
OpaqueContainer: {
backgroundColor: Rd.ColorNeutral._800
}
}
}, Hu = {
ModalSelector: {
Container: {
marginTop: Rd.DimensionSpace.largest
},
RadioButton: {
marginBottom: Rd.DimensionSpace.small
}
}
}, Vu = {
Notification: {
Container: {
color: Rd.BackgroundColor.alt2,
borderRadius: Rd.BorderRadius.smaller
},
Inner: {
top: Rd.DimensionSpace.medium,
right: Rd.DimensionSpace.medium,
left: Rd.DimensionSpace.medium
},
Disclaimer: {
marginTop: Rd.DimensionSpace.medium,
marginBottom: Rd.DimensionSpace.medium,
backgroundColor: Rd.BackgroundColor.alt2
},
IconWrapper: {
marginEnd: Rd.DimensionSpace.medium
},
Icon: {
width: Rd.DimensionSpace.largest,
height: Rd.DimensionSpace.largest
},
IconBackground: {
marginEnd: Rd.DimensionSpace.medium
},
Image: {
borderRadius: Rd.BorderRadius.smaller
},
Text: {
color: Rd.TextColorStandard.emphasized
},
Info: {
color: ku(Rd.ColorNeutral._300, .5),
padding: Rd.DimensionSpace.smaller,
borderRadius: Rd.BorderRadius.smaller
},
Button: {
marginTop: Rd.DimensionSpace.medium
}
}
}, Ju = {
NotificationActivate: {
SpriteAnimationContainer: {
marginStart: Rd.DimensionSpace.small,
marginEnd: Rd.DimensionSpace.small
},
Label: {
color: Rd.TextColorStandard.emphasized
}
}
}, Gu = {
RadioInput: {
ButtonIcon: {
marginEnd: Rd.DimensionSpace.small
}
},
RadioInputIcon: {
Container: {
marginStart: Rd.DimensionSpace.large,
backgroundColor: Rd.BackgroundColor.body
},
Bullet: {
color: Rd.IconColorStandard.emphasized
},
Stroke: {
color: Rd.IconColorStandard.default
}
},
RadioInputIconSelected: {
Stroke: {
color: Rd.InteractiveColor.focusHover
}
},
RadioInputIconDisabled: {
Stroke: {
color: Rd.ColorNeutral._400
}
}
}, zu = {
ScrollBar: {
Container: {
width: Rd.DimensionSpace.smaller,
marginTop: Rd.DimensionSpace.smallest,
borderRadius: Rd.BorderRadius.smallest,
backgroundColor: Rd.ColorNeutral._400
}
},
ScrollBarHovered: {
Container: {
backgroundColor: Rd.ColorNeutral._300
}
}
}, ju = {
SectionHeader: {
Container: {
paddingTop: Rd.DimensionSpace.small,
paddingEnd: Rd.DimensionSpace.large,
paddingBottom: Rd.DimensionSpace.small,
paddingStart: Rd.DimensionSpace.large,
color: Rd.BackgroundColor.base
}
},
CollapsibleSectionHeader: {
Divider: {
width: Rd.DimensionSpace.micro,
height: Rd.DimensionSpace.larger,
backgroundColor: Rd.ColorNeutral._400
},
Icon: {
width: Rd.DimensionSpace.larger,
height: Rd.DimensionSpace.larger,
color: Rd.ColorNeutral._0
},
RTL: {
marginStart: Rd.DimensionSpace.large
},
Text: {
color: Rd.TextColorStandard.emphasized
},
DotBadge: {
marginEnd: Rd.DimensionSpace.small
}
}
}, qu = {
TabBar: {
ButtonIcon: {
color: Rd.IconColorStandard.emphasized
}
}
}, Yu = {
TabButton: {
Container: {
paddingTop: Rd.DimensionSpace.smaller,
paddingEnd: Rd.DimensionSpace.medium,
paddingBottom: Rd.DimensionSpace.smaller,
paddingStart: Rd.DimensionSpace.medium,
marginStart: Rd.DimensionSpace.larger / 2,
marginEnd: Rd.DimensionSpace.larger / 2
},
LabelText: {
color: Rd.TextColorStandard.default
}
},
TabButtonActive: {
LabelText: {
color: Rd.TextColorInverted.default,
backgroundColor: Rd.BackgroundColor.alt1
}
},
TabButtonPressed: {
LabelText: {
color: Rd.TextColorInverted.default,
backgroundColor: Rd.BackgroundColor.alt1
}
},
TabButtonFocused: {
LabelText: {
color: Rd.TextColorStandard.emphasized
}
}
}, Wu = {
Body: {
Text: {
fontSize: Rd.TextSizeLabel.medium,
color: Rd.TextColorStandard.default
}
}
}, Ku = {
Headline: {
Text: {
fontSize: Rd.TextSizeHeading.medium,
color: Rd.TextColorStandard.default
}
}
}, Xu = {
Label: {
Text: {
fontSize: Rd.TextSizeLabel.medium,
color: Rd.TextColorStandard.default
}
}
}, Qu = {
SectionTitle: {
Container: {
fontSize: Rd.TextSizeLabel.medium,
color: Rd.TextColorStandard.default
}
}
}, $u = {
Title: {
Container: {
fontSize: Rd.TextSizeDisplay.medium,
color: Rd.TextColorStandard.default
}
}
}, Zu = (e => {
if (!kd?.componentTokens) return e;
const t = {
...e
};
for (const [n, r] of Object.entries(kd.componentTokens)) if (t[n] = {
...e[n]
}, r) for (const [i, o] of Object.entries(r)) t[n][i] = {
...e[n][i],
...o
};
return t;
})({
...vu,
...Tu,
...Eu,
...Pu,
...ju,
...Nu,
...Au,
...Lu,
...Gu,
...zu,
...{
Tooltip: {
Container: {
backgroundColor: Rd.BackgroundColor.alt1,
padding: Rd.DimensionSpace.larger,
borderRadius: Rd.BorderRadius.smaller
},
Point: {
color: Rd.BackgroundColor.alt1
},
ActionIdentifier: {
marginTop: Rd.DimensionSpace.large
},
Headline: {
color: Rd.TextColorInverted.default
},
Body: {
color: Rd.TextColorInverted.default,
marginTop: Rd.DimensionSpace.small
}
}
},
...Wu,
...Ku,
...Xu,
...Qu,
...$u,
...qu,
...Yu,
...Vu,
...Ju,
...Mu,
...Uu,
...Hu,
...wu,
...Du,
...Fu,
...Ou,
...Cu
}), ep = Qc({
fontSize: Jc(Zu.Label.Text.fontSize),
zOffset: 1,
textLetterSpacing: Vc(1),
textEdgeOffset: .1,
wordWrap: "break-word"
}), tp = ({text: e, color: t, style: n}) => H.createElement("surface", {
text: e,
style: [ bu, ep, rd("color", t || Zu.Label.Text.color), n ]
}), np = Qc({
alignSelf: "stretch",
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "flex-start"
}), rp = Qc({
marginTop: Vc(2),
marginEnd: Vc(Rd.DimensionSpace.small)
}), ip = Qc({
flex: 1,
whiteSpace: "nowrap"
}), op = ({icon: e, iconOnSurfaceId: t, buttonLabel: n, style: r, inverted: i = !1, showIcon: o = !0}) => {
const a = i ? Zu.ActionIdentifierInverted.Icon.color : Zu.ActionIdentifier.Icon.color;
return H.createElement(Ud, {
type: e,
onSurfaceId: t,
buttonLabel: n,
color: a,
style: [ rd("zOffset", 1), o ? void 0 : rd("opacity", 0), r ]
});
}, ap = ({label: e, showIcon: t, icon: n, iconOnSurfaceId: r, buttonLabel: i, style: o, textStyle: a, inverted: s = !1}) => {
const l = s ? Zu.ActionIdentifierInverted.Label.color : Zu.ActionIdentifier.Label.color;
let c;
return (n || i) && (c = H.createElement(op, {
inverted: s,
buttonLabel: i,
icon: n,
iconOnSurfaceId: r,
showIcon: t,
style: rp
})), H.createElement("surface", {
style: [ np, o ]
}, c, H.createElement(tp, {
text: e,
color: l,
style: [ ip, a ]
}));
};
function sp(e, t) {
let n;
const r = () => {
if (0 === t) return e();
n && clearTimeout(n), n = setTimeout((() => {
n = void 0, e();
}), t);
};
return r.cancel = () => {
n && (clearTimeout(n), n = void 0);
}, r;
}
var lp = (e, t) => !(!e.gamePadInput || e.gamePadInput !== t.gamePadInput) || !(!e.keyboardKeycode || e.keyboardKeycode !== t.keyboardKeycode), cp = class {
constructor() {
this.timers = {}, this.isDestroyed = !1, this.disposeTimeout = e => {
const t = this.timers[e];
void 0 !== t && (clearTimeout(t), delete this.timers[e]);
}, this.timeout = (e, t, n) => {
this.isDestroyed || (this.disposeTimeout(e), this.timers[e] = setTimeout((() => {
this.disposeTimeout(e), t();
}), n));
}, this.hasTimeout = e => void 0 !== this.timers[e];
}
destroy() {
this.isDestroyed = !0, Object.keys(this.timers).forEach((e => {
clearTimeout(this.timers[e]), delete this.timers[e];
}));
}
}, dp = () => {
const [e] = H.useState((() => new cp));
return H.useEffect((() => () => e.destroy()), [ e ]), e;
};
function up(e, t) {
return e.type === t.type ? e.entryId - t.entryId : e.type - t.type;
}
var pp = "context", fp = 1, hp = e => "" !== e && void 0 !== e, mp = e => "string" == typeof e ? e : e.filter(hp).join(", "), gp = class {
constructor(e, t = 50) {
this.moby = e, this.debounceDelay = t, this.enableNarration = mt.box(!1), this.timeoutHandler = new cp, 
this.disposers = [], this.textMap = new Zs([]), this.contextMap = new Zs([]), this.tertiaryActions = mt([], {
deep: !1
}), this.currentContexts = [], this.dispose = () => {
this.disposers.forEach((e => e())), this.clear();
}, this.debouncedNarrate = sp((() => {
if (this.waitingText) {
const e = this.waitingText;
this.waitingText = void 0, this.triggerNarration(e);
}
}), this.debounceDelay), this.getRegisteredTertiaryActions = () => this.tertiaryActions;
}
get isEnabled() {
return this.enableNarration.get();
}
get hasWaitingContexts() {
return !!this.waitingContexts;
}
get isEnabledUntracked() {
return nl((() => this.isEnabled));
}
init(e, t) {
const n = this.moby;
return this.accessibility = e, this.getKeyBindingText = t, this.disposers.push(Dn((() => {
if (this.isEnabled && !n.get(Vl)) {
const e = n.get(Fl), t = e && this.textMap.get(e), r = t && t(this);
if (r) return mp(r);
}
}), (e => {
this.narrate(e);
})), Dn((() => {
if (this.isEnabled) {
const e = [];
return this.contextMap.forEach(((t, r) => {
if (!n.getItem(uc, t.boundaryId)) return;
if (t.group && (n.get(Vl) || !t.group.hasFocus.get())) return;
const i = t.callback(this);
i && e.push({
entryId: r,
type: t.type,
text: mp(i)
});
})), e;
}
}), (e => {
e && (this.setNarrationContext(e), this.debouncedNarrate());
})), Dn((() => this.isEnabled), ((e, t) => {
!e && t && (this.clear(), this.accessibility?.narrate({
text: ""
}));
}), {
fireImmediately: !0
})), this.dispose;
}
setEnabled(e) {
this.enableNarration.set(e);
}
clear() {
this.timeoutHandler.disposeTimeout(pp), this.debouncedNarrate.cancel(), this.waitingContexts = void 0, 
this.waitingText = void 0, this.currentContexts = [];
}
triggerNarration(e) {
let t = e;
if (this.waitingContexts?.length) {
const e = [], n = [];
this.waitingContexts.sort(up);
for (const {entryId: r, text: i, type: o} of this.waitingContexts) e.push(r), this.currentContexts.includes(r) || (2 === o || 3 === o ? t = mp([ t, i ]) : n.push(i));
t = mp(n.concat(t)), this.currentContexts = e, this.waitingContexts = void 0, this.timeoutHandler.disposeTimeout(pp);
}
t && this.accessibility?.narrate({
text: t
});
}
setNarrationContext(e) {
this.isEnabledUntracked && (this.waitingContexts = e, this.timeoutHandler.timeout(pp, (() => {
this.triggerNarration("");
}), 100));
}
narrate(e) {
this.isEnabledUntracked && (this.waitingText = e, this.debouncedNarrate());
}
narrateNow(e) {
this.isEnabledUntracked && e && this.triggerNarration(e);
}
getKeyBindingText(e) {
return "";
}
registerGetText(e, t) {
return this.textMap.set(e, t), () => {
this.textMap.delete(e);
};
}
registerGetContext(e, t, n, r) {
const i = {
id: fp++,
boundaryId: e,
type: t,
callback: n,
group: r
};
return this.contextMap.set(i.id, i), () => {
this.contextMap.delete(i.id);
};
}
registerTertiaryAction(e) {
return this.tertiaryActions.push(e), () => {
const t = nl((() => this.tertiaryActions.indexOf(e)));
t > -1 && this.tertiaryActions.splice(t, 1);
};
}
}, [yp, Ip] = El({
debugName: "Narration",
create: e => new gp(e)
});
function _p(e, t, n, r = !0) {
const i = Ip(), o = Rl();
H.useEffect((() => {
if (r) return i.registerGetContext(o, n, e);
}), [ i, o, n, r, ...t ]);
}
function bp(e, t, n) {
const r = Ip();
H.useEffect((() => r.registerGetText(n, e)), [ r, n, ...t ]);
}
function Sp(e, t, n, r) {
const i = Ip(), o = Rl();
H.useEffect((() => i.registerGetContext(o, n, e, r)), [ i, o, n, r, ...t ]);
}
function vp({keyBinding: e, label: t}) {
const n = Ip();
H.useEffect((() => n.registerTertiaryAction({
keyBinding: e,
label: t
})), [ n, e, t ]);
}
var [Tp, Ep] = Qs("NavigationHandler"), Pp = H.createContext(void 0), Op = e => H.createElement(Pp.Provider, {
value: e.id
}, e.children), Cp = 1;
function Np(e) {
return "" + Cp++;
}
function Ap(e, t) {
const n = H.useRef(""), r = e || n.current || Np();
return H.useEffect((() => {
n.current = r;
}), [ r ]), r;
}
function Lp(e) {
return {
isFocused: ul(Ul, e),
isPressed: ul(Hl, e)
};
}
function wp(e, t, n) {
cl((r => {
if (r && (t?.(e), n)) return () => {
n(e);
};
}), [ e, n, t ], Ul, e, !0);
}
function kp(e, t) {
H.useEffect((() => {
if (t) return xl.subscribe(((n, r) => {
n === e && t(r, e);
}));
}), [ e, t ]);
}
function Rp(e) {
const t = wl();
return H.useMemo((() => ({
...t.surfaceHooks,
onSurfaceId: n => {
t.onSurfaceIdForFocusId(e, n);
}
})), [ t, e ]);
}
function xp(e, t) {
return Ap(H.useContext(Pp) ?? e);
}
function Bp(e, t) {
const n = xp(t), r = Rl(), i = Ep(), o = wl();
H.useEffect((() => o.addNavigation(n, i)), [ n, i, o ]), H.useEffect((() => o.addFocusId(n, r)), [ o, r, n ]);
const a = Rp(n), s = Lp(n);
return {
focusId: n,
hooks: a,
isPressed: s.isPressed,
isFocused: s.isFocused
};
}
var [Dp, Fp] = Qs("InputSetter"), Mp = fs.Input.DeviceType, Up = Cl({
debugName: "registeredInputsState",
default: []
}), Hp = Cl({
debugName: "suppressedInputRegistrationsState",
default: new Map
}), Vp = Cl({
debugName: "pressedKeyEvents",
default: []
}), Jp = vl({
debugName: "pressedKeyEvent",
get: function(e, {get: t}) {
return t(Vp).some((t => t.id === e));
}
}), Gp = Cl({
debugName: "currentInputDeviceState",
default: Mp.NotSet
});
function zp() {
return dl(Gp);
}
var jp, qp, Yp = (e, t) => {
const n = t => {
const n = new Map(e.getUntracked(Hp));
t(n), e.set(Hp, n);
};
return n((e => e.set(t, (e.get(t) ?? 0) + 1))), () => {
n((e => e.set(t, Math.max((e.get(t) ?? 0) - 1, 0))));
};
}, Wp = (e, t, n = !0) => {
const r = Ap(void 0), i = Rl(), o = Fp(), {keyBinding: a, callback: s, label: l, isRepeating: c, onSurfaceId: d, transcendBoundaries: u, registrationIdOverride: p} = e || {}, f = p || r;
return H.useEffect((() => {
if (n && a && s) return o(f, {
keyBinding: a,
callback: s,
label: l,
focusId: t,
boundaryId: u ? void 0 : i,
isRepeating: c,
onSurfaceId: d
});
}), [ o, f, t, i, a, l, s, n, c, d, u ]), f;
}, Kp = (e, t, n = !0) => {
const r = Wp(e, t, n);
return ul(Jp, r) && n;
}, Xp = 2, [Qp, $p] = Qs("Twinkle");
function Zp(e, t) {
jp = e, qp = t;
}
async function ef(e, t) {
const {statusCode: n, body: r} = await e.http.get(t);
if (200 === n && r) return r;
throw Error(`Couldn't load translations ${t}, statusCode ${n}`);
}
async function tf(e, t) {
const n = await e.bindings.Asset.loadAsset({
url: t
});
if (n) return n.data;
throw new Error(`Couldn't load translations ${t}, got no data`);
}
async function nf(e, t, n) {
const r = (t.split("/").pop() || "").length > 10 && e.bindings.hasMethod("Asset", "loadAsset") ? await tf(e, t) : await ef(e, t), i = e.http.bytesToStr(r);
Zp(JSON.parse(i), n);
}
function rf(e, t) {
if (!t) return e;
let n = e;
return Object.keys(t).forEach((e => {
n = n.replaceAll(e, t[e]);
})), n;
}
function of() {
return qp;
}
var af = e => of() ? -e : e, [sf, lf] = Qs("ContentScaler"), cf = ({contentDesignWidth: e, contentDesignHeight: t, children: n}) => {
const r = $p(), {onWindowSizeChanged: i, getWindowSize: o} = r.bindings.Layout, [a, s] = H.useState((() => {
const n = o({});
return n ? {
width: Math.max(1, n.width),
height: Math.max(1, n.height)
} : {
width: e,
height: t
};
})), l = Math.min(a.width / e, a.height / t), c = l * e, d = l * t, u = a.width / 2 - e * l / 2, p = a.height / 2 - t * l / 2, f = id((() => ({
position: "absolute",
width: e,
height: t,
scaleX: l,
scaleY: l,
pivotX: -e / 2,
pivotY: -t / 2,
left: u,
top: p
})), [ e, t, l, u, p ]), h = id((() => ({
width: a.width,
height: a.height,
paddingLeft: (a.width - c) / 2,
paddingTop: (a.height - d) / 2
})), [ a.width, a.height, c, d ]), m = u / l, g = p / l, y = id((() => ({
position: "absolute",
left: -m,
right: -m,
top: -g,
bottom: -g
})), [ m, g ]);
H.useEffect((() => i.subscribe((e => {
s(e);
}))), [ i ]);
const I = H.useMemo((() => ({
rootStyle: h,
contentStyle: f,
fullscreenStyle: y,
fullScreenHorizontalMargin: m,
fullScreenVerticalMargin: g,
screenBoundsToLayout: t => {
const n = {
width: t.width,
height: t.height,
start: 0,
top: 0
};
return of() ? n.start = e + u - t.x - t.width : n.start = t.x - u, n.top = t.y - p, 
n;
}
})), [ e, f, m, g, y, u, h, p ]);
return H.createElement(sf.Provider, {
value: I
}, n);
}, df = (fs.DebugUI.WidthModifier, Vc(133)), uf = Vc(Rd.DimensionLayout.smaller), pf = Vc(1920), ff = Vc(1080);
function hf(e) {
return (df + uf) * e - uf;
}
var mf = e => rd("width", hf(e)), gf = {
width: Vc(Rd.DangerZone.width),
height: Vc(Rd.DangerZone.height)
}, yf = {
width: pf - 2 * gf.width,
height: ff - 2 * gf.height
}, [If, _f] = (td((e => ({
width: hf(e)
})), {
marginRight: uf
}), Qc({
flexDirection: "row",
flexWrap: "nowrap",
flex: 1
}), Qc({
flexDirection: "column",
flexWrap: "nowrap",
flex: 1
}), Qs("QuantumContext")), bf = ({children: e, actionKeyBindings: t, playSoundEffect: n, initialRTL: r = !1}) => {
$p();
const [i, o] = H.useState(r), a = H.useMemo((() => ({
isRTL: i,
setRTL: o,
actionKeyBindings: t,
playSoundEffect: n
})), [ i, t, n ]);
return H.createElement(If.Provider, {
value: a
}, H.createElement(cf, {
contentDesignWidth: pf,
contentDesignHeight: ff
}, e));
};
function Sf() {
return _f().isRTL;
}
function vf() {
const {isRTL: e} = _f();
return rd("direction", e ? "right-to-left" : "left-to-right");
}
function Tf(e) {
const {actionKeyBindings: t} = _f();
return t[e];
}
function Ef(e, t, n, r) {
const i = ol(), o = _f();
H.useEffect((() => {
n && o.playSoundEffect?.(r?.onPress ?? 3);
}), [ n, o, r?.onPress ]), H.useEffect((() => {
if (t) {
const t = i.getUntracked(Dl);
if (!t) return;
if (t.focusId === e && 2 === t.source) return;
1 === t.source ? o.playSoundEffect?.(r?.onHover ?? 1) : o.playSoundEffect?.(r?.onFocus ?? 2);
}
}), [ i, e, t, o, r ]);
}
function Pf(e, t) {
return "function" == typeof e ? e(t) : e;
}
var Of = ({id: e, focusId: t, isFocused: n, isDisabled: r, isPressed: i, isActive: o, onClick: a, onFocus: s, onBlur: l, input: c, soundEffectOverride: d}) => {
const u = Bp(0, t);
kp(u.focusId, r ? void 0 : a), wp(u.focusId, s, l), Wp(c, u.focusId, u.isFocused && !r);
const p = void 0 === n ? u.isFocused : Pf(n, u.isFocused), f = void 0 === i ? u.isPressed && !r : Pf(i, u.isPressed);
return Ef(u.focusId, p, f, d), H.useMemo((() => ({
focusItem: u,
isFocused: p,
isPressed: f,
isActive: !!o,
isDisabled: !!r
})), [ u, o, r, p, f ]);
}, [Cf, Nf] = Qs("QuantumInteractionContext"), Af = -Vc(8), Lf = Vc(Zu.ButtonBase.Container.borderRadius), wf = zc({
border: {
1: Cs("/photon/quantum/buttons/16px_stroke-5712787f.png"),
2: Cs("/photon/quantum/buttons/16px_stroke@2x-06fa31c3.png")
},
background: {
1: Cs("/photon/quantum/buttons/8px_container-5fdd599c.png"),
2: Cs("/photon/quantum/buttons/8px_container@2x-f7b35b5e.png")
}
}), kf = Qc({
padding: Vc([ Zu.ButtonBase.Container.paddingTop, Zu.ButtonBase.Container.paddingEnd, Zu.ButtonBase.Container.paddingBottom, Zu.ButtonBase.Container.paddingStart ]),
borderCenter: !0,
textureBorder: Lf,
texture: wf.background,
flexDirection: "row",
alignItems: "center"
}), Rf = Qc({
position: "absolute",
top: Af,
left: Af,
right: Af,
bottom: Af,
borderCenter: !0,
textureBorder: Lf,
texture: wf.border,
color: Zu.ButtonBase.Stroke.color
}), xf = Qc({
justifyContent: "center"
}), Bf = Qc({
justifyContent: "flex-start"
}), Df = Qc({
alignSelf: "center"
}), Ff = {
0: {
default: {
backgroundColor: Zu.ButtonPrimaryDefault.Container.backgroundColor,
textColor: Zu.ButtonPrimaryDefault.LabelText.color
},
disabled: {
backgroundColor: Zu.ButtonPrimaryDisabled.Container.backgroundColor,
textColor: Zu.ButtonPrimaryDisabled.LabelText.color
}
},
1: {
default: {
backgroundColor: Zu.ButtonSecondaryDefault.Container.backgroundColor,
textColor: Zu.ButtonSecondaryDefault.LabelText.color
},
disabled: {
backgroundColor: Zu.ButtonSecondaryDisabled.Container.backgroundColor,
textColor: Zu.ButtonSecondaryDisabled.LabelText.color
}
}
}, Mf = {
duration: Rd.AnimationTime.rapid,
easing: Rd.AnimationEasing.ease
}, Uf = Qc({
scaleX: {
to: 1,
...Mf
}
}), Hf = Qc({
marginStart: Vc(Rd.DimensionSpace.small),
width: Vc(32),
height: Vc(32)
}), Vf = e => {
const t = Rd.ButtonScale[e];
return Qc({
scaleX: {
to: t,
...Mf
},
scaleY: {
to: t,
...Mf
}
});
}, Jf = {
small: Vf("small"),
medium: Vf("medium"),
large: Vf("large")
};
function Gf(e, t = "medium") {
return e ? Jf[t] : Uf;
}
var zf = Ii.observer((e => {
const {narrationItem: t, input: n} = e, r = e.variant ?? 1, i = Of(e), {focusItem: o, isFocused: a, isPressed: s} = i, l = a || s;
bp((e => t?.({
keyBinding: n?.keyBinding
}, e)), [ t, n?.keyBinding ], o.focusId);
const c = e.isDisabled ? Ff[r].disabled : Ff[r].default, d = Gf(s);
return H.createElement("surface", {
style: [ kf, rd("color", c.backgroundColor), e.alignStart ? Bf : xf, e.style, d ],
...o.hooks
}, l && H.createElement("surface", {
style: Rf
}), e.children(i, c));
})), jf = e => {
const {label: t, icon: n, ...r} = e, i = e.input ? Uc(e.input.keyBinding.primaryButton) : void 0, o = H.useCallback(((n, r) => {
if (void 0 !== e.narration) {
return (0, e.narrationItem)({
...n,
...e.narration,
label: t
}, r);
}
return (0, e.narrationItem)?.({
...n,
label: t
}, r);
}), [ e.narrationItem, e.narration, t ]);
return H.createElement(zf, {
...r,
narrationItem: o
}, H.useCallback((({isFocused: e}, {textColor: o}) => {
const a = e || r.alignStart;
return H.createElement(H.Fragment, null, H.createElement(ap, {
label: t,
icon: a ? i : void 0,
showIcon: e,
textStyle: rd("color", o),
style: r.alignStart ? void 0 : Df
}), n ? H.createElement("surface", {
style: [ Hf, rd("texture", n), rd("color", o) ]
}) : void 0);
}), [ r.alignStart, i, n, t ]));
}, qf = Qc({
flexDirection: "row"
}), Yf = Vc(Rd.DimensionSpace.smaller + 4), Wf = Vc(Rd.DimensionSpace.medium + 4), Kf = zc({
border: {
1: Cs("/photon/quantum/borders/w4px_r12px_ffffff-transparent-1x-7816314b.png"),
2: Cs("/photon/quantum/borders/w4px_r12px_ffffff-transparent-2x-bfc0f52b.png")
}
}), Xf = [ Rf, Qc({
texture: Kf.border,
textureBorder: Vc(Rd.DimensionSpace.small),
top: -Yf,
left: -Wf,
right: -Wf,
bottom: -Yf
}) ], Qf = Qc({
position: "relative",
marginRight: Vc(Rd.DimensionSpace.larger + 2 * Rd.DimensionSpace.medium)
}), $f = ({action: e}) => {
const {label: t, callback: n, button: r, onSurfaceId: i} = e, {hooks: o, isPressed: a, isHovered: s} = gc({
onClick: n,
ignoreBoundaryIsolation: !0
}), l = Gf(a, "small");
return H.createElement("surface", {
style: [ Qf, l ],
...o
}, s ? H.createElement("surface", {
style: Xf
}) : void 0, H.createElement(ap, {
buttonLabel: r.keyboardKeyLabel,
icon: Uc(r),
iconOnSurfaceId: i,
label: t
}));
}, Zf = ({style: e, children: t}) => H.createElement("surface", {
style: [ qf, e ]
}, t), eh = ({actions: e, style: t}) => H.createElement(Zf, {
style: t
}, e.map((e => H.createElement($f, {
key: e.id,
action: e
})))), th = Gc({
1: Cs("/photon/quantum/icons/logo/EaCircle-54-6287f0bb.png"),
2: Cs("/photon/quantum/icons/logo/EaCircle-54@2x-5d825716.png")
}), nh = Qc({
zOffset: 1,
width: Vc(54),
height: Vc(54),
texture: th,
textureMode: "none",
color: Rd.ColorNeutral._0
}), rh = ({style: e}) => H.createElement("surface", {
style: [ nh, e ]
}), ih = zc({
AVATAR: {
1: Cs("/photon/quantum/icons/avatar/Avatar_48px-aaa1febd.png"),
2: Cs("/photon/quantum/icons/avatar/Avatar_48px@2x-26497882.png")
},
ADD_USER: {
1: Cs("/photon/quantum/icons/Add_User/Add_User_48px-8968775d.png"),
2: Cs("/photon/quantum/icons/Add_User/Add_User_48px@2x-30004172.png")
},
WARNING: {
1: Cs("/photon/quantum/icons/warning/Warning_48px-327b5965.png"),
2: Cs("/photon/quantum/icons/warning/Warning_48px@2x-9db11738.png")
},
SEARCH: {
1: Cs("/photon/quantum/icons/search/Search_32px-65ef266b.png"),
2: Cs("/photon/quantum/icons/search/Search_32@2x-91073aec.png")
},
INFORMATION: {
1: Cs("/photon/quantum/icons/information/Information_48px-a401a39b.png"),
2: Cs("/photon/quantum/icons/information/Information_48px@2x-08b4d707.png")
},
ERROR: {
1: Cs("/photon/quantum/icons/remove/Remove_48px-ee73c114.png"),
2: Cs("/photon/quantum/icons/remove/Remove_48px@2x-7f2bb405.png")
},
CHECK_CIRCLE: {
1: Cs("/photon/quantum/icons/check_circle/Check_Circle_48px-6a2d915a.png"),
2: Cs("/photon/quantum/icons/check_circle/Check_Circle_48px@2x-a533d5d9.png")
},
CHECK_FILL: {
1: Cs("/photon/quantum/icons/check_fill/Check_Fill_32px-49eddbcc.png"),
2: Cs("/photon/quantum/icons/check_fill/Check_Fill_32px@2x-7ef2c700.png")
},
PARTY: {
1: Cs("/photon/quantum/icons/party/Party_48px-9fb2fe4b.png"),
2: Cs("/photon/quantum/icons/party/Party_48px@2x-8bd079da.png")
},
PARTY_LEADER: {
1: Cs("/photon/quantum/icons/party_leader/Party_Leader_48px-a7e6eabc.png"),
2: Cs("/photon/quantum/icons/party_leader/Party_Leader_48px@2x-ea25efdb.png")
},
EXIT: {
1: Cs("/photon/quantum/icons/exit/Exit_48px-626d4995.png"),
2: Cs("/photon/quantum/icons/exit/Exit_48px@2x-10478ad8.png")
},
REMOVE: {
1: Cs("/photon/quantum/icons/remove/Remove_48px-93354318.png"),
2: Cs("/photon/quantum/icons/remove/Remove_48px@2x-5e78f2c2.png")
},
MUTE: {
1: Cs("/photon/quantum/icons/mute/Mute_48px-a5043897.png"),
2: Cs("/photon/quantum/icons/mute/Mute_48px@2x-54fbc0b8.png")
},
VOLUME_UP: {
1: Cs("/photon/quantum/icons/volume_up/Volume_Up_48px-5772ef2a.png"),
2: Cs("/photon/quantum/icons/volume_up/Volume_Up_48px@2x-9edff105.png")
},
VOIP: {
1: Cs("/photon/quantum/icons/Voip_48px-807cb909.png"),
2: Cs("/photon/quantum/icons/Voip_48px@2x-d40dbcc4.png")
},
VOIP_DISABLED: {
1: Cs("/photon/quantum/icons/Voip_Disabled_48px-7833c196.png"),
2: Cs("/photon/quantum/icons/Voip_Disabled_48px@2x-ac485c0c.png")
},
VOIP_RESTRICTED: {
1: Cs("/photon/quantum/icons/Voip_Restricted/VoipRestricted_32px-4a26c300.png"),
2: Cs("/photon/quantum/icons/Voip_Restricted/VoipRestricted_32px@2x-8dbe0fcf.png")
},
BLOCK: {
1: Cs("/photon/quantum/icons/block/Block_48px-9e052181.png"),
2: Cs("/photon/quantum/icons/block/Block_48px@2x-9191e3bb.png")
},
SPEAKER_FILL: {
1: Cs("/photon/quantum/icons/speaker_fill/Speaker_Fill_32px-a8d6e819.png"),
2: Cs("/photon/quantum/icons/speaker_fill/Speaker_Fill_32px@2x-53a4b853.png")
},
SPEAKER_MUTE_LINE: {
1: Cs("/photon/quantum/icons/speaker_mute_line/Speaker_Mute_Line_32px-4bc64e75.png"),
2: Cs("/photon/quantum/icons/speaker_mute_line/Speaker_Mute_Line_32px@2x-a1242810.png")
},
SPEAKER_STROKE: {
1: Cs("/photon/quantum/icons/speaker_stroke/Speaker_Stroke_32px-a267fb0f.png"),
2: Cs("/photon/quantum/icons/speaker_stroke/Speaker_Stroke_32px@2x-92382a9b.png")
},
SPEAKING_LINES: {
1: Cs("/photon/quantum/icons/speaking_lines/Speaking_Lines_32px-d6fb02e6.png"),
2: Cs("/photon/quantum/icons/speaking_lines/Speaking_Lines_32px@2x-c27e6fa5.png")
},
MICROPHONE: {
1: Cs("/photon/quantum/icons/microphone/Microphone_48px-e7f2f7e5.png"),
2: Cs("/photon/quantum/icons/microphone/Microphone_48px@2x-1e76b82e.png")
},
MICROPHONE_MUTE: {
1: Cs("/photon/quantum/icons/microphone_mute/Microphone_Mute_48px-68425233.png"),
2: Cs("/photon/quantum/icons/microphone_mute/Microphone_Mute_48px@2x-ef0c6dca.png")
},
MICROPHONE_MUTE_LINE: {
1: Cs("/photon/quantum/icons/Microphone_Mute_Line_32px-0deb9400.png"),
2: Cs("/photon/quantum/icons/Microphone_Mute_Line_32px@2x-93bed9bc.png")
},
RADIO_INPUT_BACKGROUND: {
1: Cs("/photon/quantum/icons/radio_input/background-94784169.png"),
2: Cs("/photon/quantum/icons/radio_input/background@2x-ae7225d4.png")
},
RADIO_INPUT_STROKE: {
1: Cs("/photon/quantum/icons/radio_input/stroke-0bc91d13.png"),
2: Cs("/photon/quantum/icons/radio_input/stroke@2x-7d18d927.png")
},
RADIO_INPUT_BULLET: {
1: Cs("/photon/quantum/icons/radio_input/bullet-d8acc6a0.png"),
2: Cs("/photon/quantum/icons/radio_input/bullet@2x-349d8984.png")
},
CONTROLLER: {
1: Cs("/photon/quantum/icons/controller/Controller_48px-a63774b6.png"),
2: Cs("/photon/quantum/icons/controller/Controller_48px@2x-76d431d7.png")
},
MOUSE: {
1: Cs("/photon/quantum/icons/mouse/Mouse_48px-fac22545.png"),
2: Cs("/photon/quantum/icons/mouse/Mouse_48px@2x-415574d1.png")
},
OPEN_EXTERNAL: {
1: Cs("/photon/quantum/icons/open_external/OpenExternal-4bf23aec.png"),
2: Cs("/photon/quantum/icons/open_external/OpenExternal@2x-63fec202.png")
},
INCOMPATIBLE_NEUTRAL: {
1: Cs("/photon/quantum/icons/incompatible/neutral/Incompatible_Neutral-9bb9a02d.png"),
2: Cs("/photon/quantum/icons/incompatible/neutral/Incompatible_Neutral@2x-c5e780ed.png")
},
INCOMPATIBLE_WHITE: {
1: Cs("/photon/quantum/icons/incompatible/white/Incompatible_White-336c7a1a.png"),
2: Cs("/photon/quantum/icons/incompatible/white/Incompatible_White@2x-5a07eada.png")
},
LIGHT_BULB: {
1: Cs("/photon/quantum/icons/light_bulb/Light_Bulb_48px-7f7831d8.png"),
2: Cs("/photon/quantum/icons/light_bulb/Light_Bulb_48px@2x-54e839f2.png")
},
PLUS: {
1: Cs("/photon/quantum/icons/plus/Plus_32px-0a34f6fe.png"),
2: Cs("/photon/quantum/icons/plus/Plus_32px@2x-5275df23.png")
},
ONLINE_STATUS_INDICATOR: {
1: Cs("/photon/quantum/icons/online_status_indicator/OnlineStatusIndicator-e1807538.png"),
2: Cs("/photon/quantum/icons/online_status_indicator/OnlineStatusIndicator@2x-73780b82.png")
},
OFFLINE_STATUS_INDICATOR: {
1: Cs("/photon/quantum/icons/offline_status_indicator/OfflineStatusIndicator-d538f923.png"),
2: Cs("/photon/quantum/icons/offline_status_indicator/OfflineStatusIndicator@2x-01752008.png")
},
DO_NOT_DISTURB: {
1: Cs("/photon/quantum/icons/do_not_disturb/Do_not_disturb_16px-9d036eb4.png"),
2: Cs("/photon/quantum/icons/do_not_disturb/Do_not_disturb_16px@2x-99738d96.png")
},
STAR: {
1: Cs("/photon/quantum/icons/star/Star_32px-66c80b36.png"),
2: Cs("/photon/quantum/icons/star/Star_32px@2x-8d2b44c1.png")
}
}), oh = zc({
down: {
1: Cs("/photon/quantum/icons/arrow_down/Chevron_Down_32px-33c16517.png"),
2: Cs("/photon/quantum/icons/arrow_down/Chevron_Down_32px@2x-2f6cfae2.png")
}
}), ah = zc({
cloud32: {
1: Cs("/photon/quantum/icons/platforms/Generic_Cloud_Gaming_32px-0e317e6d.png"),
2: Cs("/photon/quantum/icons/platforms/Generic_Cloud_Gaming_32px@2x-212945be.png")
},
console32: {
1: Cs("/photon/quantum/icons/platforms/Generic_Console_32px-2ede17ad.png"),
2: Cs("/photon/quantum/icons/platforms/Generic_Console_32px@2x-ebdef951.png")
},
ea32: {
1: Cs("/photon/quantum/icons/platforms/EA_Logo_32px-7e7a7613.png"),
2: Cs("/photon/quantum/icons/platforms/EA_Logo_32px@2x-5038df18.png")
},
epic32: {
1: Cs("/photon/quantum/icons/platforms/Epic_Games_32px-bd883c69.png"),
2: Cs("/photon/quantum/icons/platforms/Epic_Games_32px@2x-694a687e.png")
},
pc32: {
1: Cs("/photon/quantum/icons/platforms/Generic_PC_32px-501c005c.png"),
2: Cs("/photon/quantum/icons/platforms/Generic_PC_32px@2x-d9c92178.png")
},
playstation32: {
1: Cs("/photon/quantum/icons/platforms/Playstation_Logo_32px-97783011.png"),
2: Cs("/photon/quantum/icons/platforms/Playstation_Logo_32px@2x-c2007091.png")
},
steam32: {
1: Cs("/photon/quantum/icons/platforms/Steam_Logo_32px-0a619c23.png"),
2: Cs("/photon/quantum/icons/platforms/Steam_32@2x-fb908349.png")
},
switch32: {
1: Cs("/photon/quantum/icons/platforms/Switch_32px-ef5674d2.png"),
2: Cs("/photon/quantum/icons/platforms/Switch_32px@2x-a65701bc.png")
},
xbox32: {
1: Cs("/photon/quantum/icons/platforms/Xbox_Logo_32px-a5946491.png"),
2: Cs("/photon/quantum/icons/platforms/Xbox_Logo_32px@2x-ba990d10.png")
}
}), sh = Vc(Rd.BorderRadius.smaller), lh = zc({
"w4-r8-#1f55caff-#ffffffff": {
1: Cs("/photon/quantum/borders/w4px_r8px_1F55CA-EEEEEE-1x-a14ad404.png"),
2: Cs("/photon/quantum/borders/w4px_r8px_1F55CA-EEEEEE-2x-c435560c.png")
},
"w4-r8-#1f55caff-#343647ff": {
1: Cs("/photon/quantum/borders/w4px_r8px_1F55CA-343647-1x-460873d8.png"),
2: Cs("/photon/quantum/borders/w4px_r8px_1F55CA-343647-2x-f27c46cb.png")
},
"w4-r8-#1f55caff-#1d2033ff": {
1: Cs("/photon/quantum/borders/w4px_r8px_1F55CA-1D2033-1x-0419e9de.png"),
2: Cs("/photon/quantum/borders/w4px_r8px_1F55CA-1D2033-2x-e9cde465.png")
},
"w4-r8-#276afcff-#ffffffff": {
1: Cs("/photon/quantum/borders/w4px_r8px_276AFC-EAEAEA-1x-21858a3e.png"),
2: Cs("/photon/quantum/borders/w4px_r8px_276AFC-EAEAEA-2x-16b70378.png")
},
"w4-r8-#276afcff-#343647ff": {
1: Cs("/photon/quantum/borders/w4px_r8px_276AFC-343647-1x-6529ddef.png"),
2: Cs("/photon/quantum/borders/w4px_r8px_276AFC-343647-2x-1158d415.png")
},
"w4-r8-#276afcff-#1d2033ff": {
1: Cs("/photon/quantum/borders/w4px_r8px_276AFC-1D2033-1x-ca90c3b8.png"),
2: Cs("/photon/quantum/borders/w4px_r8px_276AFC-1D2033-2x-e5fefe91.png")
},
"w4-r8-border": {
1: Cs("/photon/quantum/borders/w4px_r8px_ffffff-transparent-1x-3e617c53.png"),
2: Cs("/photon/quantum/borders/w4px_r8px_ffffff-transparent-2x-b0c3576a.png")
},
"w4-r8-background": {
1: Cs("/photon/quantum/borders/w4px_r8px_ffffff-ffffff-1x-750cc04f.png"),
2: Cs("/photon/quantum/borders/w4px_r8px_ffffff-ffffff-2x-e26b6b80.png")
}
}), ch = e => {
let t, n;
if (e.backgroundColor) if (e.borderColor) {
const {borderColor: t, backgroundColor: r} = e;
if (vs.svgSupport) {
return [ void 0, "jsProvidedFile://border-" + (t ?? "#00000000").substr(1) + "-" + (r ?? "#00000000").substr(1) + ".svg" ];
}
n = `w4-r8-${t}-${r}`;
} else n = "w4-r8-background", t = e.backgroundColor; else {
if (!e.borderColor) return [ null, null ];
n = "w4-r8-border", t = e.borderColor;
}
return [ t, lh[n] ];
}, dh = e => {
const [t, n] = ch(e);
if (void 0 !== n) return [ rd("borderCenter", !0), rd("textureBorder", sh), t ? rd("color", t) : void 0, n ? rd("texture", n) : void 0 ];
}, uh = ({isFocused: e, isPressed: t, isActive: n}) => {
let r;
return t ? r = Rd.ColorBrandPrimary._700 : e && !n && (r = Rd.ColorBrandPrimary._500), 
r;
}, ph = zc({
"r4-background": {
1: Cs("/photon/quantum/backgrounds/Background_Border_Radius_4px-1x-dcb77995.png"),
2: Cs("/photon/quantum/backgrounds/Background_Border_Radius_4px-2x-ce87bfcd.png")
},
"r8-background": {
1: Cs("/photon/quantum/backgrounds/Background_Border_Radius_8px-1x-0ccee3b6.png"),
2: Cs("/photon/quantum/backgrounds/Background_Border_Radius_8px-2x-21908e8b.png")
},
"r16-background": {
1: Cs("/photon/quantum/backgrounds/Background_Border_Radius_16px-dd78b94e.png"),
2: Cs("/photon/quantum/backgrounds/Background_Border_Radius_16px-2x-170b6d0e.png")
},
"r4-left-background": {
1: Cs("/photon/quantum/backgrounds/Background_Border_Radius_4px_0px_0px_4px-3021eea6.png"),
2: Cs("/photon/quantum/backgrounds/Background_Border_Radius_4px_0px_0px_4px@2x-25a70b59.png")
},
"r8-left-background": {
1: Cs("/photon/quantum/backgrounds/Border_Radius_8px_0px_0px_8px-9dddf104.png"),
2: Cs("/photon/quantum/backgrounds/Border_Radius_8px_0px_0px_8px@2x-79ec45ee.png")
},
"r4-right-background": {
1: Cs("/photon/quantum/backgrounds/Background_Border_Radius_0px_4px_4px_0px-591a4cba.png"),
2: Cs("/photon/quantum/backgrounds/Background_Border_Radius_0px_4px_4px_0px@2x-b7dc860b.png")
},
"r8-right-background": {
1: Cs("/photon/quantum/backgrounds/Border_Radius_0px_8px_8px_0px-4cebed23.png"),
2: Cs("/photon/quantum/backgrounds/Border_Radius_0px_8px_8px_0px@2x-05e9c032.png")
}
});
function fh(e) {
let t;
return "applyRadiusTo" in e && (0 === e.applyRadiusTo ? t = `r${e.radius}-left-background` : 1 === e.applyRadiusTo && (t = `r${e.radius}-right-background`)), 
t || (t = `r${e.radius}-background`), ph[t];
}
function hh(e) {
const t = fh(e);
if (void 0 !== t) return [ rd("borderCenter", !0), rd("textureBorder", Vc(e.radius)), rd("texture", t) ];
}
function mh(e) {
return 8 === e.length ? {
color: e.substring(0, 6),
opacity: parseInt(e.substring(6, 8), 16) / 255
} : {
color: e,
opacity: 1
};
}
function gh(e, t) {
const n = t.match(/jsProvidedFile:\/\/border-(.*?)-(.*?)\.svg/);
if (!n) return;
const r = mh(n[1]), i = mh(n[2]), o = `<svg\n    version="1.1"\n    width="${Vc(32)}"\n    height="${Vc(32)}"\n    viewBox="0 0 64 64"\n    xmlns="http://www.w3.org/2000/svg"\n  >\n    <path\n      d="M28,4 h20 a12,12 0 0 1 12,12 v32 a12,12 0 0 1 -12,12 h-32 a12,12 0 0 1 -12,-12 v-32 a12,12 0 0 1 12,-12 z"\n      stroke-width="8"\n      stroke="#${r.color}"\n      stroke-opacity="${r.opacity}"\n      fill="#${i.color}"\n      fill-opacity="${i.opacity}"\n    />\n  </svg>`;
return e.http.strToBytes(o);
}
function yh() {
const e = $p();
H.useEffect((() => e.asset.registerFileRequestHandler((t => gh(e, t)))), [ e ]);
}
function Ih(e) {
return {
x: e.x + e.width / 2,
y: e.y + e.height / 2
};
}
function _h(e, t) {
return Math.atan2(t.y - e.y, t.x - e.x);
}
function bh(e, t) {
const n = t.x - e.x, r = t.y - e.y;
return n * n + r * r;
}
function Sh(e, t) {
const n = Math.cos(t), r = Math.sin(t), i = Math.abs(n), o = Math.abs(r), a = e.width / 2 * o <= e.height / 2 * i ? e.width / 2 / (i || 1) : e.height / 2 / (o || 1), s = Ih(e);
return {
x: s.x + n * a,
y: s.y + r * a
};
}
function vh(e, t) {
const n = Ih(e), r = Ih(t);
return bh(Sh(e, _h(n, r)), Sh(t, _h(r, n)));
}
function Th(e, t, n) {
let r = !1, i = !1;
const o = e.y + e.height / 2, a = e.x + e.width / 2, s = t.y + t.height / 2, l = t.x + t.width / 2, c = o < s, d = o > s, u = a < l, p = a > l;
switch (n) {
case 1:
r = e.x <= t.x && l - a > 0, i = d || c;
break;

case 3:
r = e.y <= t.y && s - o > 0, i = u || p;
break;

case 0:
r = e.x >= t.x && l - a < 0, i = d || c;
break;

case 2:
r = e.y >= t.y && s - o < 0, i = u || p;
}
return r ? vh(e, t) + (i ? 1e6 : 0) : NaN;
}
var Eh = Np();
function Ph(e) {
return e.isolateBoundaryId(Eh);
}
var Oh = e => Ap(void 0), Ch = e => ul(fc, e), Nh = H.memo((e => {
const t = Ap(e.id), n = H.useContext(kl), r = wl();
H.useEffect((() => {
if (e.isolate) return r.isolateBoundaryId(t);
}), [ t, r, e.isolate ]);
const i = e.disable || e.disableForControllerMode || !1, o = e.disable || e.disableForMouseMode || !1;
return H.useEffect((() => {
if (i) return r.disabledBoundaryIdForControllerMode(t);
}), [ r, i, t ]), H.useEffect((() => {
if (o) return r.disabledBoundaryIdForMouseMode(t);
}), [ r, o, t ]), H.useEffect((() => {
if (e.disableAutoFocus) return r.disableAutoFocusForBoundaryId(t);
}), [ r, t, e.disableAutoFocus ]), H.useEffect((() => r.addBoundaryId(t, n)), [ r, n, t ]), 
H.createElement(kl.Provider, {
value: t
}, e.children);
})), Ah = fs.Input.MouseButton, Lh = class {
constructor(e) {
this.moby = e, this.rootBoundaryId = Np(), this.idToNavigation = {}, this.boundaryHistory = {}, 
this.focusIdToSurfaceId = {}, this.surfaceIdToFocusId = {}, this.setFocus = (e, t) => {
if (this.moby.set(Dl, {
focusId: e,
source: t
}), e) {
const t = this.moby.getItemUntracked(jl, e);
t && (this.boundaryHistory[t] = {
focusId: e,
time: Date.now()
});
}
}, this.setPressed = (e, t) => {
this.moby.set(Ml, (n => t ? e : n !== e ? n : void 0));
}, this.defaultNavigation = (e, t) => {
const n = this.getValidFocusIds(), r = this.getClosestFocusId(n, e, t);
return r || Xp;
}, this.navigate = e => {
fr((() => {
this.setMouseMode(!1);
const t = this.moby.getUntracked(Fl);
if (!t) return void this.autoFocus();
const n = (0, this.idToNavigation[t])?.(t, e);
"string" == typeof n && this.setFocus(n, 0);
}));
}, this.setMouseMode = e => {
this.moby.set(Vl, e);
}, this.surfaceHooks = {
onClick: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && fr((() => {
this.setMouseMode(!0), this.setFocus(n, 1), e.button === Ah.Left && xl.trigger(n, e);
}));
},
onMouseEnter: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && fr((() => {
this.setMouseMode(!0), this.setFocus(n, 1);
}));
},
onMouseLeave: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && fr((() => {
this.setMouseMode(!0), this.setFocus(void 0, 1), this.setPressed(n, !1);
}));
},
onMouseDown: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && fr((() => {
this.setMouseMode(!0), e.button === Ah.Left && this.setPressed(n, !0);
}));
},
onMouseUp: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && !this.isFocusIdDisabled(n) && fr((() => {
this.setMouseMode(!0), e.button === Ah.Left && this.setPressed(n, !1);
}));
},
onBounds: (e, t) => {
const n = this.surfaceIdToFocusId[t];
n && this.moby.setItem(Bl, n, e);
}
}, this.onSurfaceIdForFocusId = (e, t) => {
const n = this.focusIdToSurfaceId[e];
n && n !== t && delete this.surfaceIdToFocusId[n], t ? (this.surfaceIdToFocusId[t] = e, 
this.focusIdToSurfaceId[e] = t) : delete this.focusIdToSurfaceId[e];
};
}
init() {
const e = [ Dn((() => this.moby.get(Fl)), (() => this.moby.reset(Ml))), Rn((() => {
const e = this.moby.get(Fl);
e && this.moby.getItem(lc, e) && this.setFocus(void 0, 2);
})), Rn((() => {
if (!this.moby.get(Vl) && !this.moby.get(Fl)) {
const e = this.moby.get(dc);
this.moby.getItem($l, e || this.rootBoundaryId), this.autoFocus();
}
})), Rn((() => {
const e = this.moby.get(Fl), t = this.moby.get(dc);
if (e && t) {
this.moby.getItem($l, t).includes(e) || (this.setFocus(void 0, 2), this.autoFocus());
}
})) ];
return () => {
for (const t of e) t();
this.resetFocusState();
};
}
resetFocusState() {
fr((() => {
this.moby.reset(Dl), this.moby.reset(Ml), this.moby.reset(Vl);
}));
}
addNavigation(e, t) {
return this.idToNavigation[e] = t, () => {
delete this.idToNavigation[e];
};
}
getValidFocusIds() {
return nl((() => {
const e = this.moby.get(dc);
return this.moby.getItem($l, e || this.rootBoundaryId);
}));
}
getValidAutoFocusIds() {
return nl((() => {
const e = this.moby.get(dc);
return this.moby.getItem(Zl, e || this.rootBoundaryId);
}));
}
getClosestFocusIdFromBounds(e, t) {
return nl((() => {
let n, r = Number.MAX_VALUE;
for (let i = 0; i <= e.length; i++) {
const o = e[i], a = this.moby.getItem(Bl, o);
if (!a) continue;
const s = vh(t, a);
s === r && t.absY < a.absY ? n = o : !Number.isNaN(s) && s < r && (r = s, n = o);
}
return n;
}));
}
getClosestFocusId(e, t, n) {
return nl((() => {
const r = this.moby.getItem(Bl, t);
if (!r) return;
let i, o = Number.MAX_VALUE;
for (let a = 0; a <= e.length; a++) {
const s = e[a];
if (s === t) continue;
const l = this.moby.getItem(Bl, s);
if (!l) continue;
const c = Th(r, l, n);
!Number.isNaN(c) && c < o && (o = c, i = s);
}
return i;
}));
}
autoFocus() {
nl((() => {
if (this.moby.get(Fl)) return;
const e = this.getValidAutoFocusIds();
let t;
for (const n of e) {
const e = this.moby.getItem(jl, n);
if (e) {
const r = this.boundaryHistory[e];
r && (!t || r.time > t.time) && (r.focusId === n || r.bounds) && (t = r);
}
}
const n = t?.bounds;
if (n) {
const t = this.getClosestFocusIdFromBounds(e, n);
this.setFocus(t ?? e[0], 2);
} else t ? this.setFocus(t.focusId, 2) : e.length && this.setFocus(e[0], 2);
}));
}
isolateBoundaryId(e) {
return this.moby.set(cc, (t => t.includes(e) ? t : [ ...t, e ])), () => {
this.moby.set(cc, (t => t.includes(e) ? t.filter((t => t !== e)) : t));
};
}
disabledBoundaryIdForMouseMode(e) {
return this.moby.setItem(ql, e, !0), () => {
this.moby.resetItem(ql, e);
};
}
disabledBoundaryIdForControllerMode(e) {
return this.moby.setItem(Yl, e, !0), () => {
this.moby.resetItem(Yl, e);
};
}
disableAutoFocusForBoundaryId(e) {
return this.moby.setItem(Wl, e, !0), () => {
this.moby.resetItem(Wl, e);
};
}
addBoundaryId(e, t) {
return fr((() => {
t && (this.moby.setItem(zl, e, t), this.moby.setItem(Jl, t, (t => t.includes(e) ? t : [ ...t, e ])));
})), () => {
fr((() => {
delete this.boundaryHistory[e], t && (this.moby.resetItem(zl, e), this.moby.setItem(Jl, t, (t => t.filter((t => t !== e)))));
}));
};
}
addFocusId(e, t) {
const n = Rn((() => {
this.moby.getItem(sc, e);
}));
return fr((() => {
this.moby.setItem(jl, e, t), this.moby.setItem(Gl, t, (t => t.includes(e) ? t : [ ...t, e ]));
})), () => {
nl((() => {
fr((() => {
n();
const r = this.moby.getItem(jl, e);
if (r) {
const t = this.boundaryHistory[r];
t?.focusId === e && (t.bounds = this.moby.getItem(Bl, e));
}
this.moby.resetItem(Bl, e), this.moby.resetItem(jl, e), this.moby.set(Dl, (t => {
if (t?.focusId !== e) return t;
})), this.moby.set(Ml, (t => {
if (t !== e) return t;
})), this.moby.setItem(Gl, t, (t => t.filter((t => t !== e))));
}));
}));
};
}
isFocusIdDisabled(e) {
return this.moby.getItemUntracked(sc, e);
}
}, [wh, kh] = El({
debugName: "focusRootState",
create: e => new Lh(e)
}), Rh = class {
constructor(e, t) {
this.maxConcurrent = e, this.onQueueEmpty = t, this.queue = [], this.numConcurrent = 0;
}
entry(e) {
return new Promise(((t, n) => {
this.queue.push({
callback: e,
resolve: t,
reject: n
}), this.run();
}));
}
async run() {
if (this.numConcurrent >= this.maxConcurrent) return;
const e = this.queue.shift();
if (e) {
this.numConcurrent++;
try {
e.resolve(await e.callback());
} catch (t) {
e.reject(t);
} finally {
this.numConcurrent--, setTimeout((() => {
this.run();
}), 1);
}
} else this.onQueueEmpty?.();
}
};
function xh(e) {
const t = new Rh(8), n = async n => {
let r;
if (n.body) if ("string" == typeof n.body) {
const t = e.stringToBytes({
data: n.body
});
if (!t) throw new Error("Failed to encode body");
r = t.data;
} else r = n.body;
const i = {
headers: n.headers,
method: n.method,
body: r,
url: n.url
};
const o = await t.entry((async () => {
const t = await e.httpRequest(i);
if (!t) throw new Error("No HTTP response returned");
return t;
}));
let a = o.body;
return 200 !== o.statusCode || a || (a = new Uint8Array), {
body: a,
headers: o.headers,
statusCode: o.statusCode
};
};
return {
post: (e, t, r) => n({
url: e,
body: t,
headers: r || {},
method: fs.Http.HttpMethod.Post
}),
get: (e, t) => n({
url: e,
headers: t || {},
method: fs.Http.HttpMethod.Get
}),
http: n,
bytesToStr: t => {
if (0 === t.length) return "";
const n = e.bytesToString({
data: t
});
if (!n) throw new Error("No response");
return n.data;
},
strToBytes: t => {
const n = e.stringToBytes({
data: t
});
if (!n) throw new Error("No response");
return n.data;
}
};
}
var Bh = class {
constructor() {
this.loadedTextures = {}, this.onLoadedCallbacks = [], this.onTextureLoaded = e => {
this.loadedTextures[e.url] = e.success ? 1 : 2, this.triggerOnLoadedCallbacks();
}, this.onTextureUnloaded = e => {
delete this.loadedTextures[e.url];
}, this.triggerOnLoadedCallbacks = () => {
this.onLoadedCallbacks.slice().forEach((e => {
const {urls: t, callback: n} = e;
this.areTexturesLoaded(t) && (this.removeOnLoadedCallback(e), n());
}));
}, this.removeOnLoadedCallback = e => {
const t = this.onLoadedCallbacks.indexOf(e);
t > -1 && this.onLoadedCallbacks.splice(t, 1);
}, this.areTexturesLoaded = e => e.every((e => !!this.loadedTextures[e])), this.registerOnLoadedCallback = (e, t) => {
if (this.areTexturesLoaded(e)) return t(), () => {};
const n = {
urls: e,
callback: t
};
return this.onLoadedCallbacks.push(n), () => {
this.removeOnLoadedCallback(n);
};
};
}
static create(e) {
const t = new Bh;
return e.onTextureLoaded.subscribe(t.onTextureLoaded), e.onTextureUnloaded.subscribe(t.onTextureUnloaded), 
t;
}
}, Dh = Cl({
debugName: "preloadedImagesState",
default: []
}), [Fh, Mh] = Qs("ImagePreloader"), Uh = Qc({
enableMouseEvents: !1,
position: "absolute",
left: 0,
bottom: -1,
flexDirection: "row"
}), Hh = Qc({
width: 1,
height: 1,
textureAtlas: "SINGLE_TEXTURE",
opacity: .01
}), Vh = Ii.observer((() => {
const e = dl(Dh), t = $p(), [n, r] = H.useState(0), [i] = H.useState((() => new Rh(4, (() => r((e => e + 1)))))), o = H.useRef(new Set);
H.useEffect((() => {
for (const n of e) i.entry((async () => {
if (!o.current.has(n)) return o.current.add(n), t.bindings.Asset.loadAsset({
url: n
});
}));
}), [ t, e, i ]);
const a = e.filter(((t, n) => e.indexOf(t) === n && o.current.has(t)));
return H.createElement("surface", {
style: Uh,
key: n
}, a.map((e => H.createElement("surface", {
key: e,
style: [ Hh, rd("texture", e) ]
}))));
})), Jh = (e, t) => {
const n = $p(), r = Mh();
H.useEffect((() => {
const i = n.texture.registerOnLoadedCallback(e, t), o = r.preloadImages(e);
return () => {
i(), o();
};
}), [ t, r, n, e ]);
}, Gh = e => {
const t = $p(), [n, r] = H.useState((() => t.texture.areTexturesLoaded(e))), i = H.useCallback((() => {
r(!0);
}), [ r ]);
return Jh(e, i), n;
};
var [zh] = Pl({
debugName: "twinkleState"
}), jh = fs.Input.GamePadInput, qh = fs.Input.DeviceType, Yh = {
[jh.DPadLeft]: bc,
[jh.DPadUp]: Sc,
[jh.DPadRight]: vc,
[jh.DPadDown]: Tc,
[jh.LeftJoystickLeft]: Ec,
[jh.LeftJoystickUp]: Lc,
[jh.LeftJoystickRight]: Pc,
[jh.LeftJoystickDown]: Ac,
[jh.SpecialRight]: Rc,
[jh.FaceButtonBottom]: Ic,
[jh.FaceButtonRight]: _c,
[jh.FaceButtonTop]: kc,
[jh.FaceButtonLeft]: wc,
[jh.ShoulderLeft]: Nc,
[jh.ShoulderRight]: Oc,
[jh.TriggerRight]: xc,
[jh.SpecialLeft]: yc,
[jh.LeftJoystickPress]: Cc,
[jh.RightJoystickPress]: Bc
}, Wh = {
[wc]: "F1",
[kc]: "F2",
[Rc]: "F3",
[xc]: "F4",
[Bc]: "F5",
[Ic]: "Enter",
[_c]: "Esc",
[yc]: "Tab",
[Oc]: "E",
[Cc]: "F",
[Nc]: "Q"
};
function Kh(e, t) {
if (e === qh.MouseAndKeyboard) {
const n = Yh[t];
return {
device: e,
keyboardKeycode: n,
keyboardKeyLabel: Wh[n]
};
}
return {
device: e,
gamePadInput: t
};
}
function Xh(e, t, n = []) {
return {
primaryButton: Kh(e, t),
secondaryButtons: n.map((t => Kh(e, t)))
};
}
var Qh = fs.Input.ButtonState, $h = fs.Input.DeviceType, Zh = fs.Input.GamePadInput, em = Sl({
debugName: "activeRegisteredInputState",
get: function({get: e, getItem: t}) {
const n = e(Up), r = e(Hp), i = [];
for (let e = 0, o = n.length; e < o; e++) {
const o = n[e];
r.get(o.id) || (o.boundaryId && !t(uc, o.boundaryId) || i.push(o));
}
return i;
}
}), tm = e => "button:" + (e.gamePadInput ?? "") + ":" + (e.keyboardKeycode ?? ""), nm = class {
constructor(e, t, n) {
this.moby = e, this.input = t, this.focus = n, this.timer = new cp, this.disabledCounter = 0, 
this.pressedKeys = [], this.heldRepeatingKeys = [], this.isPressed = [], this.registerInput = (e, t) => {
const {callback: n, keyBinding: r, label: i, focusId: o, boundaryId: a, isRepeating: s, onSurfaceId: l} = t, c = [ {
id: e,
button: r.primaryButton,
focusId: o,
callback: n,
label: i,
boundaryId: a,
isRepeating: s,
priority: r.priority,
onSurfaceId: l
} ];
for (let t = 0, i = r.secondaryButtons.length; t < i; t++) c.push({
id: e + "-" + (t + 1),
button: r.secondaryButtons[t],
focusId: o,
callback: n,
boundaryId: a,
isRepeating: s
});
return this.moby.set(Up, (e => [ ...c, ...e ])), () => {
this.moby.set(Up, (e => e.filter((e => !c.includes(e)))));
};
}, this.disable = () => {
this.disabledCounter++;
let e = !1;
return () => {
e || (e = !0, this.disabledCounter--);
};
}, this.resetPressed = () => {
fr((() => {
this.isPressed.forEach((e => {
this.input.onButtonStateChanged.trigger({
state: Qh.Up,
button: e
});
}));
}));
};
}
init() {
let e;
this.moby.set(Gp, this.input.getCurrentInputDevice({})?.deviceType || $h.MouseAndKeyboard);
const t = [ this.input.onInputDeviceChange.subscribe((e => {
this.moby.set(Gp, e.toDeviceType);
})), this.input.onButtonStateChanged.subscribe((e => {
fr((() => {
e.state === Qh.Down ? this.onButtonDown(e.button) : this.onButtonUp(e.button);
}));
})), Dn((() => this.moby.get(Fl)), (t => {
e && (this.pressedKeys.length = 0, this.focus.setPressed(e, !1)), e = t;
})) ];
return () => {
t.forEach((e => e())), this.moby.reset(Up), this.moby.reset(Gp), this.moby.reset(Vp), 
this.timer.destroy();
};
}
onButtonDown(e) {
this.focus.setMouseMode(!1);
const t = this.getRegistration(e);
this.isDisabled || !t || this.isPressed.some((t => lp(t, e))) || (this.moby.set(Vp, (e => [ t, ...e ])), 
this.isPressed.push(e), t.callback(), t.focusId && this.pressFocusedIdKey(e, t.focusId), 
t.isRepeating && !this.heldRepeatingKeys.includes(e) && this.holdRepeatingKey(e, (() => {
this.isDisabled || this.getRegistration(e)?.callback();
})));
}
onButtonUp(e) {
const t = this.getRegistration(e);
if (this.isDisabled) return void this.releaseRepeatingKey(e);
this.moby.set(Vp, (t => t.filter((t => !lp(t.button, e)))));
const n = this.isPressed.findIndex((t => lp(t, e)));
n > -1 && this.isPressed.splice(n, 1), t?.isRepeating && this.releaseRepeatingKey(e), 
this.releaseFocusedIdKey(e);
}
getRegistration(e) {
const t = this.moby.getUntracked(em);
for (let n = 0; n < t.length; n++) {
const r = t[n];
if (lp(r.button, e)) return r;
}
}
get isDisabled() {
return this.disabledCounter > 0;
}
pressFocusedIdKey(e, t) {
this.moby.getUntracked(Fl) === t && (this.pressedKeys.push(e), this.focus.setPressed(t, !0));
}
releaseFocusedIdKey(e) {
const t = this.moby.getUntracked(Fl), n = this.pressedKeys.findIndex((t => lp(t, e)));
t && n > -1 && (this.pressedKeys.splice(n, 1), this.focus.setPressed(t, this.pressedKeys.length > 0));
}
holdRepeatingKey(e, t) {
this.heldRepeatingKeys.push(e);
let n = 0, r = 200;
const i = tm(e), o = () => {
n++, n < 2 || (r = n < 3 ? 60 : n < 5 ? 30 : 0), this.heldRepeatingKeys.some((t => lp(t, e))) && (t(), 
this.timer.timeout(i, o, r));
};
this.timer.timeout(i, o, r);
}
releaseRepeatingKey(e) {
this.timer.disposeTimeout(tm(e));
const t = this.heldRepeatingKeys.findIndex((t => lp(t, e)));
t > -1 && this.heldRepeatingKeys.splice(t, 1);
}
}, [rm, im] = El({
debugName: "inputHandlerState",
create: e => {
const t = e.get(zh), n = e.get(wh);
return new nm(e, t.bindings.Input, n);
}
}), om = Ii.observer((e => {
const {children: t, navigationConfig: n} = e, {navigate: r} = wl(), i = im();
H.useEffect((() => i.init()), [ i ]);
const o = dl(Gp);
return H.useEffect((() => {
const e = [ i.registerInput("navigate-left", {
callback: () => r(0),
keyBinding: n ? n.left : Xh(o, Zh.DPadLeft, [ Zh.LeftJoystickLeft ]),
isRepeating: !0
}), i.registerInput("navigate-up", {
callback: () => r(2),
keyBinding: n ? n.up : Xh(o, Zh.DPadUp, [ Zh.LeftJoystickUp ]),
isRepeating: !0
}), i.registerInput("navigate-right", {
callback: () => r(1),
keyBinding: n ? n.right : Xh(o, Zh.DPadRight, [ Zh.LeftJoystickRight ]),
isRepeating: !0
}), i.registerInput("navigate-down", {
callback: () => r(3),
keyBinding: n ? n.down : Xh(o, Zh.DPadDown, [ Zh.LeftJoystickDown ]),
isRepeating: !0
}) ];
return () => {
e.forEach((e => e()));
};
}), [ o, r, n, i ]), H.createElement(Dp.Provider, {
value: i.registerInput
}, t);
})), am = class {
constructor(e, t) {
this.stateMachine = e, this.debugName = t;
}
chain(e) {
return this.nextAction ? this.nextAction.chain(e) : this.nextAction = e, this;
}
debug(e) {}
}, sm = class extends am {
run(e) {
return this.nextAction?.run(e);
}
execute(e, t) {
return this.chain(new cm(this.stateMachine, t, e));
}
executeAsync(e, t) {
return this.chain(new lm(this.stateMachine, t, e));
}
transition(e) {
const t = new cm(this.stateMachine, "transition: " + e, (() => e));
return this.chain(t);
}
wait(e) {
const t = new lm(this.stateMachine, "wait: " + e, (n => {
const r = setTimeout((() => {
n();
}), e);
return e => {
t.debug("timeout cancelled: " + e), clearTimeout(r);
};
}));
return this.chain(t);
}
}, lm = class extends am {
constructor(e, t, n) {
super(e, t), this.callback = n;
}
run(e) {
this.debug();
let t = this.callback((n => {
n ? e(n) : this.nextAction ? t = this.nextAction.run(e) : e();
}));
return e => t?.(e);
}
}, cm = class extends am {
constructor(e, t, n) {
super(e, t), this.callback = n;
}
run(e) {
this.debug();
const t = this.callback();
if (this.nextAction) return this.nextAction.run(e);
e(t);
}
}, dm = class {
constructor(e) {
this.debugName = e, this.stateChangeEvent = new os, this.interrupt = e => {
const t = e(this.currentState);
void 0 !== t && this.currentState !== t && (this.debug("interrupt: " + t), this.currentCancel?.("user interruption"), 
this.changeState(t));
};
}
setDecisionMaker(e) {
this.decisionMaker = e;
}
debug(e) {}
getContext(e, t) {
return {
actions: () => new sm(this, "actions"),
previousState: t,
currentState: e
};
}
changeState(e) {
const t = this.currentState;
this.currentState = e, this.stateChangeEvent.trigger(e, t);
const n = this.getContext(e, t), r = this.decisionMaker?.(n);
r || this.debug("None");
const i = r || n.actions();
this.runActionChain(i);
}
runActionChain(e) {
let t, n = !0;
this.currentCancel = e.run((e => {
e && (n ? t = e : this.changeState(e));
})), n = !1, t && this.changeState(t);
}
transition(e) {
this.changeState(e(this.currentState));
}
};
function um(e, t, n, {onStateChange: r} = {}) {
H.useEffect((() => {
e.setDecisionMaker(n);
}), [ n, e ]), H.useEffect((() => {
if (r) return e.stateChangeEvent.subscribe(r);
}), [ r, e.stateChangeEvent ]), H.useEffect((() => {
void 0 !== t && void 0 === e.currentState && e.transition((() => t));
}), [ t, e ]);
}
function pm(e, t, n) {
const [r] = H.useState((() => new dm(n?.debugName)));
return um(r, e, t, n), {
interrupt: r.interrupt
};
}
var fm = class extends ps {
constructor() {
super(...arguments), this._bindingName = "PhotonJsBindings", this.Accessibility = {
onAccessibilitySettingsChanged: new os,
getAccessibilitySettings: (e, t) => this._asyncMethodCall("PhotonJsBindings.Accessibility.getAccessibilitySettings", e, t),
narrate: (e, t) => this._asyncMethodCall("PhotonJsBindings.Accessibility.narrate", e, t)
}, this.Badging = {
updateUnseenItemCount: (e, t) => this._asyncMethodCall("PhotonJsBindings.Badging.updateUnseenItemCount", e, t),
updateOnlineFriendCount: (e, t) => this._asyncMethodCall("PhotonJsBindings.Badging.updateOnlineFriendCount", e, t)
}, this.BlockListNotifications = {
SubscribeToBlockListNotifications: e => this._streamCall("PhotonJsBindings.BlockListNotifications.SubscribeToBlockListNotifications", "PhotonJsBindings.BlockListNotifications.SubscribeToBlockListNotificationsEnd", e)
}, this.BlockService = {
BlockPlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.BlockService.BlockPlayer", e, t),
UnblockPlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.BlockService.UnblockPlayer", e, t),
BatchVerifyBlockedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.BlockService.BatchVerifyBlockedPlayers", e, t),
ListBlockedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.BlockService.ListBlockedPlayers", e, t)
}, this.ContentMart = {
enableFifoCache: e => this._syncCall("PhotonJsBindings.ContentMart.enableFifoCache", e),
disableFifoCache: e => this._syncCall("PhotonJsBindings.ContentMart.disableFifoCache", e),
GetProduct: (e, t) => this._asyncMethodCall("PhotonJsBindings.ContentMart.GetProduct", e, t),
GetPlayerNetwork: (e, t) => this._asyncMethodCall("PhotonJsBindings.ContentMart.GetPlayerNetwork", e, t),
GetInputMethod: (e, t) => this._asyncMethodCall("PhotonJsBindings.ContentMart.GetInputMethod", e, t)
}, this.DeepLink = {
onCrossPlayStatusChanged: new os,
onPickFriendRequest: new os,
onCancelFriendRequest: new os,
onTemporaryDisabledSettingsChanged: new os,
onDisabledByParentalControlChanged: new os,
getPlayerActions: e => this._syncCall("PhotonJsBindings.DeepLink.getPlayerActions", e),
invokePlayerAction: e => this._syncCall("PhotonJsBindings.DeepLink.invokePlayerAction", e),
openFirstPartyProfile: e => this._syncCall("PhotonJsBindings.DeepLink.openFirstPartyProfile", e),
pickFriendResponse: e => this._syncCall("PhotonJsBindings.DeepLink.pickFriendResponse", e),
getSettingsAvailability: e => this._syncCall("PhotonJsBindings.DeepLink.getSettingsAvailability", e),
openSetting: e => this._syncCall("PhotonJsBindings.DeepLink.openSetting", e),
isCrossPlayEnabled: e => this._syncCall("PhotonJsBindings.DeepLink.isCrossPlayEnabled", e),
getCrossPlayPlatformCompatibility: e => this._syncCall("PhotonJsBindings.DeepLink.getCrossPlayPlatformCompatibility", e),
getDisabledByParentalControl: e => this._syncCall("PhotonJsBindings.DeepLink.getDisabledByParentalControl", e),
getPlayerActionsAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.getPlayerActionsAsync", e, t),
invokePlayerActionAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.invokePlayerActionAsync", e, t),
openFirstPartyProfileAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.openFirstPartyProfileAsync", e, t),
filterFriendsForPicker: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.filterFriendsForPicker", e, t),
canEnableCrossPlay: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.canEnableCrossPlay", e, t),
enableCrossPlay: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.enableCrossPlay", e, t),
openGameHubPage: (e, t) => this._asyncMethodCall("PhotonJsBindings.DeepLink.openGameHubPage", e, t)
}, this.FriendListNotifications = {
SubscribeToFriendListNotifications: e => this._streamCall("PhotonJsBindings.FriendListNotifications.SubscribeToFriendListNotifications", "PhotonJsBindings.FriendListNotifications.SubscribeToFriendListNotificationsEnd", e)
}, this.Friends = {
ListFriends: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.ListFriends", e, t),
BatchVerifyFriends: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.BatchVerifyFriends", e, t),
ListPlatformFriends: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.ListPlatformFriends", e, t),
DeleteFriend: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.DeleteFriend", e, t),
ListMutualFriends: (e, t) => this._asyncMethodCall("PhotonJsBindings.Friends.ListMutualFriends", e, t)
}, this.FriendsNotificationsService = {
StreamNotifications: e => this._streamCall("PhotonJsBindings.FriendsNotificationsService.StreamNotifications", "PhotonJsBindings.FriendsNotificationsService.StreamNotificationsEnd", e)
}, this.GameInvite = {
onCacheGameInvitesLimitReached: new os,
enableCacheGameInvites: e => this._syncCall("PhotonJsBindings.GameInvite.enableCacheGameInvites", e),
disableCacheGameInvites: e => this._syncCall("PhotonJsBindings.GameInvite.disableCacheGameInvites", e),
setCacheGameInvitesLimit: e => this._syncCall("PhotonJsBindings.GameInvite.setCacheGameInvitesLimit", e),
getCacheGameInvitesKeys: e => this._syncCall("PhotonJsBindings.GameInvite.getCacheGameInvitesKeys", e),
getCacheGameInvitesValue: e => this._syncCall("PhotonJsBindings.GameInvite.getCacheGameInvitesValue", e),
SubscribeToReceivedGameInviteNotifications: e => this._streamCall("PhotonJsBindings.GameInvite.SubscribeToReceivedGameInviteNotifications", "PhotonJsBindings.GameInvite.SubscribeToReceivedGameInviteNotificationsEnd", e),
SendGameInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.SendGameInvite", e, t),
GetReceivedGameInvites: e => this._streamCall("PhotonJsBindings.GameInvite.GetReceivedGameInvites", "PhotonJsBindings.GameInvite.GetReceivedGameInvitesEnd", e),
GetGameJoinTokens: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.GetGameJoinTokens", e, t),
AcceptGameInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.AcceptGameInvite", e, t),
RejectGameInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.RejectGameInvite", e, t),
RevokeGameInvites: (e, t) => this._asyncMethodCall("PhotonJsBindings.GameInvite.RevokeGameInvites", e, t)
}, this.Identity = {
getTokenInfo: (e, t) => this._asyncMethodCall("PhotonJsBindings.Identity.getTokenInfo", e, t),
getPersonaInfo: (e, t) => this._asyncMethodCall("PhotonJsBindings.Identity.getPersonaInfo", e, t)
}, this.InputBindings = {
onBindingsChanged: new os,
getActionBinding: e => this._syncCall("PhotonJsBindings.InputBindings.getActionBinding", e),
batchGetActionBindings: e => this._syncCall("PhotonJsBindings.InputBindings.batchGetActionBindings", e),
setExclusiveMouseRegion: (e, t) => this._asyncMethodCall("PhotonJsBindings.InputBindings.setExclusiveMouseRegion", e, t)
}, this.InviteListNotifications = {
SubscribeToSentInviteListNotifications: e => this._streamCall("PhotonJsBindings.InviteListNotifications.SubscribeToSentInviteListNotifications", "PhotonJsBindings.InviteListNotifications.SubscribeToSentInviteListNotificationsEnd", e),
SubscribeToReceivedInviteListNotifications: e => this._streamCall("PhotonJsBindings.InviteListNotifications.SubscribeToReceivedInviteListNotifications", "PhotonJsBindings.InviteListNotifications.SubscribeToReceivedInviteListNotificationsEnd", e)
}, this.Invites = {
ListSentFriendInvites: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.ListSentFriendInvites", e, t),
ListReceivedFriendInvites: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.ListReceivedFriendInvites", e, t),
BatchSendFriendInvites: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.BatchSendFriendInvites", e, t),
CancelSentFriendInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.CancelSentFriendInvite", e, t),
AcceptReceivedFriendInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.AcceptReceivedFriendInvite", e, t),
DeclineReceivedFriendInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.Invites.DeclineReceivedFriendInvite", e, t)
}, this.Lobby = {
onLobbyChanged: new os,
onUninvitablePlayersChanged: new os,
onMemberLeft: new os,
onMemberJoined: new os,
onFirstPartyInviteAccepted: new os,
onSendEaInvite: new os,
sendEaInviteResponse: e => this._syncCall("PhotonJsBindings.Lobby.sendEaInviteResponse", e),
getLobby: (e, t) => this._asyncMethodCall("PhotonJsBindings.Lobby.getLobby", e, t),
joinLobby: (e, t) => this._asyncMethodCall("PhotonJsBindings.Lobby.joinLobby", e, t),
filterUninvitablePlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.Lobby.filterUninvitablePlayers", e, t),
prepareInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.Lobby.prepareInvite", e, t)
}, this.Moderation = {
onOpenPlayerReporting: new os,
getReportCategories: (e, t) => this._asyncMethodCall("PhotonJsBindings.Moderation.getReportCategories", e, t),
reportPlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.Moderation.reportPlayer", e, t),
playerReportingCancelled: (e, t) => this._asyncMethodCall("PhotonJsBindings.Moderation.playerReportingCancelled", e, t)
}, this.MuteListNotifications = {
SubscribeToMuteListNotifications: e => this._streamCall("PhotonJsBindings.MuteListNotifications.SubscribeToMuteListNotifications", "PhotonJsBindings.MuteListNotifications.SubscribeToMuteListNotificationsEnd", e)
}, this.MuteService = {
MutePlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.MuteService.MutePlayer", e, t),
UnmutePlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.MuteService.UnmutePlayer", e, t),
BatchVerifyMutedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.MuteService.BatchVerifyMutedPlayers", e, t),
ListMutedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.MuteService.ListMutedPlayers", e, t)
}, this.Notifications = {
onNotificationAllowChanged: new os,
onInGamePlayChanged: new os,
getNotificationAllowed: e => this._syncCall("PhotonJsBindings.Notifications.getNotificationAllowed", e),
getInGamePlay: e => this._syncCall("PhotonJsBindings.Notifications.getInGamePlay", e),
getDefaultNotificationPosition: e => this._syncCall("PhotonJsBindings.Notifications.getDefaultNotificationPosition", e)
}, this.Party = {
onPartyChanged: new os,
onLeaderChanged: new os,
onMemberKicked: new os,
onMemberLeft: new os,
onMemberJoined: new os,
onCreatePartySupportedChanged: new os,
isCreatePartySupported: e => this._syncCall("PhotonJsBindings.Party.isCreatePartySupported", e),
getParty: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.getParty", e, t),
isCreatePartySupportedAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.isCreatePartySupportedAsync", e, t),
isPartySupported: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.isPartySupported", e, t),
createParty: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.createParty", e, t),
joinParty: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.joinParty", e, t),
leaveParty: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.leaveParty", e, t),
setPartyLeader: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.setPartyLeader", e, t),
kickPartyMember: (e, t) => this._asyncMethodCall("PhotonJsBindings.Party.kickPartyMember", e, t)
}, this.Performance = {
onNativeRequestedAMemoryPurge: new os,
onBlurModeChanged: new os,
requestNativeToPurgeMemory: e => this._syncCall("PhotonJsBindings.Performance.requestNativeToPurgeMemory", e),
getBlurMode: e => this._syncCall("PhotonJsBindings.Performance.getBlurMode", e)
}, this.PhotonInvite = {
onUninvitablePlayersChanged: new os,
onFirstPartyInviteAccepted: new os,
onSendEaInvite: new os,
sendEaInviteResponse: e => this._syncCall("PhotonJsBindings.PhotonInvite.sendEaInviteResponse", e),
prepareInvite: (e, t) => this._asyncMethodCall("PhotonJsBindings.PhotonInvite.prepareInvite", e, t),
filterUninvitablePlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.PhotonInvite.filterUninvitablePlayers", e, t)
}, this.PlatformFriends = {
onFriendListUpdated: new os,
onBlockListUpdated: new os,
startListener: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.startListener", e, t),
stopListener: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.stopListener", e, t),
getState: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.getState", e, t),
getFriendList: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.getFriendList", e, t),
getBlockList: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.getBlockList", e, t),
addFriend: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.addFriend", e, t),
removeFriend: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.removeFriend", e, t),
addBlock: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.addBlock", e, t),
removeBlock: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformFriends.removeBlock", e, t)
}, this.PlatformPresence = {
onAppearOfflineChanged: new os,
isAppearOfflineSupported: e => this._syncCall("PhotonJsBindings.PlatformPresence.isAppearOfflineSupported", e),
isAppearOffline: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlatformPresence.isAppearOffline", e, t)
}, this.PlayerCardService = {
onCachePlayerCardsLimitReached: new os,
onCachePlayerCardsByFirstPartyIdsLimitReached: new os,
onCacheFirstPartyIdsLimitReached: new os,
onCacheExternalPartyLimitReached: new os,
enableCachePlayerCards: e => this._syncCall("PhotonJsBindings.PlayerCardService.enableCachePlayerCards", e),
disableCachePlayerCards: e => this._syncCall("PhotonJsBindings.PlayerCardService.disableCachePlayerCards", e),
setCachePlayerCardsLimit: e => this._syncCall("PhotonJsBindings.PlayerCardService.setCachePlayerCardsLimit", e),
getCachePlayerCardsKeys: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCachePlayerCardsKeys", e),
getCachePlayerCardsValue: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCachePlayerCardsValue", e),
enableCachePlayerCardsByFirstPartyIds: e => this._syncCall("PhotonJsBindings.PlayerCardService.enableCachePlayerCardsByFirstPartyIds", e),
disableCachePlayerCardsByFirstPartyIds: e => this._syncCall("PhotonJsBindings.PlayerCardService.disableCachePlayerCardsByFirstPartyIds", e),
setCachePlayerCardsByFirstPartyIdsLimit: e => this._syncCall("PhotonJsBindings.PlayerCardService.setCachePlayerCardsByFirstPartyIdsLimit", e),
getCachePlayerCardsByFirstPartyIdsKeys: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCachePlayerCardsByFirstPartyIdsKeys", e),
getCachePlayerCardsByFirstPartyIdsValue: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCachePlayerCardsByFirstPartyIdsValue", e),
enableCacheFirstPartyIds: e => this._syncCall("PhotonJsBindings.PlayerCardService.enableCacheFirstPartyIds", e),
disableCacheFirstPartyIds: e => this._syncCall("PhotonJsBindings.PlayerCardService.disableCacheFirstPartyIds", e),
setCacheFirstPartyIdsLimit: e => this._syncCall("PhotonJsBindings.PlayerCardService.setCacheFirstPartyIdsLimit", e),
getCacheFirstPartyIdsKeys: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCacheFirstPartyIdsKeys", e),
getCacheFirstPartyIdsValue: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCacheFirstPartyIdsValue", e),
enableCacheExternalParty: e => this._syncCall("PhotonJsBindings.PlayerCardService.enableCacheExternalParty", e),
disableCacheExternalParty: e => this._syncCall("PhotonJsBindings.PlayerCardService.disableCacheExternalParty", e),
setCacheExternalPartyLimit: e => this._syncCall("PhotonJsBindings.PlayerCardService.setCacheExternalPartyLimit", e),
getCacheExternalPartyKeys: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCacheExternalPartyKeys", e),
getCacheExternalPartyValue: e => this._syncCall("PhotonJsBindings.PlayerCardService.getCacheExternalPartyValue", e),
BatchGetPlayerCards: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetPlayerCards", "PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsEnd", e),
BatchGetFriendsPlayerCards: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetFriendsPlayerCards", "PhotonJsBindings.PlayerCardService.BatchGetFriendsPlayerCardsEnd", e),
GetPlayerCard: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlayerCardService.GetPlayerCard", e, t),
BatchGetPlayerCardsByFirstPartyIds: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsByFirstPartyIds", "PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsByFirstPartyIdsEnd", e),
BatchGetFirstPartyIds: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetFirstPartyIds", "PhotonJsBindings.PlayerCardService.BatchGetFirstPartyIdsEnd", e),
BatchGetFriendsFirstPartyIds: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetFriendsFirstPartyIds", "PhotonJsBindings.PlayerCardService.BatchGetFriendsFirstPartyIdsEnd", e),
BatchGetPrivacySettings: e => this._streamCall("PhotonJsBindings.PlayerCardService.BatchGetPrivacySettings", "PhotonJsBindings.PlayerCardService.BatchGetPrivacySettingsEnd", e),
GetExternalPartyData: e => this._streamCall("PhotonJsBindings.PlayerCardService.GetExternalPartyData", "PhotonJsBindings.PlayerCardService.GetExternalPartyDataEnd", e)
}, this.PlayerList = {
onPlayerListsChanged: new os,
onPlayerListPersonasChanged: new os,
onPlayerListEmptyStateChanged: new os,
getPlayerListConfig: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlayerList.getPlayerListConfig", e, t),
getPlayerLists: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlayerList.getPlayerLists", e, t),
getPlayerListPersonas: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlayerList.getPlayerListPersonas", e, t)
}, this.PlayerSearch = {
SearchPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.PlayerSearch.SearchPlayers", e, t)
}, this.PresenceSession = {
onCachePresenceStatusLimitReached: new os,
enableCachePresenceStatus: e => this._syncCall("PhotonJsBindings.PresenceSession.enableCachePresenceStatus", e),
disableCachePresenceStatus: e => this._syncCall("PhotonJsBindings.PresenceSession.disableCachePresenceStatus", e),
setCachePresenceStatusLimit: e => this._syncCall("PhotonJsBindings.PresenceSession.setCachePresenceStatusLimit", e),
getCachePresenceStatusPrimaryKeys: e => this._syncCall("PhotonJsBindings.PresenceSession.getCachePresenceStatusPrimaryKeys", e),
getCachePresenceStatusSecondaryKeys: e => this._syncCall("PhotonJsBindings.PresenceSession.getCachePresenceStatusSecondaryKeys", e),
getCachePresenceStatusValue: e => this._syncCall("PhotonJsBindings.PresenceSession.getCachePresenceStatusValue", e),
updatePresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.updatePresence", e, t),
partialUpdatePresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.partialUpdatePresence", e, t),
subscribeToPlayerPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.subscribeToPlayerPresence", e, t),
subscribeToPlayersPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.subscribeToPlayersPresence", e, t),
unsubscribeFromPlayerPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.unsubscribeFromPlayerPresence", e, t),
unsubscribeFromPlayersPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.unsubscribeFromPlayersPresence", e, t),
subscribeToFriendsPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.subscribeToFriendsPresence", e, t),
unsubscribeFromFriendsPresence: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.unsubscribeFromFriendsPresence", e, t),
getPresenceSubscriptions: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.getPresenceSubscriptions", e, t),
getDirectJoinTokens: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.getDirectJoinTokens", e, t),
getPlayerPresence: e => this._streamCall("PhotonJsBindings.PresenceSession.getPlayerPresence", "PhotonJsBindings.PresenceSession.getPlayerPresenceEnd", e),
getFriendsPresence: e => this._streamCall("PhotonJsBindings.PresenceSession.getFriendsPresence", "PhotonJsBindings.PresenceSession.getFriendsPresenceEnd", e),
attachToPresenceSession: e => this._streamCall("PhotonJsBindings.PresenceSession.attachToPresenceSession", "PhotonJsBindings.PresenceSession.attachToPresenceSessionEnd", e),
detachFromPresenceSession: (e, t) => this._asyncMethodCall("PhotonJsBindings.PresenceSession.detachFromPresenceSession", e, t)
}, this.RecentlyMet = {
getRecentlyMetPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.RecentlyMet.getRecentlyMetPlayers", e, t),
getSessionPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.RecentlyMet.getSessionPlayers", e, t)
}, this.StateApi = {
onStateChanged: new os,
getState: e => this._syncCall("PhotonJsBindings.StateApi.getState", e),
setState: e => this._syncCall("PhotonJsBindings.StateApi.setState", e)
}, this.Telemetry = {
onSessionHeaderInformationChanged: new os,
onBootEnd: new os,
onBootStart: new os,
onTelemetryAllowChanged: new os,
getSessionHeaderInfo: e => this._syncCall("PhotonJsBindings.Telemetry.getSessionHeaderInfo", e),
getTelemetryAllowed: e => this._syncCall("PhotonJsBindings.Telemetry.getTelemetryAllowed", e)
}, this.UserExperience = {
playSoundEffect: (e, t) => this._asyncMethodCall("PhotonJsBindings.UserExperience.playSoundEffect", e, t)
}, this.Voip = {
onVoipChannelsUpdated: new os,
onVoipStateUpdated: new os,
setCurrentVoipProfile: e => this._syncCall("PhotonJsBindings.Voip.setCurrentVoipProfile", e),
mutePlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.mutePlayer", e, t),
unmutePlayer: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.unmutePlayer", e, t),
setMutedPlayers: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.setMutedPlayers", e, t),
getVoipState: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.getVoipState", e, t),
setActiveVoipChannel: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.setActiveVoipChannel", e, t),
getVoipChannels: (e, t) => this._asyncMethodCall("PhotonJsBindings.Voip.getVoipChannels", e, t)
}, this.XboxPlatform = {
getXblPrivacyBatchCheckPermission: (e, t) => this._asyncMethodCall("PhotonJsBindings.XboxPlatform.getXblPrivacyBatchCheckPermission", e, t),
CheckXUserPrivilege: (e, t) => this._asyncMethodCall("PhotonJsBindings.XboxPlatform.CheckXUserPrivilege", e, t),
ResolveXUserPrivilegeWithUiAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.XboxPlatform.ResolveXUserPrivilegeWithUiAsync", e, t),
ShowMessageDialogAsync: (e, t) => this._asyncMethodCall("PhotonJsBindings.XboxPlatform.ShowMessageDialogAsync", e, t)
};
}
hasMethod(e, t) {
return this._hasMethod("PhotonJsBindings", e, t);
}
hasEvent(e, t) {
return this._hasEvent("PhotonJsBindings", e, t);
}
registerBinding() {
return this._registerBinding(((e, t) => {
switch (e) {
case "PhotonJsBindings.Accessibility.onAccessibilitySettingsChanged":
return this.Accessibility.onAccessibilitySettingsChanged.trigger(t), !0;

case "PhotonJsBindings.BlockListNotifications.onSubscribeToBlockListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.BlockListNotifications.onSubscribeToBlockListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.BlockListNotifications.onSubscribeToBlockListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.DeepLink.onCrossPlayStatusChanged":
return this.DeepLink.onCrossPlayStatusChanged.trigger(t), !0;

case "PhotonJsBindings.DeepLink.onPickFriendRequest":
return this.DeepLink.onPickFriendRequest.trigger(t), !0;

case "PhotonJsBindings.DeepLink.onCancelFriendRequest":
return this.DeepLink.onCancelFriendRequest.trigger(t), !0;

case "PhotonJsBindings.DeepLink.onTemporaryDisabledSettingsChanged":
return this.DeepLink.onTemporaryDisabledSettingsChanged.trigger(t), !0;

case "PhotonJsBindings.DeepLink.onDisabledByParentalControlChanged":
return this.DeepLink.onDisabledByParentalControlChanged.trigger(t), !0;

case "PhotonJsBindings.FriendListNotifications.onSubscribeToFriendListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.FriendListNotifications.onSubscribeToFriendListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.FriendListNotifications.onSubscribeToFriendListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.FriendsNotificationsService.onStreamNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.FriendsNotificationsService.onStreamNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.FriendsNotificationsService.onStreamNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.GameInvite.onSubscribeToReceivedGameInviteNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.GameInvite.onSubscribeToReceivedGameInviteNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.GameInvite.onSubscribeToReceivedGameInviteNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.GameInvite.onGetReceivedGameInvitesData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.GameInvite.onGetReceivedGameInvitesError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.GameInvite.onGetReceivedGameInvitesEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.GameInvite.onCacheGameInvitesLimitReached":
return this.GameInvite.onCacheGameInvitesLimitReached.trigger(t), !0;

case "PhotonJsBindings.InputBindings.onBindingsChanged":
return this.InputBindings.onBindingsChanged.trigger(t), !0;

case "PhotonJsBindings.InviteListNotifications.onSubscribeToSentInviteListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToSentInviteListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToSentInviteListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToReceivedInviteListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToReceivedInviteListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.InviteListNotifications.onSubscribeToReceivedInviteListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.Lobby.onLobbyChanged":
return this.Lobby.onLobbyChanged.trigger(t), !0;

case "PhotonJsBindings.Lobby.onUninvitablePlayersChanged":
return this.Lobby.onUninvitablePlayersChanged.trigger(t), !0;

case "PhotonJsBindings.Lobby.onMemberLeft":
return this.Lobby.onMemberLeft.trigger(t), !0;

case "PhotonJsBindings.Lobby.onMemberJoined":
return this.Lobby.onMemberJoined.trigger(t), !0;

case "PhotonJsBindings.Lobby.onFirstPartyInviteAccepted":
return this.Lobby.onFirstPartyInviteAccepted.trigger(t), !0;

case "PhotonJsBindings.Lobby.onSendEaInvite":
return this.Lobby.onSendEaInvite.trigger(t), !0;

case "PhotonJsBindings.Moderation.onOpenPlayerReporting":
return this.Moderation.onOpenPlayerReporting.trigger(t), !0;

case "PhotonJsBindings.MuteListNotifications.onSubscribeToMuteListNotificationsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.MuteListNotifications.onSubscribeToMuteListNotificationsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.MuteListNotifications.onSubscribeToMuteListNotificationsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.Notifications.onNotificationAllowChanged":
return this.Notifications.onNotificationAllowChanged.trigger(t), !0;

case "PhotonJsBindings.Notifications.onInGamePlayChanged":
return this.Notifications.onInGamePlayChanged.trigger(t), !0;

case "PhotonJsBindings.Party.onPartyChanged":
return this.Party.onPartyChanged.trigger(t), !0;

case "PhotonJsBindings.Party.onLeaderChanged":
return this.Party.onLeaderChanged.trigger(t), !0;

case "PhotonJsBindings.Party.onMemberKicked":
return this.Party.onMemberKicked.trigger(t), !0;

case "PhotonJsBindings.Party.onMemberLeft":
return this.Party.onMemberLeft.trigger(t), !0;

case "PhotonJsBindings.Party.onMemberJoined":
return this.Party.onMemberJoined.trigger(t), !0;

case "PhotonJsBindings.Party.onCreatePartySupportedChanged":
return this.Party.onCreatePartySupportedChanged.trigger(t), !0;

case "PhotonJsBindings.Performance.onNativeRequestedAMemoryPurge":
return this.Performance.onNativeRequestedAMemoryPurge.trigger(t), !0;

case "PhotonJsBindings.Performance.onBlurModeChanged":
return this.Performance.onBlurModeChanged.trigger(t), !0;

case "PhotonJsBindings.PhotonInvite.onUninvitablePlayersChanged":
return this.PhotonInvite.onUninvitablePlayersChanged.trigger(t), !0;

case "PhotonJsBindings.PhotonInvite.onFirstPartyInviteAccepted":
return this.PhotonInvite.onFirstPartyInviteAccepted.trigger(t), !0;

case "PhotonJsBindings.PhotonInvite.onSendEaInvite":
return this.PhotonInvite.onSendEaInvite.trigger(t), !0;

case "PhotonJsBindings.PlatformFriends.onFriendListUpdated":
return this.PlatformFriends.onFriendListUpdated.trigger(t), !0;

case "PhotonJsBindings.PlatformFriends.onBlockListUpdated":
return this.PlatformFriends.onBlockListUpdated.trigger(t), !0;

case "PhotonJsBindings.PlatformPresence.onAppearOfflineChanged":
return this.PlatformPresence.onAppearOfflineChanged.trigger(t), !0;

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsPlayerCardsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsPlayerCardsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsPlayerCardsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsByFirstPartyIdsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsByFirstPartyIdsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPlayerCardsByFirstPartyIdsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFirstPartyIdsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFirstPartyIdsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFirstPartyIdsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsFirstPartyIdsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsFirstPartyIdsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetFriendsFirstPartyIdsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPrivacySettingsData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPrivacySettingsError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onBatchGetPrivacySettingsEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onGetExternalPartyDataData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PlayerCardService.onGetExternalPartyDataError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PlayerCardService.onGetExternalPartyDataEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PlayerCardService.onCachePlayerCardsLimitReached":
return this.PlayerCardService.onCachePlayerCardsLimitReached.trigger(t), !0;

case "PhotonJsBindings.PlayerCardService.onCachePlayerCardsByFirstPartyIdsLimitReached":
return this.PlayerCardService.onCachePlayerCardsByFirstPartyIdsLimitReached.trigger(t), 
!0;

case "PhotonJsBindings.PlayerCardService.onCacheFirstPartyIdsLimitReached":
return this.PlayerCardService.onCacheFirstPartyIdsLimitReached.trigger(t), !0;

case "PhotonJsBindings.PlayerCardService.onCacheExternalPartyLimitReached":
return this.PlayerCardService.onCacheExternalPartyLimitReached.trigger(t), !0;

case "PhotonJsBindings.PlayerList.onPlayerListsChanged":
return this.PlayerList.onPlayerListsChanged.trigger(t), !0;

case "PhotonJsBindings.PlayerList.onPlayerListPersonasChanged":
return this.PlayerList.onPlayerListPersonasChanged.trigger(t), !0;

case "PhotonJsBindings.PlayerList.onPlayerListEmptyStateChanged":
return this.PlayerList.onPlayerListEmptyStateChanged.trigger(t), !0;

case "PhotonJsBindings.PresenceSession.onGetPlayerPresenceData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PresenceSession.onGetPlayerPresenceError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PresenceSession.onGetPlayerPresenceEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PresenceSession.onGetFriendsPresenceData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PresenceSession.onGetFriendsPresenceError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PresenceSession.onGetFriendsPresenceEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PresenceSession.onAttachToPresenceSessionData":
{
const e = t;
return this._streams[e.id]?.data.trigger(e.data), !0;
}

case "PhotonJsBindings.PresenceSession.onAttachToPresenceSessionError":
{
const e = t;
let n = e.error;
return void 0 !== e.errorCode && (n += " [" + e.errorCode + "]"), void 0 !== e.domain && (n += " (" + e.domain + ")"), 
this._streams[e.id]?.error.trigger(new Error(n)), !0;
}

case "PhotonJsBindings.PresenceSession.onAttachToPresenceSessionEnd":
{
const e = t;
return this._streams[e.id]?.end.trigger(), !0;
}

case "PhotonJsBindings.PresenceSession.onCachePresenceStatusLimitReached":
return this.PresenceSession.onCachePresenceStatusLimitReached.trigger(t), !0;

case "PhotonJsBindings.StateApi.onStateChanged":
return this.StateApi.onStateChanged.trigger(t), !0;

case "PhotonJsBindings.Telemetry.onSessionHeaderInformationChanged":
return this.Telemetry.onSessionHeaderInformationChanged.trigger(t), !0;

case "PhotonJsBindings.Telemetry.onBootEnd":
return this.Telemetry.onBootEnd.trigger(t), !0;

case "PhotonJsBindings.Telemetry.onBootStart":
return this.Telemetry.onBootStart.trigger(t), !0;

case "PhotonJsBindings.Telemetry.onTelemetryAllowChanged":
return this.Telemetry.onTelemetryAllowChanged.trigger(t), !0;

case "PhotonJsBindings.Voip.onVoipChannelsUpdated":
return this.Voip.onVoipChannelsUpdated.trigger(t), !0;

case "PhotonJsBindings.Voip.onVoipStateUpdated":
return this.Voip.onVoipStateUpdated.trigger(t), !0;
}
return !1;
}));
}
};
(e => {
let t;
var n;
let r, i, o, a, s, l, c, d, u, p, f, h, m, g, y, I, _, b, S, v, T, E, P;
(n = t = e.StreamStatus || (e.StreamStatus = {}))[n.Data = 0] = "Data", n[n.End = 1] = "End", 
n[n.Error = 2] = "Error", (e => {
let t;
var n;
(n = t = e.ListUpdate || (e.ListUpdate = {}))[n.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
n[n.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", n[n.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
n[n.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(r = e.BlockListNotifications || (e.BlockListNotifications = {})), (e => {
let t;
var n;
(n = t = e.RequestedView || (e.RequestedView = {}))[n.REQUESTED_VIEW_UNSPECIFIED = 0] = "REQUESTED_VIEW_UNSPECIFIED", 
n[n.REQUESTED_VIEW_ID_ONLY = 1] = "REQUESTED_VIEW_ID_ONLY", n[n.REQUESTED_VIEW_SUMMARY = 2] = "REQUESTED_VIEW_SUMMARY", 
n[n.REQUESTED_VIEW_DETAILED = 3] = "REQUESTED_VIEW_DETAILED";
})(i = e.BlockService || (e.BlockService = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
(n = t = e.PickFriendPlayerInclusion || (e.PickFriendPlayerInclusion = {}))[n.Show = 0] = "Show", 
n[n.Disable = 1] = "Disable", n[n.Hide = 2] = "Hide", (i = r = e.Setting || (e.Setting = {}))[i.CrossPlay = 0] = "CrossPlay", 
i[i.Audio = 1] = "Audio", i[i.Accessibility = 2] = "Accessibility", i[i.FirstPartyParentalVoip = 3] = "FirstPartyParentalVoip", 
i[i.Party = 4] = "Party", i[i.AppearOffline = 5] = "AppearOffline", (a = o = e.ParentalControlSettings || (e.ParentalControlSettings = {}))[a.Voip = 0] = "Voip";
})(o = e.DeepLink || (e.DeepLink = {})), (e => {
let t;
var n;
(n = t = e.ListUpdate || (e.ListUpdate = {}))[n.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
n[n.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", n[n.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
n[n.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(a = e.FriendListNotifications || (e.FriendListNotifications = {})), (e => {
let t;
var n;
(n = t = e.RequestedView || (e.RequestedView = {}))[n.REQUESTED_VIEW_UNSPECIFIED = 0] = "REQUESTED_VIEW_UNSPECIFIED", 
n[n.REQUESTED_VIEW_ID_ONLY = 1] = "REQUESTED_VIEW_ID_ONLY", n[n.REQUESTED_VIEW_SUMMARY = 2] = "REQUESTED_VIEW_SUMMARY", 
n[n.REQUESTED_VIEW_DETAILED = 3] = "REQUESTED_VIEW_DETAILED";
})(s = e.Friends || (e.Friends = {})), (e => {
let t;
var n;
let r;
var i;
(n = t = e.SubscriptionType || (e.SubscriptionType = {}))[n.SUBSCRIPTION_TYPE_UNSPECIFIED = 0] = "SUBSCRIPTION_TYPE_UNSPECIFIED", 
n[n.SUBSCRIPTION_TYPE_BLOCK_LIST = 1] = "SUBSCRIPTION_TYPE_BLOCK_LIST", n[n.SUBSCRIPTION_TYPE_MUTE_LIST = 2] = "SUBSCRIPTION_TYPE_MUTE_LIST", 
n[n.SUBSCRIPTION_TYPE_SENT_INVITE_LIST = 3] = "SUBSCRIPTION_TYPE_SENT_INVITE_LIST", 
n[n.SUBSCRIPTION_TYPE_RECEIVED_INVITE_LIST = 4] = "SUBSCRIPTION_TYPE_RECEIVED_INVITE_LIST", 
n[n.SUBSCRIPTION_TYPE_FRIEND_LIST = 5] = "SUBSCRIPTION_TYPE_FRIEND_LIST", (i = r = e.ListUpdate || (e.ListUpdate = {}))[i.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
i[i.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", i[i.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
i[i.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(l = e.FriendsNotificationsService || (e.FriendsNotificationsService = {})), (e => {
let t;
var n;
(n = t = e.GameInviteNotificationType || (e.GameInviteNotificationType = {}))[n.GAME_INVITE_NOTIFICATION_TYPE_UNSPECIFIED = 0] = "GAME_INVITE_NOTIFICATION_TYPE_UNSPECIFIED", 
n[n.GAME_INVITE_NOTIFICATION_TYPE_EXISTING = 1] = "GAME_INVITE_NOTIFICATION_TYPE_EXISTING", 
n[n.GAME_INVITE_NOTIFICATION_TYPE_ADDED = 2] = "GAME_INVITE_NOTIFICATION_TYPE_ADDED", 
n[n.GAME_INVITE_NOTIFICATION_TYPE_REMOVED = 3] = "GAME_INVITE_NOTIFICATION_TYPE_REMOVED", 
n[n.GAME_INVITE_NOTIFICATION_TYPE_REVOKED = 4] = "GAME_INVITE_NOTIFICATION_TYPE_REVOKED";
})(c = e.GameInvite || (e.GameInvite = {})), (e => {
let t;
var n;
(n = t = e.Action || (e.Action = {}))[n.Primary = 1] = "Primary", n[n.Secondary = 2] = "Secondary", 
n[n.Decline = 3] = "Decline", n[n.OpenActionList = 4] = "OpenActionList", n[n.GoUp = 5] = "GoUp", 
n[n.GoDown = 6] = "GoDown", n[n.GoLeft = 7] = "GoLeft", n[n.GoRight = 8] = "GoRight", 
n[n.NextPage = 9] = "NextPage", n[n.PreviousPage = 10] = "PreviousPage", n[n.Settings = 11] = "Settings", 
n[n.NotificationFocus = 12] = "NotificationFocus", n[n.Reload = 13] = "Reload", 
n[n.ToggleMode = 14] = "ToggleMode", n[n.TogglePhoton = 15] = "TogglePhoton", n[n.LeaveParty = 16] = "LeaveParty", 
n[n.Tertiary = 17] = "Tertiary";
})(d = e.InputBindings || (e.InputBindings = {})), (e => {
let t;
var n;
(n = t = e.ListUpdate || (e.ListUpdate = {}))[n.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
n[n.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", n[n.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
n[n.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(u = e.InviteListNotifications || (e.InviteListNotifications = {})), (e => {
let t;
var n;
(n = t = e.RequestedView || (e.RequestedView = {}))[n.REQUESTED_VIEW_UNSPECIFIED = 0] = "REQUESTED_VIEW_UNSPECIFIED", 
n[n.REQUESTED_VIEW_ID_ONLY = 1] = "REQUESTED_VIEW_ID_ONLY", n[n.REQUESTED_VIEW_SUMMARY = 2] = "REQUESTED_VIEW_SUMMARY", 
n[n.REQUESTED_VIEW_DETAILED = 3] = "REQUESTED_VIEW_DETAILED";
})(p = e.Invites || (e.Invites = {})), (e => {
let t;
var n;
(n = t = e.ListUpdate || (e.ListUpdate = {}))[n.LIST_UPDATE_UNSPECIFIED = 0] = "LIST_UPDATE_UNSPECIFIED", 
n[n.LIST_UPDATE_ITEM_ADDED = 1] = "LIST_UPDATE_ITEM_ADDED", n[n.LIST_UPDATE_ITEM_REMOVED = 2] = "LIST_UPDATE_ITEM_REMOVED", 
n[n.LIST_UPDATE_ITEM_UPDATED = 3] = "LIST_UPDATE_ITEM_UPDATED";
})(f = e.MuteListNotifications || (e.MuteListNotifications = {})), (e => {
let t;
var n;
(n = t = e.RequestedView || (e.RequestedView = {}))[n.REQUESTED_VIEW_UNSPECIFIED = 0] = "REQUESTED_VIEW_UNSPECIFIED", 
n[n.REQUESTED_VIEW_ID_ONLY = 1] = "REQUESTED_VIEW_ID_ONLY", n[n.REQUESTED_VIEW_SUMMARY = 2] = "REQUESTED_VIEW_SUMMARY", 
n[n.REQUESTED_VIEW_DETAILED = 3] = "REQUESTED_VIEW_DETAILED";
})(h = e.MuteService || (e.MuteService = {})), (e => {
let t;
var n;
(n = t = e.NotificationPosition || (e.NotificationPosition = {}))[n.TopLeft = 0] = "TopLeft", 
n[n.TopRight = 1] = "TopRight", n[n.BottomLeft = 2] = "BottomLeft", n[n.BottomRight = 3] = "BottomRight";
})(m = e.Notifications || (e.Notifications = {})), (e => {
let t;
var n;
(n = t = e.BlurMode || (e.BlurMode = {}))[n.Off = 0] = "Off", n[n.GrabOnce = 1] = "GrabOnce", 
n[n.Live = 2] = "Live";
})(g = e.Performance || (e.Performance = {})), (e => {
let t;
var n;
(n = t = e.InviteType || (e.InviteType = {}))[n.Lobby = 0] = "Lobby", n[n.Party = 1] = "Party";
})(y = e.PhotonInvite || (e.PhotonInvite = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
(n = t = e.PresenceStatus || (e.PresenceStatus = {}))[n.UNKNOWN = 0] = "UNKNOWN", 
n[n.OFFLINE = 1] = "OFFLINE", n[n.ONLINE = 2] = "ONLINE", n[n.CHATTING = 3] = "CHATTING", 
n[n.AWAY = 4] = "AWAY", n[n.NOT_AVAILABLE = 5] = "NOT_AVAILABLE", n[n.DO_NOT_DISTURB = 6] = "DO_NOT_DISTURB", 
n[n.IN_GAME = 7] = "IN_GAME", n[n.LOOKING_FOR_PARTY = 8] = "LOOKING_FOR_PARTY", 
(i = r = e.PlatformFriendState || (e.PlatformFriendState = {}))[i.UNKNOWN = 0] = "UNKNOWN", 
i[i.NONE = 1] = "NONE", i[i.MUTUAL = 2] = "MUTUAL", i[i.INCOMING_REQUEST = 3] = "INCOMING_REQUEST", 
i[i.OUTGOING_REQUEST = 4] = "OUTGOING_REQUEST", (a = o = e.PlatformFriendsServiceState || (e.PlatformFriendsServiceState = {}))[a.UNINITIALIZED = 0] = "UNINITIALIZED", 
a[a.INITIALIZED = 1] = "INITIALIZED", a[a.STARTED_LISTENER = 2] = "STARTED_LISTENER", 
a[a.STOPPED_LISTENER = 3] = "STOPPED_LISTENER";
})(I = e.PlatformFriends || (e.PlatformFriends = {})), (e => {
let t;
var n;
let r;
var i;
(n = t = e.AvatarSize || (e.AvatarSize = {}))[n.AVATAR_SIZE_UNSPECIFIED = 0] = "AVATAR_SIZE_UNSPECIFIED", 
n[n.AVATAR_SIZE_SMALL = 1] = "AVATAR_SIZE_SMALL", n[n.AVATAR_SIZE_MEDIUM = 2] = "AVATAR_SIZE_MEDIUM", 
n[n.AVATAR_SIZE_LARGE = 3] = "AVATAR_SIZE_LARGE", (i = r = e.PrivacyLevel || (e.PrivacyLevel = {}))[i.PRIVACY_LEVEL_UNSPECIFIED = 0] = "PRIVACY_LEVEL_UNSPECIFIED", 
i[i.PRIVACY_LEVEL_PENDING = 1] = "PRIVACY_LEVEL_PENDING", i[i.PRIVACY_LEVEL_DISMISSED = 2] = "PRIVACY_LEVEL_DISMISSED", 
i[i.PRIVACY_LEVEL_NO_ONE = 3] = "PRIVACY_LEVEL_NO_ONE", i[i.PRIVACY_LEVEL_EVERYONE = 4] = "PRIVACY_LEVEL_EVERYONE", 
i[i.PRIVACY_LEVEL_FRIENDS = 5] = "PRIVACY_LEVEL_FRIENDS", i[i.PRIVACY_LEVEL_FRIENDS_OF_FRIENDS = 6] = "PRIVACY_LEVEL_FRIENDS_OF_FRIENDS";
})(_ = e.PlayerCardService || (e.PlayerCardService = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
let s;
var l;
(n = t = e.PlayerSortOrder || (e.PlayerSortOrder = {}))[n.Self = 0] = "Self", n[n.Online = 1] = "Online", 
n[n.InCurrentGame = 2] = "InCurrentGame", n[n.LastOnline = 3] = "LastOnline", n[n.Alphabetic = 4] = "Alphabetic", 
n[n.PlayerCustom1 = 5] = "PlayerCustom1", n[n.PlayerCustom2 = 6] = "PlayerCustom2", 
(i = r = e.SectionFilter || (e.SectionFilter = {}))[i.Online = 0] = "Online", i[i.Offline = 1] = "Offline", 
i[i.PlayerCustom1 = 2] = "PlayerCustom1", i[i.PlayerCustom2 = 3] = "PlayerCustom2", 
i[i.All = 4] = "All", (a = o = e.Icon || (e.Icon = {}))[a.Star = 0] = "Star", a[a.Hexagon = 1] = "Hexagon", 
a[a.Shield = 2] = "Shield", a[a.ClipBoard = 3] = "ClipBoard", a[a.StarShield = 4] = "StarShield", 
a[a.Flag = 5] = "Flag", (l = s = e.Purpose || (e.Purpose = {}))[l.MakeFriends = 0] = "MakeFriends", 
l[l.PlayTogether = 1] = "PlayTogether", l[l.None = 2] = "None";
})(b = e.PlayerList || (e.PlayerList = {})), (e => {
let t;
var n;
let r;
var i;
(n = t = e.InputType || (e.InputType = {}))[n.INPUT_TYPE_UNSPECIFIED = 0] = "INPUT_TYPE_UNSPECIFIED", 
n[n.INPUT_TYPE_CONTROLLER = 1] = "INPUT_TYPE_CONTROLLER", n[n.INPUT_TYPE_KEYBOARD = 2] = "INPUT_TYPE_KEYBOARD", 
n[n.INPUT_TYPE_MOUSE = 3] = "INPUT_TYPE_MOUSE", n[n.INPUT_TYPE_TOUCHPAD = 4] = "INPUT_TYPE_TOUCHPAD", 
n[n.INPUT_TYPE_MICROPHONE = 5] = "INPUT_TYPE_MICROPHONE", n[n.INPUT_TYPE_CAMERA = 6] = "INPUT_TYPE_CAMERA", 
(i = r = e.Operation || (e.Operation = {}))[i.OPERATION_UNSPECIFIED = 0] = "OPERATION_UNSPECIFIED", 
i[i.OPERATION_UPDATE = 1] = "OPERATION_UPDATE", i[i.OPERATION_REMOVE = 2] = "OPERATION_REMOVE";
})(S = e.PresenceSession || (e.PresenceSession = {})), (e => {
let t;
var n;
(n = t = e.State || (e.State = {}))[n.Open = 0] = "Open", n[n.Closed = 1] = "Closed", 
n[n.ShowingNotification = 2] = "ShowingNotification", n[n.ShowingFocusableNotification = 3] = "ShowingFocusableNotification", 
n[n.FocusedNotification = 4] = "FocusedNotification";
})(v = e.StateApi || (e.StateApi = {})), (e => {
let t;
var n;
(n = t = e.SoundEffect || (e.SoundEffect = {}))[n.ElementHovered = 1] = "ElementHovered", 
n[n.ElementFocused = 2] = "ElementFocused", n[n.ElementAction = 3] = "ElementAction", 
n[n.ElementRadioButtonSelected = 4] = "ElementRadioButtonSelected", n[n.ActionDenied = 5] = "ActionDenied", 
n[n.PageLeft = 6] = "PageLeft", n[n.PageRight = 7] = "PageRight", n[n.NotificationTips = 8] = "NotificationTips", 
n[n.NotificationSystemResponseSuccess = 9] = "NotificationSystemResponseSuccess", 
n[n.NotificationSystemResponseFailure = 10] = "NotificationSystemResponseFailure", 
n[n.NotificationOtherPlayerActivity = 11] = "NotificationOtherPlayerActivity", n[n.NotificationOtherPlayerInvite = 12] = "NotificationOtherPlayerInvite", 
n[n.LayerOpen = 13] = "LayerOpen", n[n.LayerClose = 14] = "LayerClose", n[n.OverlaySlideIn = 15] = "OverlaySlideIn", 
n[n.OverlayModalOpen = 16] = "OverlayModalOpen", n[n.OverlaySlideOut = 17] = "OverlaySlideOut", 
n[n.OverlayModalClose = 18] = "OverlayModalClose";
})(T = e.UserExperience || (e.UserExperience = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
(n = t = e.VoipChannel || (e.VoipChannel = {}))[n.None = 0] = "None", n[n.Party = 1] = "Party", 
n[n.Game = 2] = "Game", (i = r = e.VoipStatus || (e.VoipStatus = {}))[i.Unavailable = 0] = "Unavailable", 
i[i.Disabled = 1] = "Disabled", i[i.Muted = 2] = "Muted", i[i.SelfMuted = 3] = "SelfMuted", 
i[i.Listening = 4] = "Listening", i[i.Speaking = 5] = "Speaking", i[i.None = 0] = "None", 
i[i.Silent = 4] = "Silent", (a = o = e.VoipProfileType || (e.VoipProfileType = {}))[a.DisabledByRestrictions = 1] = "DisabledByRestrictions", 
a[a.DisabledByDefault = 2] = "DisabledByDefault", a[a.EnabledByDefault = 3] = "EnabledByDefault";
})(E = e.Voip || (e.Voip = {})), (e => {
let t;
var n;
let r;
var i;
let o;
var a;
let s;
var l;
let c;
var d;
let u;
var p;
let f;
var h;
let m;
var g;
(n = t = e.XboxPermission || (e.XboxPermission = {}))[n.Unknown = 0] = "Unknown", 
n[n.CommunicateUsingText = 1e3] = "CommunicateUsingText", n[n.CommunicateUsingVideo = 1001] = "CommunicateUsingVideo", 
n[n.CommunicateUsingVoice = 1002] = "CommunicateUsingVoice", n[n.ViewTargetProfile = 1004] = "ViewTargetProfile", 
n[n.ViewTargetGameHistory = 1005] = "ViewTargetGameHistory", n[n.ViewTargetVideoHistory = 1006] = "ViewTargetVideoHistory", 
n[n.ViewTargetMusicHistory = 1007] = "ViewTargetMusicHistory", n[n.ViewTargetExerciseInfo = 1009] = "ViewTargetExerciseInfo", 
n[n.ViewTargetPresence = 1011] = "ViewTargetPresence", n[n.ViewTargetVideoStatus = 1012] = "ViewTargetVideoStatus", 
n[n.ViewTargetMusicStatus = 1013] = "ViewTargetMusicStatus", n[n.PlayMultiplayer = 1014] = "PlayMultiplayer", 
n[n.ViewTargetUserCreatedContent = 1018] = "ViewTargetUserCreatedContent", n[n.BroadcastWithTwitch = 1019] = "BroadcastWithTwitch", 
n[n.WriteComment = 1022] = "WriteComment", n[n.ShareItem = 1024] = "ShareItem", 
n[n.ShareTargetContentToExternalNetworks = 1025] = "ShareTargetContentToExternalNetworks", 
(i = r = e.XblAnonymousUserType || (e.XblAnonymousUserType = {}))[i.Unknown = 0] = "Unknown", 
i[i.CrossNetworkUser = 1] = "CrossNetworkUser", i[i.CrossNetworkFriend = 2] = "CrossNetworkFriend", 
(a = o = e.XblPermissionDenyReason || (e.XblPermissionDenyReason = {}))[a.Unknown = 0] = "Unknown", 
a[a.NotAllowed = 2] = "NotAllowed", a[a.MissingPrivilege = 3] = "MissingPrivilege", 
a[a.PrivilegeRestrictsTarget = 4] = "PrivilegeRestrictsTarget", a[a.BlockListRestrictsTarget = 5] = "BlockListRestrictsTarget", 
a[a.MuteListRestrictsTarget = 7] = "MuteListRestrictsTarget", a[a.PrivacySettingsRestrictsTarget = 9] = "PrivacySettingsRestrictsTarget", 
a[a.CrossNetworkUserMustBeFriend = 12] = "CrossNetworkUserMustBeFriend", (l = s = e.XUserPrivilege || (e.XUserPrivilege = {}))[l.CrossPlay = 185] = "CrossPlay", 
l[l.Clubs = 188] = "Clubs", l[l.Sessions = 189] = "Sessions", l[l.Broadcast = 190] = "Broadcast", 
l[l.ManageProfilePrivacy = 196] = "ManageProfilePrivacy", l[l.GameDvr = 198] = "GameDvr", 
l[l.MultiplayerParties = 203] = "MultiplayerParties", l[l.CloudManageSession = 207] = "CloudManageSession", 
l[l.CloudJoinSession = 208] = "CloudJoinSession", l[l.CloudSavedGames = 209] = "CloudSavedGames", 
l[l.SocialNetworkSharing = 220] = "SocialNetworkSharing", l[l.UserGeneratedContent = 247] = "UserGeneratedContent", 
l[l.Communications = 252] = "Communications", l[l.Multiplayer = 254] = "Multiplayer", 
l[l.AddFriends = 255] = "AddFriends", (d = c = e.XUserPrivilegeOptions || (e.XUserPrivilegeOptions = {}))[d.None = 0] = "None", 
d[d.AllUsers = 1] = "AllUsers", (p = u = e.XUserPrivilegeDenyReason || (e.XUserPrivilegeDenyReason = {}))[p.None = 0] = "None", 
p[p.PurchaseRequired = 1] = "PurchaseRequired", p[p.Restricted = 2] = "Restricted", 
p[p.Banned = 3] = "Banned", p[p.Unknown = 4294967295] = "Unknown", (h = f = e.ResolveXUserPrivilegeWithUiAsyncResult || (e.ResolveXUserPrivilegeWithUiAsyncResult = {}))[h.Resolved = 0] = "Resolved", 
h[h.Aborted = 1] = "Aborted", h[h.FailedToResolve = 2] = "FailedToResolve", h[h.GameUserNoAuth = 3] = "GameUserNoAuth", 
(g = m = e.XGameUiMessageDialogButton || (e.XGameUiMessageDialogButton = {}))[g.First = 0] = "First", 
g[g.Second = 1] = "Second", g[g.Third = 2] = "Third";
})(P = e.XboxPlatform || (e.XboxPlatform = {}));
})(fm || (fm = {}));
var hm = Cl({
debugName: "layerRevealedState",
default: !1
}), mm = Cl({
debugName: "layerState",
default: fm.StateApi.State.Closed
}), gm = Cl({
debugName: "layerZoomedState",
default: 0
}), ym = Sl({
debugName: "layerZoomedState",
get: function({get: e}) {
return e(gm) > 0;
}
}), Im = () => {
const e = pl(gm), t = H.useCallback((() => {
e((e => e + 1));
}), [ e ]), n = H.useCallback((() => {
e((e => Math.max(e - 1, 0)));
}), [ e ]);
return H.useMemo((() => ({
addZoom: t,
removeZoom: n
})), [ t, n ]);
}, {stateMachineState: _m, useInitStateMachine: bm, useStateMachine: Sm} = function(e) {
const [t, n] = El({
debugName: e,
create: () => new dm(e)
});
return {
stateMachineState: t,
useStateMachine: n,
useInitStateMachine: (e, t) => um(n(), e, t)
};
}("RevealFlow"), [vm, Tm] = Qs("PhotonBindings"), Em = function(e, t) {
const n = jp?.[e];
return n ? rf(n, t) : e;
};
var Pm = fs.Input.GamePadInput, Om = fs.Input.DeviceType;
function Cm() {
const e = {
[Om.Switch]: {
[Pm.DPadRight]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_DPAD-RIGHT"),
[Pm.DPadLeft]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_DPAD-LEFT"),
[Pm.DPadUp]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_DPAD-UP"),
[Pm.DPadDown]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_DPAD-DOWN"),
[Pm.LeftJoystickUp]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[Pm.LeftJoystickDown]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[Pm.LeftJoystickLeft]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[Pm.LeftJoystickRight]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[Pm.LeftJoystickPress]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_LEFT-STICK"),
[Pm.RightJoystickUp]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[Pm.RightJoystickDown]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[Pm.RightJoystickLeft]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[Pm.RightJoystickRight]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[Pm.RightJoystickPress]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_RIGHT-STICK"),
[Pm.FaceButtonTop]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_X"),
[Pm.FaceButtonRight]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_A"),
[Pm.FaceButtonBottom]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_B"),
[Pm.FaceButtonLeft]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_Y"),
[Pm.SpecialLeft]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_MINUS"),
[Pm.SpecialRight]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_PLUS"),
[Pm.ShoulderRight]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_R"),
[Pm.ShoulderLeft]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_L"),
[Pm.TriggerRight]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_ZR"),
[Pm.TriggerLeft]: Em("PHOTON-SOCIAL_NARRATION_SWITCH-BUTTON_ZL")
},
[Om.Playstation]: {
[Pm.DPadRight]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_DPAD-RIGHT"),
[Pm.DPadLeft]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_DPAD-LEFT"),
[Pm.DPadUp]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_DPAD-UP"),
[Pm.DPadDown]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_DPAD-DOWN"),
[Pm.LeftJoystickUp]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[Pm.LeftJoystickDown]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[Pm.LeftJoystickLeft]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[Pm.LeftJoystickRight]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[Pm.LeftJoystickPress]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L3"),
[Pm.RightJoystickUp]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[Pm.RightJoystickDown]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[Pm.RightJoystickLeft]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[Pm.RightJoystickRight]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[Pm.RightJoystickPress]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R3"),
[Pm.FaceButtonTop]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_TRIANGLE"),
[Pm.FaceButtonRight]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_CIRCLE"),
[Pm.FaceButtonBottom]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_CROSS"),
[Pm.FaceButtonLeft]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_SQUARE"),
[Pm.SpecialLeft]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_TOUCHPAD"),
[Pm.SpecialRight]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_OPTIONS"),
[Pm.ShoulderRight]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R1"),
[Pm.ShoulderLeft]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L1"),
[Pm.TriggerRight]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_R2"),
[Pm.TriggerLeft]: Em("PHOTON-SOCIAL_NARRATION_PLAYSTATION-BUTTON_L2")
},
[Om.Xbox]: {
[Pm.DPadRight]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_DPAD-RIGHT"),
[Pm.DPadLeft]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_DPAD-LEFT"),
[Pm.DPadUp]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_DPAD-UP"),
[Pm.DPadDown]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_DPAD-DOWN"),
[Pm.LeftJoystickUp]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[Pm.LeftJoystickDown]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[Pm.LeftJoystickLeft]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[Pm.LeftJoystickRight]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[Pm.LeftJoystickPress]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LEFT-STICK"),
[Pm.RightJoystickUp]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[Pm.RightJoystickDown]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[Pm.RightJoystickLeft]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[Pm.RightJoystickRight]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[Pm.RightJoystickPress]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RIGHT-STICK"),
[Pm.FaceButtonTop]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_Y"),
[Pm.FaceButtonRight]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_B"),
[Pm.FaceButtonBottom]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_A"),
[Pm.FaceButtonLeft]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_X"),
[Pm.SpecialLeft]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_VIEW"),
[Pm.SpecialRight]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_MENU"),
[Pm.ShoulderRight]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RB"),
[Pm.ShoulderLeft]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LB"),
[Pm.TriggerRight]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_RT"),
[Pm.TriggerLeft]: Em("PHOTON-SOCIAL_NARRATION_XBOX-BUTTON_LT")
}
};
return ({primaryButton: t}) => {
let n;
switch (t.device) {
case Om.MouseAndKeyboard:
n = t.keyboardKeyLabel;
break;

case Om.Switch:
case Om.Playstation:
case Om.Xbox:
t.gamePadInput && (n = e[t.device][t.gamePadInput]);
}
return n || "";
};
}
var Nm, Am = () => {
const {Accessibility: e} = Tm(), t = ol(), n = Ip();
H.useEffect((() => {
const r = mt.box(!1), i = async () => {
const t = (await e.getAccessibilitySettings({}))?.enableUiNarration ?? !1;
r.set(t);
}, o = [ n.init(e, Cm()), Dn((() => r.get() && t.get(hm)), (e => {
n.setEnabled(e);
}), {
fireImmediately: !0
}), e.onAccessibilitySettingsChanged.subscribe(i) ];
return i(), () => {
o.forEach((e => e()));
};
}), [ e, t, n ]);
};
var Lm = new WeakSet;
function wm(e, t) {
return new Promise(((n, r) => {
const i = (e.bindings.hasEvent("Asset", "onAssetLoaded") ? e.bindings.Asset.onAssetLoaded : e.bindings.Utilities.onAssetLoaded).subscribe((({url: e, success: o}) => {
e === t.url && (i(), o ? n() : r(new Error(`Font ${e} couldn't be loaded`)));
}));
e.bindings.Utilities.loadFont(t);
}));
}
async function km(e, t, n) {
if (n.find((({url: e, name: n}) => t.url === e || t.name === n))) return;
n.push(t);
const r = Date.now();
try {
await wm(e, t);
} catch (e) {
return console.error(`Couldn't load font '${t.name}'`, e), {
url: t.url,
duration: Date.now() - r
};
}
}
async function Rm(e, t, n) {
if (Lm.has(e)) throw new Error("Fonts have already been loaded this session");
Lm.add(e);
const r = [], i = [];
if (await Promise.all(t.map((async t => {
const n = await km(e, t, r);
n && i.push(n);
}))), n) {
const t = await km(e, n, r);
t && i.push(t);
}
return i;
}
var [xm, Bm] = El({
debugName: "routersState",
create: () => ({})
}), Dm = e => {
const t = jo(), n = Bm();
if (e) {
if (!n[e]) throw new Error(`Could not find history for '${e}' router`);
return n[e];
}
if (!t) throw new Error("Could not find history for unspecified router");
const r = Object.values(n).find((e => e.history === t));
if (!r) throw new Error("Could not find router for parent history");
return r;
}, Fm = (e, t) => {
const n = e.get(xm)[t];
if (!n) throw new Error(`Could not find history for '${t}' router`);
return n;
};
async function Mm(e, t, n, r) {
const i = await Promise.all(t.map((e => {
return {
key: e,
router: (t = to({
initialIndex: 0,
initialEntries: [ r?.[e] ?? "/" ]
}), {
history: t,
navigate: e => {
t.location.pathname !== e.pathname && t.push(e);
},
goBack: t.goBack
})
};
var t;
})));
for (const e of i) n[e.key] = e.router;
}
function Um(e) {
const t = Bm()[e];
if (!t) throw new Error(`Missing history for '${e}', make sure it is setup with initRoutersHistory`);
return t.history;
}
function Hm(e, t) {
return Fm(e, t).history;
}
var Vm = class {
constructor(e) {
this.assetApi = e, this.fileRequestHandlers = [], this.unhandledRequests = [], this.onJsFileRequest = e => {
let t = !1;
for (const n of this.fileRequestHandlers.slice()) if (this.handleRequest(n, e)) {
t = !0;
break;
}
t || (this.unhandledRequests.push(e), setTimeout((() => {
const t = this.unhandledRequests.indexOf(e);
t > -1 && (this.unhandledRequests.splice(t, 1), this.assetApi.jsFileResponse({
id: e.id,
data: new Uint8Array
}));
}), 5e3));
};
}
static create(e) {
const t = new Vm(e);
return e.onJsFileRequest.subscribe(t.onJsFileRequest), t;
}
handleRequest(e, t) {
const {id: n, url: r} = t, i = e(r);
return !!i && (i instanceof Uint8Array ? this.assetApi.jsFileResponse({
id: n,
data: i
}) : i.then((e => {
this.assetApi.jsFileResponse({
id: n,
data: e
});
})).catch((e => {})), !0);
}
registerFileRequestHandler(e) {
return this.fileRequestHandlers.push(e), this.unhandledRequests = this.unhandledRequests.filter((t => !this.handleRequest(e, t))), 
() => {
const t = this.fileRequestHandlers.indexOf(e);
t > -1 && this.fileRequestHandlers.splice(t, 1);
};
}
}, Jm = [], Gm = class {
constructor(e, t) {
this.twinkleHttp = e, this.connectionId = t, this.isSent = !1;
}
send(e, t) {
if (this.isSent) throw new Error("Response already sent for connection ID " + this.connectionId);
const n = t ? this.twinkleHttp.stringToBytes({
data: t
})?.data : void 0;
this.twinkleHttp.sendDebugHttpResponse({
id: this.connectionId,
response: {
statusCode: e,
body: n,
headers: {
"Access-Control-Allow-Origin": "*"
}
}
}), this.isSent = !0;
}
};
function zm(e, t) {
Jm.push({
method: fs.Http.HttpMethod.Get,
uri: e,
callback: t
});
}
function jm(e, t) {
Jm.push({
method: fs.Http.HttpMethod.Post,
uri: e,
callback: t
});
}
var qm = class {
constructor(e) {
this.queryString = e;
}
getParsed() {
if (this.parsed) return this.parsed;
if (!this.queryString) return {};
const e = {};
return ("?" === this.queryString[0] ? this.queryString.substr(1) : this.queryString).split("&").forEach((t => {
if ("" !== t) if (-1 !== t.indexOf("=")) {
const [n, r] = t.split("=");
e[n] = decodeURIComponent(r);
} else e[t] = void 0;
})), this.parsed = e, e;
}
hasValues() {
return Object.keys(this.getParsed()).length > 0;
}
toObject() {
return {
...this.getParsed()
};
}
getValue(e) {
return this.getParsed()[e];
}
getString(e) {
return this.getValue(e) || "";
}
getNumber(e) {
try {
const t = parseFloat(this.getString(e));
return Number.isNaN(t) ? void 0 : t;
} catch (e) {
return;
}
}
getBoolean(e) {
const t = this.getString(e);
return [ "true", "1" ].indexOf(t) > -1 || !([ "false", "0" ].indexOf(t) > -1) && void 0;
}
isSet(e) {
return Object.prototype.hasOwnProperty.call(this.getParsed(), e);
}
};
var Ym = {
[fs.Input.MouseEventType.Up]: "onMouseUp",
[fs.Input.MouseEventType.Down]: "onMouseDown",
[fs.Input.MouseEventType.Click]: "onClick",
[fs.Input.MouseEventType.DoubleClick]: "onDoubleClick",
[fs.Input.MouseEventType.Scroll]: "onMouseScroll",
[fs.Input.MouseEventType.Enter]: "onMouseEnter",
[fs.Input.MouseEventType.Leave]: "onMouseLeave",
[fs.Input.MouseEventType.Unknown]: ""
}, Wm = class {
constructor(e, t, n) {
this.layoutApi = t, this.reconciler = n, this.captureOnEventHandler = void 0, this.captureOnStopHandler = void 0, 
this.onMouseEventBeforePropagation = new os, this.onMouseEventAfterPropagation = new os, 
this.onMouseEventHandled = new os, e.onMouseMove.subscribe((e => {
this.handleMouseMove(e.x, e.y);
})), e.onMouseEvents.subscribe((e => {
this.handleMouseEvents(e.events);
}));
}
handleMouseMove(e, t) {
this.captureOnEventHandler && this.captureOnEventHandler(e, t);
}
handleMouseEvents(e) {
for (let t = 0; t < e.length; t++) {
const n = e[t];
this.captureOnEventHandler && n.event === fs.Input.MouseEventType.Up && this.stopCapture(), 
this.propagateMouseEvent(n);
}
}
stopCapture() {
this.layoutApi.enableMouseMove({
enable: !1
}), this.captureOnEventHandler = void 0, this.captureOnStopHandler && (this.captureOnStopHandler(), 
this.captureOnStopHandler = void 0);
}
captureMouse(e, t) {
this.layoutApi.enableMouseMove({
enable: !0
}), this.captureOnEventHandler = e, this.captureOnStopHandler = t;
}
propagateMouseEvent(e) {
let t = !0;
const n = {
...e,
stopPropagation: () => {
t = !1;
}
};
this.onMouseEventBeforePropagation.trigger(n);
for (let e = 0; e < n.surfaces.length; e++) {
const r = n.surfaces[e], i = Ym[n.event];
if (!i) continue;
const o = this.reconciler.getSurfaceById(r.surfaceId), a = o && o.props[i];
if (a && (a(n, r.surfaceId), this.onMouseEventHandled.trigger(n)), !t) break;
}
t && this.onMouseEventAfterPropagation.trigger(n);
}
}, Km = class {
constructor(e) {
this.kvstore = e;
}
getItem(e) {
return this.kvstore.getString({
key: e
}).then((e => e?.value));
}
getItemSync(e) {
return this.kvstore.getStringSync({
key: e
})?.value;
}
setItem(e, t) {
return this.kvstore.setString({
key: e,
value: t
}).then((() => {}));
}
setItemSync(e, t) {
return this.kvstore.setStringSync({
key: e,
value: t
});
}
removeItem(e) {
return this.kvstore.remove({
key: e
}).then((() => {}));
}
clear() {
return this.kvstore.removeAll({}).then((() => {}));
}
}, Xm = class {
constructor(e) {
this.options = e, this.jsBindingEventHandlers = [], this.asyncJsCallResponseHandlers = [], 
this.batchedUpdates = e => e();
}
registerJsBindingEventHandler(e) {
this.jsBindingEventHandlers.push(e);
}
registerAsyncJsCallResponseHandler(e) {
this.asyncJsCallResponseHandlers.push(e);
}
onCppToJsCalls(e) {
this.batchedUpdates((() => {
fr((() => {
for (let t = 0; t < e.length; ++t) {
const n = e[t];
try {
"asyncJsCallResponse" === n[0] ? this.asyncJsCallResponseHandlers.forEach((e => {
e(...n[1]);
})) : "onJsBindingEvent" === n[0] && this.jsBindingEventHandlers.forEach((e => {
e(...n[1]);
}));
} catch (e) {
if (!this.options.onErrorCallback) throw e;
this.options.onErrorCallback(n[0], e);
}
}
}));
}), void 0);
}
setBatchCallback(e) {
this.batchedUpdates = e;
}
}, Qm = class extends Xm {
constructor(e) {
super(e), is.onScriptCalls = this.onCppToJsCalls.bind(this);
}
start(e) {
e();
}
callJsBindingAsync(e, t, n, r) {
return is.TwinkleNative.bindingCall(t, n, r, e);
}
callJsBindingSync(e, t, n) {
return is.TwinkleNative.bindingCall(e, t, n, void 0);
}
}, $m = [ "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "+", "/" ], Zm = [ 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 62, 255, 255, 255, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 255, 255, 255, 0, 255, 255, 255, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 255, 255, 255, 255, 255, 255, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51 ];
function eg(e) {
if (e >= Zm.length) throw new Error("Unable to parse base64 string.");
const t = Zm[e];
if (255 === t) throw new Error("Unable to parse base64 string.");
return t;
}
function tg(e) {
let t, n = "";
const r = e.length;
for (t = 2; t < r; t += 3) n += $m[e[t - 2] >> 2], n += $m[(3 & e[t - 2]) << 4 | e[t - 1] >> 4], 
n += $m[(15 & e[t - 1]) << 2 | e[t] >> 6], n += $m[63 & e[t]];
return t === r + 1 && (n += $m[e[t - 2] >> 2], n += $m[(3 & e[t - 2]) << 4], n += "=="), 
t === r && (n += $m[e[t - 2] >> 2], n += $m[(3 & e[t - 2]) << 4 | e[t - 1] >> 4], 
n += $m[(15 & e[t - 1]) << 2], n += "="), n;
}
function ng(e) {
if (e.length % 4 != 0) throw new Error("Unable to parse base64 string.");
const t = e.indexOf("=");
if (-1 !== t && t < e.length - 2) throw new Error("Unable to parse base64 string.");
const n = e.endsWith("==") ? 2 : e.endsWith("=") ? 1 : 0, r = e.length, i = new Uint8Array(r / 4 * 3);
let o;
for (let t = 0, n = 0; t < r; t += 4, n += 3) o = eg(e.charCodeAt(t)) << 18 | eg(e.charCodeAt(t + 1)) << 12 | eg(e.charCodeAt(t + 2)) << 6 | eg(e.charCodeAt(t + 3)), 
i[n] = o >> 16, i[n + 1] = o >> 8 & 255, i[n + 2] = 255 & o;
const a = i.length - n;
return a > 0 ? i.subarray(0, a) : i;
}
var rg = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function ig(e) {
let t, n, r, i, o, a, s, l = "", c = 0;
for (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); c < e.length; ) i = rg.indexOf(e.charAt(c++)), 
o = rg.indexOf(e.charAt(c++)), a = rg.indexOf(e.charAt(c++)), s = rg.indexOf(e.charAt(c++)), 
t = i << 2 | o >> 4, n = (15 & o) << 4 | a >> 2, r = (3 & a) << 6 | s, l += String.fromCharCode(t), 
64 !== a && (l += String.fromCharCode(n)), 64 !== s && (l += String.fromCharCode(r));
return og(l);
}
function og(e) {
let t = "", n = 0, r = 0, i = 0, o = 0;
for (;n < e.length; ) r = e.charCodeAt(n), r < 128 ? (t += String.fromCharCode(r), 
n++) : r > 191 && r < 224 ? (i = e.charCodeAt(n + 1), t += String.fromCharCode((31 & r) << 6 | 63 & i), 
n += 2) : (i = e.charCodeAt(n + 1), o = e.charCodeAt(n + 2), t += String.fromCharCode((15 & r) << 12 | (63 & i) << 6 | 63 & o), 
n += 3);
return t;
}
var ag = class {}, sg = "__UINT8_B64", lg = "__BASE64", cg = 0;
function dg(e, t) {
if ("string" == typeof t) {
if (t.startsWith(sg)) return ng(t.substr(sg.length));
if (t.startsWith(lg)) return ig(t.substr(lg.length));
if ("__UNDEFINED__" === t) return;
}
return t;
}
function ug(e, t) {
if (t instanceof Uint8Array) {
const e = tg(t);
return sg + e;
}
return t;
}
function pg(e, t, n, r) {
return JSON.stringify({
bindingName: e,
methodName: t,
param: n,
asyncId: r,
requestId: cg++
}, ug);
}
function fg(e) {
try {
const t = JSON.parse(e, dg);
return "string" != typeof t && "_response" in t ? t._response : t;
} catch (t) {
throw console.error("Could not parse sync reply as JSON", t), console.info("Reply:", e), 
new Error("Sync call failed to parse as JSON. See console for more detail.");
}
}
function hg(e) {
try {
return JSON.parse(e, dg);
} catch (t) {
return console.error("Could not parse TwinkleNative websocket message as JSON", t), 
console.info("Websocket message: ", e), [];
}
}
var mg = class extends Xm {
constructor(e, t) {
super(e), this.remoteApiCommunicator = t, this.clientIsOpen = !1, this.queuedPayloads = [];
}
start(e) {
this.remoteApiCommunicator.connectSocket({
onOpen: () => {
this.clientIsOpen = !0, this.queuedPayloads.forEach((e => this.sendPayload(e))), 
this.queuedPayloads.length = 0, e();
},
onError: t => {
this.clientIsOpen = !1, console.error("WebSocket connection closed down.", t), e && e();
},
onMessage: e => {
this.onCppToJsCalls(hg(e));
}
});
}
sendPayload(e) {
if (this.remoteApiCommunicator.isSocketOpen()) try {
this.remoteApiCommunicator.socketSend(e);
} catch (e) {
console.error("Failed to send payload over WebSocket:", e);
}
}
callJsBindingAsync(e, t, n, r) {
const i = pg(t, n, r, e);
this.clientIsOpen ? this.sendPayload(i) : this.queuedPayloads.push(i);
}
callJsBindingSync(e, t, n) {
const r = pg(e, t, n, void 0);
return fg(this.remoteApiCommunicator.xhrSend("/bindingcall/" + t, r));
}
}, gg = class extends ag {
connectSocket(e) {
this.socket = new WebSocket("ws://" + is.location?.host + this.getBaseUrl() + "/ws"), 
this.socket.onopen = e.onOpen, this.socket.onerror = e.onError, this.socket.onmessage = t => e.onMessage(t.data);
}
getBaseUrl() {
if (this.baseUrl) return this.baseUrl;
const e = "/remotescriptengine", t = document.location.pathname, n = t.indexOf(e);
return n > -1 ? this.baseUrl = t.substring(0, n + e.length) : (alert("Could not determine base url from path, using default"), 
this.baseUrl = e), this.baseUrl;
}
isSocketOpen() {
return !!this.socket && this.socket.readyState === this.socket.OPEN;
}
socketSend(e) {
this.socket?.send(e);
}
xhrSend(e, t) {
const n = new is.XMLHttpRequest;
if (n.open("POST", this.getBaseUrl() + e, !1), n.overrideMimeType("text/plain"), 
n.send(t), 200 !== n.status) throw console.error("Got status: ", n.status, " for payload ", t), 
new Error("Sync call returned status " + n.status + ". See console for more detail.");
return n.responseText;
}
};
function yg(e) {
let t;
if (is.TwinkleNative) t = new Qm(e); else if (t = new mg(e, new gg), void 0 === is.window) throw new Error("Remote engine without window");
return t;
}
function Ig(e, t) {
if ("number" == typeof e) t.push(e); else if ("function" == typeof e) t.push(e()); else if (Array.isArray(e)) for (let n = 0, r = e.length; n < r; n++) Ig(e[n], t);
}
function _g(e, t) {
const n = {};
if ("string" == typeof t.text && (n.text = t.text), "number" == typeof t.richTextId && (n.richTextId = t.richTextId), 
t.style) {
const r = [];
Ig(t.style, r), Zc(e, r), n.styleObjects = r;
}
let r = 0;
return t.onBounds && (r |= 128), t.onClick && (r |= 4), t.onDoubleClick && (r |= 8), 
t.onMouseDown && (r |= 1), t.onMouseUp && (r |= 2), t.onMouseEnter && (r |= 32), 
t.onMouseLeave && (r |= 64), t.onMouseScroll && (r |= 16), r && (n.events = r), 
n;
}
var bg = class {
constructor(e, t, n, r) {
this.reconciler = e, this.surfaceBindings = t, this.tag = n, this.props = r, this.children = [], 
this.reconciler.surfaceByTag[n] = this, this.parsedProps = this.handleProps(r);
}
isDescendantOf(e) {
let t = this.parent;
for (;t; ) {
if (t === e) return !0;
t = t.parent;
}
return !1;
}
nativeInsertChildAt(e, t, n) {
this.surfaceBindings.insertChildAt({
parentSurfaceId: e,
index: t,
childSurface: n
});
}
nativeMoveChild(e, t, n) {
this.surfaceBindings.moveChild({
parentSurfaceId: e,
fromIndex: t,
toIndex: n
});
}
nativeRemoveChild(e, t) {
this.surfaceBindings.removeChild({
parentSurfaceId: e,
index: t
});
}
handleOnSurfaceId(e, t) {
const n = e && e.onSurfaceId, r = t && t.onSurfaceId;
n !== r && ("function" == typeof n && n(null), "function" == typeof r && r(this.tag));
}
getSurfaceId() {
return this.tag;
}
getBounds() {
return this.surfaceBindings.getSurfaceBounds({
surfaceId: this.getSurfaceId()
});
}
getChildObjects() {
return this.children.map((e => e.getObject()));
}
manualUpdate(e) {
this.surfaceBindings.updateSurface({
surface: e,
surfaceId: this.tag
});
}
getObject() {
return {
id: this.tag,
...this.parsedProps,
children: this.getChildObjects()
};
}
commitUpdate(e) {
this.surfaceBindings.replaceUpdateSurface({
surfaceId: this.tag,
surface: e
});
}
commitMount() {
this.handleOnSurfaceId(void 0, this.props);
}
handleProps(e) {
return _g(this.surfaceBindings, e);
}
receiveProps(e) {
return this.handleOnSurfaceId(this.props, e), this.props = e, this.parsedProps = this.handleProps(e), 
this.parsedProps;
}
finalizeBeforeMount(e, t, n) {
return !!t.onSurfaceId;
}
finalizeBeforeRemoval() {
this.handleOnSurfaceId(this.props, void 0), this.children.forEach((e => {
e.finalizeBeforeRemoval();
})), this.children.length = 0, delete this.reconciler.surfaceByTag[this.tag];
}
appendChild(e) {
const t = this.children.indexOf(e);
t > -1 ? (this.children.splice(t, 1), this.children.push(e), this.nativeMoveChild(this.tag, t, this.children.length - 1)) : (e.parent = this, 
this.children.push(e), this.nativeInsertChildAt(this.tag, this.children.length - 1, e.getObject()));
}
appendChildBeforeMount(e) {
e instanceof bg ? (e.parent = this, this.children.push(e)) : console.error("Unknown child type inside '" + this.tag + "':", e);
}
insertBefore(e, t) {
const n = this.children.indexOf(e);
-1 !== n && this.children.splice(n, 1), e.parent = this;
const r = this.children.indexOf(t);
r > -1 && this.children.splice(r, 0, e), -1 !== n ? this.nativeMoveChild(this.tag, n, r) : this.nativeInsertChildAt(this.tag, r, e.getObject());
}
removeChild(e) {
if (e instanceof bg) {
e.finalizeBeforeRemoval();
const t = this.children.indexOf(e);
t > -1 && (this.children.splice(t, 1), this.nativeRemoveChild(this.tag, t)), e.parent === this && (e.parent = void 0);
} else console.error("Unknown child type inside '" + this.tag + "':", e);
}
}, Sg = {}, vg = 0;
function Tg() {
return vg++;
}
var Eg = is.queueMicrotask;
"function" != typeof Eg && (Eg = function(e) {
Promise.resolve().then(e).catch((e => setTimeout((() => {
throw e;
}), 0)));
});
var Pg = class {
constructor(e) {
this.surfaceBindings = e, this.rootId = void 0, this.surfaceByTag = {};
const t = this;
this.renderer = Qo({
createInstance(n, r, i, o, a) {
const s = "" + Tg();
return new bg(t, e, s, "surface" === n ? r : {});
},
appendInitialChild(e, t) {
e.appendChildBeforeMount(t);
},
finalizeInitialChildren: (e, t, n, r, i) => e.finalizeBeforeMount(t, n, r),
getPublicInstance: e => e,
prepareForCommit: e => null,
prepareUpdate: (e, t, n, r, i, o) => n === r ? null : e.receiveProps(r),
resetAfterCommit(e) {},
hideInstance(e) {},
unhideInstance(e, t) {},
getRootHostContext: e => Sg,
getChildHostContext: (e, t, n) => e,
scheduleTimeout: (e, t) => setTimeout(e, t),
cancelTimeout(e) {
clearTimeout(e);
},
scheduleMicrotask(e) {
Eg(e);
},
noTimeout: -1,
isPrimaryRenderer: !0,
supportsMutation: !0,
supportsPersistence: !1,
supportsHydration: !1,
warnsIfNotActing: !0,
appendChild(e, t) {
e.appendChild(t);
},
insertBefore(e, t, n) {
e.insertBefore(t, n);
},
appendChildToContainer(n, r) {
t.rootId = r.tag, e.createRootSurface({
surface: r.getObject()
});
},
insertInContainerBefore(e, t, n) {},
removeChild(e, t) {
e.removeChild(t);
},
removeChildFromContainer(e, n) {
t.rootId === n.tag && (t.rootId = void 0), n.finalizeBeforeRemoval();
},
commitUpdate(e, t, n, r, i, o) {
e.commitUpdate(t);
},
commitMount(e, t, n, r) {
e.commitMount();
},
preparePortalMount(e) {},
clearContainer(e) {},
createTextInstance: (n, r, i, o) => new bg(t, e, "" + Tg(), {}),
shouldSetTextContent: (e, t) => !1,
commitTextUpdate(e, t, n) {},
resetTextContent(e) {},
hideTextInstance(e) {},
unhideTextInstance(e, t) {},
supportsMicrotasks: !1,
getCurrentEventPriority: () => Zo.DefaultEventPriority,
getInstanceFromNode: e => null,
beforeActiveInstanceBlur() {},
afterActiveInstanceBlur() {},
prepareScopeUpdate(e, t) {},
getInstanceFromScope: e => null,
detachDeletedInstance(e) {
delete t.surfaceByTag[e.tag];
}
}), this.root = this.renderer.createContainer("Twinkle", Zo.LegacyRoot, null, !0, null, "", (e => {}), null);
}
getSurfaceById(e) {
return e ? this.surfaceByTag[e] : void 0;
}
measureText(e, t) {
const n = [];
Ig(e, n), Zc(this.surfaceBindings, n, !0);
const r = this.surfaceBindings.getTextMeasurements({
styleIds: n,
text: t
});
return {
width: r?.width ?? 0,
height: r?.height ?? 0
};
}
};
function Og(e, t) {
const {renderer: n, root: r} = e;
let i;
const o = new Promise((e => {
i = e;
}));
return n.updateContainer(t, r, null, (() => {
i?.();
})), o;
}
function Cg(e, t) {
const n = new Pg(e);
return t.setBatchCallback(n.renderer.batchedUpdates), e.onSurfaceBoundsChanged.subscribe((e => {
e.changes.forEach((({bounds: e, surfaceId: t}) => {
const r = n.getSurfaceById(t), i = r && r.props.onBounds;
i && i(e, t);
}));
})), n;
}
function Ng(e) {
is.originalSetTimeout = is.setTimeout, is.originalSetInterval = is.setInterval, 
is.originalClearTimeout = is.clearTimeout, is.originalClearInterval = is.clearInterval, 
is.originalPerformance = is.performance;
let t = 0;
const n = new Map;
is.setTimeout = function(r, i) {
const o = ++t;
return n.set(o, r), e.addTimeout({
timeoutMs: i
}, (() => {
const e = n.get(o);
e && (n.delete(o), e());
})), o;
}, is.setInterval = function(e, r) {
const i = ++t;
n.set(i, e);
const o = function() {
const e = n.get(i);
if (e) {
const t = Date.now();
e();
const n = Math.round(Date.now() - t);
setTimeout(o, Math.max(1, r - n));
}
};
return setTimeout(o, r), i;
}, is.clearInterval = function(e) {
n.delete(e);
}, is.clearTimeout = function(e) {
n.delete(e);
};
}
var Ag = 1;
function Lg(e) {
let t;
return Array.isArray(e) ? t = {
bezierPoints: {
p1x: e[0],
p1y: e[1],
p2x: e[2],
p2y: e[3]
},
type: fs.Tween.Easing.Bezier
} : e && (t = {
type: fs.Tween.Easing[e]
}), t;
}
var wg = class {
constructor(e, t) {
this.tweenApi = e, this.initialValue = t, this.hasTweened = !1, this.styleIds = {}, 
this.styleIdCallbacks = {};
}
create() {
return this.id || (this.id = "" + Ag++, this.tweenApi.createTween({
id: {
stringId: this.id
},
initialValue: {
floatValue: this.initialValue
}
}), wg.idToTween[this.id] = this), this.id;
}
setInitialValue(e) {
this.id ? this.hasTweened || (this.set(e), this.hasTweened = !1) : this.initialValue = e;
}
transition(e, t, n) {
const r = {
id: {
stringId: this.create()
},
from: void 0 !== e ? {
floatValue: e
} : void 0,
to: void 0 !== t ? {
floatValue: t
} : void 0,
duration: n.duration,
speed: n.speed,
easing: Lg(n.easing),
delay: n.delay,
delayValue: void 0 !== n.delayValue ? {
floatValue: n.delayValue
} : void 0,
loopCount: n.loopCount,
loopDelay: n.loopDelay,
rebound: n.rebound,
reboundDelay: n.reboundDelay
};
this.onFinishedCallback = n.onFinished, this.hasTweened = !0, this.tweenApi.updateTweens({
updates: [ r ]
});
}
to(e, t) {
this.transition(void 0, e, t);
}
set(e) {
this.to(e, {
duration: 0
});
}
propStyle(e) {
const t = this.styleIdCallbacks[e];
if (t) return t;
const n = () => {
const t = this.styleIds[e];
if (t) return t;
const n = this.create(), r = Qc({
[e]: n
});
return this.styleIds[e] = r, r;
};
return this.styleIdCallbacks[e] = n, n;
}
onTweenStatus(e) {
if (e === fs.Tween.TweenStatus.Finished) {
const e = this.onFinishedCallback;
e && (this.onFinishedCallback = void 0, e());
}
}
destroy() {
this.id && (delete wg.idToTween[this.id], this.tweenApi.destroyTween({
stringId: this.id
})), Object.keys(this.styleIds).forEach((e => {
$c(this.styleIds[e]);
}));
}
}, kg = wg;
kg.idToTween = {};
var Rg = class {
constructor(e) {
var t;
this.options = e, this.rootElementWrapper = e => e, this.debugHttp = {
onGet: zm,
onPost: jm
}, ed(), this.nativeApi = yg(this.options), this.bindings = new fs(this.nativeApi), 
this.bindings.registerBinding(), Ng(this.bindings.Utilities), (t = this.bindings).Http.onDebugHttpRequest.subscribe((({id: e, request: n}) => {
let r = "", i = "";
if (n.url.indexOf("?") > -1) {
const e = n.url.split("?", 2);
i = e[0], r = e[1];
} else i = n.url;
const o = {
connectionId: e,
...n,
uri: i,
query: new qm(r)
}, a = Jm.find((e => e.method === n.method && e.uri === i)), s = new Gm(t.Http, e);
if (a) try {
a.callback(o, s);
} catch (e) {
console.error("onDebugHttpRequest failed for " + n.url, e), s.send(500, e.message);
} else {
const e = "404 Not Found (sent by JavaScript). Ensure you have registered the correct HTTP method.";
s.send(404, e);
}
})), this.bindings.Tween.onTweenStatus.subscribe((e => {
e.id.stringId && kg.idToTween[e.id.stringId]?.onTweenStatus(e.status);
})), this.http = xh(this.bindings.Http), this.localStorage = new Km(this.bindings.KvStore), 
this.reconciler = Cg(this.bindings.Surface, this.nativeApi), this.texture = Bh.create(this.bindings.Texture), 
this.asset = Vm.create(this.bindings.Asset), this.inputHandler = new Wm(this.bindings.Input, this.bindings.Layout, this.reconciler);
}
loadFont(e, t) {
this.bindings.Utilities.loadFont({
name: e,
url: t
});
}
render(e) {
return Og(this.reconciler, this.rootElementWrapper(e));
}
}, xg = class {}, Bg = fs.Layout.LayoutMode;
var Dg = class {
constructor(e) {
this.http2 = e, this.connections = {};
}
getConnection(e, t) {
return this.connections[e] ? this.connections[e] : this.createConnection(e, t);
}
closeConnection(e) {
this.http2.closeHttp2Connection({
connectionId: e
});
for (const t in this.connections) if (this.connections[t] === e) {
delete this.connections[t];
break;
}
}
createConnection(e, t) {
const n = this.http2.createHttp2Connection({
baseUrl: e,
validateCertificate: t
});
if (void 0 === n?.connectionId) throw new Error("Failed to create connection");
return this.connections[e] = n.connectionId, n.connectionId;
}
}, Fg = "grpc-message", Mg = {
te: "trailers",
"content-type": "application/grpc"
};
function Ug(e) {
return Object.entries(e).map((([e, t]) => `${e}: ${t}\r\n`)).join("");
}
function Hg(e) {
const t = {};
return e.split("\r\n").forEach((e => {
if (!e) return;
const [n, r] = e.split(": ");
t[n] = r;
})), t;
}
var Vg = (e => (e[e.OK = 0] = "OK", e[e.CANCELLED = 1] = "CANCELLED", e[e.UNKNOWN = 2] = "UNKNOWN", 
e[e.INVALID_ARGUMENT = 3] = "INVALID_ARGUMENT", e[e.DEADLINE_EXCEEDED = 4] = "DEADLINE_EXCEEDED", 
e[e.NOT_FOUND = 5] = "NOT_FOUND", e[e.ALREADY_EXISTS = 6] = "ALREADY_EXISTS", e[e.PERMISSION_DENIED = 7] = "PERMISSION_DENIED", 
e[e.RESOURCE_EXHAUSTED = 8] = "RESOURCE_EXHAUSTED", e[e.FAILED_PRECONDITION = 9] = "FAILED_PRECONDITION", 
e[e.ABORTED = 10] = "ABORTED", e[e.OUT_OF_RANGE = 11] = "OUT_OF_RANGE", e[e.UNIMPLEMENTED = 12] = "UNIMPLEMENTED", 
e[e.INTERNAL = 13] = "INTERNAL", e[e.UNAVAILABLE = 14] = "UNAVAILABLE", e[e.DATA_LOSS = 15] = "DATA_LOSS", 
e[e.UNAUTHENTICATED = 16] = "UNAUTHENTICATED", e))(Vg || {});
function Jg(e) {
const t = e.reduce(((e, t) => e + t.length), 0), n = new Uint8Array(t);
let r = 0;
return e.forEach((e => {
n.set(e, r), r += e.length;
})), n;
}
function Gg(e, t, n, r, i) {
for (let o = 0; o < i - r; o++) e[t + o] = n[r + o];
}
function zg(e, t) {
for (let n = 0; n < e.length; n++) e[n] = t;
}
var jg = class {
constructor() {
this.state = 0, this.compressedFlagBuffer = new Uint8Array(1), this.messageLengthBuffer = new Uint8Array(4), 
this.messageLengthRemaining = 4, this.messageLength = 0, this.messageBuffers = [], 
this.messageRemaining = 0;
}
write(e) {
const t = [];
let n = 0, r = 0;
for (;n < e.length; ) switch (this.state) {
case 0:
Gg(this.compressedFlagBuffer, 0, e, n, n + 1), n++, this.state = 1, zg(this.messageLengthBuffer, 0), 
this.messageLengthRemaining = 4, this.messageLength = 0, this.messageRemaining = 0, 
this.messageBuffers = [];
break;

case 1:
if (r = Math.min(e.length - n, this.messageLengthRemaining), Gg(this.messageLengthBuffer, 4 - this.messageLengthRemaining, e, n, n + r), 
this.messageLengthRemaining -= r, n += r, 0 === this.messageLengthRemaining) {
if (this.messageLength = (i = this.messageLengthBuffer, new DataView(i.buffer, 0, 4).getUint32(0, !1)), 
this.messageRemaining = this.messageLength, 0 === this.messageRemaining) {
const e = Jg([ this.compressedFlagBuffer, this.messageLengthBuffer ]);
t.push(e), this.state = 0;
break;
}
this.state = 2;
}
break;

case 2:
if (r = Math.min(e.length - n, this.messageRemaining), this.messageBuffers.push(e.subarray(n, n + r)), 
this.messageRemaining -= r, n += r, 0 === this.messageRemaining) {
const e = Jg([ this.compressedFlagBuffer, this.messageLengthBuffer ].concat(this.messageBuffers));
t.push(e), this.state = 0;
}
break;

default:
throw new Error("Unexpected decoder state");
}
var i;
return t;
}
};
function qg(e) {
const t = new as;
return t.start = () => {
const n = e();
n.onError((e => t.error.trigger(e))), n.onEnd((() => t.end.trigger())), n.onData((e => t.data.trigger(e)));
}, t;
}
var Yg = class {
constructor(e, t, n, r, i, o) {
this.http2 = e, this.connectionId = t, this.serializer = n, this.deserializer = r, 
this.decoder = new jg, this.receivedMetadata = {}, this.streamId = this.openStream(i, o ?? {}), 
this.unsubscribes = [ e.onRequestData.subscribe((e => {
if (this.isRelevantEvent(e)) {
this.decoder.write(e.data).forEach((e => {
const t = this.decodeMessage(e);
this.dataCallback?.(t);
}));
}
})), e.onRequestHeaders.subscribe((e => {
if (this.isRelevantEvent(e)) {
const t = Hg(String.fromCharCode.apply(null, Array.from(e.headerData)));
Object.entries(t).forEach((([e, t]) => {
e in this.receivedMetadata || (e.endsWith("-bin"), this.receivedMetadata[e] = t);
}));
}
})), e.onRequestError.subscribe((e => {
this.isRelevantEvent(e) && (this.errorCallback?.(new Error(e.error)), this.cleanup());
})), e.onRequestEnd.subscribe((e => {
if (this.isRelevantEvent(e)) {
const e = {
status: this.getGrpcStatus(),
message: this.getGrpcMessage(),
metadata: this.receivedMetadata
};
if (0 === e.status) this.endCallback?.(e); else {
const t = `Grpc error received for ${i} (status = ${e.status}, message = ${e.message})`;
this.errorCallback?.(new Error(t), e);
}
this.cleanup();
}
})) ];
}
onData(e) {
this.dataCallback = e;
}
onError(e) {
this.errorCallback = e;
}
onEnd(e) {
this.endCallback = e;
}
write(e) {
this.sendData(this.encodeMessage(e));
}
endTransmission() {
this.signalEndOfTransmission();
}
isRelevantEvent({connectionId: e, streamId: t}) {
return e === this.connectionId && t === this.streamId;
}
openStream(e, t) {
const n = Ug({
...t,
...Mg
}), r = this.http2.openStream({
connectionId: this.connectionId,
requestType: fs.Http2.RequestType.Post,
relativeUrl: e,
customHeaders: n
});
if (!r) throw new Error("Failed to open stream");
return r.streamId;
}
sendData(e) {
this.http2.sendData({
connectionId: this.connectionId,
streamId: this.streamId,
data: e
});
}
signalEndOfTransmission() {
this.http2.signalEndOfTransmission({
connectionId: this.connectionId,
streamId: this.streamId
});
}
encodeMessage(e) {
const t = this.serializer.encode(e).finish(), n = new Uint8Array(5 + t.length);
return n[0] = 0, new DataView(n.buffer).setUint32(1, t.length, !1), n.set(t, 5), 
n;
}
decodeMessage(e) {
return this.deserializer.decode(e.subarray(5));
}
getGrpcStatus() {
const e = Number(this.receivedMetadata["grpc-status"]);
return Vg[e] ? e : 2;
}
getGrpcMessage() {
if (Fg in this.receivedMetadata) return decodeURI(this.receivedMetadata["grpc-message"]);
}
cleanup() {
this.unsubscribes.forEach((e => e())), this.unsubscribes.length = 0;
}
}, Wg = class {
constructor(e, t, n, r) {
this.http2 = e, this.baseUrl = t, this.validateCertificate = n, this.getMetadata = r, 
this.connectionProvider = new Dg(this.http2);
}
get metadata() {
return this.getMetadata?.();
}
makeUnaryRequest(e, t, n, r, i) {
return new Promise(((o, a) => {
try {
const s = this.createStream(e, t, n, {
...this.metadata,
...i
});
let l = null;
s.onData((e => {
null !== l && a(new Error("Too many responses received")), l = e;
})), s.onError(a), s.onEnd((() => {
null !== l ? o(l) : a(new Error("Stream closed without a response"));
})), s.write(r), s.endTransmission();
} catch (e) {
a(e);
}
}));
}
makeServerStreamingRequest(e, t, n, r, i) {
const o = this.createStream(e, t, n, {
...this.metadata,
...i
});
return o.write(r), o.endTransmission(), o;
}
makeClientStreamingRequest(e, t, n, r) {
return this.createStream(e, t, n, {
...this.metadata,
...r
});
}
makeBidirectionalStreamingRequest(e, t, n, r) {
return this.createStream(e, t, n, {
...this.metadata,
...r
});
}
createStream(e, t, n, r) {
return void 0 === this.connectionId && (this.connectionId = this.connectionProvider.getConnection(this.baseUrl, this.validateCertificate)), 
new Yg(this.http2, this.connectionId, t, n, e, r);
}
};
function Kg(e) {
return "object" == typeof e && null !== e && "telemetryId" in e;
}
var Xg = class {
constructor(e, t) {
this.path = e, this.telemetryId = t;
}
link(...e) {
return {
pathname: (t = this.path, n = e[0], void 0 === t && (t = "/"), void 0 === n && (n = {}), 
"/" === t ? t : wo(t)(n, {
pretty: !0
})),
state: this
};
var t, n;
}
createSubRoute(e, t) {
return new Xg(`${this.path}${e}`, t);
}
useParams() {
return Yo();
}
static create(e, t) {
return new Xg(e, t);
}
static getFromLocation({state: e}) {
if (Kg(e)) return e;
}
};
function Qg(e, t) {
return Xg.create(e, t);
}
var $g = Qg("/friends/:photonPlayerId?/:photonSessionId?", "tab_friends"), Zg = Qg("/friend-requests/:photonPlayerId?", "tab_friend_requests");
var ey = {
encode: (e, t = ns.Writer.create()) => ("" !== e.platform && t.uint32(10).string(e.platform), 
"" !== e.titleId && t.uint32(18).string(e.titleId), "" !== e.titleIdType && t.uint32(26).string(e.titleIdType), 
"" !== e.triggerId && t.uint32(34).string(e.triggerId), "" !== e.locale && t.uint32(42).string(e.locale), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
platform: "",
titleId: "",
titleIdType: "",
triggerId: "",
locale: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.platform = n.string();
break;

case 2:
i.titleId = n.string();
break;

case 3:
i.titleIdType = n.string();
break;

case 4:
i.triggerId = n.string();
break;

case 5:
i.locale = n.string();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
platform: "",
titleId: "",
titleIdType: "",
triggerId: "",
locale: ""
};
return t.platform = e.platform ?? "", t.titleId = e.titleId ?? "", t.titleIdType = e.titleIdType ?? "", 
t.triggerId = e.triggerId ?? "", t.locale = e.locale ?? "", t;
}
};
var ty = {
encode: (e, t = ns.Writer.create()) => ("" !== e.id && t.uint32(10).string(e.id), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
id: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.id = n.string(); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
id: ""
};
return t.id = e.id ?? "", t;
}
};
var ny = {
encode: (e, t = ns.Writer.create()) => ("" !== e.id && t.uint32(10).string(e.id), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
id: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.id = n.string(); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
id: ""
};
return t.id = e.id ?? "", t;
}
};
var ry = {
encode: (e, t = ns.Writer.create()) => (0 !== e.totalSize && t.uint32(8).int32(e.totalSize), 
0 !== e.pageSize && t.uint32(16).int32(e.pageSize), 0 !== e.offset && t.uint32(24).int32(e.offset), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
totalSize: 0,
pageSize: 0,
offset: 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.totalSize = n.int32();
break;

case 2:
i.pageSize = n.int32();
break;

case 3:
i.offset = n.int32();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
totalSize: 0,
pageSize: 0,
offset: 0
};
return t.totalSize = e.totalSize ?? 0, t.pageSize = e.pageSize ?? 0, t.offset = e.offset ?? 0, 
t;
}
};
var iy = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.playerId && ty.encode(e.playerId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.personaId && ny.encode(e.personaId, t.uint32(18).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
playerId: void 0,
personaId: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.playerId = ty.decode(n, n.uint32());
break;

case 2:
i.personaId = ny.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
playerId: void 0,
personaId: void 0
};
return t.playerId = void 0 !== e.playerId && null !== e.playerId ? ty.fromPartial(e.playerId) : void 0, 
t.personaId = void 0 !== e.personaId && null !== e.personaId ? ny.fromPartial(e.personaId) : void 0, 
t;
}
};
var oy = {
encode: (e, t = ns.Writer.create()) => (0 !== e.seconds && t.uint32(8).int64(e.seconds), 
0 !== e.nanos && t.uint32(16).int32(e.nanos), t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
seconds: 0,
nanos: 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.seconds = Number(n.int64());
break;

case 2:
i.nanos = n.int32();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
seconds: 0,
nanos: 0
};
return t.seconds = e.seconds ?? 0, t.nanos = e.nanos ?? 0, t;
}
};
var ay = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && iy.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.recommendationEngineRequest && ey.encode(e.recommendationEngineRequest, t.uint32(18).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
recommendationEngineRequest: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = iy.decode(n, n.uint32());
break;

case 2:
i.recommendationEngineRequest = ey.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
recommendationEngineRequest: void 0
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? iy.fromPartial(e.entityId) : void 0, 
t.recommendationEngineRequest = void 0 !== e.recommendationEngineRequest && null !== e.recommendationEngineRequest ? ey.fromPartial(e.recommendationEngineRequest) : void 0, 
t;
}
};
var sy = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.friendRecommendation && dy.encode(e.friendRecommendation, t.uint32(10).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
friendRecommendation: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.friendRecommendation = dy.decode(n, n.uint32()); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
friendRecommendation: void 0
};
return t.friendRecommendation = void 0 !== e.friendRecommendation && null !== e.friendRecommendation ? dy.fromPartial(e.friendRecommendation) : void 0, 
t;
}
};
var ly = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && iy.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.targetEntityId && iy.encode(e.targetEntityId, t.uint32(18).fork()).ldelim(), 
void 0 !== e.recommendationTracking && fy.encode(e.recommendationTracking, t.uint32(26).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
targetEntityId: void 0,
recommendationTracking: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = iy.decode(n, n.uint32());
break;

case 2:
i.targetEntityId = iy.decode(n, n.uint32());
break;

case 3:
i.recommendationTracking = fy.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
targetEntityId: void 0,
recommendationTracking: void 0
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? iy.fromPartial(e.entityId) : void 0, 
t.targetEntityId = void 0 !== e.targetEntityId && null !== e.targetEntityId ? iy.fromPartial(e.targetEntityId) : void 0, 
t.recommendationTracking = void 0 !== e.recommendationTracking && null !== e.recommendationTracking ? fy.fromPartial(e.recommendationTracking) : void 0, 
t;
}
};
var cy = {
encode: (e, t = ns.Writer.create()) => t,
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {};
for (;n.pos < r; ) {
const e = n.uint32();
n.skipType(7 & e);
}
return i;
},
fromPartial: e => ({})
};
var dy = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && iy.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.recommendationReason && uy.encode(e.recommendationReason, t.uint32(18).fork()).ldelim(), 
void 0 !== e.recommendationTracking && fy.encode(e.recommendationTracking, t.uint32(26).fork()).ldelim(), 
void 0 !== e.createTime && oy.encode(e.createTime, t.uint32(34).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
recommendationReason: void 0,
recommendationTracking: void 0,
createTime: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = iy.decode(n, n.uint32());
break;

case 2:
i.recommendationReason = uy.decode(n, n.uint32());
break;

case 3:
i.recommendationTracking = fy.decode(n, n.uint32());
break;

case 4:
i.createTime = oy.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
recommendationReason: void 0,
recommendationTracking: void 0,
createTime: void 0
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? iy.fromPartial(e.entityId) : void 0, 
t.recommendationReason = void 0 !== e.recommendationReason && null !== e.recommendationReason ? uy.fromPartial(e.recommendationReason) : void 0, 
t.recommendationTracking = void 0 !== e.recommendationTracking && null !== e.recommendationTracking ? fy.fromPartial(e.recommendationTracking) : void 0, 
t.createTime = void 0 !== e.createTime && null !== e.createTime ? oy.fromPartial(e.createTime) : void 0, 
t;
}
};
var uy = {
encode(e, t = ns.Writer.create()) {
for (const n of e.mutualFriends) iy.encode(n, t.uint32(10).fork()).ldelim();
return Object.entries(e.additionalContext).forEach((([e, n]) => {
py.encode({
key: e,
value: n
}, t.uint32(18).fork()).ldelim();
})), t;
},
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
mutualFriends: [],
additionalContext: {}
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.mutualFriends.push(iy.decode(n, n.uint32()));
break;

case 2:
const t = py.decode(n, n.uint32());
void 0 !== t.value && (i.additionalContext[t.key] = t.value);
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
mutualFriends: [],
additionalContext: {}
};
return t.mutualFriends = e.mutualFriends?.map((e => iy.fromPartial(e))) || [], t.additionalContext = Object.entries(e.additionalContext ?? {}).reduce(((e, [t, n]) => (void 0 !== n && (e[t] = String(n)), 
e)), {}), t;
}
};
var py = {
encode: (e, t = ns.Writer.create()) => ("" !== e.key && t.uint32(10).string(e.key), 
"" !== e.value && t.uint32(18).string(e.value), t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
key: "",
value: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.key = n.string();
break;

case 2:
i.value = n.string();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
key: "",
value: ""
};
return t.key = e.key ?? "", t.value = e.value ?? "", t;
}
};
var fy = {
encode: (e, t = ns.Writer.create()) => ("" !== e.trackingTag && t.uint32(10).string(e.trackingTag), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
trackingTag: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.trackingTag = n.string(); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
trackingTag: ""
};
return t.trackingTag = e.trackingTag ?? "", t;
}
};
var hy = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.id && iy.encode(e.id, t.uint32(10).fork()).ldelim(), 
"" !== e.displayName && t.uint32(18).string(e.displayName), "" !== e.nickname && t.uint32(26).string(e.nickname), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
id: void 0,
displayName: "",
nickname: ""
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.id = iy.decode(n, n.uint32());
break;

case 2:
i.displayName = n.string();
break;

case 3:
i.nickname = n.string();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
id: void 0,
displayName: "",
nickname: ""
};
return t.id = void 0 !== e.id && null !== e.id ? iy.fromPartial(e.id) : void 0, 
t.displayName = e.displayName ?? "", t.nickname = e.nickname ?? "", t;
}
};
var my = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entity && hy.encode(e.entity, t.uint32(10).fork()).ldelim(), 
void 0 !== e.createTime && oy.encode(e.createTime, t.uint32(18).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entity: void 0,
createTime: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entity = hy.decode(n, n.uint32());
break;

case 2:
i.createTime = oy.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entity: void 0,
createTime: void 0
};
return t.entity = void 0 !== e.entity && null !== e.entity ? hy.fromPartial(e.entity) : void 0, 
t.createTime = void 0 !== e.createTime && null !== e.createTime ? oy.fromPartial(e.createTime) : void 0, 
t;
}
};
var gy = {
encode(e, t = ns.Writer.create()) {
void 0 !== e.entityId && iy.encode(e.entityId, t.uint32(10).fork()).ldelim();
for (const n of e.targetEntityIds) iy.encode(n, t.uint32(18).fork()).ldelim();
return t;
},
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
targetEntityIds: []
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = iy.decode(n, n.uint32());
break;

case 2:
i.targetEntityIds.push(iy.decode(n, n.uint32()));
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
targetEntityIds: []
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? iy.fromPartial(e.entityId) : void 0, 
t.targetEntityIds = e.targetEntityIds?.map((e => iy.fromPartial(e))) || [], t;
}
};
var yy = {
encode(e, t = ns.Writer.create()) {
for (const n of e.status) Iy.encode(n, t.uint32(10).fork()).ldelim();
return t;
},
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
status: []
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.status.push(Iy.decode(n, n.uint32())); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
status: []
};
return t.status = e.status?.map((e => Iy.fromPartial(e))) || [], t;
}
};
var Iy = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && iy.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
!0 === e.isFavorite && t.uint32(16).bool(e.isFavorite), t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
isFavorite: !1
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = iy.decode(n, n.uint32());
break;

case 2:
i.isFavorite = n.bool();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
isFavorite: !1
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? iy.fromPartial(e.entityId) : void 0, 
t.isFavorite = e.isFavorite ?? !1, t;
}
};
var _y = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && iy.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.pageInfo && ry.encode(e.pageInfo, t.uint32(18).fork()).ldelim(), 0 !== e.view && t.uint32(24).int32(e.view), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
pageInfo: void 0,
view: 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = iy.decode(n, n.uint32());
break;

case 2:
i.pageInfo = ry.decode(n, n.uint32());
break;

case 3:
i.view = n.int32();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
pageInfo: void 0,
view: 0
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? iy.fromPartial(e.entityId) : void 0, 
t.pageInfo = void 0 !== e.pageInfo && null !== e.pageInfo ? ry.fromPartial(e.pageInfo) : void 0, 
t.view = e.view ?? 0, t;
}
};
var by = {
encode(e, t = ns.Writer.create()) {
for (const n of e.friends) my.encode(n, t.uint32(10).fork()).ldelim();
return void 0 !== e.pageInfo && ry.encode(e.pageInfo, t.uint32(18).fork()).ldelim(), 
t;
},
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
friends: [],
pageInfo: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.friends.push(my.decode(n, n.uint32()));
break;

case 2:
i.pageInfo = ry.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
friends: [],
pageInfo: void 0
};
return t.friends = e.friends?.map((e => my.fromPartial(e))) || [], t.pageInfo = void 0 !== e.pageInfo && null !== e.pageInfo ? ry.fromPartial(e.pageInfo) : void 0, 
t;
}
};
var Sy = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && iy.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.targetEntityId && iy.encode(e.targetEntityId, t.uint32(18).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
targetEntityId: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = iy.decode(n, n.uint32());
break;

case 2:
i.targetEntityId = iy.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
targetEntityId: void 0
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? iy.fromPartial(e.entityId) : void 0, 
t.targetEntityId = void 0 !== e.targetEntityId && null !== e.targetEntityId ? iy.fromPartial(e.targetEntityId) : void 0, 
t;
}
};
var vy = {
encode: (e, t = ns.Writer.create()) => t,
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {};
for (;n.pos < r; ) {
const e = n.uint32();
n.skipType(7 & e);
}
return i;
},
fromPartial: e => ({})
};
var Ty = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && iy.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
void 0 !== e.targetEntityId && iy.encode(e.targetEntityId, t.uint32(18).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
targetEntityId: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = iy.decode(n, n.uint32());
break;

case 2:
i.targetEntityId = iy.decode(n, n.uint32());
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
targetEntityId: void 0
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? iy.fromPartial(e.entityId) : void 0, 
t.targetEntityId = void 0 !== e.targetEntityId && null !== e.targetEntityId ? iy.fromPartial(e.targetEntityId) : void 0, 
t;
}
};
var Ey = {
encode: (e, t = ns.Writer.create()) => t,
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {};
for (;n.pos < r; ) {
const e = n.uint32();
n.skipType(7 & e);
}
return i;
},
fromPartial: e => ({})
};
var Py = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.entityId && iy.encode(e.entityId, t.uint32(10).fork()).ldelim(), 
0 !== e.view && t.uint32(16).int32(e.view), t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
entityId: void 0,
view: 0
};
for (;n.pos < r; ) {
const e = n.uint32();
switch (e >>> 3) {
case 1:
i.entityId = iy.decode(n, n.uint32());
break;

case 2:
i.view = n.int32();
break;

default:
n.skipType(7 & e);
}
}
return i;
},
fromPartial(e) {
const t = {
entityId: void 0,
view: 0
};
return t.entityId = void 0 !== e.entityId && null !== e.entityId ? iy.fromPartial(e.entityId) : void 0, 
t.view = e.view ?? 0, t;
}
};
var Oy = {
encode: (e, t = ns.Writer.create()) => (void 0 !== e.favoriteFriends && my.encode(e.favoriteFriends, t.uint32(10).fork()).ldelim(), 
t),
decode(e, t) {
const n = e instanceof ns.Reader ? e : new ns.Reader(e);
let r = void 0 === t ? n.len : n.pos + t;
const i = {
favoriteFriends: void 0
};
for (;n.pos < r; ) {
const e = n.uint32();
if (e >>> 3 == 1) i.favoriteFriends = my.decode(n, n.uint32()); else n.skipType(7 & e);
}
return i;
},
fromPartial(e) {
const t = {
favoriteFriends: void 0
};
return t.favoriteFriends = void 0 !== e.favoriteFriends && null !== e.favoriteFriends ? my.fromPartial(e.favoriteFriends) : void 0, 
t;
}
}, Cy = class {
makeUnaryRequest(e, t, n, r, i) {
return e.makeUnaryRequest(t, n, r, i);
}
makeServerStreamingRequest(e, t, n, r, i) {
return qg((() => e.makeServerStreamingRequest(t, n, r, i)));
}
}, Ny = class extends Cy {
constructor(e) {
super(), this.grpcClients = e, this.FriendRecommendations = {
ListFriendRecommendationsStreaming: e => this.makeServerStreamingRequest(this.grpcClients.FriendRecommendations, "/eadp.friendrecommendations.v1.FriendRecommendations/ListFriendRecommendationsStreaming", ay, sy, ay.fromPartial(e)),
DismissFriendRecommendation: e => this.makeUnaryRequest(this.grpcClients.FriendRecommendations, "/eadp.friendrecommendations.v1.FriendRecommendations/DismissFriendRecommendation", ly, cy, ly.fromPartial(e))
}, this.Favorites = {
VerifyFavoriteFriends: e => this.makeUnaryRequest(this.grpcClients.Favorites, "/eadp.friends.v1.Favorites/VerifyFavoriteFriends", gy, yy, gy.fromPartial(e)),
ListFavoriteFriends: e => this.makeUnaryRequest(this.grpcClients.Favorites, "/eadp.friends.v1.Favorites/ListFavoriteFriends", _y, by, _y.fromPartial(e)),
CreateFavoriteFriend: e => this.makeUnaryRequest(this.grpcClients.Favorites, "/eadp.friends.v1.Favorites/CreateFavoriteFriend", Sy, vy, Sy.fromPartial(e)),
UnfavoriteFriend: e => this.makeUnaryRequest(this.grpcClients.Favorites, "/eadp.friends.v1.Favorites/UnfavoriteFriend", Ty, Ey, Ty.fromPartial(e)),
ListFavoriteFriendsStreaming: e => this.makeServerStreamingRequest(this.grpcClients.Favorites, "/eadp.friends.v1.Favorites/ListFavoriteFriendsStreaming", Py, Oy, Py.fromPartial(e))
};
}
};
function Ay(e, t, n, r) {
return new Wg(e.bindings.Http2, Bs.includes(Fs.environment) ? t : n, !0, r);
}
function Ly(e, t) {
return {
FriendRecommendations: Ay(e, "https://friend-recommendations.k.social.ea.com", "https://friend-recommendations-int.k.social.ea.com", t),
Favorites: Ay(e, "https://friends.social.ea.com:443", "https://friends-int.social.ea.com:443", t)
};
}
function wy(e, t) {
function n(e, n) {
t.addDurationEvent("query", n, e);
}
function r(e, n, r) {
t.addDurationEvent("query_error", n, e, r);
}
const i = e.makeUnaryRequest.bind(e), o = e.makeServerStreamingRequest.bind(e);
return e.makeUnaryRequest = async function(e, t, o, a, s) {
const l = performance.now();
let c, d;
try {
c = await i(e, t, o, a, s);
} catch (e) {
d = e;
}
const u = performance.now() - l;
return d ? r(t, u, d.message) : n(t, u), c ?? Promise.reject(d);
}, e.makeServerStreamingRequest = function(e, t, i, a, s) {
const l = performance.now(), c = o(e, t, i, a, s);
c.error.subscribe((e => {
const n = performance.now();
r(t, n - l, e.message);
}));
const d = c.end.subscribe((() => {
const e = performance.now();
n(t, e - l), d();
}));
return c;
}, e;
}
var [ky, Ry] = Pl({
debugName: "photonGrpcApi"
}), xy = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", By = xy.length;
function Dy(e = 16) {
let t = "";
for (let n = 0; n < e; n++) t += xy.charAt(Math.floor(Math.random() * By));
return t;
}
function Fy(e, t = 100) {
let n;
if (e.length > t) {
const r = e.length - t;
n = e.slice(0, Math.ceil(t / 2)).join("\n"), n += `\n< ...truncated ${r} lines... >\n`, 
n += e.slice(-Math.floor(t / 2)).join("\n");
} else n = e.join("\n");
return n.trim();
}
function My(e) {
let t, n = 0;
if (!e || !e.length) return n;
for (let r = 0; r < e.length; r++) t = e.charCodeAt(r), n = (n << 5) - n + t, n |= 0;
return n;
}
var Uy = /^\s*at (.*?) \((.*?)(:(\d*)){0,1}\)\s*$/;
function Hy(e) {
const t = e.stack?.split("\n") || [], n = [];
for (const e of t) {
const t = e.match(Uy);
if (t) {
const e = "<anonymous>" === t[1] ? null : t[1], r = t[2], i = t[4];
if ("native" === r) continue;
n.push((e ? e + "@" : "") + r + ":" + i);
}
}
return {
mode: "stack",
name: e.name,
message: e.message,
stackString: Fy(t),
canonicalStackLines: n,
hash: My(n.join("\n"))
};
}
function Vy() {
return Bs.includes(Fs.environment) ? "a96becb9a8b3560fdf2e300f973704b7950eNRAL" : "75dba3e62eb4ccde896a7ec21f6e0177dd84NRAL";
}
function Jy() {
return Bs.includes(Fs.environment) ? {
accountId: 3594946,
licenseKey: "NRJS-f484133221051994cfd",
applicationId: 1588662197
} : {
accountId: 3594950,
licenseKey: "NRJS-9c2d1c3b2e3c0951a7f",
applicationId: 1588662197
};
}
var Gy = "https://insights-collector.newrelic.com", {accountId: zy, applicationId: jy, licenseKey: qy} = Jy(), {environment: Yy, devicePlatformId: Wy, locale: Ky, productId: Xy} = Fs;
async function Qy(e, t, n) {
if (!e || "dev" === e) return;
const r = `${Gy}/v1/accounts/${zy}/events`;
return await t(r, n, {
"Api-Key": e,
"content-type": "application/json"
});
}
var $y = new Set;
async function Zy(e, t, n, r = "/") {
if (!e || "dev" === e) return;
const i = Hy(n);
if ("prod" === Fs.environment && $y.has(i.hash)) return;
$y.add(i.hash);
const o = {
err: [ {
params: {
message: i.message,
stackHash: i.hash,
exceptionClass: i.name,
request_uri: r,
stack_trace: i.stackString,
releaseIds: "{}",
pageview: 1
},
custom: {
build: "main_53810",
app: Xy,
env: Yy,
platform: Wy.toLowerCase(),
locale: Ky
},
metrics: {
count: 1
}
} ]
}, a = `https://bam-cell.nr-data.net/jserrors/1/${qy}`, s = [ "a=" + jy, "v=main_53810", "rst=" + Date.now(), "ref=" + r, "t=Unnamed%20Transaction", "ck=0", "sa=1" ].join("&");
await t(a + "?" + s, JSON.stringify(o), {
"Api-Key": e,
"content-type": "text/plain"
});
}
var eI = [ 500, 501, 503, 429 ], {accountId: tI, applicationId: nI} = Jy(), rI = "metric-deviceId", iI = class {
constructor(e, t) {
this.httpPost = e, this.kvstore = t, this.enabled = !0, this.bootEndCount = 0, this.MAX_BACKOFF_COUNTER = 6, 
this.FLUSH_INTERVAL_IN_MS = 6e4, this.queuedMetrics = [], this.sentPayloads = [], 
this.queueSize = 0, this.maxQueueSize = 2e4, this.nextSendAt = 0, this.backoffCounter = 1, 
this.sessionMetrics = new Set, this.timedMetrics = new Map;
}
get deviceId() {
return this._deviceId || (this._deviceId = this.kvstore.getStringSync({
key: rI
})?.value, 32 !== this._deviceId?.length && (this._deviceId = Dy(32), this.kvstore.setString({
key: rI,
value: this._deviceId
}))), this._deviceId;
}
initBootEndListener(e) {
e.subscribe((() => {
this.bootEndCount++;
}));
}
clearDebug() {
this.sentPayloads = [], this.timedMetrics = new Map, this.sessionMetrics = new Set, 
this.clearQueue();
}
refreshSession() {
this.sessionMetrics.clear();
}
setMetricsEnabled(e) {
this.enabled = e, e || (this.clearQueue(), this.clearTimer());
}
get generalInformation() {
return {
deviceId: this.deviceId,
accountId: tI,
appId: nI,
eventType: "photonMetric",
productId: Fs.productId,
platform: Fs.devicePlatformId,
env: Fs.environment,
bundle: "main_53810",
game: Fs.gameVersion,
locale: Fs.locale,
bootEndCount: this.bootEndCount
};
}
startTimer(e) {
if (this.timedMetrics.has(e)) return !1;
this.timedMetrics.set(e, Date.now());
}
stopTimer(e) {
if (!this.timedMetrics.has(e)) return !1;
const t = this.timedMetrics.get(e);
if (t) {
this.timedMetrics.delete(e);
const n = Date.now() - t;
this.addEvent({
metric: e,
duration: n
});
}
}
addSessionEvent(e, t) {
this.sessionMetrics.has(e) || (this.sessionMetrics.add(e), this.addEvent({
metric: e,
value: t
}));
}
addCountEvent(e, t = 1, n) {
this.addEvent({
metric: e,
value: t,
message: n
});
}
addDurationEvent(e, t, n, r) {
this.addEvent({
metric: e,
value: n,
duration: t,
message: r
});
}
addEvent(e) {
if (!this.enabled) return;
const t = {
...this.generalInformation,
...e
}, n = JSON.stringify(t);
this.queueSize += n.length, this.startFlushTimer(), this.queuedMetrics.push(n), 
this.queueSize > this.maxQueueSize && this.flushQueue();
}
async flushQueue() {
if (0 === this.queuedMetrics.length) return;
if (this.backoffCounter > this.MAX_BACKOFF_COUNTER) return this.clearQueue(), void this.clearTimer();
const e = [ ...this.queuedMetrics ];
this.clearQueue(), await this.postEvents(e);
}
clearQueue() {
this.queuedMetrics.length = 0, this.queueSize = 0, this.clearTimer();
}
startFlushTimer() {
if (!this.nextSendTimeout) {
const e = this.FLUSH_INTERVAL_IN_MS * this.backoffCounter;
this.nextSendAt = Date.now() + e, this.nextSendTimeout = setTimeout((() => {
this.clearTimer(), this.flushQueue();
}), e);
}
}
clearTimer() {
this.nextSendTimeout && (clearTimeout(this.nextSendTimeout), this.nextSendTimeout = void 0, 
this.nextSendAt = 0);
}
generatePayload(e) {
return `[${e.join(",")}]`;
}
async postEvents(e) {
const t = this.generatePayload(e);
try {
const e = await Qy(Vy(), this.httpPost, t);
!e || eI.includes(e.statusCode) ? this.backoffCounter++ : this.backoffCounter = 1;
} catch (e) {
this.backoffCounter++;
}
}
}, [oI, aI] = El({
debugName: "metricClientState",
create: e => {
const t = e.get(zh);
return new iI(t.http.post, t.bindings.KvStore);
}
}), [sI] = Pl({
debugName: "photonBindingsState"
});
async function lI(e, t) {
await Zy(Vy(), e.http.post, t);
}
function cI() {
const e = $p();
return H.useCallback((async t => lI(e, t)), [ e ]);
}
function dI(e) {
return null != e;
}
function uI(e) {
return "hasData" in e;
}
function pI(e) {
return [ [ qI, {
loading: e.loading,
error: e.error,
uninitialized: e.skipped,
data: e.data
} ] ];
}
function fI(e) {
return {
loading: e.loading,
error: e.error,
uninitialized: e.skipped,
data: [ [ qI, {
loading: e.loading,
error: e.error,
uninitialized: e.skipped,
data: e.data
} ] ]
};
}
function hI(e) {
let t, n = !0, r = !1, i = !1;
return e.forEach((e => {
var o;
n = n && (uI(o = e) ? o.hasData : void 0 !== o.data), t = t || e.error, r = r || e.loading, 
i = i || !!e.uninitialized;
})), {
hasData: n,
error: t,
loading: r,
uninitialized: i
};
}
function mI(e) {
const t = [];
return e.forEach((e => {
e.data && t.push(e.data);
})), t;
}
function gI(e) {
return {
...hI(e),
data: mI(e)
};
}
async function yI(e, t = 1e3, n) {
const r = hr((() => void 0 !== e.data || !!e.error && !e.loading), {
timeout: t
});
n?.add(r.cancel);
try {
await r;
} catch (e) {}
return n?.delete(r.cancel), nl((() => e.toProps()));
}
async function II(e, t = 1e3, n) {
const r = hr((() => {
const t = hI(e);
return t.hasData || !!t.error && !t.loading && !t.uninitialized;
}), {
timeout: t
});
n?.add(r.cancel);
try {
await r;
} catch (e) {}
return n?.delete(r.cancel), nl((() => gI(e)));
}
function _I() {
const e = H.useRef({
disposers: new Set,
isMounted: !0
});
return H.useEffect((() => {
const t = e.current;
return () => {
t.isMounted = !1, t.disposers.forEach((e => e()));
};
}), []), e;
}
function bI() {
const e = _I();
return H.useCallback(((t, n) => {
if (e.current.isMounted) return yI(t, n, e.current.disposers);
}), [ e ]);
}
function SI() {
const e = _I();
return H.useCallback(((t, n) => {
if (e.current.isMounted) return II(t, n, e.current.disposers);
}), [ e ]);
}
function vI(e, t) {
return e.loading === t.loading && e.uninitialized === t.uninitialized && e.timestamp === t.timestamp && e.error === t.error && Le.structural(e.data, t.data);
}
function TI() {
return !1;
}
var EI = class {
constructor(e, t) {
this.id = e, this.props = mt.box(t, {
deep: !1,
equals: TI
});
}
update(e) {
this.props.set({
...e,
timestamp: Date.now()
});
}
get data() {
return this.props.get().data;
}
get loading() {
return this.props.get().loading;
}
get uninitialized() {
return this.props.get().uninitialized;
}
get error() {
return this.props.get().error;
}
get timestamp() {
return this.props.get().timestamp;
}
toProps() {
return {
...this.props.get()
};
}
invalidateTimestamp() {
nl((() => {
const e = this.props.get();
-1 !== e.timestamp && this.props.set({
...e,
timestamp: -1
});
}));
}
onBecomeObserved(e) {
return Fn(this.props, e);
}
onBecomeUnobserved(e) {
return Mn(this.props, e);
}
isBeingObserved() {
return ri(this.props)?.isBeingObserved_ || !1;
}
observe(e) {
return or(this.props, (t => {
e(t);
}));
}
}, PI = class {
constructor(e, t) {
this.id = e, this.source = t, this.computedProps = _t((() => t()), {
equals: vI
});
}
get data() {
return this.computedProps.get().data;
}
get loading() {
return this.computedProps.get().loading;
}
get uninitialized() {
return this.computedProps.get().uninitialized;
}
get error() {
return this.computedProps.get().error;
}
get timestamp() {
return this.computedProps.get().timestamp;
}
toProps() {
return {
...this.computedProps.get()
};
}
}, OI = class {
constructor(e) {
this.disposers = [], this.disposersByKey = {}, this._isDisposed = !1, this.disposeAll = () => {
if (!this._isDisposed) {
this._isDisposed = !0, Object.keys(this.disposersByKey).forEach((e => this.dispose(e)));
this.disposers.slice().forEach((e => this.dispose(e)));
}
}, e && this.add(e);
}
add(e) {
this.hasDisposer(e) || this.disposers.push(e);
}
addTimeout(e, t) {
const n = () => clearTimeout(r), r = setTimeout((() => {
e(), this.dispose(n);
}), t);
return this.add(n), () => {
this.dispose(n);
};
}
set(e, t) {
this.disposersByKey[e] = t;
}
hasDisposer(e) {
return "string" == typeof e ? !!this.disposersByKey[e] : this.disposers.indexOf(e) >= 0;
}
dispose(e) {
if ("string" == typeof e) {
const t = this.disposersByKey[e];
t && (delete this.disposersByKey[e], t());
} else {
const t = this.disposers.indexOf(e);
t >= 0 && (this.disposers.splice(t, 1), e());
}
}
get isDisposed() {
return this._isDisposed;
}
hasDisposers() {
return this.disposers.length > 0 || Object.keys(this.disposersByKey).length > 0;
}
}, CI = (e, t) => {
const {onStreamData: n, onStreamEnd: r, onStreamError: i, keepAliveStreamOnDispose: o} = t, a = new OI;
return a.add(e.end.subscribe((() => {
r?.(), a.disposeAll();
}))), n && a.add(e.data.subscribe((e => {
n(e);
}))), i && a.add(e.error.subscribe((e => {
i(e);
}))), o || a.add((() => e.close())), e.start(), a.disposeAll;
};
function NI(e, t) {
let n, r = !1;
const i = () => {
if (0 === t.wait) return e();
n ? t.leading && (r = !0) : (t.leading && e(), n = setTimeout((() => {
n = void 0, t.leading ? r && (r = !1, i()) : e();
}), t.wait));
};
return i.cancel = () => {
n && (clearTimeout(n), n = void 0, r = !1);
}, i;
}
var AI = class {
constructor(e, t) {
this.options = e, this.onBatch = t, this.disposers = new OI, this.pendingItems = new Set([]), 
this.processingItems = new Set([]), this.throttledBatch = NI((() => {
if (!this.pendingItems.size) return;
const e = Array.from(this.pendingItems.values()).splice(0, this.options.maxBatchSize ?? 50);
e.forEach((e => {
this.processingItems.add(e), this.pendingItems.delete(e);
})), this.onBatch(e).then((() => {
e.forEach((e => {
this.processingItems.delete(e);
})), this.throttledBatch();
}));
}), {
wait: this.options.delay ?? 16,
trailing: !0
}), this.addItem = e => {
this.processingItems.has(e) || this.pendingItems.add(e), this.throttledBatch();
}, this.dispose = () => {
this.disposers.disposeAll();
}, this.disposers.add((() => this.throttledBatch.cancel()));
}
}, LI = class {
constructor(e) {
this.onExpireCallback = e, this.atom = Ae("ExpirationDate"), this.futureTimestamp = 0, 
this.dispose = () => {
this.timeout && (clearTimeout(this.timeout), this.timeout = void 0), this.futureTimestamp = 0;
};
}
observe() {
this.atom.reportObserved();
}
expireOn(e) {
Vt() && this.atom.reportObserved();
const t = e - Date.now();
return t > 0 && this.scheduleCheck(e), t <= 0;
}
scheduleCheck(e) {
if (!this.timeout || !this.futureTimestamp || e < this.futureTimestamp) {
this.timeout && clearTimeout(this.timeout), this.futureTimestamp = e;
const t = e - Date.now();
this.timeout = setTimeout((() => {
this.futureTimestamp = 0, this.atom.reportChanged(), this.onExpireCallback?.();
}), t);
}
}
}, wI = class {
constructor() {
this.disposers = new OI, this.dispose = () => {
this.disposers.disposeAll();
};
}
}, kI = class extends wI {
constructor(e, t) {
super(), this.fragmentList = e, this.onDemand = t;
const n = Dn((() => this.fragmentList.get()), (e => {
nl((() => e.filter((e => e.uninitialized)))).forEach(this.onDemand);
}), {
fireImmediately: !0
});
this.disposers.add(n);
}
}, RI = class extends wI {
constructor(e, t, n) {
super(), this.fragmentList = e, this.onExpired = t, this.options = n;
const r = new LI((() => {
nl((() => e.get().filter((e => !e.loading && e.timestamp && e.isBeingObserved() && r.expireOn(e.timestamp + n.maxAge))))).forEach((e => {
t(e);
}));
}));
this.disposers.add(r.dispose);
const i = Dn((() => this.fragmentList.get()), (e => {
e.forEach((e => {
if (this.disposers.hasDisposer(e.id)) return;
const i = e.onBecomeObserved((() => {
const i = e.timestamp;
!e.loading && i && r.expireOn(i + n.maxAge) && t(e);
})), o = e.observe((({newValue: i}) => {
nl((() => {
const o = i.timestamp;
e.isBeingObserved() && !i.loading && o && r.expireOn(o + n.maxAge) && t(e);
}));
}));
this.disposers.set(e.id, (() => {
i(), o();
}));
}));
}), {
fireImmediately: !0
});
this.disposers.add(i);
}
}, xI = class {
constructor(e, t, n) {
this.options = e, this.fragments = t, this.fetchFragments = n, this.disposers = new OI, 
this.dispose = () => {
this.disposers.disposeAll();
};
const r = new AI({
maxBatchSize: e.maxBatchSize ?? 50,
delay: e.delay ?? 16
}, n);
this.disposers.add(r.dispose), this.disposers.add(new kI(this.fragments, r.addItem).dispose), 
e.maxAge && this.disposers.add(new RI(this.fragments, r.addItem, {
maxAge: e.maxAge
}).dispose);
}
}, BI = class extends ls {
constructor(e, t, n, r) {
super(e, (e => [ t(e), {
loading: !1,
uninitialized: !1,
error: void 0,
data: e
} ]), {
batchDuration: n ?? 10,
initialBatchDuration: r
});
}
}, DI = class extends ls {
constructor(e, t, n) {
super(e, (e => e), {
batchDuration: t ?? 10,
initialBatchDuration: n
});
}
}, FI = class {
constructor() {
this.disposers = new OI, this.withStream = (e, t) => {
const n = CI(e, t), r = e.end.listenOnce((() => {
this.disposers.dispose(n), this.disposers.dispose(r);
}));
this.disposers.add(n), this.disposers.add(r);
}, this.dispose = () => {
this.disposers.disposeAll();
};
}
};
function MI(e, t) {
e.update({
...t,
data: t.data ?? e.data
});
}
var UI = class extends FI {
constructor(e, t, n, r) {
if (super(), this.options = e, this.applyResult = t, this.updateFragments = n, this.fragments = r, 
this.failedAttempts = 0, this.defaultMaxAttempts = 3, this.defaultRetryDelay = 2e3, 
this.performFetch(), e.refetchInterval) {
const t = setInterval((() => {
this.performFetch();
}), e.refetchInterval);
this.disposers.add((() => {
clearInterval(t);
}));
}
}
async performFetch() {
if (this.disposers.isDisposed) return;
const e = nl((() => this.fragments.get()));
let t;
this.updateFragments(e, {
loading: !0,
uninitialized: !1
}, !0);
try {
t = await this.options.fetch();
} catch (e) {
t = {
loading: !1,
error: e
};
}
this.disposers.isDisposed || (!t.error && t.data ? (this.failedAttempts = 0, this.applyResult(t.data, this.options.updater ?? MI)) : t.error && (this.failedAttempts++, 
this.hasReachedMaxAttempts() && this.dispose(), this.updateFragments(e, {
error: t.error || new Error("Unable to retrieve data"),
loading: !1,
uninitialized: !1
}), this.hasReachedMaxAttempts() || this.retryFetch()));
}
retryFetch() {
const e = this.options.retryDelay ?? this.defaultRetryDelay;
this.disposers.addTimeout((() => {
this.performFetch();
}), e);
}
hasReachedMaxAttempts() {
const e = this.options.maxFailedAttempts ?? this.defaultMaxAttempts;
return this.failedAttempts >= e;
}
}, HI = class extends FI {
constructor(e, t, n, r) {
super(), this.options = e, this.applyFragmentResults = t, this.updateFragments = n, 
this.fragments = r, this.batchedFetcher = new xI(e, r, this.fetchFragments.bind(this)), 
this.disposers.add(this.batchedFetcher.dispose);
}
async fetchFragments(e) {
if (this.disposers.isDisposed) return;
let t;
this.updateFragments(e, {
loading: !0,
uninitialized: !1
});
try {
t = await this.options.fetch(e.map((e => e.id)));
} catch (e) {
t = [];
}
this.disposers.isDisposed || fr((() => {
this.updateFragments(e, {
loading: !1
}), this.applyFragmentResults(t, this.options.updater ?? MI);
}));
}
}, VI = class extends FI {
constructor(e, t, n, r) {
super(), this.options = e, this.applyFragmentResults = t, this.updateFragments = n, 
this.fragments = r, this.defaultMaxAttempts = 1, this.defaultAttemptTimeout = 2e3, 
this.batchedFetcher = new xI(e, r, this.fetchFragments.bind(this)), this.disposers.add(this.batchedFetcher.dispose);
}
retryFetch(e, t = 1) {
if ((this.options.maxAttempts ?? this.defaultMaxAttempts) > t) {
const n = (this.options.attemptTimeout ?? this.defaultAttemptTimeout) * t;
this.disposers.addTimeout((() => {
this.fetchFragments(e, t + 1);
}), n);
} else this.updateFragments(e, {
loading: !1,
error: new Error("Failed to fetch resource")
});
}
async fetchFragments(e, t = 1) {
if (this.disposers.isDisposed) return;
let n;
this.updateFragments(e, {
loading: !0,
uninitialized: !1
});
try {
n = await this.options.fetch(e?.map((e => e.id)) ?? []);
} catch (e) {
n = {
loading: !1,
skipped: !1,
error: e
};
}
if (!this.disposers.isDisposed) if (n.data) {
const r = new BI(n.data, this.options.toFragmentId, this.options.batchDuration);
this.withStream(r, {
onStreamEnd: () => {
this.updateFragments(e, {
loading: !1
});
},
onStreamError: n => {
this.options?.onStreamError?.(n), this.retryFetch(e, t);
},
onStreamData: t => {
fr((() => {
const n = e.filter((e => t.some((([t]) => e.id === t))));
this.updateFragments(n, {
loading: !1
}), this.applyFragmentResults(t, this.options.updater);
}));
}
});
} else n.error && this.retryFetch(e, t);
}
}, JI = class extends FI {
constructor(e, t, n, r) {
super(), this.options = e, this.applyFragmentResults = t, this.updateFragments = n, 
this.fragments = r, this.fragmentResultsStream = new BI(e.stream, e.toFragmentId, e.batchDuration, e.initialBatchDuration), 
this.withStream(this.fragmentResultsStream, {
onStreamData: t => {
this.applyFragmentResults(t, e.updater);
},
onStreamError: e => {},
onStreamEnd: () => {
this.dispose();
}
});
}
}, GI = class {
constructor(e) {
this.createFragment = e, this.atom = Ae("ObservableFragmentFactory"), this.items = new Map;
}
set(e, t) {
this.items.set(e, t), this.timeout || (this.timeout = setTimeout((() => {
this.atom.reportChanged(), this.timeout = void 0;
}), 0));
}
get(e) {
const t = this.items.get(e);
if (t) return t;
const n = this.createFragment(e);
return this.set(e, n), n;
}
delete(e) {
this.items.delete(e), this.atom.reportChanged();
}
getMaybeUntracked(e) {
return this.items.get(e);
}
getItems() {
return this.atom.reportObserved(), Array.from(this.items.values());
}
get size() {
return this.atom.reportObserved(), this.items.size;
}
}, zI = class {
constructor(e) {
this.options = e, this.defaultFragment = {
loading: !1,
uninitialized: !0,
data: void 0,
error: void 0
}, this.strategies = new Map, this.applyFragmentResults = (e, t) => {
fr((() => {
nl((() => {
e.forEach((([e, n]) => {
t(this.get(e), n);
}));
}));
}));
}, this.updateFragments = (e, t, n = !1) => {
fr((() => {
nl((() => {
e.forEach((e => {
e.update({
...e.toProps(),
...t
});
})), n && Object.assign(this.defaultFragment, {
...t
});
}));
}));
}, this.fragmentsList = _t((() => this.fragments.getItems()), {
equals: Le.identity
}), this.fragments = new GI((e => new EI(e, this.defaultFragment)));
}
getStrategyOptions(e, t) {
return t;
}
setStreamStrategy(e, t = "Stream-1") {
if (e) {
const n = {
...this.options,
...e
};
return this.useStrategy(t, new JI(this.getStrategyOptions(t, n), this.applyFragmentResults, this.updateFragments, this.fragmentsList));
}
this.removeStrategy(t);
}
setSeedStrategy(e, t = "Seed-1") {
if (e) {
const n = {
...this.options,
...e
};
return this.useStrategy(t, new UI(this.getStrategyOptions(t, n), this.applyFragmentResults, this.updateFragments, this.fragmentsList));
}
this.removeStrategy(t);
}
setOnDemandStrategy(e, t = "OnDemand-1") {
if (e) {
const n = {
...this.options,
...e
};
return this.useStrategy(t, new HI(this.getStrategyOptions(t, n), this.applyFragmentResults, this.updateFragments, this.fragmentsList));
}
this.removeStrategy(t);
}
setOnDemandStreamStrategy(e, t = "OnDemandStream-1") {
if (e) {
const n = {
...this.options,
...e
};
return this.useStrategy(t, new VI(this.getStrategyOptions(t, n), this.applyFragmentResults, this.updateFragments, this.fragmentsList));
}
this.removeStrategy(t);
}
useStrategy(e, t) {
return this.removeStrategy(e), this.strategies.set(e, t), () => {
this.removeStrategy(e);
};
}
removeStrategy(e) {
const t = this.strategies.get(e);
t && t.dispose(), this.strategies.delete(e);
}
get(e) {
return this.fragments.get(e);
}
getMaybeUntracked(e) {
return this.fragments.getMaybeUntracked(e);
}
delete(e) {
this.fragments.delete(e);
}
get size() {
return this.fragments.size;
}
}, jI = class extends zI {
getByIds(e) {
return e.map((e => this.get(e)));
}
}, qI = "default", YI = () => qI, WI = class extends zI {
constructor(e) {
super({
delay: 0,
...e
}), this.options = e;
}
get() {
return super.get(qI);
}
getMaybeUntracked() {
return super.getMaybeUntracked(qI);
}
async reseed() {
await Promise.all(Array.from(this.strategies.values()).map((e => e instanceof UI ? e.performFetch() : Promise.resolve())));
}
setStreamStrategy(e, t = "Stream-1") {
if (e) {
const n = {
...e,
toFragmentId: YI
};
return super.setStreamStrategy(n, t);
}
this.removeStrategy(t);
}
setOnDemandStreamStrategy(e, t = "OnDemandStream-1") {
if (e) {
const n = {
...e,
toFragmentId: YI
};
return super.setOnDemandStreamStrategy(n, t);
}
this.removeStrategy(t);
}
}, KI = (e => (e.Xbox = "XBOX", e.Psn = "PSN", e.Nintendo = "NINTENDO", e.Ea = "EA", 
e.Steam = "STEAM", e.Epic = "EPIC", e.AppleGameCenter = "APPLE_GAMECENTER", e.GooglePlay = "GOOGLE_PLAY", 
e))(KI || {}), XI = new Set(Object.values(KI)), QI = e => "string" == typeof e && XI.has(e), $I = e => ("object" == typeof e ? e.id : e)?.toUpperCase(), ZI = e => {
const t = $I(e);
return QI(t);
}, e_ = e => {
const t = $I(e);
return QI(t) ? t : "EA";
}, t_ = "EA", n_ = "1P", r_ = "|", i_ = e => `${e.eaPlayerId ? t_ : n_}|${e.eaPlayerId || e.firstPartyPlayerId || ""}|${e.playerNetworkId}`, o_ = e => `EA|${e.eaPlayerId}|${e.playerNetworkId}`;
function a_(e) {
const t = e.split(r_);
if ((t[0] === t_ || t[0] === n_) && t[1] && t[2]) return {
prefix: t[0],
playerId: t[1],
playerNetworkId: t[2],
sessionId: t[3]
};
}
function s_(e) {
const t = a_(e);
if (!t) throw new Error("Bad argument: " + e);
const n = {
playerNetworkId: e_(t.playerNetworkId)
};
return t.prefix === n_ ? n.firstPartyPlayerId = t.playerId : n.eaPlayerId = t.playerId, 
t.sessionId && (n.sessionId = t.sessionId), n;
}
function l_(e) {
const t = a_(e);
return !!t && !t.sessionId;
}
function c_(e) {
return e.startsWith(t_) && l_(e);
}
var d_ = e => void 0 !== a_(e)?.sessionId, u_ = (e, t) => `${"string" == typeof e ? e : i_(e)}|${t}`, p_ = e => l_(e) ? e : i_(s_(e)), f_ = e => s_(e), h_ = e => d_(e) ? {
photonPlayerId: p_(e),
photonSessionId: e
} : {
photonPlayerId: e,
photonSessionId: void 0
}, m_ = (e, t) => t || e, g_ = class {
constructor(e, t) {
this.keysAtom = Ae("key"), this.atomIndices = new Map, this.atoms = [], this.nextAtomIndex = 0, 
this.items = new Map(e);
for (let e = 0; e < t; e++) this.atoms.push(Ae("" + e));
}
getAtom(e) {
let t = this.atomIndices.get(e);
return void 0 === t && (t = this.nextAtomIndex % this.atoms.length, this.atomIndices.set(e, t), 
this.nextAtomIndex++), this.atoms[t];
}
[Symbol.iterator]() {
return this.entries();
}
clear() {
this.items.clear(), this.atomIndices.clear(), fr((() => {
this.atoms.forEach((e => e.reportChanged())), this.keysAtom.reportChanged();
}));
}
delete(e) {
const t = this.items.delete(e);
return t && fr((() => {
this.getAtom(e).reportChanged(), this.keysAtom.reportChanged();
})), this.atomIndices.delete(e), t;
}
entries() {
return this.keysAtom.reportObserved(), this.atoms.forEach((e => e.reportObserved())), 
this.items.entries();
}
forEach(e) {
for (const [t, n] of this.entries()) e(n, t, this);
}
get(e) {
return this.getAtom(e).reportObserved(), this.items.get(e);
}
has(e) {
return this.getAtom(e).reportObserved(), this.items.has(e);
}
keys() {
return this.keysAtom.reportObserved(), this.items.keys();
}
set(e, t) {
return this.items.set(e, t), fr((() => {
this.getAtom(e).reportChanged(), this.keysAtom.reportChanged();
})), this;
}
values() {
return this.atoms.forEach((e => e.reportObserved())), this.items.values();
}
get size() {
return this.keysAtom.reportObserved(), this.items.size;
}
toString() {
return "[object ShardedObservableMap]";
}
get [Symbol.toStringTag]() {
return "Map";
}
replace(e) {
fr((() => {
for (const t of this.items.keys()) {
const n = e.get(t);
void 0 !== n ? this.set(t, n) : this.delete(t);
}
for (const [t, n] of e) this.items.has(t) || this.set(t, n);
}));
}
}, y_ = class {
constructor(e, t) {
this.store = e, this.options = t, this.collection = new Zs([]), this.disposers = new OI;
}
has(e) {
return this.collection.has(e);
}
keys() {
return Array.from(this.collection.keys());
}
require(e) {
fr((() => {
nl((() => {
e.forEach((e => {
this.collection.set(e, void 0);
const t = this.store.getMaybeUntracked(e);
t?.update({
...t.toProps(),
uninitialized: !0
});
}));
}));
})), this.store.getByIds(e);
}
update(e, t) {
this.collection.set(e, t);
}
fragmentIsLoaded(e) {
return !e.uninitialized && !e.loading;
}
waitForFragments(e, t) {
if (0 === e.length) return void t([]);
this.require(e);
const n = () => nl((() => {
const t = [];
for (const n of e) {
const e = this.collection.get(n);
e && this.fragmentIsLoaded(e) && t.push(e);
}
return t;
})), r = e => nl((() => {
const t = [];
for (const n of e) {
this.collection.get(n) || t.push(n);
}
return t;
})), i = e => {
let o = !1, a = !1;
const s = hr((() => e.every((e => {
const t = this.collection.get(e);
return t && this.fragmentIsLoaded(t);
}))), (() => {
o = !0, a && this.disposers.dispose(s), t(n()), this.remove(e);
}), {
timeout: 8e3,
onError: l => {
o = !0, a && this.disposers.dispose(s), t(n()), "WHEN_TIMEOUT" === l.message && i(r(e));
}
});
o || (a = !0, this.disposers.add(s));
};
i(e);
}
remove(e) {
fr((() => {
e.forEach((e => {
this.collection.delete(e);
}));
}));
}
dispose() {
this.disposers.disposeAll();
}
}, I_ = [ "EA", "STEAM", "PSN", "XBOX", "NINTENDO" ].map((e => ({
id: e_(e)
}))), __ = class extends jI {
constructor() {
super(...arguments), this.playerInfoStream = new as, this.firstPartyUidReverseLookup = new Map, 
this.eaFriendsFragments = new y_(this, {
debugName: this.options?.debugName + "EaFriendsCollection"
}), this.firstPartyFriendFragments = new y_(this, {
debugName: this.options?.debugName + "FirstPartyFriendsCollection"
}), this.eaFriendsFragmentsList = _t((() => this.eaFriendsFragments.keys().map((e => this.fragments.get(e))))), 
this.firstPartyFriendsFragmentsList = _t((() => this.firstPartyFriendFragments.keys().map((e => this.fragments.get(e))))), 
this.generalFragmentsList = _t((() => {
const e = new Set(this.eaFriendsFragments.keys()), t = new Set(this.firstPartyFriendFragments.keys());
return this.fragments.getItems().filter((n => !e.has(n.id) && !t.has(n.id) && c_(n.id)));
})), this.updateFirstPartyFragments = (e, t, n) => {
const r = e.filter((({id: e}) => !!this.getMaybeUntracked(e)));
this.updateFragments(r, t, n);
};
}
setPlayerCardsOnDemandStrategy(e, t, n = "OnDemandStream-1", r) {
if (t && r) {
const i = {
...this.options,
...t
};
return this.useStrategy(n, new VI(this.getStrategyOptions(n, i), this.applyFragmentResults, e, r));
}
this.removeStrategy(n);
}
setEaFriendsStrategy(e) {
return this.setPlayerCardsOnDemandStrategy(this.updateFragments, e, "BatchGetFriendsPlayerCards", this.eaFriendsFragmentsList);
}
setFirstPartyFriendsStrategy(e) {
return this.setPlayerCardsOnDemandStrategy(this.updateFirstPartyFragments, e, "BatchGetPlayerCardsByFirstPartyIds", this.firstPartyFriendsFragmentsList);
}
setGeneralStrategy(e) {
return this.setPlayerCardsOnDemandStrategy(this.updateFragments, e, "BatchGetPlayerCards", this.generalFragmentsList);
}
findByEaPlayerId(e) {
const t = [];
for (let n = 0, r = I_.length; n < r; n++) {
const r = this.fragments.getMaybeUntracked(i_({
eaPlayerId: e,
playerNetworkId: I_[n].id
}));
r && t.push(r);
}
return t;
}
findByEaPlayerIds(e) {
const t = [];
for (let n = 0, r = e.length; n < r; n++) {
const r = e[n];
t.push(...this.findByEaPlayerId(r));
}
return t;
}
fetchPlayerInfosForFriends(e, t) {
const n = e.map((e => o_({
eaPlayerId: e,
playerNetworkId: "EA"
})));
this.eaFriendsFragments.waitForFragments(n, (() => {
t(nl((() => this.findByEaPlayerIds(e))));
}));
}
fetchPlayerInfosForFirstPartyPseudoIds(e, t) {
this.firstPartyFriendFragments.waitForFragments(e, t);
}
dispose() {
this.eaFriendsFragments.dispose(), this.firstPartyFriendFragments.dispose();
}
}, [b_, S_] = El({
debugName: "playerInfoFragmentStoreState",
create: () => new __({
debugName: "PlayerInfo"
})
}), [v_, T_] = El({
debugName: "eaPlayerCommonInfoState",
create: () => new g_([], 50)
});
function E_(e, t) {
const n = e.get(t.eaPlayerId)?.mostRecentlyLoggedInPersonaDate;
(!n || n < t.mostRecentlyLoggedInPersonaDate) && e.set(t.eaPlayerId, {
mostRecentlyLoggedInPersonaDate: t.mostRecentlyLoggedInPersonaDate
});
}
var P_ = class extends Error {
constructor(e) {
super(e), this.name = "ValidationError", Object.setPrototypeOf(this, P_.prototype);
}
}, O_ = class {
getLastErrors() {
return this._errors || [];
}
};
function C_(e, t) {
e._errors && e._errors.length > 100 || (e._errors || (e._errors = []), e._errors.push(e._path ? e._path.join(".") + ": " + t : t));
}
function N_(e, t) {
return new Error(e._path ? e._path.join(".") + ": " + t : t);
}
var A_ = class extends O_ {
constructor(e, t) {
super(), this.attributes = e, this.optionalAttributes = t, this.type = {};
}
parseString(e) {
const t = this;
delete t._errors;
try {
const n = JSON.parse(e);
if (this.validate(n, t)) return n;
} catch (e) {
C_(t, "Failed to parse JSON: " + e.message);
}
}
validate(e, t) {
if (t || delete (t = this)._errors, "object" == typeof e) if (null === e) C_(t, "Not an object: null"); else if (Array.isArray(e)) C_(t, "Not an object: array"); else {
for (const n in this.attributes) {
const r = e[n];
this.attributes[n].validate(r, t);
}
const {optionalAttributes: n} = this;
if (n) for (const r in n) {
const i = n[r], o = e[r];
void 0 !== o && i.validate(o, t);
}
} else C_(t, "Not an object: " + typeof e);
return void 0 === t._errors;
}
parse(e, t = {}) {
if ("object" == typeof e) {
if (null === e) throw N_(t, "Not an object: null");
if (Array.isArray(e)) throw N_(t, "Not an object: array");
{
const n = {};
for (const r in this.attributes) {
const i = e[r], o = this.attributes[r];
n[r] = o.parse(i, t);
}
const {optionalAttributes: r} = this;
if (r) for (const i in r) if (Object.prototype.hasOwnProperty.call(e, i)) {
const o = r[i], a = e[i];
void 0 !== a && (n[i] = o.parse(a, t));
}
return n;
}
}
throw N_(t, "Not an object: " + typeof e);
}
}, L_ = class extends O_ {
constructor(e, t) {
super(), this.attributes = e, this.defaultValues = t, this.type = {};
}
validate(e) {
throw new Error("JsonObjectWithDefault.validate is not implemented");
}
parse(e, t = {}) {
if ("object" != typeof e || null === e || Array.isArray(e)) return {
...this.defaultValues
};
const n = {};
for (const r in this.attributes) {
const i = e[r], o = this.attributes[r];
try {
n[r] = o.parse(i, t);
} catch {
n[r] = this.defaultValues[r];
}
}
return n;
}
}, w_ = class extends O_ {
constructor(e) {
super(), this.itemType = e, this.type = [];
}
validate(e, t) {
if (t || delete (t = this)._errors, "object" == typeof e) if (null === e) C_(t, "Not an array: null"); else if (Array.isArray(e)) for (let n = 0, r = e.length; n < r; n++) this.itemType.validate(e[n], t); else C_(t, "Not an array: object"); else C_(t, "Not an object: " + typeof e);
return void 0 === t._errors;
}
parse(e, t = {}) {
if ("object" == typeof e) {
if (null === e) throw N_(t, "Not an array: null");
if (Array.isArray(e)) {
const n = [];
for (let r = 0, i = e.length; r < i; r++) n.push(this.itemType.parse(e[r], t));
return n;
}
throw N_(t, "Not an array: object");
}
throw N_(t, "Not an object: " + typeof e);
}
}, k_ = class extends O_ {
constructor(e) {
super(), this.valueType = e, this.type = {};
}
validate(e, t) {
if (t || delete (t = this)._errors, "object" == typeof e) if (null === e) C_(t, "Not an object: null"); else if (Array.isArray(e)) C_(t, "Not an object: array"); else for (const n in e) this.valueType.validate(e[n], t); else C_(t, "Not an object: " + typeof e);
return void 0 === t._errors;
}
parse(e, t = {}) {
if ("object" == typeof e) {
if (null === e) throw N_(t, "Not an object: null");
if (Array.isArray(e)) throw N_(t, "Not an object: array");
{
const n = {};
for (const r in e) n[r] = this.valueType.parse(e[r], t);
return n;
}
}
throw N_(t, "Not an object: " + typeof e);
}
}, R_ = class extends O_ {
constructor(e) {
super(), this.literal = e, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, e === this.literal || (C_(t, "Not literal " + this.literal + ": " + e), 
!1);
}
parse(e, t = {}) {
if (e === this.literal) return this.literal;
throw N_(t, "Not literal " + this.literal + ": " + e);
}
}, x_ = class extends O_ {
constructor(e, t) {
super(), this.enumType = e, this.excludedValue = t, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, "number" == typeof e && e in this.enumType && e !== this.excludedValue || (C_(t, "Not in enum: " + e), 
!1);
}
parse(e, t = {}) {
if ("number" == typeof e && e in this.enumType && e !== this.excludedValue) return e;
throw N_(t, "Not in enum: " + e);
}
}, B_ = class extends O_ {
constructor(e, t) {
super(), this.subType = e, this.defaultValue = t, this.type = null;
}
validate(e) {
throw new Error("JsonOrDefault.validate is not implemented");
}
parse(e, t = {}) {
try {
return this.subType.parse(e, t);
} catch (e) {
return this.defaultValue;
}
}
}, D_ = class extends O_ {
constructor(e) {
super(), this.validator = e, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, !!this.validator(e, t, C_) || (void 0 === t._errors && C_(t, "Invalid custom data"), 
!1);
}
parse(e, t = {}) {
if (this.validator(e, t, C_)) return e;
throw N_(t, "Cannot parse");
}
}, F_ = class extends O_ {
constructor(e, t) {
super(), this.sourceType = e, this.transformer = t, this.type = null;
}
validate(e) {
throw new Error("JsonTransformer.validate is not implemented");
}
parse(e, t = {}) {
return this.transformer(this.sourceType.parse(e, t));
}
}, M_ = class extends O_ {
constructor(e) {
super(), this.lazy = e, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, this.lazy().validate(e, t);
}
parse(e, t = {}) {
return this.lazy().parse(e, t);
}
}, U_ = class extends O_ {
constructor(e, t) {
super(), this.a = e, this.b = t, this.type = null;
}
validate(e, t) {
t || delete (t = this)._errors;
const n = {}, r = {};
if (!this.a.validate(e, n) && !this.b.validate(e, r)) {
const e = [ ...n._errors || [], ...r._errors || [] ];
return t._errors ? t._errors.length < 100 && t._errors.push(...e) : t._errors = e, 
!1;
}
return !0;
}
parse(e, t = {}) {
try {
return this.a.parse(e, t);
} catch (n) {
try {
return this.b.parse(e, t);
} catch (e) {}
}
throw N_(t, "Cannot parse");
}
}, H_ = class extends O_ {
constructor(e) {
super(), this.subType = e, this.type = void 0;
}
validate(e, t) {
return t || delete (t = this)._errors, !(void 0 !== e && !this.subType.validate(e, t)) || (C_(t, "Not undefined: " + e), 
!1);
}
parse(e, t = {}) {
return void 0 === e ? e : this.subType.parse(e, t);
}
}, V_ = class extends O_ {
constructor(e) {
super(), this.subType = e, this.type = null;
}
validate(e, t) {
return t || delete (t = this)._errors, !(null !== e && !this.subType.validate(e, t)) || (C_(t, "Not null: " + e), 
!1);
}
parse(e, t = {}) {
return null === e ? e : this.subType.parse(e, t);
}
}, J_ = {
object: (e, t) => new A_(e, t),
map: e => new k_(e),
array: e => new w_(e),
string: new class extends O_ {
constructor() {
super(...arguments), this.type = "";
}
validate(e, t) {
return t || delete (t = this)._errors, "string" == typeof e || (C_(t, "Not a string: " + typeof e), 
!1);
}
parse(e, t = {}) {
if ("string" == typeof e) return e;
throw N_(t, "Not a string: " + typeof e);
}
},
number: new class extends O_ {
constructor() {
super(...arguments), this.type = 0;
}
validate(e, t) {
return t || delete (t = this)._errors, "number" == typeof e || (C_(t, "Not a number: " + typeof e), 
!1);
}
parse(e, t = {}) {
if ("number" == typeof e) return e;
throw N_(t, "Not a number: " + typeof e);
}
},
boolean: new class extends O_ {
constructor() {
super(...arguments), this.type = !1;
}
validate(e, t) {
return t || delete (t = this)._errors, "boolean" == typeof e || (C_(t, "Not a boolean: " + typeof e), 
!1);
}
parse(e, t = {}) {
if ("boolean" == typeof e) return e;
throw N_(t, "Not a boolean: " + typeof e);
}
},
undefined: new R_(void 0),
null: new R_(null),
literal: e => new R_(e),
optional: e => new H_(e),
enum: (e, t) => new x_(e, t),
lazy: e => new M_(e),
nullable: e => new V_(e),
custom: e => new D_(e),
anyObject: new D_((e => "object" == typeof e)),
transform: (e, t) => new F_(e, t),
orDefault: (e, t) => new B_(e, t),
union2: (e, t) => new U_(e, t),
uint8Array: new D_((e => e instanceof Uint8Array)),
objectWithDefaults: (e, t) => new L_(e, t)
};
function G_(e, t) {
if (!e.validate(t)) throw new P_(e.getLastErrors().join(", "));
return t;
}
var z_ = e => e;
async function j_(e, t, n) {
const r = n?.transformResponse ?? z_;
let i;
const o = Date.now();
try {
const a = G_(t, await e());
n?.debugName, i = {
data: r(a),
loading: !1,
skipped: !1,
timestamp: Date.now(),
duration: Date.now() - o
};
} catch (e) {
i = {
loading: !1,
skipped: !1,
error: e,
timestamp: Date.now(),
duration: Date.now() - o
};
}
return i;
}
function q_(e, t) {
e.error && t.onError?.(), e.error || e.loading || e.skipped || t.onSuccess?.();
}
var Y_ = () => "XBSX" === vs.devicePlatformId || "XBOXONE" === vs.devicePlatformId, W_ = {
XBOXONE: "XBOX",
XBSX: "XBOX",
PS4: "PSN",
PS5: "PSN",
NX: "NINTENDO",
IOS: "APPLE_GAMECENTER",
ANDROID: "GOOGLE_PLAY",
WEB: "EA",
PC: "EA",
UNKNOWN: "EA"
}, K_ = J_.object({
seconds: J_.number,
nanos: J_.number
}), X_ = J_.object({
seconds: J_.number
}, {
nanos: J_.number
}), Q_ = J_.object({
id: J_.string
}), $_ = J_.object({}, {
stringValue: J_.string,
localizedStringValue: Q_,
integerValue: J_.number,
floatValue: J_.number,
timestampValue: K_,
durationValue: X_
}), Z_ = J_.object({
id: J_.string
}), eb = J_.object({
playerId: J_.object({
id: J_.string
}),
personaId: J_.optional(J_.object({
id: J_.string
}))
}), tb = J_.object({
id: eb
}, {
displayName: J_.string,
nickname: J_.string
}), nb = J_.object({
id: J_.string
}), rb = J_.object({
id: J_.string
}), ib = J_.object({
id: J_.string
}), ob = J_.object({
id: J_.string
}), ab = class extends ss {
constructor(e, t, n = (e => e)) {
super(e, (e => {
t.validate(e) && this.data.trigger(n(e));
}));
}
};
function sb() {
return e => e instanceof as;
}
function lb(e, t) {
return new Promise(((n, r) => {
const i = [];
e.error.subscribe((e => {
r(e);
})), e.end.subscribe((async () => {
const e = await t(i);
n(e);
})), e.data.subscribe((e => {
i.push(e);
})), e.start();
}));
}
var cb = fm.FriendListNotifications.ListUpdate, db = fm.PlatformFriends.PresenceStatus, ub = J_.enum(db, db.UNKNOWN), pb = (J_.object({
id: Z_,
displayName: J_.string
}), J_.object({
platformPlayerId: J_.nullable(J_.string),
avatarUrl: J_.nullable(J_.string),
displayName: J_.string,
personaId: J_.string,
playerNetworkId: nb
})), fb = J_.object({
firstPartyUid: J_.optional(J_.object({
value: J_.string
})),
displayName: J_.object({
value: J_.string
}),
personaId: ib,
playerNetworkId: nb,
lastAuthDate: J_.optional(K_)
}), hb = J_.object({
playerDetails: pb
}, {
isPlatformFriend: J_.nullable(J_.boolean)
}), mb = J_.object({
entityId: eb,
entries: J_.array(hb)
}), gb = J_.object({
entity: tb
}), yb = J_.object({
userId: J_.string,
displayName: J_.string,
presenceStatus: ub
}, {
title: J_.nullable(J_.string),
presence: J_.nullable(J_.string)
}), Ib = J_.object({
displayName: J_.string,
userId: J_.string
}, {
name: J_.string,
personaId: J_.string
}), _b = (J_.object({
friends: J_.array(mb)
}), J_.object({
friends: J_.array(gb)
})), bb = (J_.array(J_.object({
photonPlayerId: J_.custom((e => "string" == typeof e && l_(e)))
})), J_.object({}, {
domain: J_.string,
code: J_.number,
reason: J_.string,
cause: J_.lazy((() => bb))
})), Sb = J_.object({
playerId: Z_,
personas: J_.array(fb)
}, {
errorDetail: J_.optional(bb)
}), vb = J_.object({
stream: J_.custom(sb()),
response: J_.object({})
}), Tb = J_.object({
playerId: J_.optional(Z_),
personas: J_.array(fb),
firstPartyUid: J_.optional(J_.object({
value: J_.string
})),
displayName: J_.optional(J_.object({
value: J_.string
})),
errorDetail: J_.optional(bb)
}), Eb = J_.object({
stream: J_.custom(sb()),
response: J_.object({})
}), Pb = J_.object({
friendList: J_.array(yb)
}), Ob = J_.object({
blockList: J_.array(Ib)
}), Cb = J_.object({
friendListEvent: J_.object({
addedFriends: J_.array(yb),
removedFriends: J_.array(J_.string),
updatedFriends: J_.array(yb)
})
}), Nb = J_.object({
entity: tb,
createTime: J_.optional(J_.nullable(K_))
}), Ab = J_.object({
blockedPlayers: J_.optional(J_.array(Nb))
}), Lb = J_.object({
mutedPlayers: J_.optional(J_.array(Nb))
}), wb = (J_.object({
favoriteFriends: J_.optional(J_.array(Nb))
}), J_.array(Nb)), kb = J_.enum(cb, cb.LIST_UPDATE_UNSPECIFIED), Rb = J_.object({
friend: Nb,
listUpdate: kb,
updateTimestamp: K_
}), xb = (J_.object({
friendListNotification: Rb
}), J_.object({
blockedPlayer: Nb,
listUpdate: kb,
updateTimestamp: K_
})), Bb = (J_.object({
blockListNotification: xb
}), J_.object({
mutedPlayer: Nb,
listUpdate: kb,
updateTimestamp: K_
})), Db = (J_.object({
muteListNotification: Bb
}), J_.object({
entity: J_.object({
id: eb,
displayName: J_.string
}),
createTime: K_,
sourcePlayerNetworkId: J_.optional(J_.nullable(nb)),
targetPlayerNetworkId: J_.optional(J_.nullable(nb))
})), Fb = J_.object({
friendInviteDetails: Db,
listUpdate: kb,
updateTimestamp: K_
}), Mb = J_.object({}, {
friendListNotification: Rb,
sentInviteListNotification: Fb,
receivedInviteListNotification: Fb,
blockListNotification: xb,
muteListNotification: Bb
}), Ub = J_.object({
stream: J_.custom(sb()),
response: J_.object({})
}), Hb = J_.object({
stream: J_.custom(sb()),
response: J_.object({})
}), Vb = J_.object({
stream: J_.custom(sb()),
response: J_.object({})
}), Jb = J_.object({
stream: J_.custom(sb()),
response: J_.object({})
});
function Gb(e, t, n) {
e.addEvent({
metric: "stream_error",
value: t,
message: n.message
});
}
function zb(e, t) {
const n = aI();
H.useEffect((() => t?.error.subscribe((t => {
Gb(n, e, t);
}))), [ n, t?.error, e ]);
}
function jb(e, t) {
return "NINTENDO" === t || "STEAM" === t ? e.split("#")[0] : e;
}
function qb(e) {
try {
return rs.BigInt(e).toString(16).padStart(16, "0");
} catch (t) {
return e;
}
}
function Yb(e) {
try {
return rs.BigInt("0x" + e).toString(10);
} catch (t) {
return e;
}
}
function Wb(e) {
return `${e.firstPartyUid}::${e.displayName}`;
}
function Kb(e) {
const t = e.split("::");
if (2 === t.length) return {
firstPartyUid: t[0],
displayName: t[1]
};
}
function Xb(e) {
return !!e?.data && "photonPlayerId" in e.data;
}
function Qb(e) {
const t = [];
return e.personas.forEach((n => {
const r = e_(n.playerNetworkId.id), i = "NINTENDO" === r, o = jb(n.displayName.value, r);
let a;
a = i ? n.firstPartyUid?.value ? Yb(n.firstPartyUid.value.split(":")[1] || n.firstPartyUid.value) : void 0 : n.firstPartyUid?.value, 
t.push({
eaPlayerId: e.playerId.id,
playerNetworkId: r,
photonPlayerId: i_({
eaPlayerId: e.playerId.id,
playerNetworkId: r
}),
personaId: n.personaId?.id,
lastAuthDate: n.lastAuthDate?.seconds,
firstPartyPlayerId: a,
displayName: o,
displayNameLowerCase: o.toLowerCase()
});
})), e.errorDetail && t.push({
eaPlayerId: e.playerId.id,
playerNetworkId: "EA",
displayName: "",
displayNameLowerCase: "",
photonPlayerId: i_({
eaPlayerId: e.playerId.id,
playerNetworkId: "EA"
}),
errorDetail: e.errorDetail
}), t;
}
function $b(e) {
return new ss(new ab(e, Sb), ((e, t) => {
Qb(e).forEach((e => {
t.data.trigger(e);
}));
}));
}
function Zb(e) {
return new ss(new ab(e, Tb), ((e, t) => {
e.playerId ? Qb({
playerId: e.playerId,
personas: e.personas
}).forEach((e => {
t.data.trigger(e);
})) : e.errorDetail && e.firstPartyUid && e.displayName && t.data.trigger({
errorDetail: e.errorDetail,
firstPartyPlayerId: e.firstPartyUid.value,
displayName: e.displayName.value
});
}));
}
function eS(e) {
return !!e?.eaPlayerId;
}
function tS(e) {
const t = [];
return nl((() => {
for (let n = 0; n < e.length; n++) {
const r = e[n].data;
eS(r) && t.push(r.photonPlayerId);
}
})), t;
}
function nS(e) {
return e.filter(l_).map((e => s_(e).eaPlayerId)).filter(dI);
}
function rS(e, t) {
return !(!t.data || !e.data) && (!(!e.data.firstPartyPlayerId || t.data.firstPartyPlayerId) || !!e.data.lastAuthDate && (!t.data.lastAuthDate || t.data.lastAuthDate < e.data.lastAuthDate));
}
function iS(e, t, n) {
rS(e, t) || (t.data?.errorDetail && !e.data ? e.update({
data: void 0,
error: new Error(t.data?.errorDetail.reason ?? "Missing player card"),
loading: !1,
uninitialized: !1
}) : (MI(e, t), t.data?.eaPlayerId && t.data.lastAuthDate && E_(n, {
eaPlayerId: t.data.eaPlayerId,
mostRecentlyLoggedInPersonaDate: t.data.lastAuthDate
})));
}
var [oS] = El({
debugName: "initializePlayerInfoStoreState",
create: e => {
const {PlayerCardService: t} = e.get(sI), n = e.get(b_), r = e.get(v_), i = e.get(oI), o = [];
return {
init: () => (o.push(n.setStreamStrategy({
stream: n.playerInfoStream,
toFragmentId: e => i_(e),
updater: (e, t) => {
iS(e, t, r);
}
}), n.setEaFriendsStrategy({
toFragmentId: i_,
fetch: async e => {
const n = nS(e), r = await j_((() => t.BatchGetFriendsPlayerCards({
playerIds: n.map((e => ({
id: e
}))),
avatarSizes: [],
playerNetworkIds: I_
})), vb), i = r.data ? $b(r.data.stream) : void 0;
return {
...r,
data: i
};
},
batchDuration: 10,
maxBatchSize: 200,
maxAttempts: 3,
attemptTimeout: 2e3,
onStreamError: e => Gb(i, "PlayerCardService.batchGetFriendsPlayerCards", e),
updater: (e, t) => {
iS(e, t, r), n.eaFriendsFragments.update(e.id, e);
}
}), n.setFirstPartyFriendsStrategy({
toFragmentId: e => {
return (t = e) && "errorDetail" in t ? Wb({
firstPartyUid: e.firstPartyPlayerId,
displayName: e.displayName
}) : i_(e);
var t;
},
fetch: async e => {
const n = e.map((e => Kb(e))).filter(dI), r = await j_((() => {
const e = "NX" === vs.devicePlatformId;
return t.BatchGetPlayerCardsByFirstPartyIds({
firstPartyUidAndDisplayNames: n.map((({firstPartyUid: t, displayName: n}) => {
return {
firstPartyUid: {
value: e ? qb(t) : t
},
displayName: {
value: jb(n, (r = vs.devicePlatformId, W_[r]))
}
};
var r;
}))
});
}), Eb), i = r.data ? Zb(r.data.stream) : void 0;
return {
...r,
data: i
};
},
batchDuration: 10,
maxBatchSize: 200,
maxAttempts: 3,
attemptTimeout: 2e3,
onStreamError: e => Gb(i, "PlayerCardService.batchGetPlayerCardsByFirstPartyIds", e),
updater: (e, t) => {
if (t.data) {
if (!t.data.firstPartyPlayerId) return void (Xb(t) && iS(e, t, r));
const i = Wb({
firstPartyUid: t.data.firstPartyPlayerId,
displayName: t.data.displayName
});
Xb(t) ? t.data?.firstPartyPlayerId && iS(e, t, r) : e.update({
error: new Error("Not EA connected"),
loading: !1,
uninitialized: !1
}), n.firstPartyFriendFragments.has(i) && n.firstPartyFriendFragments.update(i, e);
}
}
}), n.setGeneralStrategy({
toFragmentId: i_,
fetch: async e => {
const n = nS(e), r = await j_((() => t.BatchGetPlayerCards({
playerIds: n.map((e => ({
id: e
}))),
avatarSizes: [],
playerNetworkIds: I_
})), vb), i = r.data ? $b(r.data.stream) : void 0;
return {
...r,
data: i
};
},
batchDuration: 10,
maxBatchSize: 200,
maxAttempts: 3,
attemptTimeout: 2e3,
onStreamError: e => Gb(i, "PlayerCardService.batchGetPlayerCards", e),
updater: (e, t) => {
iS(e, t, r);
}
})), n),
dispose: () => {
o.forEach((e => e?.()));
}
};
}
});
function aS(e) {
return e.get(oS).init();
}
var sS = class extends WI {}, [lS, cS] = El({
debugName: "blockListFragmentStoreState",
create: () => new sS({
debugName: "BlockList"
})
});
function dS(e) {
return !!e.firstPartyPlayerId;
}
var uS = fm.PlatformFriends;
function pS(e) {
return "1P-" + e;
}
function fS(e, t, n) {
const r = n.firstPartyPlayerId;
var i;
e.set(r, {
photonPlayerId: n.photonPlayerId
}), (i = n.photonPlayerId).startsWith(n_) && l_(i) && t.playerInfoStream.data.trigger(n);
}
var hS = new Set([ uS.PresenceStatus.ONLINE, uS.PresenceStatus.IN_GAME, uS.PresenceStatus.CHATTING, uS.PresenceStatus.LOOKING_FOR_PARTY ]);
function mS(e, t, n, r, i) {
const o = r.userId, a = hS.has(r.presenceStatus), s = "EA" === t ? "PC" : "UNKNOWN", l = pS(o);
(a || i) && e.firstPartyPresenceStream.data.trigger({
sessionId: l,
photonSessionId: u_(n, l),
joinable: !1,
photonPlayerId: n,
playerNetworkId: t,
isOnline: a,
isEAPresence: !1,
productTitle: r.title || r.presence || void 0,
devicePlatformId: s
});
}
function gS(e, t, n, r, i) {
fS(e, n, r), mS(t, r.playerNetworkId, r.photonPlayerId, i, !1);
}
function yS(e, t, n, r) {
if (!t.length) return void r([]);
const i = {}, o = [];
for (const n of t) {
const t = e.firstPartyUidReverseLookup.get(n.userId), r = t ? e.getMaybeUntracked(t)?.data : void 0;
if (r && dS(r)) o.push(r); else {
const e = Wb({
firstPartyUid: n.userId,
displayName: n.displayName
});
i[e] = n;
}
}
o.length && r(o), e.fetchPlayerInfosForFirstPartyPseudoIds(Object.keys(i), (t => {
const o = [];
fr((() => {
for (const a of t) {
const t = a.data;
if (t?.playerNetworkId === n && dS(t)) {
o.push(t);
const n = Wb({
firstPartyUid: t.firstPartyPlayerId,
displayName: t.displayName
});
e.delete(n), e.firstPartyUidReverseLookup.set(t.firstPartyPlayerId, t.photonPlayerId);
} else if (a.error) {
const t = i[a.id], s = `1P|${(r = {
firstPartyPlayerId: t.userId,
playerNetworkId: n
}).firstPartyPlayerId || ""}|${r.playerNetworkId}`;
o.push({
firstPartyPlayerId: t.userId,
photonPlayerId: s,
displayName: t.displayName,
displayNameLowerCase: t.displayName.toLowerCase(),
playerNetworkId: n
}), e.delete(a.id), e.firstPartyUidReverseLookup.set(t.userId, s);
}
}
var r;
})), r(o);
}));
}
var IS = class extends as {
constructor(e) {
super({
data: e.onFriendListUpdated
}), this.platformFriendsService = e;
}
start() {
this.platformFriendsService.startListener({}), super.start();
}
close() {
this.platformFriendsService.stopListener({}), super.close();
}
};
function _S(e) {
return new ab(new IS(e), Cb);
}
var bS = class extends WI {
constructor() {
super(...arguments), this.friendsMap = new Zs({});
}
init(e, t, n, r) {
if (Ws.disableFirstPartyFriends) return void this.initToEmptyList();
this.initSeedStrategy(e, t, n, r);
const i = [ this.initStreamStrategy(e, t, n, r) ];
return () => {
i.forEach((e => e?.()));
};
}
initToEmptyList() {
const e = this.get();
fr((() => {
e.update({
data: this.friendsMap,
loading: !1,
uninitialized: !1,
error: void 0
});
}));
}
initSeedStrategy(e, t, n, r) {
j_((() => n.getFriendList({})), Pb).then((n => {
if (n.data) if ("EA" === r) fr((() => {
for (const t of n.data?.friendList ?? []) {
const n = o_({
eaPlayerId: t.userId,
playerNetworkId: r
});
mS(e, r, n, t, !1);
}
this.get().update({
...n,
data: this.friendsMap
});
})); else {
const i = {};
if (n.data.friendList.length) for (const e of n.data.friendList) i[e.userId] = e;
yS(t, n.data.friendList, r, (r => {
fr((() => {
for (const n of r) {
const r = i[n.firstPartyPlayerId];
r && gS(this.friendsMap, e, t, n, r);
}
this.get().update({
...n,
data: this.friendsMap
});
}));
}));
} else if (n.error) throw n.error;
})).catch((e => {
this.get().update({
error: e,
loading: !1
});
}));
}
initStreamStrategy(e, t, n, r) {
return this.setStreamStrategy({
stream: _S(n),
updater: (n, i) => {
const o = i.data?.friendListEvent;
if (o) {
for (const t of o.updatedFriends) {
let n;
n = "EA" === r ? i_({
eaPlayerId: t.userId,
playerNetworkId: "EA"
}) : nl((() => this.friendsMap.get(t.userId)?.photonPlayerId)), n && mS(e, r, n, t, !0);
}
if ("EA" !== r) for (const t of o.removedFriends) {
const n = nl((() => this.friendsMap.get(t)));
n && (this.friendsMap.delete(t), e.removePointOfPresence(n.photonPlayerId, pS(t)));
}
if ("EA" === r) {
for (const t of o.addedFriends) {
const n = o_({
eaPlayerId: t.userId,
playerNetworkId: r
});
mS(e, r, n, t, !0);
}
return;
}
const n = {};
for (const e of o.addedFriends) n[e.userId] = e;
yS(t, o.addedFriends, r, (r => {
fr((() => {
for (const i of r) {
const r = n[i.firstPartyPlayerId];
r && gS(this.friendsMap, e, t, i, r);
}
}));
}));
}
}
});
}
}, [SS, vS] = El({
debugName: "firstPartyFriendsStoreState",
create: () => new bS({
debugName: "FirstPartyFriends"
})
});
function TS(e) {
const t = [];
if (e?.friends.length) for (let n = 0; n < e.friends.length; n++) {
const r = e.friends[n].entity.id.playerId.id;
r && t.push(r);
}
return t;
}
var ES = class extends WI {
constructor(e, t) {
super(t), this.playerInfoStore = e, this.friendsMap = new Zs([]), this.addFriend = e => {
const t = this.get();
nl((() => {
this.friendsMap.set(e.photonPlayerId, e), t.update({
...t.toProps(),
data: this.friendsMap
});
}));
}, this.removeFriend = e => {
const t = this.get(), n = [];
return nl((() => (fr((() => {
I_.forEach((({id: t}) => {
const r = i_({
eaPlayerId: e,
playerNetworkId: t
}), i = this.friendsMap.get(r);
i && (this.friendsMap.delete(r), n.push(i));
})), t.update({
...t.toProps(),
data: this.friendsMap
});
})), n)));
};
}
init(e) {
e().then((e => {
if (e.error) throw e.error;
const t = TS(e.data);
this.playerInfoStore.fetchPlayerInfosForFriends(t, (e => {
const t = tS(e);
fr((() => {
for (const e of t) this.friendsMap.set(e, {
photonPlayerId: e
});
this.get().update({
data: this.friendsMap,
loading: !1
});
}));
}));
})).catch((e => {
this.get().update({
error: e,
loading: !1
});
}));
}
}, [PS, OS] = El({
debugName: "eaFriendsFragmentStoreState",
create: e => {
const t = e.get(b_);
return new ES(t, {
debugName: "EaFriends"
});
}
}), CS = Sl({
debugName: "eaFriendsPlayerInfosState",
get: function({get: e}) {
const t = e(PS).get(), n = e(b_), r = e(lS).get(), i = new Set(r.data?.keys()), o = hI([ t, r ]);
let a;
if (o.hasData && t.data) {
a = [];
for (const {photonPlayerId: e} of t.data.values()) {
const {eaPlayerId: t} = s_(e);
if (t && !i.has(t)) {
const t = n.get(e);
t.data && a.push(t.data);
}
}
}
return {
...o,
data: a
};
}
}), NS = Sl({
debugName: "firstPartyFriendsPlayerInfosState",
get: function({get: e}) {
const t = e(SS).get(), n = e(b_);
let r;
if (t.data) {
r = [];
for (const {photonPlayerId: e} of t.data.values()) {
const t = n.get(e);
t.data && r.push(t.data);
}
}
return {
...t.toProps(),
data: r
};
}
});
function AS(e) {
const {Party: t} = e;
return e.hasMethod("Party", "isCreatePartySupportedAsync") ? t.isCreatePartySupportedAsync({}) : Promise.resolve(t.isCreatePartySupported({}));
}
fm.DeepLink.Setting, fm.Notifications.NotificationPosition;
var [LS, wS] = function() {
const e = {
availableSettings: void 0,
isFirstPartyAppearOfflineSupported: void 0,
crossplayCompatiblePlatforms: void 0,
partiesAlwaysAvailable: void 0,
isChild: void 0,
isTeen: void 0,
defaultNotificationPosition: void 0
};
function t(t) {
const n = t.DeepLink.getSettingsAvailability({});
e.availableSettings = n?.availableSettings ?? [], e.isFirstPartyAppearOfflineSupported = !(!t.hasMethod("PlatformPresence", "isAppearOfflineSupported") || !t.PlatformPresence.isAppearOfflineSupported({})?.available);
}
function n(t) {
if (t.hasMethod("DeepLink", "getCrossPlayPlatformCompatibility")) {
const n = (t.DeepLink.getCrossPlayPlatformCompatibility({})?.compatiblePlatforms ?? []).map(bs);
e.crossplayCompatiblePlatforms = new Set(n), e.crossplayCompatiblePlatforms.size && !e.crossplayCompatiblePlatforms.has(Fs.devicePlatformId) && e.crossplayCompatiblePlatforms.add(Fs.devicePlatformId);
} else e.crossplayCompatiblePlatforms = new Set;
}
async function r(t) {
if (!Fs.isPartyEnabled) return void (e.partiesAlwaysAvailable = !1);
const n = t.hasMethod("Party", "isCreatePartySupported");
e.partiesAlwaysAvailable = !!n && ((await AS(t))?.partySupport.isSupported ?? !1);
}
async function i(t) {
const {Identity: n} = t, r = (await (n?.getTokenInfo({})))?.tokenInfo;
e.isChild = !(!r || !r.isUnderage && "CHILD" !== r.ageGroup), e.isTeen = "TEEN" === r?.ageGroup;
}
function o(t) {
t.hasMethod("Notifications", "getDefaultNotificationPosition") ? e.defaultNotificationPosition = t.Notifications.getDefaultNotificationPosition({})?.defaultPosition ?? null : e.defaultNotificationPosition = null;
}
return [ new Proxy(e, {
get(...e) {
const [t, n] = e;
if ("string" != typeof n || void 0 === t[n]) throw new Error(`PhotonBindingsConstants for "${n.toString()}" is not initiated`);
return Reflect.get(...e);
}
}), async function(e) {
t(e), n(e), o(e), await Promise.all([ r(e), i(e) ]);
} ];
}(), kS = Cl({
debugName: "cloneOfExtraPresenceEaPlayerIds",
default: new Set
});
function RS(e) {
return e.map((e => s_(e).eaPlayerId)).filter(dI);
}
var xS = Sl({
debugName: "eaFriendEaPlayerIdsState",
get: function({get: e}) {
return new Set(RS(Array.from(e(PS).get().data?.keys() ?? [])));
}
});
function BS(e, t) {
return e.get(xS).has(t) || e.get(kS).has(t);
}
function DS(e, t, n) {
return t?.isEAPresence && n && BS(e, n) ? t : t?.isEAPresence ? void 0 : t;
}
var FS = (e, t, n) => {
const r = t?.get(n), {eaPlayerId: i} = s_(n);
return r ? Object.values(r).filter((t => DS(e, t, i))) : [];
}, MS = (e, t) => {
if (e.productId && t.productId) {
if (e.productId !== t.productId) {
if (e.productId === Fs.productId) return -1;
if (t.productId === Fs.productId) return 1;
}
if (e.devicePlatformId !== t.devicePlatformId) {
if (e.devicePlatformId === Fs.devicePlatformId) return -1;
if (t.devicePlatformId === Fs.devicePlatformId) return 1;
const n = LS.crossplayCompatiblePlatforms.has(e.devicePlatformId);
if (n !== LS.crossplayCompatiblePlatforms.has(t.devicePlatformId)) return n ? -1 : 1;
}
} else if (e.productId || t.productId) return e.productId && !t.productId ? -1 : 1;
return (e.lastSeenOnline ?? 0) > (t.lastSeenOnline ?? 0) ? -1 : 1;
}, US = (e, t, n) => {
const r = FS(e, t, n);
return r.sort(MS), r[0];
}, HS = (e, t, n, r) => {
if (r) {
const {sessionId: i, eaPlayerId: o} = f_(r);
return DS(e, t?.get(n)?.[i], o);
}
return US(e, t, n);
}, VS = () => Ws.supportsUnfinishedFeatures, JS = (e => (e.party = "party", e.lobby = "lobby", 
e))(JS || {}), GS = (e => (e.ONLINE = "ONLINE", e.APPEAR_OFFLINE = "APPEAR_OFFLINE", 
e.DOWN_TO_PLAY = "DOWN_TO_PLAY", e.DO_NOT_DISTURB = "DO_NOT_DISTURB", e))(GS || {}), zS = e => "userStatusState" + e, jS = Cl({
debugName: "userStatusState",
default: void 0
});
async function qS(e, t, n, r) {
return e.set(jS, r), t.setItem(zS(n), r || "");
}
async function YS(e, t, n) {
if (n) try {
const i = zS(n), o = (await t.getItem(i))?.trim();
if (o && J_.string.validate(o) && (r = o, Object.values(GS).includes(r))) return e.set(jS, o), 
o;
} catch {}
var r;
}
var WS = (e => (e.main = "main", e.overlay = "overlay", e))(WS || {}), KS = Object.keys(WS);
function XS(e) {
return Dm(e);
}
function QS(e) {
return Dm(e);
}
var $S = Qg("/", void 0), ZS = {
overlay: e => e.pathname !== $S.path
};
function ev(e, t) {
if (void 0 === e) throw new Error(t || "Condition was undefined");
}
fm.PlayerList.Purpose.MakeFriends, fm.PlayerList.Purpose.PlayTogether, fm.PlayerList.Purpose.None, 
fm.PlayerList.Icon.Star, fm.PlayerList.Icon.Shield, fm.PlayerList.Icon.Hexagon, 
fm.PlayerList.Icon.ClipBoard, fm.PlayerList.Icon.StarShield, fm.PlayerList.Icon.Flag, 
fm.PlayerList.SectionFilter.Online, fm.PlayerList.SectionFilter.Offline, fm.PlayerList.SectionFilter.PlayerCustom1, 
fm.PlayerList.SectionFilter.PlayerCustom2, fm.PlayerList.SectionFilter.All, fm.PlayerList.PlayerSortOrder.Online, 
fm.PlayerList.PlayerSortOrder.Self, fm.PlayerList.PlayerSortOrder.InCurrentGame, 
fm.PlayerList.PlayerSortOrder.Alphabetic, fm.PlayerList.PlayerSortOrder.PlayerCustom1, 
fm.PlayerList.PlayerSortOrder.PlayerCustom2, fm.PlayerList.PlayerSortOrder.LastOnline;
var tv = class {
triggerBootEnd(e) {
this.handleEvent("boot_end", e);
}
triggerBootStart(e) {
this.handleEvent("boot_start", e);
}
triggerFriends(e) {
this.handleEvent("friends", e);
}
triggerFriendsPresence(e) {
this.handleEvent("friends_presence", e);
}
triggerGroup(e) {
this.handleEvent("group", e);
}
triggerLogin(e) {
this.handleEvent("login", e);
}
triggerMessage(e) {
this.handleEvent("message", e);
}
triggerMpLink(e) {
this.handleEvent("mp_link", e);
}
triggerPageView(e) {
this.handleEvent("page_view", e);
}
triggerPath(e) {
this.handleEvent("path", e);
}
triggerPlayerGrievance(e) {
this.handleEvent("player_grievance", e);
}
triggerSearch(e) {
this.handleEvent("search", e);
}
triggerSettings(e) {
this.handleEvent("settings", e);
}
triggerSocMessage(e) {
this.handleEvent("soc_message", e);
}
}, nv = [ 500, 501, 503, 429 ], rv = class extends tv {
constructor(e, t, n, r = 30) {
super(), this.httpPost = e, this.pinUrl = t, this.telemetryEnabled = !0, this.MAX_BACKOFF_COUNTER = 6, 
this.FLUSH_INTERVAL_IN_MS = 6e4, this.eventCounter = 0, this.preReadyQueuedEvents = [], 
this.queuedEvents = [], this.sentPayloads = [], this.queueSize = 0, this.nextSendAt = 0, 
this.backoffCounter = 1, this.maxQueueSize = 2e4, this.sessionHeaders = void 0, 
this.waitingForGameInit = !0, r > 0 ? setTimeout((() => {
this.waitingForGameInit = !1, this.flushPreReadyQueue();
}), 1e3 * r) : this.waitingForGameInit = !1, n && this.updateSessionInfo(n), Or(this, {
sessionHeaders: mt.ref,
updateSessionInfo: An
});
}
clearDebug() {
this.sentPayloads = [], this.clearQueue();
}
setGetCustomCoreHeaders(e) {
this.customCoreHeaders = e;
}
updateSessionId() {
this.info && this.updateSessionInfo(this.info);
}
setTelemetryEnabled(e) {
this.telemetryEnabled = e, e || (this.clearQueue(), this.clearTimer());
}
updateSessionInfo(e) {
this.info = e, this.sessionHeaders = {
sid: `${this.info.personaId}_${Date.now()}`,
taxv: "2.0",
tidt: "service",
tid: "photon",
rel: "prod",
v: e.versionNumber,
plat: e.platform,
et: "client_photon",
ts_post: "NOT_SET_YET",
loc: e.locale,
mac: e.macAddress,
clientIP: e.clientIp,
custom: {
edw_master_ttl_id: e.edwMasterTitleId,
offer_id: e.offerId,
mdm_master_ttl_id: e.mdmMasterTitleId,
entitlement_id: e.entitlementId,
tidv: e.buildVersion,
tsid: e.titleLaunchSessionId
},
events: [ "QUEUED_EVENTS_PLACEHOLDER" ]
}, this.flushPreReadyQueue();
}
flushPreReadyQueue() {
if (!this.waitingForGameInit && this.preReadyQueuedEvents.length) {
const e = this.preReadyQueuedEvents.slice();
this.preReadyQueuedEvents.length = 0;
for (const t of e) this.handleEvent(t.eventName, t.params, t.timestamp);
}
}
handleEvent(e, t, n = (new Date).toISOString()) {
if (this.waitingForGameInit) return void this.preReadyQueuedEvents.push({
eventName: e,
params: t,
timestamp: n
});
if (!this.telemetryEnabled) return;
if (!this.info) return void this.preReadyQueuedEvents.push({
eventName: e,
params: t,
timestamp: n
});
const r = {
s: ++this.eventCounter,
en: e,
pidt: "persona",
pid: this.info.personaId,
pidm: {
nucleus: this.info.nucleusId
},
ts_event: n,
custom: this.customCoreHeaders?.() ?? {},
exp_info: this.info.expInfo
}, i = {
...t,
core: r
}, o = JSON.stringify(i);
this.queuedEvents.push(o), this.queueSize += o.length, this.startTimer(), this.queueSize > this.maxQueueSize && this.flushQueue();
}
async flushQueue() {
return nl((() => {
if (0 === this.queuedEvents.length || !this.sessionHeaders) return;
if (this.backoffCounter > this.MAX_BACKOFF_COUNTER) return this.clearQueue(), void this.clearTimer();
const e = [];
for (;this.queuedEvents.length > 0; ) e.push(this.consumeQueuedEvents());
return this.clearTimer(), this.postEvents(e);
}));
}
consumeQueuedEvents() {
if (this.queueSize < this.maxQueueSize) return this.queueSize = 0, this.queuedEvents.splice(0, this.queuedEvents.length);
const e = [];
let t = 0;
for (const n of this.queuedEvents) if (e.push(n), t += n.length, t > this.maxQueueSize) break;
return this.queuedEvents.splice(0, e.length), this.queueSize -= t, e;
}
generatePayLoad(e) {
return nl((() => {
if (this.sessionHeaders) {
return JSON.stringify({
...this.sessionHeaders,
ts_post: (new Date).toISOString()
}).replace('"QUEUED_EVENTS_PLACEHOLDER"', e.join(","));
}
return "";
}));
}
clearQueue() {
this.queuedEvents.length = 0, this.queueSize = 0;
}
startTimer() {
if (!this.nextSendTimeout) {
const e = this.FLUSH_INTERVAL_IN_MS * this.backoffCounter;
this.nextSendAt = Date.now() + e, this.nextSendTimeout = setTimeout((() => {
this.clearTimer(), this.flushQueue();
}), e);
}
}
clearTimer() {
this.nextSendTimeout && (clearTimeout(this.nextSendTimeout), this.nextSendTimeout = void 0, 
this.nextSendAt = 0);
}
async postEvents(e) {
await Promise.all(e.map((async e => {
const t = this.generatePayLoad(e);
try {
const e = await this.httpPost(this.pinUrl, t);
nv.includes(e.statusCode) ? this.backoffCounter++ : this.backoffCounter = 1;
} catch (e) {
this.backoffCounter++;
}
})));
}
}, iv = Bs.includes(Fs.environment) ? "https://pin-river.data.ea.com/pinEvents" : "https://pin-river-test.data.ea.com/pinEvents", [ov, av] = El({
debugName: "pinClientState",
create: e => {
const t = e.get(zh);
return new rv(t.http.post, iv);
}
});
function sv(e, t) {
const n = e.get(ov), r = e.get(oI), i = t.Telemetry.getTelemetryAllowed({})?.status ?? !0;
n.setTelemetryEnabled(i), r.setMetricsEnabled(i);
}
async function lv(e, t, n, r) {
const i = Date.now(), o = Rs(t);
try {
return void await nf(e, o, n);
} catch (e) {
const t = "" + e;
return console.warn(t), {
message: t,
url: o,
duration: Date.now() - i
};
}
}
async function cv(e, t, n = "") {
let r = !0;
const i = [], o = ws(t), a = ks(t), s = await lv(e, o, a);
if (s) {
i.push(s);
const t = await lv(e, Ls, false);
t && (r = !1, i.push(t));
}
return {
translationsLoaded: r,
errors: i
};
}
var dv = J_.object({
tokenInfo: J_.object({
userId: J_.string,
productId: J_.optional(J_.nullable(J_.string)),
isUnderage: J_.optional(J_.boolean),
ageGroup: J_.optional(J_.string),
accessToken: J_.optional(J_.string)
}),
personaInfo: J_.object({
personaId: J_.string,
displayName: J_.string,
devicePlatformId: rb,
playerNetworkId: nb
})
});
function uv(e) {
const t = e_(e.personaInfo.playerNetworkId), n = jb(e.personaInfo.displayName, t);
return {
tokenInfo: {
userId: e.tokenInfo.userId,
productId: e.tokenInfo.productId ?? void 0,
isUnderage: e.tokenInfo.isUnderage ?? !1,
ageGroup: e.tokenInfo.ageGroup,
accessToken: e.tokenInfo.accessToken
},
personaInfo: {
...e.personaInfo,
displayName: n,
playerNetworkId: t,
devicePlatformId: bs(e.personaInfo.devicePlatformId)
},
photonPlayerId: i_({
eaPlayerId: e.tokenInfo.userId,
playerNetworkId: t
})
};
}
async function pv(e, t, n) {
const {data: r, error: i} = await j_((async () => {
const [t, n] = await Promise.all([ e.getTokenInfo({}), e.getPersonaInfo({}) ]);
return {
...t,
...n
};
}), dv, {
transformResponse: uv
});
if (!r) return {
error: i || new Error("Failed to fetch identity")
};
const o = aS(t), a = Date.now(), {data: s} = await yI(o.get(r.photonPlayerId), 1e4), l = {
...r,
personaInfo: {
...r.personaInfo,
displayName: s?.displayName ?? r.personaInfo.displayName,
personaId: s?.personaId ?? r.personaInfo.personaId
}
}, c = r.tokenInfo.userId, d = o.findByEaPlayerId(c), {data: u, error: p} = await II(d, 1e4);
if (!u.length) {
n?.addEvent({
eventType: "photon_init_user_personas_error",
duration: Date.now() - a,
message: p?.message || "Failed to fetch personas"
});
const e = r.personaInfo.playerNetworkId;
return {
data: {
...l,
playerNetworkIds: "EA" !== e ? [ e, "EA" ] : [ e ]
}
};
}
return {
data: {
...l,
playerNetworkIds: u.map((e => e.playerNetworkId))
}
};
}
var [fv, hv] = Pl({
debugName: "userState"
}), mv = e => e.get(fv);
function gv() {
return hv().tokenInfo.userId;
}
function yv(e, t) {
const {eaPlayerId: n} = s_(e);
return {
isCurrentEaUser: t.tokenInfo.userId === n,
isCurrentPhotonUser: t.photonPlayerId === e
};
}
function Iv(e) {
return yv(e, hv());
}
function _v(e, t) {
return yv(t, e(fv));
}
var bv = () => LS.isChild || LS.isTeen, Sv = {
"PhotonJsBindings.Party.getParty": !1,
"PhotonJsBindings.Party.createParty": !1,
"PhotonJsBindings.Party.joinParty": !0,
"PhotonJsBindings.Party.leaveParty": !1,
"PhotonJsBindings.Party.setPartyLeader": !1,
"PhotonJsBindings.Party.kickPartyMember": !1,
"PhotonJsBindings.Party.isPartySupported": !1,
"PhotonJsBindings.Party.isCreatePartySupportedAsync": !1,
"PhotonJsBindings.Lobby.getLobby": !1,
"PhotonJsBindings.Lobby.joinLobby": !0,
"PhotonJsBindings.Lobby.filterUninvitablePlayers": !1,
"PhotonJsBindings.Lobby.prepareInvite": !1,
"PhotonJsBindings.PhotonInvite.prepareInvite": !1,
"PhotonJsBindings.PhotonInvite.filterUninvitablePlayers": !1,
"PhotonJsBindings.Voip.mutePlayer": !1,
"PhotonJsBindings.Voip.unmutePlayer": !1,
"PhotonJsBindings.Voip.setMutedPlayers": !1,
"PhotonJsBindings.Voip.getVoipState": !1,
"PhotonJsBindings.Voip.setActiveVoipChannel": !1,
"PhotonJsBindings.Voip.getVoipChannels": !1,
"PhotonJsBindings.InputBindings.setExclusiveMouseRegion": !1,
"PhotonJsBindings.PlatformFriends.startListener": !0,
"PhotonJsBindings.PlatformFriends.stopListener": !0,
"PhotonJsBindings.PlatformFriends.getState": !0,
"PhotonJsBindings.PlatformFriends.getFriendList": !0,
"PhotonJsBindings.PlatformFriends.getBlockList": !0,
"PhotonJsBindings.PlatformFriends.addFriend": !0,
"PhotonJsBindings.PlatformFriends.removeFriend": !0,
"PhotonJsBindings.PlatformFriends.addBlock": !0,
"PhotonJsBindings.PlatformFriends.removeBlock": !0,
"PhotonJsBindings.DeepLink.invokePlayerActionAsync": !1,
"PhotonJsBindings.DeepLink.openFirstPartyProfileAsync": !1,
"PhotonJsBindings.DeepLink.filterFriendsForPicker": !1,
"PhotonJsBindings.DeepLink.openGameHubPage": !1,
"PhotonJsBindings.DeepLink.getPlayerActionsAsync": !1,
"PhotonJsBindings.DeepLink.canEnableCrossPlay": !1,
"PhotonJsBindings.DeepLink.enableCrossPlay": !1,
"PhotonJsBindings.Identity.getTokenInfo": !0,
"PhotonJsBindings.Identity.getPersonaInfo": !0,
"PhotonJsBindings.Moderation.getReportCategories": !1,
"PhotonJsBindings.Moderation.reportPlayer": !1,
"PhotonJsBindings.Moderation.playerReportingCancelled": !1,
"PhotonJsBindings.RecentlyMet.getRecentlyMetPlayers": !1,
"PhotonJsBindings.RecentlyMet.getSessionPlayers": !1,
"PhotonJsBindings.Accessibility.getAccessibilitySettings": !1,
"PhotonJsBindings.Accessibility.narrate": !1,
"PhotonJsBindings.UserExperience.playSoundEffect": !1,
"PhotonJsBindings.PresenceSession.updatePresence": !0,
"PhotonJsBindings.PresenceSession.partialUpdatePresence": !0,
"PhotonJsBindings.PresenceSession.subscribeToPlayerPresence": !0,
"PhotonJsBindings.PresenceSession.subscribeToPlayersPresence": !0,
"PhotonJsBindings.PresenceSession.unsubscribeFromPlayerPresence": !0,
"PhotonJsBindings.PresenceSession.unsubscribeFromPlayersPresence": !0,
"PhotonJsBindings.PresenceSession.subscribeToFriendsPresence": !0,
"PhotonJsBindings.PresenceSession.unsubscribeFromFriendsPresence": !0,
"PhotonJsBindings.PresenceSession.getPresenceSubscriptions": !0,
"PhotonJsBindings.PresenceSession.getDirectJoinTokens": !0,
"PhotonJsBindings.PresenceSession.getPlayerPresence": !0,
"PhotonJsBindings.PresenceSession.getPlayerPresenceEnd": !0,
"PhotonJsBindings.PresenceSession.getFriendsPresence": !0,
"PhotonJsBindings.PresenceSession.getFriendsPresenceEnd": !0,
"PhotonJsBindings.PresenceSession.attachToPresenceSession": !0,
"PhotonJsBindings.PresenceSession.attachToPresenceSessionEnd": !0,
"PhotonJsBindings.PresenceSession.detachFromPresenceSession": !0,
"PhotonJsBindings.PlatformPresence.isAppearOffline": !1,
"PhotonJsBindings.Badging.updateUnseenItemCount": !1,
"PhotonJsBindings.Badging.updateOnlineFriendCount": !1,
"PhotonJsBindings.BlockService.BlockPlayer": !0,
"PhotonJsBindings.BlockService.UnblockPlayer": !0,
"PhotonJsBindings.BlockService.BatchVerifyBlockedPlayers": !0,
"PhotonJsBindings.BlockService.ListBlockedPlayers": !0,
"PhotonJsBindings.BlockListNotifications.SubscribeToBlockListNotifications": !1,
"PhotonJsBindings.BlockListNotifications.SubscribeToBlockListNotificationsEnd": !1,
"PhotonJsBindings.MuteListNotifications.SubscribeToMuteListNotifications": !1,
"PhotonJsBindings.MuteListNotifications.SubscribeToMuteListNotificationsEnd": !1,
"PhotonJsBindings.MuteService.MutePlayer": !0,
"PhotonJsBindings.MuteService.UnmutePlayer": !0,
"PhotonJsBindings.MuteService.BatchVerifyMutedPlayers": !0,
"PhotonJsBindings.MuteService.ListMutedPlayers": !0,
"PhotonJsBindings.Friends.ListFriends": !0,
"PhotonJsBindings.Friends.BatchVerifyFriends": !0,
"PhotonJsBindings.Friends.ListPlatformFriends": !0,
"PhotonJsBindings.Friends.DeleteFriend": !0,
"PhotonJsBindings.Friends.ListMutualFriends": !0,
"PhotonJsBindings.FriendsNotificationsService.StreamNotifications": !1,
"PhotonJsBindings.FriendsNotificationsService.StreamNotificationsEnd": !1,
"PhotonJsBindings.Invites.ListSentFriendInvites": !0,
"PhotonJsBindings.Invites.ListReceivedFriendInvites": !0,
"PhotonJsBindings.Invites.BatchSendFriendInvites": !0,
"PhotonJsBindings.Invites.CancelSentFriendInvite": !0,
"PhotonJsBindings.Invites.AcceptReceivedFriendInvite": !0,
"PhotonJsBindings.Invites.DeclineReceivedFriendInvite": !0,
"PhotonJsBindings.GameInvite.SendGameInvite": !0,
"PhotonJsBindings.GameInvite.SubscribeToReceivedGameInviteNotifications": !0,
"PhotonJsBindings.GameInvite.SubscribeToReceivedGameInviteNotificationsEnd": !0,
"PhotonJsBindings.GameInvite.GetReceivedGameInvites": !0,
"PhotonJsBindings.GameInvite.GetReceivedGameInvitesEnd": !0,
"PhotonJsBindings.GameInvite.GetGameJoinTokens": !0,
"PhotonJsBindings.GameInvite.AcceptGameInvite": !0,
"PhotonJsBindings.GameInvite.RejectGameInvite": !0,
"PhotonJsBindings.GameInvite.RevokeGameInvites": !0,
"PhotonJsBindings.ContentMart.GetProduct": !0,
"PhotonJsBindings.ContentMart.GetPlayerNetwork": !0,
"PhotonJsBindings.ContentMart.GetInputMethod": !0,
"PhotonJsBindings.PlayerSearch.SearchPlayers": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPlayerCards": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFriendsPlayerCards": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFriendsPlayerCardsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsByFirstPartyIds": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPlayerCardsByFirstPartyIdsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFirstPartyIds": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFirstPartyIdsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFriendsFirstPartyIds": !0,
"PhotonJsBindings.PlayerCardService.BatchGetFriendsFirstPartyIdsEnd": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPrivacySettings": !0,
"PhotonJsBindings.PlayerCardService.BatchGetPrivacySettingsEnd": !0,
"PhotonJsBindings.PlayerCardService.GetPlayerCard": !0,
"PhotonJsBindings.PlayerCardService.GetExternalPartyData": !0,
"PhotonJsBindings.PlayerCardService.GetExternalPartyDataEnd": !0,
"PhotonJsBindings.FriendListNotifications.SubscribeToFriendListNotifications": !0,
"PhotonJsBindings.FriendListNotifications.SubscribeToFriendListNotificationsEnd": !0,
"PhotonJsBindings.InviteListNotifications.SubscribeToSentInviteListNotifications": !0,
"PhotonJsBindings.InviteListNotifications.SubscribeToSentInviteListNotificationsEnd": !0,
"PhotonJsBindings.InviteListNotifications.SubscribeToReceivedInviteListNotifications": !0,
"PhotonJsBindings.InviteListNotifications.SubscribeToReceivedInviteListNotificationsEnd": !0,
"PhotonJsBindings.PlayerList.getPlayerListConfig": !1,
"PhotonJsBindings.PlayerList.getPlayerListPersonas": !1,
"PhotonJsBindings.PlayerList.getPlayerLists": !1,
"PhotonJsBindings.XboxPlatform.getXblPrivacyBatchCheckPermission": !0,
"PhotonJsBindings.XboxPlatform.CheckXUserPrivilege": !0,
"PhotonJsBindings.XboxPlatform.ResolveXUserPrivilegeWithUiAsync": !0,
"PhotonJsBindings.XboxPlatform.ShowMessageDialogAsync": !0
}, vv = new Map([ [ "PhotonJsBindings.GameInvite.RevokeGameInvites", [ "NOT_FOUND(5) game invite not found [5] (eadp::GRpcStatusCodeError)" ] ], [ "PhotonJsBindings.GameInvite.AcceptGameInvite", [ "NOT_FOUND(5) game invite not found [5] (eadp::GRpcStatusCodeError)" ] ] ]);
function Tv(e) {
return e ? "query_resumed" : "query";
}
function Ev(e) {
return e ? "query_resumed_error" : "query_error";
}
function Pv(e) {
return !!Sv[e] && ("PhotonJsBindings.PlatformFriends.startListener" !== e || !Ws.isPlatformFriendsListenerBroken);
}
var Ov = class extends fm {
constructor(e, t) {
super(e), this.metricClient = t, t.initBootEndListener(this.Telemetry.onBootEnd);
}
addSuccessMetric(e, t, n) {
this.metricClient.addDurationEvent(Tv(n), t, e);
}
addErrorMetric(e, t, n, r) {
const i = vv.get(e)?.includes(n);
this.metricClient.addDurationEvent(i ? Tv(r) : Ev(r), t, e, n);
}
addDebugMetric(e, t, n, r, i, o, a) {
this.metricClient.addEvent({
metric: "query_debug",
value: e,
duration: t,
message: n,
data: {
prevTimestamp: r,
timestamp: i,
prevBootCount: o,
bootCount: a
}
});
}
_asyncCallback(e, t, n) {
const r = performance.now(), i = this.metricClient.bootEndCount;
super._asyncCallback(e, t, ((t, o) => {
const a = performance.now(), s = a - r;
if (n(t, o), !Pv(e)) return;
const l = this.metricClient.bootEndCount > i;
o ? this.addErrorMetric(e, s, o.message, l) : this.addSuccessMetric(e, s, l), s >= 6e4 && this.addDebugMetric(e, s, o?.message, r, a, i, this.metricClient.bootEndCount);
}));
}
};
function Cv(e, t) {
return n => n.getConfigBoolValue({
name: e,
defaultValue: t
})?.value ?? t;
}
function Nv(e, t) {
return n => n.getConfigStringValue({
name: e,
defaultValue: t
})?.value ?? t;
}
var Av = is.useDevservice || !1, Lv = {
EnableIncorrectConfigAssert: Cv("Photon.EnableIncorrectConfigAssert", !1),
DisableExperiments: Cv("Photon.DisableExperiments", !1),
EnabledExperiments: Nv("Photon.EnabledExperiments", ""),
UseFTUE: Cv("Photon.UseFTUE", !0),
UseDevservice: Cv("Photon.UseDevservice", Av),
DeveloperMode: Cv("Photon.DeveloperMode", !1),
EADPServiceHost: Nv("Photon.EADPServiceHost", "devservice.ad.ea.com:8082/api/default/default"),
TranslationHost: Nv("Photon.TranslationHost", "")
};
function wv(e, t, n) {
return !e && (n[t] = "is empty", !0);
}
function kv(e, t, n, r) {
if (!Object.keys(r).length) return;
t.addEvent({
eventType: "photon_assert",
message: n
});
Lv.EnableIncorrectConfigAssert(e.Utilities) && e.Utilities.showError({
message: n + ":\n" + JSON.stringify(r, void 0, 2)
});
}
function Rv(e, t) {
const n = {}, r = is.TwinkleConstants.locale;
wv(r, "locale", n) || As.has(r ?? "") || (n.locale = `has unsupported value '${r}'`), 
wv(is.TwinkleConstants?.devicePlatformId, "devicePlatformId", n), wv(is.AppConstants?.envId, "environmentId", n), 
wv(is.AppConstants?.productId, "productId", n), wv(is.AppConstants?.nativeVersion, "nativeVersion", n), 
wv(is.AppConstants?.gameVersion, "gameVersion", n), kv(e, t, "Incorrect Photon configuration", n);
}
var xv = {
EA: () => Em("PLATFORMNAME_EA-APP"),
XBOX: () => Em("PLATFORMNAME_XBOX"),
PSN: () => Em("PLATFORMNAME_PLAYSTATION"),
STEAM: () => Em("PLATFORMNAME_STEAM"),
NINTENDO: () => Em("PLATFORMNAME_SWITCH"),
GOOGLE_PLAY: () => Em("PLATFORMNAME_GOOGLE-PLAY"),
APPLE_GAMECENTER: () => Em("PLATFORMNAME_APPLE-GAME-CENTER"),
EPIC: () => Em("PLATFORMNAME_EPIC")
}, Bv = e => xv[e](), Dv = fm.DeepLink.Setting, Fv = () => LS.isFirstPartyAppearOfflineSupported || LS.availableSettings.includes(Dv.AppearOffline), Mv = Cl({
debugName: "appearOfflineState",
default: !1
});
function Uv(e) {
return VS() ? "APPEAR_OFFLINE" === e.get(jS) : e.get(Mv);
}
function Hv(e, t) {
VS() ? e.set(jS, t ? "APPEAR_OFFLINE" : "ONLINE") : e.set(Mv, t);
}
var Vv = (e, t, n) => {
const r = Em(t ? "PHOTON-SOCIAL_PRESENCE_OFFLINE" : "PHOTON-SOCIAL_PRESENCE_ONLINE");
if (LS.isFirstPartyAppearOfflineSupported) {
const t = Bv(e);
return n ? Em("PHOTON-SOCIAL_TOAST_STATUS_FIRST-UPDATE_BODY_CASCADING", {
"%onlineOrOffline%": r,
"%platformName%": t
}) : Em("PHOTON-SOCIAL_TOAST_STATUS_UPDATE_BODY_CASCADING", {
"%onlineOrOffline%": r,
"%platform%": t
});
}
return Em(n ? "PHOTON-SOCIAL_TOAST_STATUS_FIRST-UPDATE_BODY" : "PHOTON-SOCIAL_TOAST_STATUS_UPDATE_BODY", {
"%onlineOrOffline%": r
});
};
async function Jv(e, t) {
let n = !1;
try {
t.PlatformPresence.onAppearOfflineChanged.subscribe((t => e.set(Mv, t.appearOffline ?? !1)));
n = (await t.PlatformPresence.isAppearOffline({}))?.appearOffline ?? !1;
} catch {}
return e.set(Mv, n), n;
}
var Gv = e => "onlineStatusState" + e, zv = (e => (e[e.Online = 1] = "Online", e[e.AppearOffline = 2] = "AppearOffline", 
e))(zv || {}), jv = Cl({
debugName: "appearOfflineSettingState",
default: 1
}), qv = e => 2 === e;
function Yv(e, t, n, r) {
if (!LS.isFirstPartyAppearOfflineSupported) return fr((() => {
e.set(jv, r), Hv(e, qv(r));
})), t.setItem(Gv(n), JSON.stringify(r));
}
async function Wv(e, t, n) {
if (LS.isFirstPartyAppearOfflineSupported) return !1;
let r = 1;
if (n) try {
const e = Gv(n), i = (await t.getItem(e))?.trim();
if (i) {
const e = JSON.parse(i);
J_.number.validate(e) && zv[e] && (r = e);
}
} catch {}
const i = qv(r);
return e.set(jv, r), Hv(e, i), i;
}
var Kv = (e, t, n, r) => LS.isFirstPartyAppearOfflineSupported ? Jv(n, t) : Wv(n, e.localStorage, r), Xv = J_.object({
entity: J_.object({
id: eb,
displayName: J_.string
}),
createTime: K_,
sourcePlayerNetworkId: J_.optional(J_.nullable(nb)),
targetPlayerNetworkId: J_.optional(J_.nullable(nb))
}), Qv = J_.object({
invites: J_.array(Xv)
}), $v = J_.object({
friendInviteDetails: Xv,
listUpdate: kb,
updateTimestamp: K_
}), Zv = (J_.object({
inviteListNotification: $v
}), J_.object({
stream: J_.custom(sb()),
response: J_.object({})
})), eT = e => e, tT = class {
constructor(e) {
this.photonBindings = e, this.stream = new as;
}
startStream(e, t) {
e.start(), e.data.subscribe((e => {
this.stream.data.trigger(t(e));
})), e.error.subscribe((e => {
this.stream.error.trigger(e);
})), this.stream.end.subscribe((() => {
e.close();
}));
}
async startBlockStream(e) {
const {data: t} = await j_((() => this.photonBindings.BlockListNotifications.SubscribeToBlockListNotifications(e)), Hb);
t?.stream && this.startStream(t.stream, eT);
}
async startMuteStream(e) {
const {data: t} = await j_((() => this.photonBindings.MuteListNotifications.SubscribeToMuteListNotifications(e)), Vb);
t?.stream && this.startStream(t.stream, eT);
}
async startFriendsStream(e) {
const {data: t} = await j_((() => this.photonBindings.FriendListNotifications.SubscribeToFriendListNotifications(e)), Ub);
t?.stream && this.startStream(t.stream, eT);
}
async startReceivedFriendRequestsStream(e) {
const {data: t} = await j_((() => this.photonBindings.InviteListNotifications.SubscribeToReceivedInviteListNotifications(e)), Zv);
t?.stream && this.startStream(t.stream, (e => ({
receivedInviteListNotification: e.inviteListNotification
})));
}
async startSentFriendRequestsStream(e) {
const {data: t} = await j_((() => this.photonBindings.InviteListNotifications.SubscribeToSentInviteListNotifications(e)), Zv);
t?.stream && this.startStream(t.stream, (e => ({
sentInviteListNotification: e.inviteListNotification
})));
}
async StreamNotifications(e) {
return await Promise.all([ this.startBlockStream(e), this.startMuteStream(e), this.startFriendsStream(e), this.startReceivedFriendRequestsStream(e), this.startSentFriendRequestsStream(e) ]), 
{
stream: this.stream,
response: {}
};
}
};
function nT(e) {
const t = new Map;
return e.forEach((e => {
if (!e.sessionId) return;
const n = t.get(e.photonPlayerId);
n ? n[e.sessionId] = e : t.set(e.photonPlayerId, {
[e.sessionId]: e
});
})), new g_(t, 50);
}
var rT = class extends WI {
constructor() {
super(...arguments), this.firstPartyPresenceStream = new as;
}
addPresence(e) {
const t = this.get();
nl((() => {
const n = t.data;
if (n) {
const t = n.get(e.photonPlayerId);
n.set(e.photonPlayerId, {
...t,
[e.sessionId]: e
});
} else t.update({
...t.toProps(),
data: nT([ e ])
});
}));
}
addPointsOfPresence(e) {
Object.keys(e).forEach((t => {
this.addPresence(e[t]);
}));
}
removePresence(e) {
const t = this.get();
return nl((() => {
const n = t.data;
if (n) {
const t = n.get(e);
return n.delete(e), t;
}
}));
}
removeSelectPointsOfPresence(e, t) {
const n = this.get(), r = nl((() => n.data));
if (r) {
const n = nl((() => ({
...r.get(e) ?? {}
})));
Object.keys(n).forEach((e => {
t(n[e]) && delete n[e];
})), 0 === Object.keys(n).length ? r.delete(e) : r.set(e, {
...n
});
}
}
removePointOfPresence(e, t) {
this.removeSelectPointsOfPresence(e, (e => e.sessionId === t));
}
}, [iT, oT] = El({
debugName: "presenceFragmentStoreState",
create: () => new rT({
debugName: "Presence"
})
}), aT = e => e.get(iT);
function sT(e, t) {
const n = [], r = [], i = {}, o = 0 === t.size;
for (let r = 0, a = e.length; r < a; r++) {
const a = e[r], s = a.playerId, l = e_(a.playerNetworkId), c = i_({
eaPlayerId: s,
playerNetworkId: l
});
i[c] = !0;
const d = t.get(c);
if (!d || d.personaId !== a.personaId) {
const e = {
eaPlayerId: s,
personaId: a.personaId,
playerNetworkId: l,
joinTimestampMs: a.joinTimestampMs,
photonPlayerId: c,
displayName: a.displayName
};
t.set(c, e), o || n.push(e);
}
}
if (e.length !== t.size) for (const e of t.values()) i[e.photonPlayerId] || (t.delete(e.photonPlayerId), 
r.push(e));
return {
added: n,
removed: r
};
}
function lT(e, t = new Zs([])) {
const {added: n, removed: r} = sT(e.members, t);
return {
lobby: {
...e,
members: t
},
added: n,
removed: r
};
}
function cT(e) {
return nl((() => {
if (e.lobby) return lT(e.lobby).lobby;
}));
}
function dT(e) {
return nl((() => lT(e.lobby))).lobby;
}
var uT = J_.object({
playerId: J_.string,
playerNetworkId: J_.string,
displayName: J_.string,
personaId: J_.string,
joinTimestampMs: J_.number
}), pT = J_.object({
lobbyId: J_.string,
members: J_.array(uT),
maxSize: J_.number,
joinable: J_.boolean,
crossPlayEnabled: J_.boolean,
telemetryType: J_.string,
invitable: J_.boolean
}), fT = J_.object({
lobby: J_.optional(J_.nullable(pT))
}), hT = J_.object({
lobby: pT
}), mT = class extends as {
constructor(e) {
super({
data: e
});
}
}, gT = td((e => ({
color: e
})), {
fontSize: Jc(Zu.Body.Text.fontSize),
zOffset: 1,
textLetterSpacing: Vc(1),
textEdgeOffset: .1,
wordWrap: "break-word"
}), yT = Qc({
textEllipsis: !0,
wordWrap: "normal"
}), IT = ({text: e, useEllipsis: t, color: n, style: r}) => H.createElement("surface", {
text: e,
style: [ _u, gT(n || Zu.Body.Text.color), t ? yT : void 0, r ]
}), _T = (e => (e.Cloud = "Cloud", e.Console = "Console", e.Pc = "Pc", e))(_T || {}), bT = {
...KI,
..._T
};
function ST(e, t) {
return e.length > t + 1 ? of() ? "…" + e.substring(0, t) : e.substring(0, t) + "…" : e;
}
var vT = Vc(32), TT = {
primaryId: Qc({
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "center"
}),
icon: Qc({
width: vT,
height: vT,
minWidth: vT,
textureMode: "cover",
zOffset: 1,
color: Rd.TextColorStandard.emphasized
})
}, ET = Qc({
minWidth: Vc(32),
width: Vc(32),
height: Vc(32),
marginStart: Vc(Rd.DimensionSpace.smallest)
}), PT = {
[bT.Cloud]: ah.cloud32,
[bT.Console]: ah.console32,
[bT.Epic]: ah.epic32,
[bT.Ea]: ah.ea32,
[bT.Nintendo]: ah.switch32,
[bT.Pc]: ah.pc32,
[bT.Psn]: ah.playstation32,
[bT.Steam]: ah.steam32,
[bT.Xbox]: ah.xbox32
}, OT = e => PT[e] || PT[bT.Pc], CT = {
[bT.Cloud]: Su.genericCloud,
[bT.Console]: Su.genericConsole,
[bT.Epic]: Su.epicGames,
[bT.Ea]: Su.ea,
[bT.Nintendo]: Su.switch,
[bT.Pc]: Su.genericPc,
[bT.Psn]: Su.playstation,
[bT.Steam]: Su.steam,
[bT.Xbox]: Su.xbox
};
function NT({name: e, playerNetworkId: t}, n) {
let r = n?.allowEllipsis ? ST(e, 16) : e;
of() && (r = Su.lrm + r);
const i = [ (o = t, CT[o] || Su.genericPc), r ];
var o;
return of() && i.reverse(), i.join(Su.nbsp).split("").join(Su.wordJoiner);
}
var AT = ({platform: e, style: t}) => {
const n = OT(e);
return H.createElement("surface", {
style: [ TT.icon, rd("texture", n), t ]
});
}, LT = Vc(Rd.DimensionSpace.medium), wT = ({name: e, playerNetworkId: t, textStyle: n, style: r, useEllipsis: i = !0, icon: o}) => H.createElement("surface", {
style: [ TT.primaryId, r ]
}, H.createElement(AT, {
platform: t,
style: rd("marginEnd", Vc(Rd.DimensionSpace.medium))
}), H.createElement(IT, {
text: e,
color: Rd.TextColorStandard.emphasized,
style: [ rd("textEllipsis", i), rd("wordWrap", i ? "normal" : "break-word"), n ]
}), !!o && H.createElement("surface", {
style: [ ET, rd("texture", o) ]
})), kT = class {
constructor(e) {
this.isInGamePlayStatus = !1;
const t = e.getInGamePlay({});
t && (this.isInGamePlayStatus = t.inGamePlay), e.onInGamePlayChanged.subscribe((({inGamePlay: e}) => {
this.isInGamePlayStatus = e;
})), Or(this, {
isInGamePlayStatus: mt
});
}
get isInGamePlay() {
return this.isInGamePlayStatus;
}
}, [RT, xT] = El({
debugName: "gamePlayManagerState",
create: e => {
const t = e.get(sI);
return new kT(t.Notifications);
}
});
function BT(e, t) {
const n = e % t;
return n < 0 ? n + t : n;
}
var DT = (e = Date.now()) => ({
seconds: Math.floor(e / 1e3),
nanos: 1e6 * BT(e, 1e3)
});
function FT(e) {
const {seconds: t, nanos: n = 0} = e;
return 1e3 * t + n / 1e6;
}
var MT = (e => (e.OnGoing = "EXPERIMENT_ONGOING", e.NotFound = "EXPERIMENT_NOT_FOUND", 
e.Inactive = "EXPERIMENT_NOT_ACTIVE", e.Unqualified = "EXPERIMENT_UNQUALIFIED", 
e.Error = "EXPERIMENT_ERROR", e))(MT || {}), UT = new Set(Object.values(MT)), HT = J_.object({
experimentKey: J_.string,
experimentId: J_.number,
variantId: J_.number,
variantName: J_.string,
experimentStatus: J_.custom((e => "string" == typeof e && UT.has(e))),
testParameters: J_.anyObject
}), VT = J_.object({
experiments: J_.array(HT),
storedTimestamp: J_.optional(K_)
}), JT = {
PC: "pc",
XBOXONE: "xbox_one",
XBSX: "xbsx",
PS4: "ps4",
PS5: "ps5",
NX: "switch",
IOS: "ios",
ANDROID: "android",
WEB: "web",
UNKNOWN: "pc"
};
function GT(e, t) {
const n = JT[Fs.devicePlatformId];
return {
domain: e.domainId,
playerId: {
type: "nucleus",
id: t.tokenInfo.userId
},
secondaryPlayerIds: [ {
type: "persona",
id: t.personaInfo.personaId
} ],
platform: n,
titleId: "photon",
titleIdType: "service",
attributes: {
locale: Fs.locale,
productId: Fs.productId,
platform: n
},
isDebug: !Bs.includes(Fs.environment)
};
}
function zT(e) {
return e.body ? JSON.parse(ig(tg(e.body))) : void 0;
}
function jT(e, t, n) {
if (VT.validate(e)) {
if (e.storedTimestamp && FT(e.storedTimestamp) + 2592e6 < Date.now()) return void n(new Error("Data in localStorage is too old"));
const r = e.experiments.filter((e => "EXPERIMENT_ONGOING" === e.experimentStatus));
t(new Map(r.map((e => [ e.experimentKey, e ]))));
} else n(new Error("Invalid experiments data: " + VT.getLastErrors().join("\n")));
}
var qT = class {
constructor(e, t, n, r, i) {
this.httpPost = e, this.moby = t, this.localStorage = n, this.environment = r, this.experimentIds = i, 
this.isDisposed = !1, this.fragment = new EI("experiments", {
uninitialized: !0,
loading: !1
}), this.dispose = () => {
this.isDisposed = !0;
};
}
getLocalStorageKey() {
return "experiments_" + mv(this.moby).tokenInfo.userId;
}
apiCall(e, t) {
if (this.isDisposed) return Promise.reject(new Error("Disposed"));
const n = this.environment.baseUrl + e, r = this.moby.getUntracked(oI), i = e => {
r.addEvent({
eventType: "photon_experiments",
url: n,
duration: e.duration,
message: e.message,
status_code: e.statusCode
});
};
return new Promise(((e, r) => {
const o = this.moby.get(fv), a = JSON.stringify({
...t,
...GT(this.environment, o)
}), s = Date.now();
this.httpPost(n, a, {
"content-type": "application/json"
}).then((t => {
const n = zT(t);
i({
statusCode: t.statusCode,
message: n?.message,
duration: Date.now() - s
}), 200 === t.statusCode ? e(n) : r(new Error(n?.message ?? t.statusCode.toString()));
})).catch((e => {
i({
statusCode: 0,
message: e.message,
duration: Date.now() - s
}), r(e);
}));
}));
}
get isReady() {
return !this.fragment.loading && !this.fragment.uninitialized;
}
isInVariant(e, t) {
return this.fragment.data?.get(e)?.variantName === t;
}
fallbackToLocalStorage(e, t, n) {
const r = () => {
this.localStorage.removeItem(this.getLocalStorageKey()), n(e);
};
this.localStorage.getItem(this.getLocalStorageKey()).then((i => {
i ? jT(JSON.parse(i), t, r) : n(e);
})).catch(r);
}
init() {
const e = this.moby.get(zh);
if (Lv.DisableExperiments(e.bindings.Utilities)) return void this.fragment.update({
uninitialized: !1,
loading: !1,
data: new Map
});
this.fragment.update({
uninitialized: !1,
loading: !0
});
const t = e => this.fragment.update({
loading: !1,
uninitialized: !1,
data: e
}), n = e => {
this.fragment.update({
loading: !1,
uninitialized: !1,
error: e
});
};
return 0 === this.experimentIds.size ? (t(new Map), void this.localStorage.removeItem(this.getLocalStorageKey())) : this.apiCall("/experimentation/v1/fetch-experiment-grouping", {
experimentKeys: Array.from(this.experimentIds)
}).then((e => jT(e, (n => {
this.isDisposed || (t(n), this.localStorage.setItem(this.getLocalStorageKey(), JSON.stringify({
...e,
storedTimestamp: DT()
})));
}), (e => {
this.isDisposed || this.fallbackToLocalStorage(e, t, n);
})))).catch((e => {
this.isDisposed || this.fallbackToLocalStorage(e, t, n);
}));
}
get(e) {
return {
...this.fragment.toProps(),
data: this.fragment.data?.get(e)
};
}
trackExperiment(e, t) {
this.apiCall("/experimentation/v1/track-experiment", {
eventKey: e,
metrics: t
}).then((() => {})).catch((e => {}));
}
}, [YT, WT] = El({
debugName: "experimentsState",
create: e => {
const t = e.get(zh);
let n = "https://experimentation-stest.data.ea.com", r = "834";
Bs.includes(Fs.environment) && (n = "https://experimentation.data.ea.com", r = "836");
return new qT(t.http.post, e, t.localStorage, {
baseUrl: n,
domainId: r
}, QT());
}
}), KT = (e => (e.FR_0 = "fr_0", e.FTUE_0 = "ftue_0", e.FO_0 = "fo_0", e.FRR_0 = "frr_0", 
e.FIC_0 = "fic_0", e.FR_1_5 = "fr_1_5", e.FBM_0 = "fbm_0", e))(KT || {}), XT = {
fr_0: {
FindFriends: "FindFriends"
},
ftue_0: {
SkipFTUE: "SkipFTUE"
},
fo_0: {
FriendOnline: "FriendOnline"
},
frr_0: {
FriendRequestReminders: "FriendRequestReminders"
},
fic_0: {
InfoCard: "InfoCard"
},
fr_1_5: {
Base: "Base",
Attributes: "Attributes"
},
fbm_0: {
Notification: "Notification"
}
}, QT = e => new Set(Object.values(KT)), $T = (e, t, n) => e.get(YT).isInVariant(t, n), ZT = (e, t) => {
const n = ol();
return $T(n, e, t);
}, [eE, tE] = El({
debugName: "parentalControlState",
create: ({getUntracked: e}) => {
const t = e(sI);
if (!t.hasMethod("DeepLink", "getDisabledByParentalControl")) return () => !1;
const n = mt.box([], {
deep: !1
}), r = An((() => {
n.set(t.DeepLink.getDisabledByParentalControl({})?.disabled ?? []);
}));
return r(), t.DeepLink.onDisabledByParentalControlChanged.subscribe((() => {
r();
})), e => n.get().includes(e);
}
}), nE = vl({
debugName: "hasFriendshipState",
get: function(e, {get: t}) {
const n = t(lS).get(), r = t(PS).get(), i = hI([ n, r ]);
if (!i.hasData) return {
...i,
data: void 0
};
const {eaPlayerId: o} = s_(e);
if (o && n.data?.has(o)) return {
...i,
data: !1
};
if (!!r.data?.get(e)) return {
...r.toProps(),
data: !0
};
const a = t(b_).get(e), s = t(SS).get(), l = a.data?.firstPartyPlayerId, c = !!l && !!s.data?.get(l), d = hI([ a, s ]);
return {
...d,
data: d.hasData ? c : void 0
};
}
}), rE = class extends WI {}, [iE, oE] = El({
debugName: "receivedFriendRequestFragmentStoreState",
create: () => new rE({
debugName: "ReceivedFriendRequests"
})
}), [aE, sE] = El({
debugName: "sentFriendRequestFragmentStoreState",
create: () => new rE({
debugName: "SentFriendRequests"
})
});
function lE(e) {
return function(t, n, r) {
let i;
const o = Rn((r => {
const o = t();
e(o) || (r.dispose(), i && clearTimeout(i), nl((() => {
n(o);
})));
}), r ? {
onError: r.onError
} : void 0);
return "number" == typeof r?.timeout ? (i = setTimeout((() => {
o(), r.onError(new Error("WHEN_TIMEOUT"));
}), r.timeout), () => {
o(), i && clearTimeout(i);
}) : o;
};
}
var cE = lE((e => void 0 === e)), dE = lE((e => null === e));
function uE({entity: e, createTime: t}) {
const n = e.id.playerId.id;
return {
eaPlayerId: n,
createTimeMs: t ? FT(t) : void 0,
photonPlayerId: i_({
eaPlayerId: n,
playerNetworkId: "EA"
})
};
}
var pE = J_.array(J_.string), fE = e => "favoriteFriends_" + e, hE = (e, t) => {
const n = JSON.parse(e.getItemSync(fE(t)) ?? "[]");
return pE.validate(n) ? n.map((e => ({
createTime: void 0,
entity: {
displayName: "",
nickname: "",
id: {
playerId: {
id: e
},
personaId: void 0
}
}
}))) : [];
};
function mE(e) {
const t = e.map((e => {
const t = uE(e);
return [ t.eaPlayerId, {
eaPlayerId: t.eaPlayerId
} ];
}));
return new Zs(t);
}
var gE = class extends WI {
constructor(e, t) {
super(t), this.moby = e, this.options = t;
}
get localStorage() {
return this.moby.get(zh).localStorage;
}
get userId() {
return this.moby.get(fv).tokenInfo.userId;
}
get grpcApi() {
return this.moby.get(ky);
}
get metricClient() {
return this.moby.get(oI);
}
init() {
const e = cE((() => this.get().data), (() => {
this.removeDoubleStoredFavorites(), this.initMigration();
})), t = this.initSeedStrategy();
return () => {
e(), t?.();
};
}
removeDoubleStoredFavorites() {
if (this.localFavoritesSet) {
for (const e of this.localFavoritesSet.values()) {
const t = this.eadpFavoritesSet?.has(e);
t && this.localFavoritesSet.delete(e);
}
this.updateStorage();
}
}
initMigration(e) {
try {
const t = this.localFavoritesSet;
if (!t?.size) return;
e || this.metricClient.addEvent({
eventType: "photon_favorite_friends_migration",
status: "start",
local: t.size,
eadp: this.eadpFavoritesSet?.size ?? -1
});
const n = e || new Set(t), r = Array.from(n.values())[0];
return this.grpcApi.Favorites.CreateFavoriteFriend({
entityId: {
playerId: {
id: this.userId
}
},
targetEntityId: {
playerId: {
id: r
}
}
}).then((async () => {
this.eadpFavoritesSet?.add(r), this.removeLocalFavorite(r);
})).catch((() => {})).finally((() => {
n.delete(r), n.size ? setTimeout((() => {
this.initMigration(n);
}), 1e3) : this.metricClient.addEvent({
eventType: "photon_favorite_friends_migration",
status: "end",
local: t.size,
eadp: this.eadpFavoritesSet?.size ?? -1
});
}));
} catch (e) {}
}
createMapFromArray(e) {
return new Set(e.map((e => e.entity?.id?.playerId?.id ?? "")));
}
initSeedStrategy() {
return this.setSeedStrategy({
fetch: async () => {
const e = hE(this.localStorage, this.userId);
this.localFavoritesSet = this.createMapFromArray(e);
let t = [];
return fI(await j_((async () => {
try {
const e = await this.grpcApi.Favorites.ListFavoriteFriends({
entityId: {
playerId: {
id: this.userId
}
}
});
t = e.friends, this.eadpFavoritesSet = this.createMapFromArray(t);
} catch (e) {}
return e.concat(t);
}), wb, {
transformResponse: mE
}));
}
});
}
updateStorage() {
nl((() => {
const e = this.localFavoritesSet?.values();
var t, n, r;
t = this.localStorage, n = this.userId, r = e ? Array.from(e) : [], t.setItem(fE(n), JSON.stringify(r));
}));
}
removeLocalFavorite(e) {
this.localFavoritesSet?.delete(e), this.updateStorage();
}
addFavoriteFriend(e) {
const {eaPlayerId: t} = s_(e);
if (t) {
const e = this.get().data;
return e?.set(t, {
eaPlayerId: t
}), this.grpcApi.Favorites.CreateFavoriteFriend({
entityId: {
playerId: {
id: this.userId
}
},
targetEntityId: {
playerId: {
id: t
}
}
}).then((() => {
this.eadpFavoritesSet?.add(t);
})).catch((n => (e?.delete(t), {
error: n
})));
}
}
removeFavoriteFriend(e) {
const {eaPlayerId: t} = s_(e);
if (t) {
const n = this.localFavoritesSet?.has(t), r = this.eadpFavoritesSet?.has(t), i = this.get().data;
if (i?.delete(t), !n && !r) return;
const o = this.moby.get(PS).get().data?.has(e);
if (n && !r) return void this.removeLocalFavorite(t);
if (!o) return;
return this.grpcApi.Favorites.UnfavoriteFriend({
entityId: {
playerId: {
id: this.userId
}
},
targetEntityId: {
playerId: {
id: t
}
}
}).then((() => {
this.removeLocalFavorite(t);
})).catch((e => (i?.set(t, {
eaPlayerId: t
}), {
error: e
})));
}
}
}, [yE, IE] = El({
debugName: "favoriteFriendsFragmentStoreState",
create: e => new gE(e, {
debugName: "FavoriteFriends"
})
});
function _E(e, t) {
const {eaPlayerId: n} = s_(t), r = e.get(yE).get();
return !(!n || !r.data?.has(n));
}
function bE(e) {
return _E(ol(), e);
}
var SE = vl({
debugName: "playerRowActionState",
get: function(e, {get: t}) {
const {eaPlayerId: n, firstPartyPlayerId: r} = s_(e);
if (n || r) {
if (n) {
const r = t(yE).get().data?.has(n), i = t(PS).get().data?.get(e);
if (i) return r ? 2 : 1;
const o = t(lS).get().data?.get(n);
if (o) return 0;
const a = t(aE).get().data?.get(n);
if (a) return 3;
const s = t(iE).get().data?.get(n);
if (s) return 4;
if (t(fv).tokenInfo.userId === n) return 5;
}
if (r) {
const e = t(SS).get().data?.get(r);
if (e) return 1;
}
return 6;
}
}
}), vE = Cl({
debugName: "modalQueueState",
default: []
}), TE = Cl({
debugName: "modalLocationState",
default: {}
}), EE = Sl({
debugName: "currentModalState",
get: function({get: e}) {
return e(vE)[0];
}
}), PE = Sl({
debugName: "currentModalState",
get: function({get: e}) {
const t = e(EE);
if (t) return e(TE)[t.id];
}
}), [OE, CE] = El({
debugName: "modalState",
create: e => {
let t = 1;
return {
showModal: An(((n, {sequenceId: r, telemetryId: i, ignoreCloseAll: o, opaque: a} = {}) => {
e.set(vE, (s => {
const l = t++, c = r ? s.filter((e => e.sequenceId !== r)) : s;
return (r || i) && e.set(TE, (e => {
const t = {
...e
};
if (r) {
const e = s.find((e => e.sequenceId === r));
e && delete t[e.id];
}
return i && (t[l] = {
state: {
telemetryId: i
}
}), t;
})), c.concat({
component: n,
id: l,
sequenceId: r,
ignoreCloseAll: o,
opaque: a
});
}));
})),
closeModal: An((() => {
const t = e.getUntracked(EE)?.id;
e.set(vE, (e => e.slice(1))), t && e.set(TE, (e => {
const n = {
...e
};
return delete n[t], n;
}));
})),
closeAllModals: An((() => {
e.set(vE, e.getUntracked(vE).filter((e => e.ignoreCloseAll)));
const t = e.getUntracked(vE);
e.set(TE, (e => {
const n = {};
for (const r of t) r.id && e[r.id] && (n[r.id] = e[r.id]);
return n;
}));
}))
};
}
}), NE = e => {
const t = ol(), n = dl(EE)?.id;
H.useEffect((() => {
n && t.set(TE, (t => t[n]?.state.telemetryId === e ? t : {
...t,
[n]: {
state: {
telemetryId: e
}
}
}));
}), [ t, n, e ]);
};
function AE(e) {
return e || "missing_id";
}
function LE(e) {
const t = Xg.getFromLocation(e)?.telemetryId;
return AE(t);
}
var wE = () => LE(jo().location);
function kE(e) {
return "/" !== e.pathname;
}
var RE = class {
constructor(e, t, n) {
this.moby = e, this.pinClient = t, this.getCurrentLocation = n, this.currentState = {}, 
this.isInOverlay = !1, this.disableEvents = !1;
}
shouldTriggerEvent(e) {
return "page" !== e && "overlay" !== e || !this.disableEvents;
}
withDisabledEvents(e) {
this.disableEvents = !0;
try {
e();
} catch (e) {}
this.disableEvents = !1;
}
onEvent(e, t) {
const {enterTime: n, location: r} = this.currentState;
if (t === r) return;
const i = Date.now();
switch (e) {
case "overlay":
this.isInOverlay = !0;
break;

case "page":
this.isInOverlay = !1;
}
const o = {
type: e,
pgid: LE(t)
};
r && (o.fromid = LE(r)), void 0 !== n && (o.pgdur = Math.round((i - n) / 1e3)), 
this.shouldTriggerEvent(e) && this.pinClient.triggerPageView(o), this.currentState = {
location: t,
enterTime: i
};
}
onPageView(e) {
this.onEvent("page", e);
}
onOverlayView(e, t) {
kE(e) ? (this.onEvent("overlay", e), t && this.shouldTriggerEvent("overlay") && this.pinClient.triggerMessage({
pg_id: t,
msg_id: t,
status: "impression",
type: "in_game",
service: "",
index: {
total_items: 0,
item_index: 0
}
})) : this.isInOverlay && this.onEvent(...this.getCurrentLocation());
}
onDropdownView(e) {
return this.onEvent("overlay", {
state: {
telemetryId: e
}
}), () => {
this.onEvent(...this.getCurrentLocation());
};
}
onStart() {
this.currentState.location || (this.currentState.location = {
state: {
telemetryId: "manual_invoke"
}
}, this.onEvent(...this.getCurrentLocation()));
}
onExit() {
this.currentState.location && (this.onEvent("exit", {
state: {
telemetryId: "manual_close"
}
}), this.currentState = {});
}
}, [xE, BE] = El({
debugName: "pageViewTelemetryState",
create: e => {
const t = Hm(e, "main"), n = Hm(e, "overlay"), r = e.get(ov);
return new RE(e, r, (function() {
const r = e.getUntracked(PE);
return r ? [ "overlay", r ] : kE(n.location) ? [ "overlay", n.location ] : [ "page", t.location ];
}));
}
}), DE = () => {
const e = ol();
H.useEffect((() => {
const t = Hm(e, "main"), n = Hm(e, "overlay"), r = e.get(xE), i = [ t.listen((e => {
r.onPageView(e);
})), n.listen((e => {
r.onOverlayView(e);
})), Dn((() => e.get(PE)), ((e, i) => {
e?.state.telemetryId ? r.onOverlayView(e, e.state.telemetryId) : i?.state.telemetryId && (kE(n.location) ? r.onOverlayView(n.location) : r.onPageView(t.location));
}), {
fireImmediately: !0
}), Dn((() => e.get(hm)), (e => {
e ? r.onStart() : r.onExit();
}), {
fireImmediately: !0
}) ];
return () => {
i.forEach((e => e()));
};
}), [ e ]);
}, FE = e => e.map(((t, n) => ({
...t,
telemetryInfo: {
index: {
item_index: n + 1,
total_items: e.length
}
}
}))), ME = (e, t) => {
e.triggerMessage({
type: "in_game",
service: "",
index: {
total_items: 0,
item_index: 0
},
status: "click",
...t
});
}, UE = (e, t, n) => (...r) => (n && t && ME(e, n), t?.(...r)), HE = (e, t) => {
const n = av();
return H.useCallback((r => {
ME(n, {
pg_id: e,
destination_name: t,
msg_id: t,
option: r ? "expand" : "collapse"
});
}), [ t, e, n ]);
}, VE = e => {
const t = av();
H.useEffect((() => {
if (e?.pg_id) {
const n = {
msg_id: e.msg_id ?? e.pg_id,
pg_id: e.pg_id,
status: "impression"
};
e.destination_name && (n.destination_name = e.destination_name), e.option && (n.option = e.option), 
e.context && (n.context = e.context), e.index && (n.index = e.index), ME(t, n);
}
}), [ e?.pg_id, e?.msg_id, e?.destination_name, e?.option, e?.context, e?.index, t ]);
}, JE = {
0: "blocked",
2: "favorite",
1: "friend",
3: "pending_friend_other",
4: "pending_friend_self",
6: "not_friend",
5: "self"
};
function GE(e, t) {
const n = e.getItem(SE, t);
return void 0 !== n ? JE[n] : "unknown";
}
var zE = (e, t, n, r, i) => () => {
const o = nl((() => {
const r = mv(e).personaInfo, o = e.get(iT).get().data, a = HS(e, o, t, n);
let s = "unknown", l = "unknown";
a && (s = a.playerNetworkId === r.playerNetworkId ? "same" : "other", l = a.devicePlatformId === r.devicePlatformId ? "same" : "other");
const {eaPlayerId: c} = s_(t);
return {
nucleus: c,
plat: s,
gen: l,
rel: GE(e, p_(t)),
...i?.context
};
}));
return UE(e.get(ov), r, i && {
...i,
context: o
})();
}, jE = (e, t, n, r) => {
const i = ol();
return H.useMemo((() => zE(i, e, t, n, r)), [ i, e, t, n, r ]);
};
function qE(e, t, n) {
const r = "overlay_player_actions_other" === t.pg_id || "overlay_player_actions_self" === t.pg_id;
return `${LE(n)}${t.destination_name ? "__" + t.destination_name : ""}${r ? "__" + t.pg_id : ""}`;
}
async function YE(e, t) {
const n = e.get(sI);
if ("XBOX" === e.get(fv).personaInfo.playerNetworkId && n.hasMethod("XboxPlatform", "CheckXUserPrivilege") && n.hasMethod("XboxPlatform", "ResolveXUserPrivilegeWithUiAsync")) {
const r = {
options: fm.XboxPlatform.XUserPrivilegeOptions.None,
privilege: t
};
if (!(await n.XboxPlatform.CheckXUserPrivilege(r))?.hasPrivilege) return ME(e.get(ov), {
pg_id: "tst_xbox_ui_system",
msg_id: "tst_xbox_ui_system",
status: "impression"
}), n.XboxPlatform.ResolveXUserPrivilegeWithUiAsync(r);
}
}
var WE = fm.XboxPlatform.XblAnonymousUserType, KE = fm.XboxPlatform.ResolveXUserPrivilegeWithUiAsyncResult, XE = fm.XboxPlatform.XblPermissionDenyReason;
async function QE(e, t, n, r) {
const i = e.get(sI), o = e.get(fv).personaInfo.playerNetworkId, {playerNetworkId: a} = s_(t);
let s, l = !0;
if ("XBOX" === o && i.hasMethod("XboxPlatform", "getXblPrivacyBatchCheckPermission")) {
const o = [], c = [];
if ("XBOX" === a) {
const n = e.get(b_), r = await yI(n.get(t), 1e4);
r.data?.firstPartyPlayerId && o.push(r.data.firstPartyPlayerId);
}
if (0 === o.length) {
const n = e.getItemUntracked(nE, t).data;
c.push(n ? WE.CrossNetworkFriend : WE.CrossNetworkUser);
}
try {
if (s = await i.XboxPlatform.getXblPrivacyBatchCheckPermission({
permissions: n,
playersXboxIds: o,
anonymousUserTypes: c
}), s && s.permissionChecks.length > 0) for (const e of s.permissionChecks) if (!e.isAllowed) {
l = !1;
break;
}
} catch (e) {}
if (!l && void 0 !== r) {
if ((await YE(e, r))?.result === KE.Resolved) return QE(e, t, n, void 0);
}
}
return {
isAllowed: l,
privacyResult: s
};
}
function $E(e) {
const t = e?.permissionChecks[0]?.permissionDeniedReason[0];
return void 0 !== t ? XE[t] : XE[XE.Unknown];
}
var ZE = (e => (e[e.Always = 0] = "Always", e[e.NotGameplay = 1] = "NotGameplay", 
e[e.Never = 2] = "Never", e))(ZE || {}), eP = (e => (e[e.Weekly = 0] = "Weekly", 
e[e.Never = 1] = "Never", e))(eP || {}), tP = (e => (e[e.SixSeconds = 6] = "SixSeconds", 
e[e.TenSeconds = 10] = "TenSeconds", e))(tP || {}), nP = (e => (e[e.TopLeft = 0] = "TopLeft", 
e[e.TopRight = 1] = "TopRight", e[e.BottomLeft = 2] = "BottomLeft", e[e.BottomRight = 3] = "BottomRight", 
e))(nP || {}), rP = (e, t) => {
const n = J_.enum(ZE), r = J_.enum(eP), i = J_.enum(tP), o = J_.enum(nP), a = J_.objectWithDefaults({
0: n,
1: n,
8: n,
7: n,
2: n,
3: n,
5: n,
6: n,
4: r,
9: i,
10: o
}, e[0]), s = J_.objectWithDefaults({
0: J_.boolean
}, e[1]), l = J_.objectWithDefaults({
0: J_.boolean
}, e[2]);
return J_.objectWithDefaults({
0: a,
1: s,
2: l
}, e).parse(t);
}, iP = fm.XboxPlatform.XboxPermission, oP = fm.XboxPlatform.XUserPrivilege, aP = fm.Notifications.NotificationPosition, sP = {
[aP.TopLeft]: 0,
[aP.TopRight]: 1,
[aP.BottomLeft]: 2,
[aP.BottomRight]: 3
};
function lP(e) {
const t = e ? 0 : 1, n = LS.defaultNotificationPosition ?? (of() ? aP.BottomLeft : aP.BottomRight);
return {
0: {
0: 0,
1: t,
8: 0,
7: 1,
2: 0,
3: 1,
5: 0,
6: 1,
4: 0,
9: 6,
10: sP[n]
},
1: {
0: Ws.joinableByDefault
},
2: {
0: !bv()
}
};
}
var cP = class {
constructor(e, t, n) {
this.storage = e, this.moby = t, this.onSettingsUpdated = n, this.defaultSettings = lP(), 
this.settings = {
...this.defaultSettings
}, Or(this, {
settings: mt,
setSetting: An,
restoreSettings: An
});
}
async init(e, t, n) {
this.userId = e, this.resetInitialSettings(n), await this.getStoredSettings(t), 
nl((() => this.onSettingsUpdated?.(this.settings)));
}
resetInitialSettings(e) {
this.defaultSettings = lP(e), this.settings = {
...this.defaultSettings
};
}
async getStoredSettings(e) {
if (this.storageKey) try {
const t = await this.storage.getItem(this.storageKey);
if (t) {
const n = JSON.parse(t), r = rP(this.defaultSettings, n), {isAllowed: i} = await QE(this.moby, e, [ iP.PlayMultiplayer ], oP.Multiplayer);
i || (r[1][0] = !1), this.settings = r;
}
} catch (e) {}
}
get storageKey() {
if (this.userId) return "notificationSettings_" + this.userId;
}
async setStoredSettings() {
return nl((() => {
if (this.storageKey) return this.onSettingsUpdated?.(this.settings), this.storage.setItem(this.storageKey, JSON.stringify(dr(this.settings)));
}));
}
setSetting(e, t, n) {
return this.settings[e][t] = n, this.setStoredSettings();
}
getSetting(e, t) {
return this.settings[e][t];
}
restoreSettings(e) {
return this.settings[e] = {
...this.defaultSettings[e]
}, this.setStoredSettings();
}
isDefaultSettings(e) {
return Object.keys(this.defaultSettings[e]).every((t => {
const n = Number(t);
return this.defaultSettings && this.settings && this.defaultSettings[e][n] === this.settings[e][n];
}));
}
}, dP = fm.DeepLink.ParentalControlSettings, uP = fm.Voip.VoipProfileType, [pP, fP] = El({
debugName: "settingsState",
create: e => {
const t = e.get(zh), n = e.get(sI), r = Fs.isPartyEnabled && Fs.featureFlags.setCurrentVoipProfileDoesNotAssert && n.hasMethod("Voip", "setCurrentVoipProfile") ? t => {
nl((() => {
if (t?.[2]) {
const r = e.get(eE)(dP.Voip);
let i;
i = bv() ? uP.DisabledByDefault : r ? uP.DisabledByRestrictions : uP.EnabledByDefault;
const o = t?.[2][0];
try {
n.Voip.setCurrentVoipProfile({
voipProfile: {
isVoipEnabled: o && !r,
profileType: i
}
});
} catch (e) {}
}
}));
} : void 0;
return new cP(t.localStorage, e, r);
}
});
function hP(e) {
const t = $p(), [n] = H.useState((() => new kg(t.bindings.Tween, e)));
return H.useEffect((() => {
n.setInitialValue(e);
}), [ n, e ]), H.useEffect((() => () => {
n.destroy();
}), [ n ]), n;
}
var mP = rd("marginBottom", Vc(Rd.DimensionSpace.medium)), gP = (Qc({
marginTop: Vc(Zu.Notification.Disclaimer.marginTop),
marginBottom: Vc(Zu.Notification.Disclaimer.marginBottom),
backgroundColor: Zu.Notification.Disclaimer.backgroundColor
}), rd("marginTop", Vc(Zu.Notification.Button.marginTop))), yP = Vc(587), IP = Qc({
color: Zu.Notification.Container.color,
width: yP,
layer: !0,
layerClip: !0,
position: "relative",
zOffset: 1
}), _P = Vc(Rd.DimensionSpace.medium), bP = Qc({
position: "absolute",
start: Vc(Zu.Notification.Inner.left),
end: Vc(Zu.Notification.Inner.right),
top: Vc(Zu.Notification.Inner.top)
}), SP = {
duration: Rd.AnimationTime.fastest,
easing: Rd.AnimationEasing.ease
}, vP = ({style: e, children: t, outerContent: n}) => {
const r = hP(0), [i, o] = H.useState(!1), [a, s] = H.useState(!1), l = H.useRef(0), c = H.useCallback((e => {
if (a) return;
const t = e.height + 2 * _P;
if (!i) return r.set(t), void o(!0);
t !== l.current && (l.current = t, s(!0), r.to(t, {
...SP,
onFinished: () => {
s(!1);
}
}));
}), [ i, r, a ]);
return H.createElement("surface", null, H.createElement("surface", {
style: [ IP, hh({
radius: Zu.Notification.Container.borderRadius
}), i ? r.propStyle("height") : void 0, e ]
}, H.createElement("surface", {
style: bP,
onBounds: c
}, t)), n);
}, TP = Qc({
flexDirection: "row",
alignItems: "center"
}), EP = ({children: e, style: t}) => H.createElement("surface", {
style: [ TP, t ]
}, e), PP = ({children: e, style: t}) => H.createElement("surface", {
style: [ rd("flexDirection", "column"), t ]
}, e), OP = Qc({
width: Vc(80),
height: Vc(80),
marginEnd: Vc(Zu.Notification.IconWrapper.marginEnd),
alignItems: "center",
justifyContent: "center",
flexShrink: 0
}), CP = Qc({
width: Vc(Zu.Notification.Icon.width),
height: Vc(Zu.Notification.Icon.height),
textureMode: "contain",
zOffset: 1
}), NP = ({texture: e, color: t, style: n, wrapperStyle: r}) => H.createElement("surface", {
style: [ OP, r ]
}, H.createElement("surface", {
style: [ CP, n, rd("color", t), rd("texture", e) ]
})), AP = Qc({
borderCenter: !0,
texture2Border: Vc(Zu.Notification.Image.borderRadius),
texture2: fh({
radius: Zu.Notification.Image.borderRadius
}),
width: Vc(80),
height: Vc(80)
}), LP = ({style: e, ...t}) => H.createElement(NP, {
style: [ AP, e ],
...t
}), wP = (Qc({
width: Vc(80),
height: Vc(80),
alignItems: "flex-start",
justifyContent: "center",
alignSelf: "flex-start",
flexShrink: 0,
marginEnd: Vc(Zu.Notification.IconBackground.marginEnd)
}), Qc({
flex: 1
})), kP = ({text: e, color: t, style: n}) => H.createElement(IT, {
style: [ wP, n ],
text: e,
color: t ?? Rd.TextColorStandard.emphasized
}), RP = Qc({
color: Zu.Notification.Info.color,
padding: Vc(Zu.Notification.Info.padding),
paddingLeft: 0,
flexDirection: "row",
alignItems: "flex-start"
}), xP = ({children: e, style: t}) => H.createElement("surface", {
style: [ hh({
radius: Zu.Notification.Info.borderRadius
}), RP, t ]
}, e), BP = ({children: e}) => H.createElement("surface", {
style: rd("flexDirection", "column")
}, e), DP = ({id: e, text: t, callback: n, variant: r, style: i, narrationItem: o, narration: a}) => {
const s = Tf(2);
return H.createElement(jf, {
id: e,
label: t,
variant: r,
style: i,
input: {
keyBinding: s,
callback: n
},
onClick: n,
narration: a,
narrationItem: o
});
};
function FP(e) {
return Nm?.[e] ?? e;
}
var MP = fs.Input.GamePadInput, UP = fs.Input.DeviceType, HP = {
fps: 60,
totalFrames: 60,
startFrame: 0,
looping: !1
};
function VP({height: e, ...t}) {
return Qc({
spriteAnimation: {
...HP,
...t
},
height: e
});
}
var JP = {
circular: VP({
spriteSheet: Gc({
1: Cs("/photon/quantum/sprites/Circle-24219046.png"),
2: Cs("/photon/quantum/sprites/Circle@2x-d23a83cc.png")
}),
frameWidth: Vc(46),
frameHeight: Vc(46),
height: Vc(46)
}),
escTab: VP({
spriteSheet: Cs("/photon/quantum/sprites/EscTab_spaced-2c4cce55.png"),
frameWidth: 69,
frameHeight: 44,
height: Vc(44)
}),
keyboardKeys: VP({
spriteSheet: Gc({
1: Cs("/photon/quantum/sprites/KeyboardKeys-8b666dab.png"),
2: Cs("/photon/quantum/sprites/KeyboardKey@2x-be59b33a.png")
}),
frameWidth: Vc(62),
frameHeight: Vc(46),
height: Vc(46)
}),
playstationL1R1: VP({
spriteSheet: Gc({
1: Cs("/photon/quantum/sprites/PS_L1R1-c0eb2a71.png"),
2: Cs("/photon/quantum/sprites/PS_L1R1@2x-44966ef7.png")
}),
frameWidth: Vc(62),
frameHeight: Vc(46),
height: Vc(46)
}),
playstationL2: VP({
spriteSheet: Gc({
1: Cs("/photon/quantum/sprites/PS_L2-73f3ceac.png"),
2: Cs("/photon/quantum/sprites/PS_L2@2x-bdc16511.png")
}),
frameWidth: Vc(54),
frameHeight: Vc(46),
height: Vc(46)
}),
playstationR2: VP({
spriteSheet: Gc({
1: Cs("/photon/quantum/sprites/PS_R2-f9c3cc70.png"),
2: Cs("/photon/quantum/sprites/PS_R2@2x-598f9bf0.png")
}),
frameWidth: Vc(54),
frameHeight: Vc(46),
height: Vc(46)
}),
playstationOptions: VP({
spriteSheet: Gc({
1: Cs("/photon/quantum/sprites/PS5_Options-d51ab689.png"),
2: Cs("/photon/quantum/sprites/PS5_Options@2x-be5985b8.png")
}),
frameWidth: Vc(46),
frameHeight: Vc(46),
height: Vc(46)
}),
playstationWordOptions: VP({
spriteSheet: Cs("/photon/quantum/sprites/PlaystationWordOptions_spaced-757a0bf2.png"),
frameWidth: 96,
frameHeight: 44,
height: Vc(44)
}),
xboxLt: VP({
spriteSheet: Gc({
1: Cs("/photon/quantum/sprites/Xbox_LT-fc24c8ad.png"),
2: Cs("/photon/quantum/sprites/Xbox_LT@2x-b6d65690.png")
}),
frameWidth: Vc(46),
frameHeight: Vc(46),
height: Vc(46)
}),
xboxRt: VP({
spriteSheet: Gc({
1: Cs("/photon/quantum/sprites/Xbox_RT-a4fb6698.png"),
2: Cs("/photon/quantum/sprites/Xbox_RT@2x-e1be6525.png")
}),
frameWidth: Vc(46),
frameHeight: Vc(46),
height: Vc(46)
}),
switchL: VP({
spriteSheet: Cs("/photon/quantum/sprites/SwitchL_spaced-6e7e1668.png"),
frameWidth: 46,
frameHeight: 38,
height: Vc(38)
}),
switchR: VP({
spriteSheet: Cs("/photon/quantum/sprites/SwitchR_spaced-81af1806.png"),
frameWidth: 46,
frameHeight: 38,
height: Vc(38)
}),
switchZL: VP({
spriteSheet: Cs("/photon/quantum/sprites/SwitchZL_spaced-eae374c9.png"),
frameWidth: 46,
frameHeight: 38,
height: Vc(38)
}),
switchZR: VP({
spriteSheet: Cs("/photon/quantum/sprites/SwitchZR_spaced-735440b5.png"),
frameWidth: 46,
frameHeight: 38,
height: Vc(38)
})
}, GP = {
[UP.MouseAndKeyboard]: {},
[UP.Touch]: {},
[UP.Playstation]: {
[MP.SpecialLeft]: JP.keyboardKeys,
[MP.TriggerRight]: JP.playstationR2,
[MP.TriggerLeft]: JP.playstationL2,
[MP.SpecialRight]: "PS5" === vs.devicePlatformId ? JP.playstationOptions : JP.playstationWordOptions,
[MP.ShoulderLeft]: JP.playstationL1R1,
[MP.ShoulderRight]: JP.playstationL1R1
},
[UP.Xbox]: {
[MP.TriggerRight]: JP.xboxRt,
[MP.TriggerLeft]: JP.xboxLt
},
[UP.NotSet]: {},
[UP.Stadia]: {},
[UP.Switch]: {
[MP.TriggerRight]: JP.switchZR,
[MP.TriggerLeft]: JP.switchZL,
[MP.ShoulderRight]: JP.switchR,
[MP.ShoulderLeft]: JP.switchL
}
};
function zP(e, t) {
const n = GP[e.device];
return e.device === UP.MouseAndKeyboard ? void 0 === t && e.keyboardKeyLabel && 1 === e.keyboardKeyLabel?.length ? JP.playstationOptions : JP.keyboardKeys : n[e.gamePadInput ?? MP.NotBound] || JP.circular;
}
var [jP, qP] = Qs("NotificationFocusable");
function YP(e) {
const t = e.split("%key%");
return 1 === t.length ? [ e, "" ] : [ t[0].trim(), t[1].trim() ];
}
var WP = Qc({
alignSelf: "stretch",
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "center",
justifyContent: "center"
}), KP = Qc({
position: "relative",
marginLeft: Vc(Zu.NotificationActivate.SpriteAnimationContainer.marginStart),
marginRight: Vc(Zu.NotificationActivate.SpriteAnimationContainer.marginEnd),
height: Vc(46),
alignItems: "center",
justifyContent: "center"
}), XP = [ KP, Qc({
paddingStart: Vc(7),
paddingEnd: Vc(7)
}) ], QP = Qc({
position: "absolute",
zOffset: 1,
left: 0,
right: 0
}), $P = "holdTimerKey", ZP = Ii.observer((({onActivated: e, activateText: t, holdActivateText: n, holdRequired: r, holdTime: i, interaction: o}) => {
const a = $p(), {isPressed: s} = o, {timeout: l, disposeTimeout: c} = dp(), d = Tf(4), [u, p] = H.useState(null), [f, h] = H.useState(!1), m = s || f;
H.useEffect((() => {
r && u && a.bindings.Layout.playSpriteAnimation({
surfaceId: u,
start: m
});
}), [ f, r, m, u, a ]), H.useEffect((() => a.bindings.Input.onFocusNotificationButtonPressed.subscribe((() => {
h(!0);
}))), [ a ]), H.useEffect((() => a.bindings.Input.onFocusNotificationButtonReleased.subscribe((() => {
h(!1);
}))), [ a ]);
const g = H.useCallback((() => {
r || e?.();
}), [ r, e ]), y = Kp({
transcendBoundaries: !0,
keyBinding: d,
callback: g
});
H.useEffect((() => {
r && h(y);
}), [ y, r ]), H.useEffect((() => {
r && i && (c($P), m && e && l($P, e, i));
}), [ c, f, r, i, m, s, e, l ]);
const I = Uc(d.primaryButton), _ = d.primaryButton.keyboardKeyLabel, [b, S] = YP(r ? n : t), v = Zu.NotificationActivate.Label.color, T = zP(d.primaryButton, I);
return H.createElement("surface", {
style: WP
}, !!b && H.createElement(tp, {
text: b,
color: v
}), I || _ ? H.createElement("surface", {
style: r ? XP : KP
}, H.createElement(op, {
buttonLabel: _,
icon: I
}), r ? H.createElement("surface", {
onSurfaceId: p,
style: [ QP, T ]
}) : void 0) : void 0, !!S && H.createElement(tp, {
text: S,
color: v
}));
})), eO = Ii.observer((e => {
const {onActivated: t} = e;
return H.createElement(zf, {
variant: 0,
id: "activateNotification",
onClick: t
}, (t => H.createElement(ZP, {
...e,
interaction: t
})));
})), tO = Ii.observer((({style: e, onClose: t, children: n}) => {
const r = Tf(3);
return Wp({
keyBinding: r,
callback: t,
label: FP("INPUT_LABEL_DISMISS_NOTIFICATION")
}), H.createElement("surface", {
style: [ rd("flexDirection", "column"), e ]
}, n);
})), nO = Qc({
position: "relative"
}), rO = Qc({
position: "absolute",
top: 0,
bottom: 0,
right: 0,
left: 0
}), iO = ({children: e, onClose: t, holdTime: n, holdRequired: r, activateText: i, holdActivateText: o, onActivated: a, isActivated: s}) => {
const l = qP(), c = hP(0), d = hP(1), [u, p] = H.useState(!1), f = H.useCallback((() => {
u || (d.to(0, SP), p(!0), a?.(), c.to(1, {
...SP,
delay: SP.duration
}));
}), [ u, d, c, a ]), h = H.useCallback((() => {
t?.(), d.to(0, SP), p(!1), c.to(1, {
...SP,
delay: SP.duration
});
}), [ d, c, t ]);
return H.useEffect((() => {
s && !u && f();
}), [ u, f, s ]), H.useEffect((() => {
l.setFocusable();
}), [ l ]), H.createElement("surface", {
style: [ nO, rd("minHeight", Vc(68)) ]
}, H.createElement(Nh, {
isolate: u
}, u ? H.createElement(tO, {
style: c.propStyle("opacity"),
onClose: h
}, e) : void 0), H.createElement(Nh, {
disable: u
}, H.createElement("surface", {
style: [ rO, d.propStyle("opacity"), u ? rd("enableMouseEvents", !1) : void 0 ]
}, H.createElement(eO, {
onActivated: f,
holdTime: n,
holdRequired: r,
activateText: i,
holdActivateText: o
}))));
}, oO = ({id: e, onDismiss: t, onAction: n, dismiss: r, message: i, icon: o, holdTimeMs: a, buttonLabel: s, onMount: l}) => {
const c = H.useCallback((() => {
n(), r();
}), [ r, n ]);
return H.useEffect((() => (l(), () => {
t();
})), [ t, l ]), H.createElement(PP, null, H.createElement(vP, {
key: e
}, H.createElement(EP, {
style: s ? mP : void 0
}, H.createElement(NP, {
texture: o.icon,
color: o.iconColor
}), H.createElement(kP, {
text: i
})), !!s && H.createElement(iO, {
onActivated: c,
activateText: "",
holdActivateText: s,
holdRequired: !0,
holdTime: a
})));
}, aO = 0, sO = class {
constructor(e, t) {
this.item = e, this.screenTimeInSec = t, this.id = ++aO + "", this.timeLogItem = {
startTs: 0,
endTs: 0,
duration: 0
};
}
setTimeLog() {
this.timeLogItem.endTs || (this.timeLogItem.endTs = Date.now(), this.timeLogItem.startTs ? this.timeLogItem.duration = Math.ceil((this.timeLogItem.endTs - this.timeLogItem.startTs) / 1e3) : (this.timeLogItem.startTs = this.timeLogItem.endTs, 
this.timeLogItem.duration = 0));
}
ready() {
this.timeLogItem.startTs || (this.timeLogItem.startTs = Date.now());
}
done() {
this.setTimeLog();
}
getScreenTimeInSeconds() {
if (!this.item.options?.stayActiveUntilInteractedWith) return this.screenTimeInSec;
}
}, lO = {
FavoriteFriendOnline: 3e5,
FavoriteFriendDownToPlay: 3e5
}, cO = class {
constructor(e) {
this.items = [], this.capacity = e.capacity, this.getScreenTimeInSec = e.getScreenTimeInSec, 
this.useTimeWindow = e.useTimeWindow, this.overridable = e.overridable;
}
addItem(e) {
this.items.push(e);
}
getCount() {
return this.items.length;
}
get isFull() {
return this.getCount() >= this.capacity;
}
getNextItem() {
return this.overridable && this.items.length > 1 && this.items.splice(0, this.items.length - 1), 
this.items[0];
}
clear() {
this.items.length = 0;
}
dequeueNextItem() {
this.items.shift();
}
}, dO = class {
constructor(e, t, n, r) {
this.pinClient = e, this.settings = t, this.gamePlayManager = n, this.activeItem = void 0, 
this.onDismiss = new os, this.onComplete = new os, this.queues = {
0: new cO({
getScreenTimeInSec: () => nl((() => this.settings.getSetting(0, 9))),
capacity: 1,
useTimeWindow: !1
}),
1: new cO({
getScreenTimeInSec: () => nl((() => this.settings.getSetting(0, 9))),
capacity: 10,
useTimeWindow: !0
}),
2: new cO({
getScreenTimeInSec: () => 4,
capacity: 15,
useTimeWindow: !0
}),
3: new cO({
getScreenTimeInSec: () => 4,
capacity: 2,
useTimeWindow: !1,
overridable: !0
})
}, this.timeLog = [], this.cooldownLog = new Map, this.isNotificationAllowedStatus = !0;
const i = r.getNotificationAllowed({});
i && this.setNotificationAllowed(i.status), r.onNotificationAllowChanged.subscribe((({status: e}) => {
this.setNotificationAllowed(e);
})), Or(this, {
activeItem: mt.ref
});
}
setNotificationAllowed(e) {
this.isNotificationAllowedStatus = e, !e && nl((() => this.activeItem)) && (this.clearQueues(), 
this.activeItemDone());
}
get isNotificationAllowed() {
return this.isNotificationAllowedStatus;
}
get isInGamePlay() {
return this.gamePlayManager.isInGamePlay;
}
shouldShowNotification(e) {
if (!this.isNotificationAllowedStatus) return !1;
const t = 2 === this.settings.getSetting(0, 0), n = 1 === this.settings.getSetting(0, 0), r = 2 === this.settings.getSetting(0, e), i = 1 === this.settings.getSetting(0, e);
return this.gamePlayManager.isInGamePlay ? !(t || n || r || i) : !t && !r;
}
addNotification(e) {
const t = e.options?.setting ?? 0;
nl((() => this.shouldShowNotification(t))) ? e.options?.cooldownInfo && this.isInCooldown(e.options.cooldownInfo) ? this.telemetrySendEvent("cooldown", e) : this.isQueueAvailable(e.tier) ? (this.addToQueue(e), 
nl((() => {
this.activeItem || this.showNextNotification();
}))) : this.telemetrySendEvent("dropped", e) : this.telemetrySendEvent("hidden", e);
}
dismiss() {
this.onDismiss.trigger();
}
isQueueAvailable(e) {
return nl((() => {
const t = this.queues[e];
if (this.activeItem) {
if (this.queues[this.activeItem.item.tier].overridable) return this.dismiss(), !0;
if (t.overridable) return !1;
}
return t.getCount() + 1 <= t.capacity;
}));
}
isInCooldown({type: e, key: t}) {
let n = this.cooldownLog.get(e);
n || (n = new Map, this.cooldownLog.set(e, n));
const r = lO[e], i = n.get(t), o = Date.now();
return !(void 0 === i || i + r <= o) || (n.set(t, o), !1);
}
isTimeSlotExceeded(e) {
const {tier: t} = e;
if (!this.queues[t].useTimeWindow) return !1;
const n = this.getScreenTimeInSeconds(e);
if (!n) throw Error("screenTimeInSec is not set properly");
return this.timeLog.reduce(((e, t) => e + t.duration), 0) + n > 20;
}
addToQueue(e) {
this.queues[e.tier].addItem(e);
}
showNextNotification() {
if (this.activeItem) return;
let e;
this.purgeTimeLog(), this.queues[0].getCount() ? e = this.queues[0].getNextItem() : this.queues[1].getCount() ? e = this.queues[1].getNextItem() : this.queues[2].getCount() ? e = this.queues[2].getNextItem() : this.queues[3].getCount() && (e = this.queues[3].getNextItem()), 
e ? this.isTimeSlotExceeded(e) ? (this.telemetrySendEvent("dropped", e), this.queues[e.tier].dequeueNextItem(), 
this.showNextNotification()) : this.activeItem = new sO(e, this.getScreenTimeInSeconds(e)) : this.activeItem = void 0;
}
deleteActiveItem() {
if (!this.activeItem) return;
const e = this.activeItem.item.tier;
this.queues[e].dequeueNextItem(), this.activeItem = void 0;
}
addToTimeLog(e) {
this.timeLog.push(e), this.purgeTimeLog();
}
purgeTimeLog() {
const e = Date.now() - 6e4;
this.timeLog = this.timeLog.filter((t => t.endTs > e));
}
isUsingWithTimeWindow(e) {
const t = e.tier;
return this.queues[t].useTimeWindow;
}
activeItemDone() {
nl((() => {
if (!this.activeItem) return;
this.isUsingWithTimeWindow(this.activeItem.item) && this.addToTimeLog(this.activeItem.timeLogItem);
const {options: e, tier: t, type: n} = this.activeItem.item;
this.deleteActiveItem(), this.showNextNotification(), this.onComplete.trigger(t, n, e);
}));
}
clearQueues() {
this.queues[0].clear(), this.queues[1].clear(), this.queues[2].clear(), this.queues[3].clear();
}
getNotificationQueueFromTier(e) {
return this.queues[e];
}
getScreenTimeInSeconds({options: e, tier: t}) {
return e?.screenTimeInSec ?? this.queues[t].getScreenTimeInSec();
}
telemetrySendEvent(e, t) {
t.options?.telemetryInfo && ME(this.pinClient, {
msg_id: t.options.telemetryInfo.pg_id,
...t.options.telemetryInfo,
status: "impression",
status_code: e,
...t.data?.hasActions && {
option: "open",
destination_name: "main"
}
});
}
}, uO = ({keyBinding: e, label: t}, {getKeyBindingText: n}) => e ? [ Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_PRESS-BUTTON"), Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_CTA-1", {
"%buttonPrimary%": n(e),
"%actionPrimary%": t
}) ] : void 0, pO = ({label: e, keyBinding: t, buttonNumber: n, buttonTotal: r}, {getKeyBindingText: i}) => t ? [ Em("PHOTON-SOCIAL_NARRATION_BUTTON-FOCUS", {
"%buttonLabel%": e,
"%buttonNumber%": n + "",
"%buttonTotal%": r + "",
"%primaryKey%": i(t)
}) ] : void 0, fO = () => ({
activateText: Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_PRESS-OPEN"),
holdActivateText: Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_OPEN")
}), hO = Qc({
alignSelf: "flex-start"
}), mO = Qc({
flexDirection: "column"
}), gO = Qc({
marginTop: Vc(Rd.DimensionSpace.small),
marginBottom: Vc(Rd.DimensionSpace.small)
}), yO = e => ({id: t, dismiss: n, stayActive: r, holdOptions: i, isActivated: o, onClose: a}) => {
const {activateText: s, holdActivateText: l} = fO();
let c;
return e.icon && (c = 1 === e.iconSize ? H.createElement(LP, {
texture: e.icon,
wrapperStyle: hO
}) : H.createElement(NP, {
texture: e.icon,
color: e.iconColor,
wrapperStyle: hO
})), H.createElement(vP, {
key: t
}, H.createElement(EP, {
style: e.actions ? mP : void 0
}, c, H.createElement("surface", {
style: mO
}, H.createElement(kP, {
text: e.text
}), e.secondaryText ? H.createElement(kP, {
text: e.secondaryText,
color: Rd.TextColorStandard.default,
style: gO
}) : void 0)), e.actions ? H.createElement(iO, {
onClose: a,
isActivated: o,
onActivated: r,
holdTime: i.holdTimeMs,
holdRequired: i.holdRequired,
activateText: s,
holdActivateText: l
}, e.infoArea ? H.createElement(xP, {
style: mP
}, H.createElement(NP, {
color: e.infoArea.iconColor,
texture: e.infoArea.icon
}), H.createElement(kP, {
text: e.infoArea.text,
style: rd("alignSelf", "center")
})) : void 0, H.createElement(BP, null, e.actions.map(((t, r) => H.createElement(DP, {
variant: 0 === r ? 0 : void 0,
key: t.id,
style: 0 !== r ? gP : void 0,
id: t.id,
text: t.label,
callback: () => {
n(), t.callback();
},
narration: {
buttonNumber: r + 1,
buttonTotal: e.actions?.length ?? 0
},
narrationItem: pO
}))))) : void 0);
}, IO = () => {
const e = kh(), t = Ip(), n = Rl();
return H.useCallback((() => {
t.isEnabledUntracked && setTimeout(e.isolateBoundaryId(n), 4e3);
}), [ e, t, n ]);
}, [_O, bO] = El({
debugName: "notificationState",
create: e => {
const t = e.get(zh), n = e.get(sI), r = e.get(ov), i = e.get(pP), o = e.get(RT), a = e.get(oI), s = new dO(r, i, o, n.Notifications), l = () => {
t.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !0
});
}, c = () => {
t.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !1
});
};
return {
notificationManager: s,
showNotification(e, t, n, r) {
const i = {
...n,
hasActions: !!n?.actions?.length
};
s.addNotification({
tier: e,
type: t,
content: yO(n),
options: r,
data: i
});
},
showNotificationComponent(e, t, n, r, i) {
s.addNotification({
tier: e,
type: t,
content: n,
options: r,
data: i
});
},
showCtaNotification(e, n, r, i, o, a, d) {
const u = 1e3 * (t.bindings.Input.getFocusNotificationConfig({})?.holdTimeSeconds ?? 1);
s.addNotification({
tier: e,
type: n,
content: e => H.createElement(oO, {
...e,
icon: r,
message: i,
buttonLabel: o,
holdTimeMs: u,
onDismiss: c,
onAction: a,
onMount: l
}),
options: d,
data: {
text: i
}
});
},
showNextNotification() {
s.activeItemDone();
},
showErrorNotification(e, t, n) {
a.addEvent({
eventType: "photon_user_error",
value: t,
message: n?.message
}), s.addNotification({
tier: 0,
type: 0,
content: yO({
text: Em("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_ERROR_ACTION-FAIL"),
icon: ih.WARNING,
iconColor: Rd.IconColorStandard.error,
...e
})
});
}
};
}
}), SO = () => {
const e = $p();
H.useEffect((() => (e.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !0
}), () => {
e.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !1
});
})), [ e ]);
};
function vO() {
return hv().personaInfo;
}
function TO(e) {
return mv(e).personaInfo;
}
function EO(e) {
return e?.displayName ?? "";
}
var PO = {
EPIC: !0,
EA: !0,
PSN: !0,
NINTENDO: !0,
STEAM: !0,
XBOX: !0
};
function OO(e) {
return e in PO;
}
var CO = {
EPIC: {
EPIC: "EPIC",
EA: bT.Console,
PSN: bT.Console,
STEAM: bT.Console,
XBOX: bT.Console,
NINTENDO: bT.Console
},
EA: {
EPIC: bT.Console,
EA: "EA",
PSN: bT.Console,
STEAM: bT.Console,
XBOX: bT.Console,
NINTENDO: bT.Console
},
PSN: {
EPIC: bT.Console,
EA: bT.Console,
PSN: "PSN",
STEAM: bT.Console,
XBOX: bT.Console,
NINTENDO: bT.Console
},
STEAM: {
EPIC: bT.Console,
EA: bT.Console,
PSN: bT.Console,
STEAM: "STEAM",
XBOX: bT.Console,
NINTENDO: bT.Console
},
XBOX: {
EPIC: bT.Console,
EA: bT.Console,
PSN: bT.Console,
STEAM: bT.Console,
XBOX: "XBOX",
NINTENDO: bT.Console
},
NINTENDO: {
EPIC: bT.Console,
EA: bT.Console,
PSN: bT.Console,
STEAM: bT.Console,
XBOX: bT.Console,
NINTENDO: "NINTENDO"
}
}, NO = {
EPIC: {
EPIC: bT.Pc,
EA: bT.Pc,
PSN: bT.Console,
STEAM: bT.Pc,
XBOX: bT.Console,
NINTENDO: bT.Console
},
EA: {
EPIC: bT.Pc,
EA: bT.Pc,
PSN: bT.Console,
STEAM: bT.Pc,
XBOX: bT.Console,
NINTENDO: bT.Console
},
PSN: {
EPIC: bT.Pc,
EA: bT.Pc,
PSN: "PSN",
STEAM: bT.Pc,
XBOX: bT.Console,
NINTENDO: bT.Console
},
STEAM: {
EPIC: bT.Pc,
EA: bT.Pc,
PSN: bT.Console,
STEAM: bT.Pc,
XBOX: bT.Console,
NINTENDO: bT.Console
},
XBOX: {
EPIC: bT.Pc,
EA: bT.Pc,
PSN: bT.Console,
STEAM: bT.Pc,
XBOX: "XBOX",
NINTENDO: bT.Console
},
NINTENDO: {
EPIC: bT.Pc,
EA: bT.Pc,
PSN: bT.Console,
STEAM: bT.Pc,
XBOX: bT.Console,
NINTENDO: "NINTENDO"
}
};
function AO(e, t) {
const n = Ws.legacySimplifiedPlatformRepresentations ? CO : NO;
return OO(e) && OO(t) ? n[e][t] : bT.Console;
}
function LO(e, t, n) {
let r = AO(t, n?.playerNetworkId ?? "EA");
if (n && r === bT.Pc) {
const t = HS(e, e.get(iT).get().data, n.photonPlayerId, void 0);
i = r, o = n.playerNetworkId, a = t?.isOnline ?? !1, r = "Pc" !== i || a || "EA" !== o ? i : bT.Ea;
}
var i, o, a;
return r;
}
var wO = e => {
const {playerNetworkId: t} = vO(), n = ol();
return {
name: EO(e),
playerNetworkId: LO(n, t, e)
};
}, kO = (e, t, n) => nl((() => {
const r = LO(e, n.personaInfo.playerNetworkId, t);
return {
name: EO(t),
playerNetworkId: r
};
})), [RO, xO] = El({
debugName: "lobbyJoinedNotificationState",
create: e => {
const {showNotification: t} = e.get(_O);
return n => {
const r = mv(e), {isCurrentPhotonUser: i} = yv(n.photonPlayerId, r);
if (i) return;
const o = NT(kO(e, n, r), {
allowEllipsis: !0
});
t(2, 2, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_LOBBY_MEMBER-JOIN", {
"%primaryID%": o
}),
icon: ih.PARTY
});
};
}
}), BO = class extends WI {
constructor(e, t, n, r) {
super(r), this.moby = e, this.lobbyApi = t, this.playerInfoStore = n;
}
init() {
const e = [ this.setSeed(), this.setLobbyChangedStream() ];
return () => {
e.forEach((e => e?.()));
};
}
updateLobby(e) {
this.applyFragmentResults(pI({
data: e,
loading: !1,
skipped: !1
}), ((e, t) => e.update(t)));
}
triggerPlayerJoinedNotification(e) {
for (const t of e) this.triggerPlayerInfoNotification(this.moby.get(RO), t.photonPlayerId);
}
triggerPlayerInfoNotification(e, t) {
return yI(this.playerInfoStore.get(t), 1e4).then((({data: t}) => {
if (t) return e(t);
}));
}
setSeed() {
return this.setSeedStrategy({
fetch: async () => fI(await j_((() => this.lobbyApi.getLobby({})), fT, {
transformResponse: cT
})),
updater: (e, t) => e.update(t)
});
}
setLobbyChangedStream() {
return this.setStreamStrategy({
batchDuration: 0,
stream: new mT(this.lobbyApi.onLobbyChanged),
updater: (e, t) => {
let n;
if (t.data?.lobby?.members.length) {
const r = e.data, i = t.data?.lobby;
if (i) {
const e = i.lobbyId === r?.lobbyId, t = lT(i, e ? r?.members : void 0);
n = t.lobby, e && t.added.length && this.triggerPlayerJoinedNotification(t.added);
}
}
e.update({
...e.toProps(),
data: n
});
}
}, "lobbyChangedStreamStrategy");
}
}, [DO, FO] = El({
debugName: "lobbyFragmentStoreState",
create: e => {
const t = e.get(sI), n = e.get(b_);
return new BO(e, t.Lobby, n, {
debugName: "Lobby"
});
}
});
function MO(e) {
return e.getUntracked(DO).get();
}
function UO(e) {
return e.get(DO);
}
function HO(e, t, n) {
const r = e.get(DO).get().data, i = e.get(iT).get()?.data, o = HS(e, i, t, n), a = r?.members.has(t) ?? !1;
return n && a && o?.devicePlatformId && o.productId ? a && o.productId === Fs.productId && LS.crossplayCompatiblePlatforms.has(o.devicePlatformId) : a;
}
var VO = Sl({
debugName: "lobbyCrossplayEnabledState",
get: function({get: e}) {
return e(DO).get().data?.crossPlayEnabled;
}
});
function JO(e, t) {
function n(t) {
return nl((() => {
const n = MO(e).data;
if (n?.lobbyId === t.lobbyId) {
const e = [];
for (const t of n.members.values()) e.push({
playerId: t.eaPlayerId,
playerNetworkId: t.playerNetworkId,
personaId: t.personaId,
displayName: t.displayName,
joinTimestampMs: t.joinTimestampMs
});
return {
...n,
members: e
};
}
}));
}
t.onMemberLeft.subscribe((e => {
const r = n(e);
if (r) {
const n = e, i = r.members.findIndex((e => n.playerId === e.playerId && n.playerNetworkId === e.playerNetworkId && n.personaId === e.personaId));
-1 !== i && (r.members.splice(i, 1), t.onLobbyChanged.trigger({
lobby: r
}));
}
})), t.onMemberJoined.subscribe((e => {
const r = n(e);
if (r) {
const n = e.member, i = r.members.findIndex((e => n.playerId === e.playerId && n.playerNetworkId === e.playerNetworkId && n.personaId === e.personaId));
-1 !== i && r.members.splice(i, 1), r.members.push(n), t.onLobbyChanged.trigger({
lobby: r
});
}
}));
}
function GO(e, t) {
const n = [], r = [], i = {}, o = 0 === t.size;
for (let r = 0, a = e.length; r < a; r++) {
const a = e[r], s = a.playerId, l = e_(a.playerNetworkId), c = i_({
eaPlayerId: s,
playerNetworkId: l
});
i[c] = !0;
const d = t.get(c);
if (!d || d.personaId !== a.personaId) {
const e = {
eaPlayerId: s,
personaId: a.personaId,
playerNetworkId: l,
joinTimestampMs: a.joinTimestampMs,
photonPlayerId: c,
displayName: a.displayName
};
t.set(c, e), o || n.push(e);
}
}
if (e.length !== t.size) for (const e of t.values()) i[e.photonPlayerId] || (t.delete(e.photonPlayerId), 
r.push(e));
return {
added: n,
removed: r
};
}
function zO(e, t = new Zs([])) {
const {added: n, removed: r} = GO(e.members, t);
return {
party: {
...e,
partyLeader: {
playerId: e.partyLeader.playerId,
personaId: e.partyLeader.personaId,
playerNetworkId: e_(e.partyLeader.playerNetworkId)
},
members: t,
maxSize: e.maxSize,
promotionEnabled: e.promotionEnabled,
crossPlayEnabled: e.crossPlayEnabled,
joinable: e.joinable,
invitable: e.invitable,
localizedPartyTitle: e.localizedPartyTitle,
telemetryType: e.telemetryType
},
added: n,
removed: r
};
}
function jO(e) {
const t = new Zs([]);
return nl((() => zO(e, t).party));
}
function qO(e) {
return i_({
eaPlayerId: e.playerId,
playerNetworkId: e_(e.playerNetworkId)
});
}
function YO(e, t) {
const [n, r] = H.useState((() => nl((() => void 0 === e.data && 0 !== t))));
return H.useEffect((() => {
if (0 !== t) {
const n = nl((() => e.data));
if (r(void 0 === n), void 0 === n) {
let n = !1;
return yI(e, t).then((() => {
n || r(!1);
})), () => {
n = !0;
};
}
} else r(!1);
}), [ e, t ]), n;
}
function WO(e, t) {
const [n, r] = H.useState((() => nl((() => !hI(e).hasData && 0 !== t))));
return H.useEffect((() => {
if (0 !== t) {
const n = nl((() => hI(e)));
if (r(!n.hasData), !n.hasData) {
let n = !1;
return II(e, t).then((() => {
n || r(!1);
})), () => {
n = !0;
};
}
}
}), [ e, t ]), n;
}
function KO(e, t) {
const n = e.toProps(), r = YO(e, t);
return {
...n,
loading: r || n.loading
};
}
function XO(e, t, n) {
return KO(t.get(e), n);
}
function QO(e, t) {
const n = gI(e), r = WO(e, t);
return {
...n,
loading: r || n.loading
};
}
function $O(e, t, n) {
return QO(H.useMemo((() => t.getByIds(e)), [ e, t ]), n);
}
function ZO(e, t) {
return KO(e.get(), t);
}
function eC(e, t) {
const n = e.toProps();
return {
...n,
data: n.data ? t(n.data) : void 0
};
}
function tC(e, t) {
return new PI(t.key, (() => e.get(t)));
}
function nC(e) {
const t = ol();
return H.useMemo((() => tC(t, e)), [ e, t ]);
}
function rC(e, t) {
const n = ol();
return H.useMemo((() => new PI(e.key, (() => n.getItem(e, t)))), [ e, n, t ]);
}
function iC(e, t) {
return e.size > 0 && !e.has(t);
}
function oC(e, t, n, r) {
let i = 0;
if (!e?.isOnline) return 1;
if (!e?.isEAPresence) return 1;
if (Fs.devicePlatformId === e.devicePlatformId) return 1;
r.size <= 1 ? i |= 64 : iC(r, e.devicePlatformId) && (i |= 32), n && (i |= 8);
const o = e.properties?.lobbyCrossplayEnabled;
!1 === o && (i |= 16);
const a = e.properties?.partyCrossplayEnabled;
!1 === a && (i |= 16), t || (i |= 2);
const s = e.properties?.crossplayEnabled;
return !1 === s && (i |= 4), i || 1;
}
function aC(e) {
return 1 == (1 & e);
}
function sC(e) {
return 32 == (32 & e);
}
function lC(e) {
return (24 & e) > 0;
}
function cC(e) {
return 16 == (16 & e);
}
function dC(e) {
return 2 == (2 & e);
}
function uC(e) {
return 4 == (4 & e);
}
function pC(e, t, n, r) {
return !aC(oC(e, t, n, r));
}
function fC(e) {
return !aC(e) && (118 & e) > 0;
}
function hC(e) {
return !aC(e) && (110 & e) > 0;
}
var mC = J_.object({
playerId: J_.string,
personaId: J_.string,
playerNetworkId: J_.string,
displayName: J_.string,
joinTimestampMs: J_.number
}), gC = J_.object({
playerNetworkId: J_.string,
playerId: J_.string,
personaId: J_.string
}), yC = J_.object({
partyId: J_.string,
partyLeader: gC,
members: J_.array(mC),
maxSize: J_.number,
promotionEnabled: J_.boolean,
crossPlayEnabled: J_.boolean,
joinable: J_.boolean,
invitable: J_.boolean
}, {
localizedPartyTitle: J_.string,
telemetryType: J_.string
}), IC = class extends as {
constructor(e) {
super({
data: e
});
}
}, _C = class extends WI {
constructor(e, t, n) {
super(n), this.photonBindings = e, this.playerInfoStore = t, this.notificationEvents = {
kicked: new os,
left: new os,
joined: new os,
setLeader: new os
};
}
updateParty(e) {
this.applyFragmentResults(pI({
data: e,
loading: !1,
skipped: !1
}), ((e, t) => e.update(t)));
}
init() {
const e = [ this.setSeed(), this.setPartyChangedStream() ];
return () => {
e.forEach((e => e?.()));
};
}
setSeed() {
return super.setSeedStrategy({
fetch: async () => {
let e = (await this.photonBindings.Party.getParty({}))?.party;
return e || await this.isCreatePartySupported() ? fI(await j_((async () => {
if (!e) try {
const t = await this.photonBindings.Party.createParty({});
if (e = t?.party, !e) throw new Error("createParty didn't return a party");
} catch (e) {
throw new Error("Failed to create party:" + e);
}
return e && this.playerInfoStore.getByIds(e.members.map(qO)), e;
}), yC, {
transformResponse: jO
})) : fI({
loading: !1,
skipped: !1
});
},
updater: (e, t) => {
this.isCreatePartySupported().then((n => {
n ? e.update(t) : e.update({
loading: !1,
data: void 0
});
}));
}
});
}
setPartyChangedStream() {
return this.setStreamStrategy({
batchDuration: 0,
stream: new IC(this.photonBindings.Party.onPartyChanged),
updater: (e, t) => {
const n = e.data;
let r;
if (t.data) {
const {party: e, context: i} = t.data;
let o;
if (n && i?.kickedPlayers.length && (o = i.kickedPlayers.map(qO), this.triggerPlayerKickedNotification(o, n)), 
e?.members.length) {
const t = e.partyId === n?.partyId, i = zO(e, t ? n?.members : void 0);
r = i.party, t && (r.partyLeader.personaId !== n.partyLeader.personaId && this.triggerSetLeaderNotification(e, n), 
i.added.length && this.triggerPlayerJoinedNotification(i.added), i.removed.length && this.triggerPlayerLeftNotification(i.removed, o));
}
}
e.update({
...e.toProps(),
data: r
});
}
}, "partyChangedStreamStrategy");
}
triggerSetLeaderNotification(e, t) {
const n = e.partyLeader, r = t.partyLeader;
this.triggerPlayerInfoNotification(this.notificationEvents.setLeader, qO(n), {
partyLeader: r
});
}
triggerPlayerKickedNotification(e, t) {
const n = t.partyLeader;
for (const r of e) t.members.has(r) && this.triggerPlayerInfoNotification(this.notificationEvents.kicked, r, {
partyLeader: n
});
}
triggerPlayerLeftNotification(e, t) {
for (const n of e) t && t.includes(n.photonPlayerId) || this.triggerPlayerInfoNotification(this.notificationEvents.left, n.photonPlayerId);
}
triggerPlayerJoinedNotification(e) {
for (const t of e) this.triggerPlayerInfoNotification(this.notificationEvents.joined, t.photonPlayerId);
}
triggerPlayerInfoNotification(e, t, ...n) {
yI(this.playerInfoStore.get(t), 1e4).then((({data: t}) => {
t && e.trigger(t, ...n);
}));
}
async isCreatePartySupported() {
return !!(await AS(this.photonBindings))?.partySupport.isSupported;
}
}, [bC, SC] = El({
debugName: "partyFragmentStoreState",
create: e => {
const t = e.get(sI), n = e.get(b_);
return new _C(t, n, {
debugName: "Party"
});
}
});
function vC(e) {
return e.get(bC);
}
function TC(e) {
const t = vC(e);
return nl((() => t.get().data?.members.size));
}
var EC = Sl({
debugName: "partyCrossplayEnabledState",
get: function({get: e}) {
return e(bC).get().data?.crossPlayEnabled;
}
});
function PC(e, t, n) {
const r = e.get(bC).get().data, i = e.get(iT).get()?.data, o = HS(e, i, t, n), a = r?.members.has(t) ?? !1;
return n && a && o?.devicePlatformId && o.productId ? a && o.productId === Fs.productId && LS.crossplayCompatiblePlatforms.has(o.devicePlatformId) : a;
}
var OC = Cl({
debugName: "crossplayEnabledState",
default: !0
}), CC = Sl({
debugName: "partyOrLobbyCrossplayPrevented",
get: function({get: e}) {
return !1 === e(VO) || !1 === e(EC);
}
}), NC = vl({
debugName: "crossplayPreventedState",
get: function(e, {get: t, getItem: n}) {
const r = t(CC), i = LS.crossplayCompatiblePlatforms, {photonPlayerId: o, photonSessionId: a} = h_(e);
return oC(HS({
get: t,
getItem: n
}, t(iT).get().data, o, a), t(OC), r, i);
}
});
function AC(e, t) {
return ul(NC, m_(e, t));
}
function LC(e, t) {
return fC(ul(NC, m_(e, t)));
}
var wC = {
uninvitable: !1
}, kC = Cl({
debugName: "uninvitableFriendsState",
default: new Map
});
function RC(e, t) {
const n = ol(), r = FO().get().data, i = r && r.invitable && r.maxSize > r.members.size, o = HO(n, e, t), a = dl(kC).get(e);
return !o && i && a ? a : wC;
}
var xC = fm.PlayerList.PlayerSortOrder, BC = fm.PlayerList.SectionFilter;
function DC(e, t) {
return e && !t ? -1 : t && !e ? 1 : 0;
}
function FC(e, t) {
return e.playerNetworkId === t.personaInfo.playerNetworkId && e.playerId === t.tokenInfo.userId;
}
var MC = {
[xC.Self]: (e, t, n, r, i) => DC(FC(e, i), FC(t, i)),
[xC.Online]: (e, t, n, r, i) => {
const o = HS(n, r, e.photonPlayerId, void 0), a = HS(n, r, t.photonPlayerId, void 0);
return DC(FC(e, i) || !!o?.isOnline, FC(t, i) || !!a?.isOnline);
},
[xC.InCurrentGame]: (e, t, n, r, i) => {
const o = HS(n, r, e.photonPlayerId, void 0), a = HS(n, r, t.photonPlayerId, void 0);
return DC(FC(e, i) || o?.productId === Fs.productId, FC(t, i) || a?.productId === Fs.productId);
},
[xC.LastOnline]: (e, t, n, r, i, o) => {
const a = o?.get(e.photonPlayerId).data?.lastAuthDate ?? 0;
return (o?.get(t.photonPlayerId).data?.lastAuthDate ?? 0) - a;
},
[xC.Alphabetic]: (e, t, n, r, i, o) => {
const a = o?.get(e.photonPlayerId).data?.displayNameLowerCase ?? "", s = o?.get(t.photonPlayerId).data?.displayNameLowerCase ?? "";
return a < s ? -1 : a > s ? 1 : 0;
},
[xC.PlayerCustom1]: (e, t) => e.customValue1 - t.customValue1,
[xC.PlayerCustom2]: (e, t) => e.customValue2 - t.customValue2
}, UC = (e, t) => e.index - t.index;
function HC(e, t, n, r, i) {
return e.personas.slice().sort(((o, a) => {
for (const s of [ ...e.playerSortOrders.map((e => MC[e])), UC ]) {
const e = s(o, a, t, n, r, i);
if (0 !== e) return e;
}
return 0;
}));
}
function VC(e, t, n) {
n.push(e), t.delete(e);
}
function JC(e, t, n, r) {
return FC(t, n) ? !Uv(e) : !!HS(e, r, t.photonPlayerId, void 0)?.isOnline;
}
function GC(e, t, n, r, i) {
const o = [];
return t.sectionFilter === BC.All ? e.forEach((t => {
VC(t, e, o);
})) : t.sectionFilter === BC.Online ? e.forEach((t => {
JC(n, t, r, i) && VC(t, e, o);
})) : t.sectionFilter === BC.Offline ? e.forEach((t => {
JC(n, t, r, i) || VC(t, e, o);
})) : t.sectionFilter === BC.PlayerCustom1 ? e.forEach((t => {
t.customValue1 && VC(t, e, o);
})) : t.sectionFilter === BC.PlayerCustom2 && e.forEach((t => {
t.customValue2 && VC(t, e, o);
})), o;
}
var zC = Cl({
debugName: "playerListConfig",
default: void 0
}), [jC] = El({
debugName: "playerListMap",
create: () => new Zs([], "OptimizedObservableMap<playerListMap>")
}), qC = Al({
debugName: "playerListPersonas",
default: () => ({
uninitialized: !0,
loading: !1
})
}), YC = Sl({
debugName: "playerListsOrder",
get: function({get: e}) {
const t = Array.from(e(jC).values()).sort(((e, t) => e.index - t.index));
return t.map((e => e.id));
}
}), WC = Cl({
debugName: "activePlayerListId",
default: void 0
}), KC = vl({
debugName: "playerListSectionsFiltered",
get: function(e, {get: t, getItem: n}) {
const r = t(iT).get(), i = t(fv);
if (!r.data) return {
...r.toProps(),
data: void 0
};
const o = t(jC).get(e);
if (o) {
const a = n(qC, e);
if (a.data) {
const e = new Set(a.data.values());
return {
loading: !1,
data: o.sections.map((o => {
const a = GC(e, o, {
get: t,
getItem: n
}, i, r.data);
return {
...o,
personas: a
};
}))
};
}
return {
...a,
data: void 0
};
}
return {
loading: !1,
error: new Error("No such playerlist (1): " + e)
};
}
}), XC = vl({
debugName: "playerListSections",
get: function(e, {get: t, getItem: n}) {
const r = n(KC, e), i = r.data;
if (!i) return r;
const o = t(iT).get().data, a = t(fv), s = t(b_);
return {
...r,
data: i.map((e => {
const r = HC(e, {
get: t,
getItem: n
}, o, a, s);
return {
...e,
personas: r
};
}))
};
}
}), QC = vl({
debugName: "playerListState",
get: function(e, {get: t, getItem: n}) {
const r = t(jC).get(e);
if (r) {
const t = n(XC, e), i = t.data;
return i ? {
loading: !1,
data: {
...r,
sections: i
}
} : {
...t,
data: void 0
};
}
return {
loading: !1,
error: new Error("No such playerlist (2): " + e)
};
}
}), $C = Al({
debugName: "playerListSectionExpanded",
default: () => !0
}), ZC = [], eN = vl({
debugName: "playerListSectionsExpandedState",
get: function(e, {getItem: t}) {
return t(QC, e)?.data?.sections.map((e => t($C, e.id))) ?? ZC;
}
}), tN = vl({
debugName: "playerListSectionRows",
get: function(e, {getItem: t}) {
const n = t(QC, e);
let r;
return n.data && (r = Object.fromEntries(n.data.sections.map(((e, t) => [ t, e.personas.map(((t, n) => ({
photonPlayerId: t.photonPlayerId,
telemetryInfo: {
pg_id: "tab_player_list",
destination_name: e.id,
msg_id: e.id,
index: {
item_index: n + 1,
total_items: e.personas.length
},
context: {
tpid: Fs.productId
}
}
}))) ])))), {
...n,
data: r
};
}
}), nN = Sl({
debugName: "playerIdsInPlayerLists",
get: function({get: e, getItem: t}) {
const n = Array.from(e(jC).values()), r = new Set, i = [];
n.forEach((e => {
const n = t(qC, e.id);
i.push(n);
const o = n.data?.values();
if (o) for (const e of o) r.add(e.playerId);
}));
const o = hI(i);
return {
...o,
data: o.hasData ? Array.from(r) : void 0
};
}
}), rN = vl({
debugName: "personaInPlayerListWithPresenceNotifications",
get: function(e, {get: t, getItem: n}) {
return !!Array.from(t(jC).values()).filter((e => e.showPresenceNotifications)).find((t => n(qC, t.id).data?.has(e)));
}
}), iN = Sl({
debugName: "hasPlayerListWithNotifications",
get: function({get: e}) {
return Fs.playerListsEnabled && !!Array.from(e(jC).values()).find((e => e.showPresenceNotifications));
}
}), oN = vl({
debugName: "isPlayerInPlayerList",
get: function(e, {get: t, getItem: n}) {
if (!Fs.playerListsEnabled) return !1;
const r = t(jC);
for (const [, t] of r) {
const r = n(qC, t.id).data?.has(e);
if (r) return !0;
}
return !1;
}
}), aN = vl({
debugName: "playerListsWithPlayerInIt",
get: function(e, {get: t, getItem: n}) {
if (!Fs.playerListsEnabled) return [];
const r = t(jC), i = [];
for (const [, t] of r) {
const r = n(qC, t.id).data?.has(e);
r && i.push(t);
}
return i;
}
});
function sN() {
return eC(SC().get(), (e => e));
}
function lN(e) {
return eC(SC().get(), (t => e(t.members)));
}
var cN = vl({
debugName: "playerCanJoinMyPartyState",
get: function(e, {get: t, getItem: n}) {
if (!Fs.isPartyEnabled) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
}
};
const {photonPlayerId: r} = h_(e);
if (!c_(r)) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("INVALID_USER")
};
const i = t(bC).get(), o = n(nE, r), a = n(oN, r), s = hI([ i, o ]);
if (s.loading || s.uninitialized) return s;
const l = i.data;
if (!l) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("NO_PARTY")
};
if (!l.invitable) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("PARTY_UNINVITABLE")
};
const c = !!l.members.get(r);
if (!(l.members.size < l.maxSize)) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("PARTY_FULL")
};
if (c) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("USER_IN_PARTY")
};
if (!o.data && !a) return {
...o,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("NO_RELATION")
};
const d = t(kC).get(r)?.uninvitable;
return hC(n(NC, e)) ? {
data: {
invitable: !1,
incompatible: !0
},
loading: !1,
error: new Error("CROSSPLAY_PREVENTED")
} : d ? {
data: {
invitable: !1,
incompatible: !0
},
loading: !1,
error: new Error("INVITE_PREVENTED")
} : {
data: {
invitable: !0,
incompatible: !1
},
loading: !1,
error: void 0
};
}
});
function dN(e, t) {
return PC(ol(), e, t);
}
function uN(e) {
return e.getUntracked(bC).get();
}
function pN(e) {
return nl((() => uN(e).data?.members.size));
}
function fN(e, t) {
function n(t) {
return nl((() => {
const n = uN(e).data;
if (n?.partyId === t.partyId) {
const e = [];
for (const t of n.members.values()) e.push({
playerId: t.eaPlayerId,
playerNetworkId: t.playerNetworkId,
personaId: t.personaId,
displayName: t.displayName,
joinTimestampMs: t.joinTimestampMs
});
return {
...n,
members: e,
telemetryType: n.telemetryType || ""
};
}
}));
}
t.onMemberLeft.subscribe((r => {
const i = n(r);
if (i) {
const n = qO(r);
if (_v(e.getUntracked, n).isCurrentPhotonUser) t.onPartyChanged.trigger({
party: void 0
}); else {
const e = r, n = i.members.findIndex((t => e.playerId === t.playerId && e.playerNetworkId === t.playerNetworkId && e.personaId === t.personaId));
-1 !== n && (i.members.splice(n, 1), t.onPartyChanged.trigger({
party: i
}));
}
}
})), t.onMemberJoined.subscribe((e => {
const r = n(e);
if (r) {
const n = e.member, i = r.members.findIndex((e => n.playerId === e.playerId && n.playerNetworkId === e.playerNetworkId && n.personaId === e.personaId));
-1 !== i && r.members.splice(i, 1), r.members.push(n), t.onPartyChanged.trigger({
party: r
});
}
})), t.onMemberKicked.subscribe((r => {
const i = n(r);
if (i) {
const n = qO(r);
if (_v(e.getUntracked, n).isCurrentPhotonUser) t.onPartyChanged.trigger({
party: void 0,
context: {
kickedPlayers: [ {
playerId: r.playerId,
playerNetworkId: r.playerNetworkId,
personaId: r.personaId
} ]
}
}); else {
const e = r, n = i.members.findIndex((t => e.playerId === t.playerId && e.playerNetworkId === t.playerNetworkId && e.personaId === t.personaId));
-1 !== n && (i.members.splice(n, 1), t.onPartyChanged.trigger({
party: i,
context: {
kickedPlayers: [ {
playerId: r.playerId,
playerNetworkId: r.playerNetworkId,
personaId: r.personaId
} ]
}
}));
}
}
})), t.onLeaderChanged.subscribe((e => {
const r = n(e);
r && (r.partyLeader = {
playerId: e.playerId,
playerNetworkId: e.playerNetworkId,
personaId: e.personaId
}, t.onPartyChanged.trigger({
party: r
}));
}));
}
var hN = class {
constructor(e) {
this.LobbyApi = e, this.onSendEaInvite = new os, this.onFirstPartyInviteAccepted = new os, 
this.onUninvitablePlayersChanged = new os, this.initEventAdapters();
}
initEventAdapters() {
this.LobbyApi.onSendEaInvite.subscribe((e => {
this.onSendEaInvite.trigger(e);
})), this.LobbyApi.onFirstPartyInviteAccepted.subscribe((e => {
this.onFirstPartyInviteAccepted.trigger(e);
})), this.LobbyApi.onUninvitablePlayersChanged.subscribe((e => {
this.onUninvitablePlayersChanged.trigger(e);
}));
}
async filterUninvitablePlayers(e) {
const t = await this.LobbyApi.filterUninvitablePlayers(e);
return t && {
uninvitablePlayers: t?.uninvitablePlayers.map((e => ({
playerId: e.playerId,
playerNetworkId: e.playerNetworkId,
personaId: e.personaId,
localizedReason: e.reason
})))
};
}
prepareInvite(e) {
if (1 !== e.inviteTypes.length || e.inviteTypes[0] !== fm.PhotonInvite.InviteType.Lobby) throw Error("Invalid inviteType sent to old Lobby Api.");
return this.LobbyApi.prepareInvite({
invitedPersonaId: e.invitedPersonaId,
invitedPlayerId: e.invitedPlayerId,
invitedPlayerNetworkId: e.invitedPlayerNetworkId,
invitedFirstPartyUid: e.invitedFirstPartyUid
});
}
sendEaInviteResponse(e) {
return this.LobbyApi.sendEaInviteResponse(e);
}
};
function mN(e, t) {
const n = t.hasMethod("PhotonInvite", "prepareInvite"), r = t.hasMethod("FriendsNotificationsService", "StreamNotifications");
n || (t.PhotonInvite = new hN(t.Lobby)), r || (t.FriendsNotificationsService = new tT(t)), 
Fs.featureFlags.usesSingleEventForPartyAndLobbyChanges || (fN(e, t.Party), JO(e, t.Lobby));
}
var gN = Cs("/sparta/assets/ui/lib/RoundedRect-4806f472.png"), yN = {
main: $g.link()
}, IN = [ iv, Gy ];
function _N(e) {
return !!IN.find((t => e.startsWith(t)));
}
var bN = 15, SN = 70, vN = 90, TN = 100, EN = 119, PN = 200, ON = 300, CN = 500, NN = 1e3, AN = fm.Performance.BlurMode, LN = Qc({
position: "absolute",
top: 0,
right: 0,
bottom: 0,
left: 0,
textureFadeInTime: 0
}), wN = Qc({
layerGrabBackground: !0,
layer: !0,
layerBlur: 1,
layerToTextureDownScaleFactorPerAxis: 2,
opacity: 0
}), kN = Qc({
layer: !0,
layerBlur: 1,
layerGrabBackground: !0,
layerToTextureDownScaleFactorPerAxis: 2
}), RN = ku(Rd.OverlayBackgroundColor, .85), xN = Rd.OverlayBackgroundColor, BN = Cl({
debugName: "blurModeState",
default: void 0
}), DN = () => {
const e = Tm(), t = ol();
H.useEffect((() => (t.set(BN, e.Performance.getBlurMode({})?.blurMode), e.Performance.onBlurModeChanged.subscribe((({blurMode: e}) => t.set(BN, e))))), [ e, t ]);
}, FN = ({type: e, backgroundIndex: t, onLoaded: n, startZOffset: r, opacityTween: i}) => {
const o = $p(), a = e + "_" + t, s = "twinkleLayerToTexture://" + a, [l, c] = H.useState(!1);
H.useEffect((() => o.texture.registerOnLoadedCallback([ s ], (() => {
c(!0), n?.();
}))), [ o, s, n ]);
const d = l ? rd("texture", s) : [ wN, rd("layerToTexture", a) ];
return H.createElement("surface", {
key: a,
style: [ LN, d, i && i.propStyle("opacity"), rd("zOffset", r - t) ]
});
}, MN = ({type: e, opacityTween: t, startZOffset: n, style: r}) => {
const i = H.useRef(1), o = $p(), [a, s] = H.useState([ H.createElement(FN, {
key: e + "_" + i.current,
type: e,
backgroundIndex: i.current,
startZOffset: n,
opacityTween: t
}) ]);
return H.useEffect((() => {
const r = () => {
s((e => e.length > 1 ? e.slice(0, e.length - 1) : e));
};
return o.bindings.Layout.onWindowSizeChanged.subscribe(sp((() => {
i.current++, s((o => [ H.createElement(FN, {
startZOffset: n,
type: e,
key: e + "_" + i.current,
backgroundIndex: i.current,
onLoaded: r,
opacityTween: t
}), ...o ]));
}), 250));
}), [ o, n, e, t ]), H.createElement(H.Fragment, null, H.createElement("surface", {
style: [ LN, rd("backgroundColor", RN), rd("zOffset", n + 1), t && t.propStyle("opacity"), r ]
}), a);
}, UN = ({opacityTween: e, startZOffset: t, style: n}) => H.createElement("surface", {
style: [ LN, kN, rd("backgroundColor", RN), rd("zOffset", t), e && e.propStyle("opacity"), n ]
}), HN = ({opacityTween: e, type: t, startZOffset: n, style: r}) => H.createElement("surface", {
style: [ LN, rd("zOffset", n), rd("backgroundColor", 0 === t ? Rd.BackgroundColor.body : xN), e && e.propStyle("opacity"), r ]
}), VN = Ii.observer((({type: e, opacityTween: t, style: n}) => {
const r = 0 === e ? 0 : SN, i = dl(BN);
return void 0 === i ? null : i === AN.GrabOnce ? H.createElement(MN, {
style: n,
type: e,
opacityTween: t,
startZOffset: r
}) : i === AN.Live ? H.createElement(UN, {
style: n,
type: e,
opacityTween: t,
startZOffset: r
}) : H.createElement(HN, {
style: n,
type: e,
opacityTween: t,
startZOffset: r
});
})), JN = () => {
const e = Tm(), t = pl(OC);
H.useEffect((() => {
if (!(e.hasMethod("DeepLink", "isCrossPlayEnabled") && e.hasMethod("DeepLink", "getCrossPlayPlatformCompatibility"))) return;
const n = e.DeepLink.isCrossPlayEnabled({});
return n && t(n.on), e.DeepLink.onCrossPlayStatusChanged.subscribe((e => {
t(e.on);
}));
}), [ e, t ]);
}, GN = (fs.Input.DeviceType, fs.Input.ButtonState, Sl({
debugName: "firstPartyFriendsExcludingEAFriendsPlayerInfosState",
get: function({get: e}) {
if ("EA" === e(fv).personaInfo.playerNetworkId) return {
loading: !1,
uninitialized: !1,
data: [],
error: void 0
};
const t = e(b_), n = e(CS), r = e(lS).get(), i = e(NS);
if (n.data && i.data && r.data) {
const e = [], o = new Set, a = new Set(r.data.map((e => e.eaPlayerId)));
for (const e of n.data) e.firstPartyPlayerId && o.add(e.firstPartyPlayerId);
for (const {photonPlayerId: n, firstPartyPlayerId: r, eaPlayerId: s} of i.data.values()) !r || s && a.has(s) || o.has(r) || e.push(t.get(n));
const s = hI([ n, i, r, ...e ]);
return {
...s,
data: s.hasData ? mI(e) : void 0
};
}
return {
...hI([ n, i ]),
data: void 0
};
}
})), zN = Sl({
debugName: "friendsPlayerInfosState",
get: function({get: e}) {
const t = e(CS), n = e(GN), r = hI([ t, n ]);
return {
...r,
data: r.hasData ? [ ...t.data ?? [], ...n.data ?? [] ] : void 0
};
}
});
function jN(e) {
const t = !!e.properties?.lobbyJoinable && !!e.gameJoinTokenTypes?.includes("lobby"), n = e.productId === Fs.productId, r = !!e.joinable;
return t && r && n;
}
function qN(e) {
if (!Fs.isPartyEnabled) return !1;
const t = !!e.properties?.partyJoinable && !!e.gameJoinTokenTypes?.includes("party"), n = e.productId === Fs.productId, r = !!e.joinable;
return t && r && n;
}
var YN = (e, t, n, r, i, o) => {
const a = o?.get(e.photonPlayerId)?.uninvitable, s = !r?.has(e.photonPlayerId) && (t && !a || qN(e)), l = !i?.has(e.photonPlayerId) && (n && !a || jN(e));
return !(!s && !l);
}, WN = e => e.presence?.isOnline ?? !1;
function KN(e) {
return (t, n) => {
if (!!t.presence?.isOnline != !!n.presence?.isOnline) return t.presence?.isOnline ? -1 : 1;
if (t.photonPlayerId === n.photonPlayerId) return t.presence?.isEAPresence ? -1 : 1;
if (t.playerInfo.playerNetworkId !== n.playerInfo.playerNetworkId && (t.playerInfo.playerNetworkId === e || n.playerInfo.playerNetworkId === e)) return t.playerInfo.playerNetworkId === e ? -1 : 1;
if (t.playerInfo.eaPlayerId === n.playerInfo.eaPlayerId) {
const r = t.playerInfo?.playerNetworkId === e, i = n.playerInfo?.playerNetworkId === e, o = "EA" === t.playerInfo?.playerNetworkId, a = "EA" === n.playerInfo?.playerNetworkId;
if (r !== i) return r ? -1 : 1;
if (o !== a) return o ? -1 : 1;
}
if (!t.mostRecentlyLoggedInPersonaDate || !n.mostRecentlyLoggedInPersonaDate) return t.mostRecentlyLoggedInPersonaDate || n.mostRecentlyLoggedInPersonaDate ? t.mostRecentlyLoggedInPersonaDate ? -1 : 1 : t.playerInfo.displayNameLowerCase.localeCompare(n.playerInfo.displayNameLowerCase);
const r = n.mostRecentlyLoggedInPersonaDate - t.mostRecentlyLoggedInPersonaDate;
return 0 === r ? t.playerInfo.displayNameLowerCase.localeCompare(n.playerInfo.displayNameLowerCase) : r;
};
}
var XN = (e, t) => {
const n = e.presence?.updateTimestamp || 0, r = t.presence?.updateTimestamp || 0;
return n === r ? e.playerInfo.displayNameLowerCase.localeCompare(t.playerInfo.displayNameLowerCase) : n > r ? -1 : 1;
};
function QN(e, t) {
const n = e.presence.productId === Fs.productId;
return n !== (t.presence.productId === Fs.productId) ? n ? -1 : 1 : 0;
}
function $N(e, t, n) {
const r = e.presence.playerNetworkId === n;
return r !== (t.presence.playerNetworkId === n) ? r ? -1 : 1 : 0;
}
function ZN(e, t, n) {
const r = QN(e, t);
if (r) return r;
const i = $N(e, t, n);
return i || XN(e, t);
}
function eA(e, t, n, r, i, o, a, s, l, c, d) {
const u = {};
for (let t = 0, p = e.length; t < p; t++) {
const p = e[t], f = p.playerInfo.eaPlayerId, h = pC(p.presence, n, r, i);
u[p.photonPlayerId] = {
isFavoriteFriend: !(!f || !d?.has(f)),
isInMyPartyOrLobby: s?.has(p.photonPlayerId) || l?.has(p.photonPlayerId),
isInvitableOrJoinable: !h && YN(p.presence, o, a, s, l, c)
};
}
return e.sort(((e, n) => {
const r = u[e.photonPlayerId], i = u[n.photonPlayerId];
if (r?.isInMyPartyOrLobby !== i?.isInMyPartyOrLobby) return r?.isInMyPartyOrLobby ? -1 : 1;
if (r?.isFavoriteFriend !== i?.isFavoriteFriend) return r?.isFavoriteFriend ? -1 : 1;
const o = QN(e, n);
if (o) return o;
if (r?.isFavoriteFriend && i?.isFavoriteFriend) return 0;
if (r?.isInvitableOrJoinable !== i?.isInvitableOrJoinable) return r?.isInvitableOrJoinable ? -1 : 1;
const a = $N(e, n, t);
return a || XN(e, n);
})), e;
}
function tA(e, t) {
return e.sort(KN(t)), e;
}
function nA(e, t) {
const n = [], r = {};
return e.sort(KN(t)), e.forEach((e => {
const t = e.playerInfo.eaPlayerId ?? e.playerInfo.firstPartyPlayerId;
t && (r[t] && e.presence?.isEAPresence && WN(e) || !r[t]) && (n.push(e), r[t] = !0);
})), n;
}
function rA(e, t, n) {
if (e.length !== t.length) return !1;
for (let r = 0, i = e.length; r < i; r++) if (e[r][n] !== t[r][n]) return !1;
return !0;
}
function iA(e) {
return !!e.presence?.isOnline;
}
var oA = (e, t) => ({
telemetryInfo: t,
photonPlayerId: e.photonPlayerId
}), aA = (e, t) => ({
telemetryInfo: t,
photonPlayerId: e.presence.photonSessionId,
presence: e.presence
});
function sA(e, t, n, r) {
const i = [], o = Math.floor(Date.now() / 1e3) - 3024e3;
for (let a = 0, s = t.length; a < s; a++) {
const s = t[a], l = FS(e, n, s.photonPlayerId);
if (l.length) for (let e = 0, t = l.length; e < t; e++) {
const t = l[e];
i.push({
playerInfo: s,
presence: t,
photonPlayerId: s.photonPlayerId
});
} else {
let e = s.eaPlayerId ? r.get(s.eaPlayerId)?.mostRecentlyLoggedInPersonaDate : void 0;
e && e < o && (e = o), i.push({
playerInfo: s,
photonPlayerId: s.photonPlayerId,
mostRecentlyLoggedInPersonaDate: e
});
}
}
return i;
}
var lA = Sl({
debugName: "relevantFriendsWithPresenceState",
get: function({get: e, getItem: t}) {
const n = e(zN), r = e(iT).get(), i = e(v_), o = e(fv).personaInfo.playerNetworkId, a = e(PS).get(), s = [ n, a ];
(a.data?.size ?? 0) > 0 && s.push({
...r.toProps(),
data: r.loading ? void 0 : r.data
});
const l = hI(s);
if (l.hasData && n.data && r.data) {
const a = nA(sA({
get: e,
getItem: t
}, n.data, r.data, i), o);
return {
...l,
data: a
};
}
return l;
}
}), cA = Sl({
debugName: "blockedListState",
get: function({get: e}) {
const t = e(lS).get();
let n;
if (t.data) {
const e = t.data.size;
n = t.data.map(((t, n) => oA(t, {
pg_id: "tab_friends",
destination_name: "blocked",
index: {
item_index: n + 1,
total_items: e
}
})));
}
return {
...t.toProps(),
data: n
};
}
}), dA = Sl({
debugName: "invitableToPartyOrLobbyState",
get: function({get: e}) {
const t = e(bC).get().data, n = e(DO).get().data;
let r, i, o = !1, a = !1;
return t && (r = new Set(t.members.keys()), o = t.invitable && r.size < t.maxSize), 
n && (i = new Set(n.members.keys()), a = n.invitable && i.size < n.maxSize), {
partyMembers: r,
lobbyMembers: i,
invitableToParty: o,
invitableToLobby: a
};
}
}), uA = Sl({
debugName: "favoriteFriendsListState",
get: function({get: e}) {
const t = e(yE).get(), n = t.data ? new Set(Array.from(t.data.keys())) : void 0;
return {
...t.toProps(),
data: n
};
}
}), pA = Sl({
debugName: "friendsListState",
get: function({get: e}) {
const t = e(fv).personaInfo.playerNetworkId, n = e(OC), r = e(CC), i = e(uA), o = e(lA), a = e(cA);
let s;
if (o.data && a.data && i.data) {
const l = [], c = [], d = [];
o.data.forEach((e => {
WN(e) ? l.push(e) : e.playerInfo.eaPlayerId && i.data?.has(e.playerInfo.eaPlayerId) ? d.push(e) : c.push(e);
}));
const {invitableToLobby: u, invitableToParty: p, lobbyMembers: f, partyMembers: h} = e(dA), m = e(kC), g = LS.crossplayCompatiblePlatforms, y = eA(l, t, n, r, g, p, u, h, f, m, i.data), I = (d.length ? tA(d, t) : []).concat(tA(c, t)), _ = a.data;
s = {
0: y.map(((e, t) => aA(e, {
pg_id: "tab_friends",
destination_name: "online_friends",
msg_id: "online_friends",
index: {
item_index: t + 1,
total_items: l.length
}
}))),
1: I.map(((e, t) => oA(e, {
pg_id: "tab_friends",
destination_name: "offline_friends",
msg_id: "offline_friends",
index: {
item_index: t + 1,
total_items: c.length
}
}))),
2: _.map(((e, t) => oA(e, {
pg_id: "tab_friends",
destination_name: "blocked",
msg_id: "blocked",
index: {
item_index: t + 1,
total_items: a.data?.length ?? 0
}
}))),
favoriteOfflineFriendsCount: d.length
};
}
const l = hI([ o, a, i ]);
return {
...l,
timestamp: Date.now(),
data: l.hasData ? s : void 0
};
},
equals: function(e, t) {
if (e.loading !== t.loading || e.uninitialized !== t.uninitialized || e.error !== t.error) return !1;
const n = e.data?.[0] || [], r = t.data?.[0] || [];
return n.length === r.length && e.data?.[1].length === t.data?.[1].length && e.data?.[2].length === t.data?.[2].length && e.data?.favoriteOfflineFriendsCount === t.data?.favoriteOfflineFriendsCount && rA(n, r, "photonPlayerId");
}
}), fA = Cl({
debugName: "waitingForInitialPresence",
default: !0
}), hA = vl({
debugName: "isSamePlatformFriendsState",
get: function(e, {get: t}) {
const n = t(fv).personaInfo.playerNetworkId, r = t(b_).get(e), i = r.data?.playerNetworkId;
if (!i) return {
...r.toProps(),
data: void 0
};
if (n !== i) return {
...r.toProps(),
data: !1
};
if ("EA" === n) {
const n = t(PS).get(), r = !!n.data?.get(e);
return {
...n.toProps(),
data: r
};
}
const o = t(SS).get(), a = r.data?.firstPartyPlayerId, s = !!a && !!o.data?.get(a);
return {
...o.toProps(),
data: o.data ? s : void 0
};
}
}), [mA, gA] = El({
debugName: "layerStateHelper",
create: e => {
const t = e.getUntracked(_m);
return {
get isHidden() {
return "Hidden" === t.currentState || "Hiding" === t.currentState;
},
get isRevealed() {
return "Revealed" === t.currentState || "Revealing" === t.currentState;
},
get isRevealing() {
return "Revealing" === t.currentState;
},
onRevealed: e => t.stateChangeEvent.subscribe((t => {
"Revealing" === t && e();
})),
onHidden: e => t.stateChangeEvent.subscribe((t => {
"Hiding" === t && e();
})),
open: () => {
"Revealed" !== t.currentState && t.interrupt((() => "Revealing"));
},
close: () => {
"Hidden" !== t.currentState && t.interrupt((() => "Hiding"));
},
toggle: () => {
t.interrupt((e => "Hidden" === e || "Hiding" === e ? "Revealing" : "Hiding"));
}
};
}
}), yA = Cl({
debugName: "layerFlowHelperActiveState",
default: 0
});
function IA(e) {
return e.getUntracked(mA);
}
function _A(e) {
const t = IA(e);
let n;
return {
start: () => {
void 0 === n && (n = t.isHidden, e.set(yA, (e => e + 1)), n && t.open());
},
stop: () => {
void 0 !== n && (n && t.close(), n = void 0, e.set(yA, (e => e - 1)));
}
};
}
var bA = fm.DeepLink.PickFriendPlayerInclusion;
function SA(e, t) {
return e.joinTimestampMs - t.joinTimestampMs;
}
function vA(e, t) {
const n = KN(t);
return e.sort(((e, t) => {
const r = e.inclusion !== bA.Show;
return r !== (t.inclusion !== bA.Show) ? r ? 1 : -1 : n(e, t);
}));
}
var TA = Sl({
debugName: "partyMembersPlayerInfosState",
get: function({get: e}) {
const t = e(bC).get(), n = e(b_), r = e(fv).tokenInfo.userId, i = Array.from(t.data?.members.values() ?? []).sort(SA), o = [];
i.forEach((e => {
e.eaPlayerId !== r && o.push(n.get(e.photonPlayerId));
}));
return {
...hI(o),
data: mI(o)
};
}
}), EA = Nl({
debugName: "friendPickerRequest",
default: void 0
}), PA = Sl({
debugName: "friendPickerSourceState",
get: function({get: e, getItem: t}) {
const n = e(EA), r = e(pA), i = new Set;
r.data && (r.data[0].forEach((e => i.add(p_(e.photonPlayerId)))), r.data[1].forEach((e => i.add(e.photonPlayerId))));
const o = e(zN), a = new Map;
o.data?.forEach((e => {
a.set(e.photonPlayerId, e);
}));
const s = e(iT).get(), l = s.data, c = [];
i.forEach((n => {
const r = a.get(n);
if (r && r.eaPlayerId && r.personaId) {
const i = HS({
get: e,
getItem: t
}, l, n, void 0), o = hC(t(NC, m_(r.photonPlayerId, i?.photonSessionId)));
c.push({
photonPlayerId: n,
presence: i,
playerId: r.eaPlayerId,
personaId: r.personaId,
playerNetworkId: r.playerNetworkId,
isOnline: !!i && i.isOnline,
firstPartyPlayerId: r.firstPartyPlayerId,
displayName: r.displayName,
crossplayDisabled: o
});
}
}));
const d = e(TA);
n?.includePartyPlayers && d.data?.forEach((e => {
if (e && e.eaPlayerId && e.personaId) {
const n = !aC(t(NC, e.photonPlayerId));
c.push({
photonPlayerId: e.photonPlayerId,
playerId: e.eaPlayerId,
personaId: e.personaId,
playerNetworkId: e.playerNetworkId,
inParty: !0,
firstPartyPlayerId: e.firstPartyPlayerId,
displayName: e.displayName,
crossplayDisabled: n
});
}
}));
const u = hI([ r, o, d, s ]);
return {
...u,
data: u.hasData ? c : void 0
};
}
}), [, OA] = El({
debugName: "friendPickerLayerFlowHelper",
create: _A
}), CA = Nl({
debugName: "filteredPlayersPickerListState",
default: {
loading: !1,
uninitialized: !0
}
}), NA = Nl({
debugName: "friendPickerSourceSnapshotState",
default: []
});
var AA = Sl({
debugName: "friendPickerListState",
get: function({get: e}) {
const t = e(EA), n = e(NA), r = e(fv).personaInfo.playerNetworkId, i = e(v_), o = e(CA), a = o.data, s = {
0: [],
1: [],
2: []
};
if (a) {
const e = [], o = [], d = [];
n.forEach((t => {
const n = a.get(t.photonPlayerId);
if (n) {
const r = e_(t.playerNetworkId);
if (t.inParty) e.push({
photonPlayerId: t.photonPlayerId,
photonSessionId: void 0,
inclusion: n.inclusion,
disableReason: n.disableReason
}); else {
const e = {
photonPlayerId: t.photonPlayerId,
inclusion: n.inclusion,
disableReason: n.disableReason,
playerInfo: {
eaPlayerId: t.playerId,
playerNetworkId: r,
displayName: t.displayName,
displayNameLowerCase: t.displayName.toLowerCase(),
photonPlayerId: t.photonPlayerId,
personaId: t.personaId,
firstPartyPlayerId: t.firstPartyPlayerId
},
presence: t.presence
};
iA(e) ? o.push(e) : d.push({
...e,
...i.get(t.playerId)
});
}
}
})), s[1] = (l = o, c = r, l.sort(((e, t) => {
const n = e.inclusion !== bA.Show;
return n !== (t.inclusion !== bA.Show) ? n ? 1 : -1 : ZN(e, t, c);
}))).map(((e, t) => ({
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "online_friends",
index: {
item_index: t + 1,
total_items: o.length
}
},
inclusion: e.inclusion,
disableReason: e.disableReason,
photonPlayerId: e.photonPlayerId,
photonSessionId: e.presence.photonSessionId
}))), t?.includePartyPlayers && (s[0] = e.map(((t, n) => ({
...t,
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "in_your_party",
index: {
item_index: n + 1,
total_items: e.length
}
}
})))), t?.includeOfflinePlayers && (s[2] = vA(d, r).map(((e, t) => ({
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "offline_friends",
index: {
item_index: t + 1,
total_items: d.length
}
},
photonPlayerId: e.photonPlayerId,
photonSessionId: void 0,
inclusion: e.inclusion,
disableReason: e.disableReason
}))));
}
var l, c, d;
return (d = s) && Object.values(d).every((e => !e?.length)), {
...o,
data: s
};
}
});
function LA(e, t) {
return e.getUntracked(b_).get(t);
}
function wA(e, t) {
return nl((() => e.get(b_).get(t).data));
}
function kA(e, t) {
return XO(e, S_(), t);
}
function RA(e, t) {
return $O(e, S_(), t);
}
function xA(e, t) {
const n = S_(), r = n.get(e), i = r.data;
return QO(H.useMemo((() => {
const {eaPlayerId: t} = s_(e);
return t ? i ? nl((() => n.findByEaPlayerId(t))) : [ r ] : [];
}), [ n, e, r, i ]), t);
}
function BA(e) {
const t = T_(), {eaPlayerId: n} = s_(e);
return n ? t.get(n) : void 0;
}
function DA(e, t) {
const n = xA(e, t), r = n.data?.find((e => "EA" === e.playerNetworkId));
return {
...n,
data: r
};
}
var [FA, MA] = El({
debugName: "sessionPlayersStore",
create: () => new WI({
debugName: "sessionPlayers"
})
}), [UA, HA] = El({
debugName: "recentlyMetPlayersStore",
create: () => new WI({
debugName: "recentlyMetPlayers"
})
});
function VA(e, t) {
const n = e.get(UA).get().data?.get(t);
return {
recentlyMetEncounter: n,
playerLists: c_(t) ? e.getItem(aN, t) : []
};
}
function JA(e) {
return VA(ol(), e);
}
var GA = J_.optional(J_.object({}));
async function zA(e, t, n, r) {
return j_((() => e[t]({
entityId: {
playerId: {
id: r
}
},
targetEntityId: {
playerId: {
id: n
}
}
})), GA);
}
var jA = {
AcceptReceivedFriendInvite: "invite_accepted",
DeclineReceivedFriendInvite: "invite_declined",
CancelSentFriendInvite: "invite_canceled"
};
function qA(e, t) {
return `${e}-${t}`;
}
var YA = (e, t, n, r, i, o, a, s, l) => {
const {showNotification: c, showErrorNotification: d} = r, u = mv(e);
let p;
switch (n) {
case "AcceptReceivedFriendInvite":
case "DeclineReceivedFriendInvite":
p = e.getUntracked(iE);
break;

case "CancelSentFriendInvite":
p = e.getUntracked(aE);
break;

default:
Xs("Unhandled method");
}
return async () => {
let r;
try {
const {data: d} = await yI(LA(e, i), 8e3), {eaPlayerId: g} = s_(i);
ev(g);
const y = nl((() => p?.get().data));
s?.getSuccessMessage && d && c(3, 3, {
icon: s.successIcon,
text: s.getSuccessMessage(NT(kO(e, d, u), {
allowEllipsis: !0
}))
});
const I = nl((() => y?.get(g)));
y?.delete(g), r = () => I && y?.set(g, I);
const _ = await zA(t, n, g, u.tokenInfo.userId);
l && o.triggerFriends({
friend: g,
friend_invite_id: (f = u.tokenInfo.userId, h = g, m = n, "CancelSentFriendInvite" === m ? qA(f, h) : qA(h, f)),
action: jA[n],
source: qE(0, l, a),
status_code: _.error ? _.error.message : void 0
}), "AcceptReceivedFriendInvite" === n && e.get(oI).addEvent({
eventType: "photon_friends",
action: "invite_accepted",
error: !!_.error,
error_code: _.error?.message
});
const b = ("DeclineReceivedFriendInvite" === n || "CancelSentFriendInvite" === n) && _.error?.message.includes("INVITATION_NOT_FOUND"), S = "AcceptReceivedFriendInvite" === n && nl((() => e.getUntracked(PS).get().data?.get(i)));
if (_.error && !b && !S) throw _.error;
return _;
} catch (e) {
return r?.(), d(s?.getErrorMessage && {
text: s.getErrorMessage()
}, "friend request " + n, e), {
error: e,
loading: !1,
skipped: !1
};
}
var f, h, m;
};
}, WA = (e, t, n, r) => {
const i = ol(), {Invites: o} = Tm(), a = bO(), s = av(), l = QS("main");
return YA(i, o, t, a, e, s, l.history.location, n, r);
}, KA = e => Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_FRIEND_INVITE-DECLINE", {
"%senderPrimaryID%": e
}), XA = () => Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_DECLINE-FRIEND-REQUEST-FAIL"), QA = e => Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_FRIENDS_INVITE-CANCEL", {
"%primaryID%": e
}), $A = () => Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_CANCEL-FRIEND-REQUEST-FAIL"), ZA = () => Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_ACCEPT-FRIEND-REQUEST-FAIL"), eL = (e, t, n) => {
const r = ol(), {recentlyMetEncounter: i, playerLists: o} = JA(e), a = WA(e, "AcceptReceivedFriendInvite", {
getErrorMessage: ZA
}, n), s = !!i, l = o.length > 0;
let c = "";
return s ? c = "recently_met" : l && (c = "player_list"), zE(r, e, t, a, n && {
...n,
status: "click",
option: "accept",
context: {
friend_request: c
}
});
}, tL = (e, t, n) => {
const r = ol(), i = WA(e, "DeclineReceivedFriendInvite", {
getSuccessMessage: KA,
getErrorMessage: XA,
successIcon: ih.REMOVE
}, n);
return zE(r, e, t, i, n && {
...n,
status: "click",
option: "decline_friend_request"
});
}, nL = (e, t, n) => {
const r = ol(), i = WA(e, "CancelSentFriendInvite", {
getSuccessMessage: QA,
getErrorMessage: $A,
successIcon: ih.REMOVE
}, n);
return zE(r, e, t, i, n && {
...n,
status: "click",
option: "cancel_friend_request"
});
}, rL = (e, t, n) => {
const r = ol(), i = XS("main"), o = H.useCallback((() => {
i.navigate(Zg.link({
photonPlayerId: e
}));
}), [ e, i ]), {eaPlayerId: a} = s_(e), s = a ? r.get(aE).get().data?.get(a) : void 0;
return zE(r, e, t, o, n && {
msg_id: n.destination_name,
option: "view_request",
context: {
rel: s ? "pending_friend_other" : "pending_friend_self"
},
...n
});
}, iL = td((e => ({
color: e
})), {
fontSize: Jc(Zu.Headline.Text.fontSize),
zOffset: 1,
textLetterSpacing: Vc(2),
textEdgeOffset: .2,
wordWrap: "break-word"
}), oL = Qc({
textEllipsis: !0,
wordWrap: "normal"
}), aL = ({text: e, useEllipsis: t, color: n, style: r}) => H.createElement("surface", {
text: e,
style: [ Iu, iL(n || Zu.Headline.Text.color), t ? oL : void 0, r ]
}), sL = Qc({
fontSize: Jc(Rd.TextSizeDisplay.medium),
textLetterSpacing: Vc(3),
zOffset: 1,
wordWrap: "break-word"
}), lL = ({text: e, color: t, style: n}) => H.createElement("surface", {
text: e,
style: [ Iu, sL, rd("color", t || Rd.TextColorStandard.default), n ]
}), cL = Qc({
marginBottom: Vc(Rd.DimensionSpace.large)
}), dL = {
start: "flex-start",
center: "center",
end: "flex-end"
}, uL = ({title: e, headline: t, body: n, bodyStyle: r, style: i, childrenStyle: o, align: a, children: s}) => {
const l = rd("textAlign", a), c = a ? dL[a] : void 0, d = rd("justifyContent", c), u = rd("alignItems", c);
return H.createElement("surface", {
style: [ d, i ]
}, !!e && H.createElement(lL, {
text: e,
color: Rd.TextColorStandard.emphasized,
style: [ cL, l ]
}), !!t && H.createElement(aL, {
text: t,
color: Rd.TextColorStandard.emphasized,
style: [ cL, l ]
}), !!n && H.createElement(IT, {
text: n,
color: Rd.TextColorStandard.default,
style: [ l, r ]
}), !!s && H.createElement("surface", {
style: [ u, o ]
}, s));
}, pL = Qc({
flex: 1
}), fL = e => H.createElement(uL, {
align: "center",
...e,
style: [ e.style, pL ]
}), hL = Vc(60), mL = Qc({
spriteAnimation: {
fps: 60,
totalFrames: 85,
startFrame: 0,
looping: !0,
spriteSheet: Gc({
1: Cs("/photon/quantum/sprites/Circular_Loader_60px-399b44b9.png"),
2: Cs("/photon/quantum/sprites/Circular_Loader_60px@2x-f2961637.png")
}),
frameWidth: hL,
frameHeight: hL
},
height: hL,
width: hL
}), gL = ({style: e}) => {
const t = $p(), [n, r] = H.useState(null);
return H.useEffect((() => {
n && t.bindings.Layout.playSpriteAnimation({
surfaceId: n,
start: !0
});
}), [ n, t ]), H.createElement("surface", {
onSurfaceId: r,
style: [ mL, e ]
});
}, yL = (e, t, n = !0) => {
const {actionKeyBindings: r} = _f();
return Wp(e ? {
callback: e.callback,
keyBinding: r[e.action],
label: e.label
} : void 0, t, n);
}, IL = Vc(1250), _L = Qc({
width: IL,
marginTop: Vc(Rd.DimensionLayout.medium),
marginBottom: Vc(Rd.DimensionLayout.medium)
}), bL = Qc({
marginTop: Vc(Rd.DimensionSpace.largest),
alignItems: "center",
width: IL
}), SL = Qc({
maxWidth: Vc(900),
alignSelf: "center"
}), vL = Qc({
marginBottom: Vc(Rd.DimensionSpace.medium),
width: Vc(675)
}), TL = Qc({
position: "absolute",
top: 0,
alignSelf: "center"
}), EL = ({actionConfig: e, closeModal: t, onFocus: n, onBlur: r, alignStart: i, style: o, narrationItem: a, narration: s}) => {
const l = Tf(2), c = H.useMemo((() => {
const i = {
actionWithMaybeAutoClose: () => {
e.action(), e.autoClose && t();
}
};
return n && (i.onFocus = () => n(e)), r && (i.onBlur = () => r(e)), i;
}), [ t, n, r, e ]);
return H.createElement(jf, {
variant: e.buttonVariant,
style: o,
label: e.label,
alignStart: i,
onFocus: c.onFocus,
onBlur: c.onBlur,
id: "modal-" + e.id,
input: {
keyBinding: l,
callback: c.actionWithMaybeAutoClose
},
onClick: c.actionWithMaybeAutoClose,
narrationItem: a,
narration: s,
icon: e.icon
});
};
function PL(e) {
return "actions" in e;
}
var OL = H.memo((({actions: e, closeAction: t, onFocus: n, onBlur: r, alignStart: i, buttonStyle: o, buttonNarrationItem: a}) => {
const {closeModal: s} = CE();
let l = t ? 1 : 0, c = 0;
for (const t of e) PL(t) ? l += t.actions.length : l++;
return H.createElement(H.Fragment, null, e.map((e => PL(e) ? H.createElement(fL, {
key: e.id,
style: _L,
childrenStyle: bL,
headline: e.title,
body: e.body,
bodyStyle: SL
}, e.actions.map((e => H.createElement(EL, {
key: e.id,
style: [ vL, o ],
actionConfig: e,
closeModal: s,
onFocus: n,
onBlur: r,
narrationItem: a,
narration: {
buttonNumber: ++c,
buttonTotal: l
}
})))) : H.createElement(EL, {
key: e.id,
style: [ vL, o ],
actionConfig: e,
closeModal: s,
onFocus: n,
onBlur: r,
alignStart: i,
narrationItem: a,
narration: {
buttonNumber: ++c,
buttonTotal: l
}
}))), !!t && H.createElement(EL, {
key: t.id,
style: [ vL, o, e.length > 1 ? rd("marginTop", Vc(Rd.DimensionSpace.larger)) : void 0 ],
actionConfig: t,
closeModal: s,
onFocus: n,
onBlur: r,
alignStart: i,
narrationItem: a,
narration: {
buttonNumber: ++c,
buttonTotal: l
}
}));
})), CL = ({closeAction: e, withoutLabel: t, children: n}) => (yL({
callback: e.action,
label: t ? void 0 : e.label,
action: 3
}), H.createElement(H.Fragment, null, n)), NL = ({title: e, headline: t, body: n, overlayTitleNarrationItem: r}) => {
_p((t => r({
title: e
}, t)), [ e, r ], 0), _p((() => [ t, n ]), [ n, t ], 3);
}, AL = ({title: e, headline: t, body: n, style: r, children: i, overlayTitleNarrationItem: o}) => (NL({
title: e,
headline: t,
body: n,
overlayTitleNarrationItem: o
}), H.createElement(fL, {
style: _L,
title: e,
headline: t,
body: n,
bodyStyle: SL
}, H.createElement("surface", {
style: [ bL, r ]
}, i))), LL = ({title: e, headline: t, body: n, actions: r, closeAction: i, closeLabel: o, showLoading: a, withoutCloseButton: s = !1, withoutGlobalCloseInputLabel: l = !1, overlayTitleNarrationItem: c, buttonNarrationItem: d}) => {
const {closeModal: u} = CE(), p = H.useMemo((() => ({
id: "close",
action: i || u,
label: o || FP("CLOSE")
})), [ i, o, u ]);
return H.createElement(AL, {
title: e,
headline: t,
body: n,
overlayTitleNarrationItem: c
}, H.createElement(CL, {
closeAction: p,
withoutLabel: !s || l
}, H.createElement("surface", null, H.createElement("surface", {
style: [ rd("opacity", a ? 0 : 1), rd("alignItems", "center") ]
}, H.createElement(OL, {
actions: r,
closeAction: s ? void 0 : p,
buttonNarrationItem: d
})), a && H.createElement(gL, {
style: TL
}))));
}, wL = ({title: e, headline: t, body: n, confirmLabel: r = FP("CONFIRM"), cancelLabel: i = FP("INPUT_LABEL_CANCEL"), onConfirm: o, onCancel: a, showLoadingOnConfirm: s, autoClose: l = !0, overlayTitleNarrationItem: c, buttonNarrationItem: d}) => {
const {closeModal: u} = CE(), [p, f] = H.useState(!1), h = H.useMemo((() => [ {
id: "confirm",
label: r,
action: async () => {
s && f(!0), await o(), s && l && u();
},
autoClose: !s && l,
buttonVariant: 0
} ]), [ l, u, r, o, s ]), m = H.useMemo((() => {
if (a) return () => {
a(), l && u();
};
}), [ l, u, a ]);
return H.createElement(LL, {
title: e,
headline: t,
body: n,
actions: h,
showLoading: p,
closeAction: m,
closeLabel: i,
overlayTitleNarrationItem: c,
buttonNarrationItem: d
});
}, kL = ({title: e}) => e ? Em("PHOTON-SOCIAL_NARRATION_OVERLAY-DISPLAYED", {
"%overlayLabel%": e
}) : void 0, RL = 1, xL = 2, BL = 3, DL = 4, FL = 5, ML = 6, UL = e => {
const t = ol();
H.useEffect((() => Yp(t, e)), [ t, e ]);
}, HL = (e, t, n = !0) => {
const r = YL();
return Wp(e ? {
...e,
keyBinding: r[e.action]
} : void 0, t, n);
}, VL = fm.InputBindings.Action, JL = fs.Input.GamePadInput, GL = {
[VL.Primary]: JL.FaceButtonBottom,
[VL.Secondary]: JL.FaceButtonLeft,
[VL.Decline]: JL.FaceButtonRight,
[VL.OpenActionList]: JL.FaceButtonTop,
[VL.GoUp]: JL.DPadUp,
[VL.GoDown]: JL.DPadDown,
[VL.GoLeft]: JL.DPadLeft,
[VL.GoRight]: JL.DPadRight,
[VL.NextPage]: JL.ShoulderRight,
[VL.PreviousPage]: JL.ShoulderLeft,
[VL.Settings]: JL.SpecialRight,
[VL.NotificationFocus]: JL.SpecialLeft,
[VL.ToggleMode]: JL.TriggerRight,
[VL.TogglePhoton]: JL.FaceButtonRight,
[VL.LeaveParty]: JL.RightJoystickPress,
[VL.Tertiary]: JL.LeftJoystickPress
};
function zL(e, t) {
return {
primaryButton: Kh(e, GL[t]),
secondaryButtons: []
};
}
function jL(e, t, n, r) {
try {
const t = e.InputBindings.getActionBinding({
action: n
})?.keyBinding;
if (t) {
const {keyboardKeyLabel: e, keyboardKeycode: n, gamePadInput: i} = t.primaryButton;
if (n || e || i) return "number" == typeof r && (t.priority = r), t;
}
} catch {}
return zL(t, n);
}
var [qL, YL] = Qs("PhotonKeyBindings"), WL = e => YL()[e];
function KL(e, t) {
return {
[VL.Primary]: jL(e, t, VL.Primary, FL),
[VL.Secondary]: jL(e, t, VL.Secondary),
[VL.Decline]: jL(e, t, VL.Decline, ML),
[VL.OpenActionList]: jL(e, t, VL.OpenActionList),
[VL.GoUp]: jL(e, t, VL.GoUp),
[VL.GoDown]: jL(e, t, VL.GoDown),
[VL.GoLeft]: jL(e, t, VL.GoLeft),
[VL.GoRight]: jL(e, t, VL.GoRight),
[VL.NextPage]: jL(e, t, VL.NextPage),
[VL.PreviousPage]: jL(e, t, VL.PreviousPage),
[VL.Settings]: jL(e, t, VL.Settings, xL),
[VL.NotificationFocus]: jL(e, t, VL.NotificationFocus),
[VL.ToggleMode]: jL(e, t, VL.ToggleMode, BL),
[VL.TogglePhoton]: jL(e, t, VL.TogglePhoton, RL),
[VL.LeaveParty]: jL(e, t, VL.LeaveParty, DL),
[VL.Tertiary]: Fs.featureFlags.hasTertiaryAction ? jL(e, t, VL.Tertiary) : zL(t, VL.Tertiary)
};
}
var XL = Ii.observer((({children: e}) => {
const t = Tm(), n = ol(), r = $p(), i = zp(), [o, a] = H.useState((() => KL(t, i)));
return H.useEffect((() => {
const e = () => {
a(KL(t, i));
}, n = [ t.InputBindings.onBindingsChanged.subscribe(e) ];
return e(), () => {
n.forEach((e => e()));
};
}), [ t, r, n, i ]), H.createElement(qL.Provider, {
value: o
}, e);
})), QL = fm.DeepLink.ParentalControlSettings, $L = class extends WI {}, ZL = class extends WI {}, [ew, tw] = El({
debugName: "voipPlayersFragmentStoreState",
create: () => new ZL({
debugName: "VoipPlayersFragmentStore"
})
}), [nw, rw] = El({
debugName: "voipChannelsFragmentStoreState",
create: () => new $L({
debugName: "VoipChannels"
})
});
function iw(e) {
return e.get(ew);
}
function ow(e) {
const t = iw(e), n = mv(e);
return nl((() => t.get().data?.players.get(n.photonPlayerId)));
}
var aw = e => {
const t = e_(e.playerNetworkId);
return {
eaPlayerId: e.playerId,
playerNetworkId: t,
status: e.status,
channel: e.channel,
photonPlayerId: i_({
eaPlayerId: e.playerId,
playerNetworkId: t
})
};
};
function sw(e, t) {
return !!t && !!e && e.status !== fm.Voip.VoipStatus.Disabled && t.status !== fm.Voip.VoipStatus.Disabled && e.channel === t.channel;
}
function lw(e) {
return nl((() => {
const t = e.get(eE)(QL.Voip);
return !e.get(pP).getSetting(2, 0) || t;
}));
}
function cw(e) {
const t = ow(e);
return t?.channel === fm.Voip.VoipChannel.None || t?.status === fm.Voip.VoipStatus.Disabled;
}
var dw = J_.object({
error: J_.optional(J_.string)
});
function uw(e, t) {
let n = "", r = ih.VOIP;
const i = pN(e), {showNotification: o} = e.get(_O);
t?.channel === fm.Voip.VoipChannel.Party ? n = Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-PARTY") : t?.channel === fm.Voip.VoipChannel.Game ? n = Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-TEAM") : t?.channel === fm.Voip.VoipChannel.None && (r = ih.VOIP_DISABLED, 
n = Em((i ?? 0) >= 2 ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED_IN-PARTY" : "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED")), 
n && o(3, 3, {
icon: r,
text: n
});
}
var pw = async (e, t, n) => {
const r = e.get(sI);
if (lw(e) && t.channel !== fm.Voip.VoipChannel.None) return;
const i = await j_((() => r.Voip.setActiveVoipChannel(t)), dw);
n || i.error || uw(e, t);
};
function fw() {
const e = ol();
return H.useCallback(((t, n) => pw(e, t, n)), [ e ]);
}
function hw() {
const e = fw();
return H.useCallback((() => e({
channel: fm.Voip.VoipChannel.Party
})), [ e ]);
}
var mw = e => {
const t = [];
for (let n = 0, r = e.length; n < r; n++) {
const r = e.charCodeAt(n);
t.push(r >>> 8, 255 & r);
}
return new Uint8Array(t);
}, gw = e => {
const t = [];
for (let n = 0, r = e.length; n < r; ) t.push((255 & e[n++]) << 8 | 255 & e[n++]);
return String.fromCharCode.apply(null, t);
}, yw = e => {
const t = {};
return Object.keys(e).forEach((n => {
t[n] = gw(e[n].token);
})), t;
};
async function Iw(e, t) {
return new Promise((n => {
setTimeout((() => {
n(e());
}), t);
}));
}
async function _w(e, t, n = 1) {
const r = t?.maxAttempts ?? 3, i = t?.retryDelay ?? 2e3, o = await e();
return o.error && n < r ? Iw((() => _w(e, t, n + 1)), i) : o;
}
function bw(e) {
return {
stringValue: tg(mw(e))
};
}
function Sw(e, t) {
const n = {
isCrossplayEnabled: {
integerValue: t ? 1 : 0
}
};
return e.has("party") || e.forEach(((e, t) => {
n[t] = bw(e);
})), n;
}
function vw(e) {
const t = {};
return Object.values(JS).forEach((n => {
const r = e.properties[n];
r && (t[n] = {
token: ng(r)
});
})), t;
}
var Tw = 72e5, Ew = J_.object({
gameJoinTokens: J_.map(J_.object({
token: J_.uint8Array
}))
});
function Pw(e) {
return e?.properties.party || e?.properties.lobby ? yw(vw(e)) : {};
}
async function Ow(e, t, n, r, i) {
const o = p_(r), a = d_(r) ? r : void 0, s = aT(e).get(), l = nl((() => HS(e, s.data, o, a))), c = mv(e).tokenInfo.userId;
let d;
if (i) d = i.properties.party || i.properties.lobby ? {
loading: !1,
skipped: !1,
data: {
gameJoinTokens: vw(i)
}
} : await _w((() => j_((() => n.GetGameJoinTokens({
playerId: {
id: c
},
gameInviteId: i.gameInviteId
})), Ew)), {
retryDelay: 1e3,
maxAttempts: 3
}); else {
if (!l?.sessionId) return {
skipped: !1,
loading: !1,
error: new Error("Missing necessary data"),
data: void 0
};
d = await _w((() => j_((() => t.getDirectJoinTokens({
sessionId: l.sessionId
})), Ew)), {
retryDelay: 1e3,
maxAttempts: 3
});
}
if (d.data?.gameJoinTokens) {
const e = yw(d.data.gameJoinTokens);
return {
...d,
data: e
};
}
return {
...d,
data: void 0
};
}
async function Cw(e, t, n, r, i, o, a) {
const {data: s, error: l} = await Ow(e, t, n, r, a), c = s?.[o];
return c ? {
loading: !1,
skipped: !1,
data: c
} : (i.showErrorNotification(void 0, "get game join token", l), {
loading: !1,
skipped: !1,
error: l || new Error("Could not retrieve lobbyId")
});
}
var Nw = class extends WI {}, [Aw, Lw] = El({
debugName: "mutedPlayersFragmentStoreState",
create: () => new Nw({
debugName: "MutedPlayers"
})
}), ww = async e => {
const [t, n, r] = await Promise.all([ yI(e.get(lS).get(), 1e4), yI(e.get(Aw).get(), 1e4), yI(e.get(bC).get(), 1e4) ]);
return nl((() => {
const e = t.data, i = n.data, o = r.data, a = new Set, s = new Set;
if (o && e?.size) for (const t of o.members.values()) e.has(t.eaPlayerId) && (a.add(t.photonPlayerId), 
i?.has(t.eaPlayerId) || s.add(t.photonPlayerId));
return {
party: o,
blockedEaIds: a,
blockedAndUnmutedEaIds: s
};
}));
}, kw = vl({
debugName: "relativePrimaryIdMap",
get: function(e, t) {
const {get: n} = t, r = n(fv), {data: i} = n(b_).get(e);
return r.photonPlayerId === e ? {
name: EO(i),
playerNetworkId: r.personaInfo.playerNetworkId
} : {
name: EO(i),
playerNetworkId: LO(t, r.personaInfo.playerNetworkId, i)
};
}
}), Rw = (e, t) => e.getItemUntracked(kw, t), xw = e => ul(kw, e), Bw = Ii.observer((e => {
const {playerNetworkId: t, name: n} = xw(e.photonPlayerId);
return H.createElement(wT, {
name: n,
playerNetworkId: t,
style: e.style,
textStyle: e.textStyle,
useEllipsis: e.useEllipsis,
icon: e.icon
});
})), Dw = Ii.observer((({player: e, color: t = Rd.TextColorStandard.emphasized, style: n}) => {
const {playerNetworkId: r} = vO(), i = ol(), o = NT({
name: e.displayName,
playerNetworkId: LO(i, r, e)
});
return H.createElement(IT, {
text: o,
color: t,
style: [ rd("textEllipsis", !0), n ]
});
})), Fw = class extends Error {
constructor() {
super(...arguments), this.name = "JoinPreventedByFirstPartyError";
}
}, Mw = class extends Fw {}, Uw = class extends Fw {}, Hw = (e, t) => {
t({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY-EXPIRED")
}, "join party", e.error);
}, Vw = (e, t) => {
t({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY-EXPIRED")
}, "join lobby", e.error);
}, Jw = (e, t, n) => {
e(0, 0, {
icon: ih.VOIP
}, n, Em("PHOTON-SOCIAL_NOTIFICATION_PARTY-VOIP_BUTTON_OPEN"), t);
};
async function Gw(e, t, n, r, i, o) {
const {playerNetworkId: a, name: s} = Rw(n, r), {showNotification: l, showCtaNotification: c, showErrorNotification: d} = i, u = cw(n), p = lw(n), f = NT({
name: s,
playerNetworkId: a
}, {
allowEllipsis: !0
}), h = e?.error || t?.error;
if (h) {
if (h instanceof Fw) return void l(3, 3, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-MULTIPLAYER", {
"%localPlatform%": Bv(TO(n).playerNetworkId)
}),
icon: ih.INFORMATION
});
if (e?.error) return void Hw(e, d);
if (t?.error) return void Vw(t, d);
}
if (e && t) return u ? void (p ? l(3, 3, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO_INVITE-ACCEPT", {
"%primaryID%": f
}),
icon: ih.PARTY
}) : Jw(c, o, Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO-VOICE-DISABLED", {
"%primaryID%": f
}))) : void l(3, 3, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO-VOICE-ENABLED", {
"%primaryID%": f
}),
icon: ih.PARTY
});
if (e) {
if (u) return void (p ? l(3, 3, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_INVITE-ACCEPT", {
"%primaryID%": f
}),
icon: ih.PARTY
}) : Jw(c, o, Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY-VOICE-DISABLED", {
"%primaryID%": f
})));
const {blockedAndUnmutedEaIds: e} = await ww(n);
e.size || l(3, 3, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY-VOICE-ENABLED", {
"%primaryID%": f
}),
icon: ih.PARTY
});
} else t && l(3, 3, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY_INVITE-ACCEPT", {
"%primaryID%": f
}),
icon: ih.PARTY
});
}
var zw = fm.XboxPlatform.XUserPrivilege, jw = fm.XboxPlatform.XboxPermission, qw = fm.XboxPlatform.ResolveXUserPrivilegeWithUiAsyncResult;
async function Yw(e, t, n, r) {
if ("XBOX" !== e.get(fv).personaInfo.playerNetworkId) return;
if (e.get(OC)) return;
const i = HS(e, e.get(iT).get().data, t, void 0), o = i?.properties?.crossplayEnabled, a = !!n.partyId && i?.properties?.partyCrossplayEnabled, s = !!n?.lobbyId && i?.properties?.lobbyCrossplayEnabled, l = r?.properties.isCrossplayEnabled;
if (!(o || a || s || l)) return;
const c = await YE(e, zw.CrossPlay);
return c?.result, qw.Resolved, c;
}
async function Ww(e, t) {
const {isAllowed: n, privacyResult: r} = await QE(e, t, [ jw.PlayMultiplayer ], zw.Multiplayer);
return {
isAllowed: n,
privacyResult: r
};
}
async function Kw(e, t, n, r) {
const {isAllowed: i, privacyResult: o} = await Ww(e, t);
if (!i) return {
loading: !1,
skipped: !1,
error: new Mw($E(o))
};
const a = await Yw(e, t, n, r);
return void 0 !== a?.result && a.result !== qw.Resolved ? {
loading: !1,
skipped: !1,
error: new Uw("CrossplayDisabled")
} : {
loading: !1,
skipped: !1
};
}
function Xw(e, t, n, r, i) {
const o = ol(), {PresenceSession: a, GameInvite: s} = Tm(), l = bO(), {data: c} = ul(n, m_(e, t));
return H.useMemo((() => ({
...c,
getGameJoinToken: () => Cw(o, a, s, e, l, r, i)
})), [ i, s, r, c, o, l, e, a ]);
}
var Qw = Cl({
debugName: "joiningPartyIdState",
default: void 0
});
function $w(e, t) {
e.set(Qw, t);
}
var Zw = Cl({
debugName: "partyGameInviteSentState",
default: !1
}), ek = Sl({
debugName: "isInPartyState",
get: function({get: e}) {
const t = e(bC).get(), n = t.loading, r = !!e(Qw) || n;
return !!t.data || r;
}
}), tk = Sl({
debugName: "partyIdState",
get: function({get: e}) {
return e(bC).get().data?.partyId;
}
}), nk = Sl({
debugName: "shouldRevokePartyGameInvitesWhenPartyIsFullOrLeft",
get: function({get: e}) {
const t = e(fv), n = e(bC).get().data, r = !!n?.members.get(t.photonPlayerId), i = !!n && n.maxSize <= n.members.size;
return !r || i;
}
}), rk = Sl({
debugName: "shouldRevokePartyGameInvitesWhenCrossplaySettingChanges",
get: function({get: e}) {
return e(bC).get().data?.crossPlayEnabled;
}
});
function ik(e, t, n) {
e((() => H.createElement(fL, {
title: t,
bodyStyle: SL
}, H.createElement(gL, null))), {
ignoreCloseAll: !0,
telemetryId: n
});
}
function ok(e) {
const {action: t, DeepLink: n, notifications: r, modals: i, player: o, showLoading: a, loadingTelemetryId: s} = e, l = c => new Promise(((d, u) => {
a && ik(i.showModal, void 0, s), n.invokePlayerActionAsync({
playerActionId: t.playerActionId,
confirmed: c,
playerId: o.eaPlayerId ?? "",
playerNetworkId: o.playerNetworkId,
personaId: o.personaId ?? ""
}).then((t => {
if (t?.errorMessage) throw new Error(t.errorMessage);
if (a && i.closeModal(), t?.successMessage) r.showNotification(0, 3, {
icon: ih.INFORMATION,
text: t.successMessage
}); else if (!c && t?.confirmation) return e.confirmAction ? e.confirmAction(t.confirmation, (() => l(!0))) : (n = t.confirmation, 
o = i.showModal, s = () => l(!0), new Promise(((e, t) => {
const r = async () => {
try {
await s(), e(!0);
} catch (e) {
t(e);
}
};
o((() => H.createElement(wL, {
title: n.localizedTitle,
body: n.localizedDescription,
confirmLabel: Em("BUTTON_CONTINUE"),
onConfirm: () => r(),
onCancel: () => e(!1),
showLoadingOnConfirm: !0,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
})));
})));
var n, o, s;
return !0;
})).then(d).catch((e => {
a && i.closeModal(), u(e);
}));
}));
return () => l().catch((e => (r.showErrorNotification({
text: e.message
}, `getPlayerActionCallback (${t.telemetryName}, ${t.playerActionId})`, e), Promise.reject(e))));
}
function ak(e, t, n) {
return new Promise((r => {
if ((TC(e) ?? 0) <= 1) return r(!0);
t((() => {
return H.createElement(wL, {
title: Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_JOIN-PARTY"),
body: (e = Fs.isTightlyCoupledParties, t = n.Notifications.getInGamePlay({})?.inGamePlay ?? !1, 
Em(e ? t ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_JOIN-PARTY-B" : "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_JOIN-PARTY-C" : "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_JOIN-PARTY-A")),
confirmLabel: Em("BUTTON_CONTINUE"),
onConfirm: () => r(!0),
onCancel: () => r(!1),
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
});
var e, t;
}));
}));
}
async function sk(e, t, n, r, i, o, a) {
let s = !0;
$w(e, a);
const [l] = (await t.Party.isPartySupported({
partyIds: [ a ]
}))?.partySupport ?? [ {
isSupported: !0
} ];
return l.isSupported ? o && (s = await ak(e, n.showModal, t)) : l.enableSupportAction ? s = await ok({
action: l.enableSupportAction,
DeepLink: t.DeepLink,
notifications: r,
modals: n,
player: i,
showLoading: !0,
loadingTelemetryId: "overlay_join_new_party_confirm"
})() : (r.showErrorNotification({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_JOIN-FAIL")
}, "no enable support action", void 0), s = !1), s || $w(e), s;
}
var lk = J_.object({
response: J_.optional(J_.nullable(J_.object({
displayName: J_.string,
assets: J_.array(J_.object({
url: J_.string,
type: J_.string,
geometry: J_.object({
width: J_.number,
height: J_.number
})
}))
}))),
productId: J_.string
});
function ck(e) {
if (!e.response) return {
productId: e.productId
};
const t = e.response.assets.filter((e => "game-title-logo" === e.type)), n = new Map(t.map((e => [ `${e.geometry.width}x${e.geometry.height}`, e ])));
return {
productId: e.productId,
title: e.response.displayName,
gameTitleLogo: n
};
}
function dk(e) {
const t = e.toLowerCase();
switch (t) {
case "no-no":
return "nb-no";

case "zh-hk":
return "zh-tw";

default:
return t;
}
}
var uk = class extends jI {
async fetchWithRetries(e, t) {
const n = await _w((() => {
return this.updateFragments([ t ], {
loading: !0,
uninitialized: !1
}), n = e, r = t.id, i = Fs.locale, j_((async () => ({
...await n.GetProduct({
productId: {
id: r
},
locale: dk(i)
}),
productId: r
})), lk, {
transformResponse: ck
});
var n, r, i;
}), {
maxAttempts: 3,
retryDelay: 2e3
});
this.updateFragments([ t ], n);
}
init(e) {
return new kI(this.fragmentsList, (async t => {
await this.fetchWithRetries(e, t);
})).dispose;
}
}, [pk, fk] = El({
debugName: "productInfoFragmentStoreState",
create: () => new uk({
debugName: "ProductInfo"
})
});
function hk(e) {
return {
partyId: e.party,
lobbyId: e.lobby
};
}
function mk(e, t) {
const n = {
partyId: void 0,
lobbyId: void 0
};
return t.includes("party") && (n.partyId = e?.party), t.includes("lobby") && (n.lobbyId = e?.lobby), 
n;
}
async function gk(e, t, n, r) {
const {data: i} = await yI(e.get(pk).get(Fs.productId));
return new Promise((o => {
const {partyId: a, lobbyId: s} = hk(n), {playerNetworkId: l, name: c} = Rw(e, t);
if (!a || !s) return o({
partyId: a,
lobbyId: s
});
const d = e.get(ov), u = UE(d, (() => {
r.closeModal(), o({
partyId: void 0,
lobbyId: void 0
});
}), {
pg_id: "overlay_join_combo",
msg_id: "overlay_join_combo",
option: "cancel"
}), p = [ {
id: "party_and_lobby",
action: UE(d, (() => o({
partyId: a,
lobbyId: s
})), {
pg_id: "overlay_join_combo",
msg_id: "overlay_join_combo",
option: "join_combo_invite"
}),
autoClose: !0,
label: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-JOIN-COMBO")
}, {
id: "party",
action: UE(d, (() => o({
partyId: a,
lobbyId: void 0
})), {
pg_id: "overlay_join_combo",
msg_id: "overlay_join_combo",
option: "join_party_invite"
}),
autoClose: !0,
label: Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_JOIN-PARTY")
} ], f = NT({
name: c,
playerNetworkId: l
}, {
allowEllipsis: !0
});
let h = Em("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_JOIN-COMBO-GENERIC", {
"%primaryID%": f
});
i?.title && (h = Em("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_JOIN-COMBO", {
"%primaryID%": f,
"%gameName%": i.title
})), r.showModal((() => H.createElement(LL, {
title: Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_JOIN-COMBO", {
"%primaryID%": f
}),
body: h,
actions: p,
closeAction: u,
closeLabel: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_CANCEL"),
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
})), {
telemetryId: "overlay_join_combo"
});
}));
}
var yk = {
PS4: "ps4",
PS5: "ps5",
XBOXONE: "xbox_one",
XBSX: "xbsx",
PC: "pc",
NX: "switch",
UNKNOWN: "unknown"
}, Ik = e => {
const t = yk[e];
return t || (console.error("Unknown PlatformModel: " + e), "unknown");
}, _k = "missing-group";
function bk(e, t, n, r, i, o) {
t.id === _k && (i = i ?? new Error("Missing Group"));
const a = {
class: t.class,
group_id: t.id,
members_list: t.members,
status: r,
status_code: i?.message,
members: n
};
o && (a.context = {
source: o
}), e.get(ov).triggerGroup(a);
}
function Sk(e, t, n, r, i) {
let o;
if (o = t ? {
class: n ? "combo" : "party",
id: t.partyId,
members: Array.from(t.members.values()).map((t => wA(e, t.photonPlayerId)?.personaId)).filter(dI)
} : n ? {
class: "lobby",
id: n.lobbyId,
members: Array.from(n.members.values()).map((e => e.personaId))
} : {
class: void 0,
id: _k,
members: void 0
}, o.members && (r && !o.members.includes(r) && o.members.push(r), i)) {
const e = o.members.indexOf(i);
e > -1 && o.members?.splice(e, 1);
}
return o;
}
function vk(e, t) {
return e ? t ? "combo" : "party" : t ? "lobby" : void 0;
}
function Tk(e, t, n) {
let r = "unknown";
e && (r = t?.playerNetworkId === e ? "local" : "other");
const i = n ? Ik(n) : "unknown";
return {
pidt: "persona",
pid: t?.personaId,
pidm: t?.eaPlayerId,
plat: i,
join_method: r
};
}
function Ek(e, t, n) {
let r;
if (n === t) r = Fs.devicePlatformId; else {
r = HS(e, e.get(iT).get().data, t, void 0)?.devicePlatformId ?? "UNKNOWN";
}
return r;
}
function Pk(e, t, n) {
const r = mv(e), i = r.personaInfo.playerNetworkId, o = r.photonPlayerId, a = t?.members.values() ?? n?.members.values() ?? [];
return Array.from(a).map((t => {
const n = wA(e, t.photonPlayerId), r = Ek(e, t.photonPlayerId, o);
return Tk(i, n, r);
}));
}
function Ok(e, t) {
const n = mv(e), r = n.personaInfo.playerNetworkId, i = n.photonPlayerId;
return t.filter(dI).map((t => {
const n = Ek(e, t.photonPlayerId, i);
return Tk(r, t, n);
}));
}
function Ck(e, t) {
if (t) return e.find((e => e.pidm === t));
}
var Nk = (e, t, n, r, i) => nl((() => {
const o = Ok(e, [ t ]);
return t => {
nl((() => {
const a = Sk(e, n, r, void 0, void 0);
bk(e, a, o, "invite_sent", t, i);
}));
};
})), Ak = (e, t, n, r, i, o, a, s) => {
nl((() => {
const l = wA(e, t), c = Ok(e, [ l ]);
let d;
if (n || !i && !o) d = {
class: vk(a, s),
id: a ?? s ?? "",
members: void 0
}; else {
const t = mv(e);
d = Sk(e, i, o, t.personaInfo.personaId, void 0);
}
bk(e, d, c, "invite_accepted", n, r);
}));
}, Lk = (e, t, n, r, i = "invite_declined") => {
nl((() => {
const o = wA(e, t);
let a, s;
if (r?.gameJoinTokenTypes.includes("party") && r?.gameJoinTokenTypes.includes("lobby")) a = "combo"; else if (r?.gameJoinTokenTypes.includes("party")) a = "party"; else if (r?.gameJoinTokenTypes.includes("lobby")) {
a = "lobby";
s = mk(Pw(r), [ "lobby" ]).lobbyId;
}
const l = {
class: a,
id: s ?? "",
members: void 0
}, c = Ok(e, [ o ]);
bk(e, l, c, i, n);
}));
}, wk = (e, t, n, r, i, o, a = "join") => {
nl((() => {
let s;
const l = mv(e), c = wA(e, l.photonPlayerId), d = Ok(e, [ c ]);
s = t || !n && !r ? {
class: vk(i, o),
id: i ?? o ?? "",
members: void 0
} : Sk(e, n, r, l.personaInfo.personaId, void 0), bk(e, s, d, a, t);
}));
}, kk = (e, t, n, r) => {
nl((() => {
const i = mv(e), o = Sk(e, t, n, void 0, i.personaInfo.personaId), a = Ck(Pk(e, t, n), i.tokenInfo.userId);
a && (t || n) && bk(e, o, [ a ], "leave", r);
}));
}, Rk = (e, t, n, r, i) => {
nl((() => {
const o = wA(e, n), a = Sk(e, r, void 0, void 0, "kickPartyMember" === t ? o?.personaId : void 0), s = Ck(Pk(e, r, void 0), o?.eaPlayerId);
s && r && bk(e, a, [ s ], "setPartyLeader" === t ? "promote" : "remove_member", i);
}));
}, xk = Qg("/party", "tab_party"), Bk = vl({
debugName: "isPartyJoinableState",
get: function(e, {get: t, getItem: n}) {
if (!Fs.isPartyEnabled) return {
uninitialized: !1,
loading: !1,
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const {photonPlayerId: r, photonSessionId: i} = h_(e);
if (!c_(r)) return {
loading: !1,
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const o = t(bC).get();
if (!!o.data?.members.get(r)) return {
...o.toProps(),
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const a = t(iT).get(), s = HS({
get: t,
getItem: n
}, a.data, r, i);
if (!a.data || !s) return {
...a.toProps(),
data: void 0
};
const l = fC(n(NC, e)), c = qN(s);
return {
...hI([ o, a ]),
data: {
joinable: c && !l,
crossplayPrevented: c && l
}
};
}
}), Dk = J_.object({
party: yC
});
function Fk(e) {
return jO(e.party);
}
async function Mk(e, t, n) {
const r = await j_((() => e.joinParty({
partyId: n
})), Dk, {
transformResponse: Fk
});
return r.error || t.updateParty(r.data), r;
}
function Uk(e) {
ik(e, Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_JOINING"), "overlay_join_new_party");
}
async function Hk(e, t, n, r) {
const i = vC(e);
$w(e, r);
const o = await Mk(t, i, r);
return $w(e, void 0), o;
}
function Vk(e, t) {
const n = ol(), r = bO(), i = CE(), o = Tm(), {data: a} = kA(e, 0), {navigate: s} = XS("main"), {joinable: l, crossplayPrevented: c, getGameJoinToken: d} = Xw(e, t, Bk, "party"), u = hw(), p = H.useCallback((async () => {
if (!a) return {
loading: !1,
skipped: !1
};
const {data: t, ...l} = await d();
if (!t) return l;
try {
if (!await sk(n, o, i, r, a, !0, t)) return {
loading: !1,
skipped: !1
};
} catch (e) {
return {
loading: !1,
skipped: !1,
error: e
};
}
let c;
Uk(i.showModal);
const p = await Kw(n, e, {
partyId: t
}, void 0);
return c = p.error ? p : await Hk(n, o.Party, o.Voip, t), i.closeModal(), await Gw(c, void 0, n, e, r, u), 
wk(n, c.error, c.data, void 0, t, void 0, "hot_join"), c.data && s(xk.link()), c;
}), [ d, n, i, o, e, r, u, a, s ]);
return {
joinable: l,
crossplayPrevented: c,
directJoinParty: l ? p : void 0
};
}
var Jk = vl({
debugName: "isLobbyJoinableState",
get: function(e, {get: t, getItem: n}) {
if (Fs.isTightlyCoupledParties) return {
uninitialized: !1,
loading: !1,
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const {photonPlayerId: r, photonSessionId: i} = h_(e);
if (!c_(r)) return {
loading: !1,
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const o = t(DO).get();
if (!!o.data?.members.get(r)) return {
...o.toProps(),
data: {
joinable: !1,
crossplayPrevented: !1
}
};
const a = t(iT).get(), s = HS({
get: t,
getItem: n
}, a.data, r, i);
if (!a.data || !s) return {
...a.toProps(),
data: void 0
};
const l = fC(n(NC, e)), c = jN(s);
return {
...hI([ o, a ]),
data: {
joinable: c && !l,
crossplayPrevented: c && l
}
};
}
});
function Gk(e, t) {
return ul(Jk, m_(e, t));
}
async function zk(e, t, n) {
const r = await j_((() => e.joinLobby({
lobbyId: n
})), hT, {
transformResponse: dT
});
return r.error || t.updateLobby(r.data), r;
}
async function jk(e, t, n) {
const r = UO(e), i = await zk(t, r, n);
return i.data && IA(e).close(), i;
}
function qk(e, t) {
const n = ol(), {Lobby: r} = Tm(), i = bO(), o = CE(), a = hw(), {joinable: s, crossplayPrevented: l, getGameJoinToken: c} = Xw(e, t, Jk, "lobby"), d = H.useCallback((async () => {
const {data: t, ...s} = await c();
if (!t) return wk(n, s.error, void 0, void 0, void 0, t, "hot_join"), s;
let l;
Uk(o.showModal);
const d = await Kw(n, e, {
lobbyId: t
}, void 0);
return l = d.error ? d : await jk(n, r, t), o.closeModal(), await Gw(void 0, l, n, e, i, a), 
wk(n, l.error, void 0, l.data, void 0, t, "hot_join"), l;
}), [ a, c, r, n, i, e, o ]);
return {
joinable: s,
crossplayPrevented: l,
directJoinLobby: s ? d : void 0
};
}
async function Yk(e, t, n, r, i, o, a, s, l, c, d = !0, u, p) {
const {data: f} = await yI(e.get(b_).get(s), 1e4);
if (!f) return {
loading: !1,
skipped: !1,
error: new Error("No player")
};
const {partyId: h, lobbyId: m} = c;
if (!h && !m) return {
loading: !1,
skipped: !1
};
try {
if (h) {
if (!await sk(e, u, i, o, f, d, h)) return {
loading: !1,
skipped: !1
};
}
} catch (e) {
return {
loading: !1,
skipped: !1,
error: e
};
}
Uk(i.showModal);
const g = await Kw(e, s, c, l);
let y, I;
g.error ? y = g : (h && (y = await Hk(e, n, 0, h)), m && (I = await jk(e, t, m))), 
i.closeModal();
const _ = !!y?.data?.partyId || !!I?.data?.lobbyId;
if (await Gw(y, I, e, s, o, a), l ? Ak(e, s, _ ? void 0 : y?.error ?? I?.error, p, y?.data, I?.data, h, m) : wk(e, _ ? void 0 : y?.error ?? I?.error, y?.data, I?.data, h, m), 
y?.data?.partyId) {
Fm(e, "main").navigate(xk.link());
}
return {
loading: !1,
skipped: !1,
data: _
};
}
async function Wk(e, t, n, r, i, o, a, s) {
const l = await Ow(e, o.PresenceSession, o.GameInvite, i, a);
if (!l.data || !Object.keys(l.data).length) return n.showErrorNotification({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_JOIN-FAIL")
}, "combo join", l.error), {
...l,
data: void 0,
error: l.error || new Error("Missing gamejointokens")
};
const {partyId: c, lobbyId: d} = s ? mk(l.data, s) : await gk(e, i, l.data, t);
return c || d ? Yk(e, o.Lobby, o.Party, o.Voip, t, n, r, i, a, {
partyId: c,
lobbyId: d
}, !0, o, "social_panel") : {
loading: !1,
skipped: !1
};
}
function Kk(e) {
const t = ol(), n = CE(), r = bO(), i = hw(), o = Tm();
return H.useCallback((async () => Wk(t, n, r, i, e, o)), [ o, i, t, n, r, e ]);
}
var Xk = class extends WI {
constructor() {
super(...arguments), this.removeInvite = e => {
const t = this.get();
return nl((() => {
const n = t.data;
n && n.delete(e);
}));
};
}
}, [Qk, $k] = El({
debugName: "gameInvitesFragmentStore",
create: () => new Xk({
debugName: "gameInvites"
})
});
function Zk(e) {
return e.get(Qk);
}
function eR(e) {
return e.gameInviteId + ":" + e.createdTimestampMs;
}
var tR = e => {
const t = Date.now(), n = e.purgeTimestampMs, r = e.expiryTimestampMs;
return {
purged: t >= n,
expired: t >= r,
expiredLongAgo: t >= r + Tw
};
}, nR = e => e.senderProductId === Fs.productId, rR = {
pg_id: "tab_party",
destination_name: {
2: "current_game_party_invites",
3: "other_game_party_invites",
4: "expired_game_party_invites"
}
}, iR = {
pg_id: "tab_game_invites",
destination_name: {
2: "current_game_invites",
3: "other_game_invites",
4: "expired_game_invites"
}
};
function oR(e, t, n) {
const r = n.length;
return n.map(((n, i) => ({
...n,
telemetryInfo: {
pg_id: e,
msg_id: t,
destination_name: t,
index: {
item_index: i + 1,
total_items: r
}
}
})));
}
var aR = (e, t, n) => {
const r = {
2: [],
3: [],
4: []
};
t.forEach((t => {
const {purged: n, expired: i, expiredLongAgo: o} = tR(t), a = nR(t), s = t.senderPhotonPlayerId;
n || o || !e.get(s) || (i ? r[4].push({
gameInvite: t,
photonPlayerId: s
}) : a ? r[2].push({
gameInvite: t,
photonPlayerId: s
}) : r[3].push({
gameInvite: t,
photonPlayerId: s
}));
}));
return {
2: oR(n ? rR.pg_id : iR.pg_id, n ? rR.destination_name[2] : iR.destination_name[2], r[2]),
3: oR(n ? rR.pg_id : iR.pg_id, n ? rR.destination_name[3] : iR.destination_name[3], r[3]),
4: oR(n ? rR.pg_id : iR.pg_id, n ? rR.destination_name[4] : iR.destination_name[4], r[4])
};
};
function sR(e, t) {
const n = [];
return e && n.push("party"), t && n.push("lobby"), n;
}
function lR() {
const e = Array.from(LS.crossplayCompatiblePlatforms).map((e => ({
id: e
}))), t = Object.values(KI).map((e => ({
id: e
})));
return {
compatibleDevicePlatformIds: e,
compatiblePlayerNetworkIds: t
};
}
function cR(e, t) {
const n = Zk(e);
return nl((() => n.get().data?.get(t)));
}
var dR = e => eC($k().get(), (t => t.get(e))), uR = fm.InputBindings.Action, pR = J_.object({});
function fR(e, t, n) {
return j_((() => e.AcceptGameInvite({
gameInviteId: t,
playerId: {
id: n
}
})), pR);
}
function hR(e, t, n) {
return j_((() => e.RejectGameInvite({
gameInviteId: t,
playerId: {
id: n
}
})), pR);
}
var mR = e => {
const t = e.gameJoinTokenTypes.includes("party"), n = e.gameJoinTokenTypes.includes("lobby"), r = t && n;
return Em(t && !r ? "PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_PARTY-JOIN" : n && !r ? "PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-JOIN" : "PHOTON-SOCIAL_PARTY_LIST_ACTIONS_ACCEPT");
};
function gR(e, t, n) {
return async r => {
const i = e.get(sI), o = Zk(e), a = e.get(OE), s = e.get(_O), l = mv(e).tokenInfo.userId, c = cR(e, n), d = await Wk(e, a, s, t, n, i, c, r);
if (c && d.data) {
const e = await fR(i.GameInvite, c.gameInviteId, l);
return o.removeInvite(n), e;
}
return d;
};
}
function yR(e, t, n, r, i, o, a, s, l, c, d, u = !0, p, f) {
return async () => {
const r = Zk(e), h = mv(e).tokenInfo.userId, m = cR(e, c), {data: g} = await Ow(e, i, o, c, m), {partyId: y, lobbyId: I} = mk(g, d), _ = await Yk(e, t, n, 0, a, s, l, c, m, {
partyId: y,
lobbyId: I
}, u, p, f);
m && _.data && (await fR(o, m.gameInviteId, h), r.removeInvite(c));
};
}
function IR(e, t, n, r, i, o, a, s, l, c, d, u, p, f = !0, h, m, g, y, I) {
const _ = r => yR(e, t, n, 0, i, o, s, l, c, d, r, f, g, I), b = [], S = u?.gameJoinTokenTypes.includes("party"), v = u?.gameJoinTokenTypes.includes("lobby");
let T = "tst_lobby_invite_received";
return S && v ? T = "tst_combo_invite_received" : S && (T = "tst_party_invite_received"), 
u && !y && (S && v ? (b.push({
id: "accept_combo",
callback: UE(h, _([ "party", "lobby" ]), {
...m,
pg_id: T,
msg_id: T,
option: "join_combo_invite"
}),
label: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-JOIN-COMBO"),
keyBinding: p
}), b.push({
id: "accept_party",
callback: UE(h, _([ "party" ]), {
...m,
pg_id: T,
msg_id: T,
option: "join_party_invite"
}),
label: Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_JOIN-PARTY"),
keyBinding: p
})) : S ? b.push({
id: "accept_party",
callback: UE(h, _([ "party" ]), {
...m,
pg_id: T,
msg_id: T,
option: "join_party_invite"
}),
label: Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_JOIN-PARTY"),
keyBinding: p
}) : v && b.push({
id: "accept_lobby",
callback: UE(h, _([ "lobby" ]), {
...m,
pg_id: T,
msg_id: T,
option: "join_lobby_invite"
}),
label: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-JOIN"),
keyBinding: p
})), {
actions: b,
telemetryToasterId: T
};
}
var _R = (e, t) => {
const n = Date.now() > e.expiryTimestampMs;
return e.gameJoinTokenTypes.includes("party") ? e.gameJoinTokenTypes.includes("lobby") ? n ? Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO_INVITE-REMOVED") : Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO_INVITE-DECLINE", {
"%primaryID%": t
}) : n ? Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_INVITE-REMOVED") : Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_INVITE-DECLINE", {
"%senderPrimaryID%": t
}) : n ? Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY_INVITE-REMOVED") : Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY_INVITE-DECLINE", {
"%primaryID%": t
});
}, bR = (e, t) => async () => {
const n = e.get(sI), r = Zk(e), {showNotification: i, showErrorNotification: o} = e.get(_O), a = mv(e).tokenInfo.userId, s = cR(e, t);
try {
ev(s);
const o = await hR(n.GameInvite, s.gameInviteId, a);
if (o.error) throw o.error;
if (Lk(e, t, void 0, s), o.data) {
const n = NT(Rw(e, t), {
allowEllipsis: !0
});
r.removeInvite(t), i(3, 3, {
icon: ih.REMOVE,
text: _R(s, n)
});
}
} catch (n) {
Lk(e, t, n, s), o({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_DECLINE-INVITE-FAIL")
}, "decline invite", n);
}
};
function SR(e, t, n) {
const r = ol(), {data: i} = dR(e), o = hw(), a = !!i && tR(i).expired, s = i?.senderProductId;
return H.useMemo((() => ({
acceptInvite: a => {
let l = "join_party_invite";
i?.gameJoinTokenTypes.includes("party") && i?.gameJoinTokenTypes.includes("lobby") ? l = "join_combo_invite" : i?.gameJoinTokenTypes.includes("lobby") && (l = "join_lobby_invite");
const c = gR(r, o, e);
return zE(r, e, t, (() => c(a)), n && {
...n,
option: l,
context: {
tpid: s
}
})();
},
declineInvite: () => {
const i = bR(r, e);
return zE(r, e, t, i, n && {
...n,
option: a ? "remove" : "decline",
context: {
tpid: s
}
})();
}
})), [ o, a, i?.gameJoinTokenTypes, r, e, t, s, n ]);
}
function vR(e, t, n, r) {
return async () => {
const {data: i} = await yI(t.get(e.senderProductId)), o = 1 === e.gameJoinTokenTypes.length && e.gameJoinTokenTypes.includes("lobby") ? Em("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_SWITCH-GAMES-LOBBY", {
"%gameName%": i?.title ?? Em("PHOTON-SOCIAL_GAME-NAME-FALLBACK")
}) : Em("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_SWITCH-GAMES", {
"%gameName%": i?.title ?? Em("PHOTON-SOCIAL_GAME-NAME-FALLBACK")
}), a = [ {
id: "close_switch_game_modal",
autoClose: !0,
label: Em("BUTTON_GOT-IT"),
action: () => ME(r, {
option: "cancel",
status: "click",
msg_id: "overlay_switch_games",
pg_id: "overlay_switch_games"
})
} ];
n.showModal((() => H.createElement(LL, {
title: Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_SWITCH-GAMES"),
body: o,
actions: a,
withoutCloseButton: !0,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
})), {
telemetryId: "overlay_switch_games"
});
};
}
function TR(e, t, n) {
const {data: r} = dR(e), {acceptInvite: i, declineInvite: o} = SR(e, t, n), a = LC(e, t), s = CE(), l = WL(uR.Primary), c = WL(uR.Secondary), d = fk(), u = av();
return H.useMemo((() => {
if (r) {
const e = nR(r), {expired: t} = tR(r);
if (!t) {
if (e && i && o) {
const e = {
keyBinding: c,
callback: o,
label: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_DECLINE")
};
return a ? {
primaryAction: e
} : {
primaryAction: {
keyBinding: l,
callback: () => i(),
label: mR(r)
},
secondaryAction: e
};
}
if (!e && o) {
const e = vR(r, d, s, u);
return {
primaryAction: {
keyBinding: l,
callback: UE(u, e, n && {
...n,
option: "switch_games"
}),
label: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_SWITCH-GAMES")
},
secondaryAction: {
keyBinding: c,
callback: o,
label: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_DECLINE")
}
};
}
}
if (o) return {
primaryAction: {
keyBinding: l,
callback: o,
label: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_REMOVE")
}
};
}
return {};
}), [ r, o, i, c, a, l, d, s, u, n ]);
}
var ER = Cl({
debugName: "lobbyGameInviteSentState",
default: !1
}), PR = Sl({
debugName: "shouldRevokeLobbyGameInvites",
get: function({get: e}) {
const t = e(fv), n = e(DO).get().data, r = !!n?.members.get(t.photonPlayerId), i = !!n && n.maxSize <= n.members.size;
return !r || i;
}
}), OR = Sl({
debugName: "lobbyIdChangedState",
get: function({get: e}) {
return e(DO).get().data?.lobbyId;
}
}), CR = Sl({
debugName: "shouldRevokeLobbyGameInvitesWhenCrossplaySettingChanges",
get: function({get: e}) {
return e(DO).get().data?.crossPlayEnabled;
}
}), NR = Cl({
debugName: "performedActionsState",
default: new Map
});
function AR(e) {
return new Map(e.getUntracked(NR));
}
var LR = new Map;
function wR(e, t) {
if (t) {
const n = LR.get(e)?.get(t);
if (void 0 !== n) {
clearTimeout(n);
LR.get(e)?.delete(t);
}
} else {
const t = LR.get(e);
t && (t.forEach((e => {
clearTimeout(e);
})), t.clear());
}
}
function kR(e, t) {
const n = AR(t);
n.size && (n.clear(), t.set(NR, n)), wR(e, void 0);
}
function RR(e, t, n) {
const r = AR(n), i = r.get(e);
i && i.has(t) && (i.delete(t), r.set(e, i), n.set(NR, r)), wR(e, t);
}
function xR(e, t, n, r) {
const i = setTimeout((() => {
RR(e, t, n);
}), r), o = LR.get(e) ?? new Map;
o.set(t, i), LR.set(e, o);
}
function BR(e, t, n) {
const r = AR(n), i = r.get(e) ?? new Set;
i.add(t), r.set(e, i), n.set(NR, r);
}
function DR(e, t, n, r) {
const i = ol(), o = !!dl(NR).get(e)?.has(t), a = H.useCallback((() => {
RR(e, t, i);
}), [ i, t, e ]), s = H.useCallback((s => {
if (!o) {
BR(e, t, i);
const o = n?.(s);
return o?.then((e => {
e.error && a();
})), xR(e, t, i, r?.throttleTime ?? 3e4), o;
}
}), [ o, e, t, i, n, a, r?.throttleTime ]);
return H.useMemo((() => ({
performAction: s,
resetState: a,
isActionTaken: o
})), [ o, s, a ]);
}
var FR = fm.PhotonInvite.InviteType, MR = fm.XboxPlatform.XboxPermission, UR = fm.XboxPlatform.XUserPrivilege, HR = J_.object({}), VR = {
lobby: FR.Lobby,
party: FR.Party
};
function JR(e, t, n, r, i, o, a) {
return j_((async () => {
ev(r.eaPlayerId), ev(r.personaId);
const s = n.tokenInfo.userId, l = n.personaInfo.playerNetworkId, {eaPlayerId: c, playerNetworkId: d, firstPartyPlayerId: u, personaId: p} = r, {compatiblePlayerNetworkIds: f, compatibleDevicePlatformIds: h} = lR(), m = Sw(o, a), g = [], y = [];
for (const e of o.keys()) g.push(e), y.push(VR[e]);
const I = await t.prepareInvite({
invitedPlayerId: c,
invitedPlayerNetworkId: d,
invitedFirstPartyUid: u,
invitedPersonaId: p,
inviteTypes: y
}), {success: _, sendEaInvite: b, errorMessage: S} = I ?? {};
if (!_) throw new Error(S);
return b ? e.SendGameInvite({
playerId: {
id: s
},
targetPlayerId: {
id: c
},
targetDevicePlatformId: h,
targetPlayerNetworkId: f,
senderPlayerNetworkId: {
id: l
},
senderDevicePlatformId: {
id: vs.devicePlatformId
},
senderProductId: {
id: i
},
gameJoinTokenTypes: g,
properties: m
}) : {};
}), HR);
}
function GR(e, t) {
const n = e.includes("party") && e.includes("lobby"), r = e.includes("party");
return Em(n ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_COMBO_INVITE-SENT" : r ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_INVITE-SENT" : "PHOTON-SOCIAL_NOTIFICATION_LOCAL_LOBBY_INVITE-SENT", {
"%primaryID%": t
});
}
var zR = (e, t, n) => {
const r = new Map, i = nl((() => MO(e).data)), o = nl((() => uN(e).data)), a = nl((() => (i?.members.size ?? 0) >= (i?.maxSize ?? 0))), s = nl((() => (o?.members.size ?? 0) >= (o?.maxSize ?? 0))), l = n && nl((() => o?.members.get(n))), c = n && nl((() => i?.members.get(n))), d = !!nl((() => o?.crossPlayEnabled)), u = !!nl((() => i?.crossPlayEnabled));
return o && s ? {
gameJoinTokens: r,
isCrossplayEnabled: d
} : (t.includes("party") && o && !l && r.set("party", o.partyId), t.includes("lobby") && i && !a && !c && r.set("lobby", i.lobbyId), 
{
gameJoinTokens: r,
isCrossplayEnabled: d || u
});
}, jR = new Error("Send game invite prevented by first party permissions");
function qR(e, t, n, r, i) {
return async (o = [ "party", "lobby" ]) => {
const {showNotification: a, showErrorNotification: s} = r, l = mv(e), c = nl((() => LA(e, i).data)), d = nl((() => MO(e).data)), u = nl((() => uN(e).data)), p = Nk(e, c, o.includes("party") ? u : void 0, o.includes("lobby") ? d : void 0, "social_panel"), {isAllowed: f, privacyResult: h} = await QE(e, i, [ MR.PlayMultiplayer ], UR.Multiplayer);
try {
if (!f) throw p(new Error($E(h))), jR;
const r = Fs.productId, {gameJoinTokens: s, isCrossplayEnabled: d} = zR(e, o, i);
if (ev(c), !s.size) throw new Error("Invalid game invite type");
c.playerNetworkId !== l.personaInfo.playerNetworkId && a(3, 3, {
icon: ih.PARTY,
text: GR(Array.from(s.keys()), NT(kO(e, c, l), {
allowEllipsis: !0
}))
});
const u = await JR(t, n, l, c, r, s, d);
if (u.error) throw u.error;
return s.get("lobby") && e.set(ER, !0), s.get("party") && e.set(Zw, !0), p(void 0), 
u;
} catch (t) {
return t === jR ? a(3, 3, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-MULTIPLAYER", {
"%localPlatform%": Bv(TO(e).playerNetworkId)
}),
icon: ih.INFORMATION
}) : s({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_SEND-INVITE-FAIL")
}, "send game invite", t), p(t), {
error: t,
loading: !1,
skipped: !1
};
}
};
}
function YR(e) {
const {GameInvite: t, PhotonInvite: n} = Tm(), r = ol(), i = bO(), o = H.useMemo((() => qR(r, t, n, i, e)), [ t, n, r, i, e ]);
return DR(0, e, o);
}
var WR = J_.custom(sb()), KR = J_.object({
playerId: J_.object({
id: J_.string
})
}), XR = J_.object({
friendRecommendation: J_.object({
entityId: KR,
recommendationReason: J_.object({
mutualFriends: J_.array(KR),
additionalContext: J_.object({}, {
install_country: J_.string,
first_language: J_.string,
locale: J_.string,
shared_entitlement: J_.string
})
})
}, {
recommendationTracking: J_.object({}, {
trackingTag: J_.string
})
})
}), QR = J_.map(J_.number), $R = {
XBOXONE: "xbox_one",
XBSX: "xbsx",
PS4: "ps4",
PS5: "ps5",
PC: "pc",
WEB: "web",
IOS: "ios",
ANDROID: "android",
NX: "switch",
UNKNOWN: "pc"
};
function ZR({friendRecommendation: e}) {
const t = e.entityId.playerId.id + "", n = [];
try {
const t = JSON.parse(e.recommendationReason.additionalContext.shared_entitlement || "{}");
if (QR.validate(t)) for (const [e, r] of Object.entries(t)) n.push({
productId: e,
timestampMs: 1e3 * r
});
} catch (e) {}
return {
photonPlayerId: o_({
eaPlayerId: t,
playerNetworkId: "EA"
}),
eaPlayerId: t,
mutualFriendEaPlayerIds: e.recommendationReason.mutualFriends.map((e => e.playerId.id)),
installCountry: e.recommendationReason.additionalContext.install_country,
firstLanguage: e.recommendationReason.additionalContext.first_language,
locale: e.recommendationReason.additionalContext.locale,
sharedEntitlement: n.sort(((e, t) => e.timestampMs > t.timestampMs ? -1 : 1)),
index: 0,
trackingTag: e.recommendationTracking?.trackingTag
};
}
var ex = class extends WI {
constructor(e, t, n) {
super({
debugName: "FriendRecommendations"
}), this.photonGrpcApi = e, this.user = t, this.playerInfoStore = n;
}
init(e, t) {
if (this.user.tokenInfo.accessToken) return this.initSeedStrategy(e, t), () => {
this.disposeSeedStrategy?.();
};
this.setDefaultEmptyFragment("Missing accessToken");
}
getStream(e, t) {
return _w((() => j_((async () => this.photonGrpcApi.FriendRecommendations.ListFriendRecommendationsStreaming({
entityId: {
playerId: {
id: this.user.tokenInfo.userId
}
},
recommendationEngineRequest: t ? void 0 : {
platform: $R[this.user.personaInfo.devicePlatformId],
titleId: e,
titleIdType: "projectid",
locale: Fs.locale
}
})), WR, {
debugName: "FriendRecommendations"
})), {});
}
async preloadPlayerInfos(e, t = 0, n = 0) {
const r = e.slice(0, t), i = e.slice(t, 10), o = e.slice(10), a = await II(i.map((e => this.playerInfoStore.get(e.photonPlayerId))), 8e3);
if (i.forEach((e => {
a.data.some((t => t.photonPlayerId === e.photonPlayerId)) && r.push(e);
})), n >= 2) return r;
const s = [ ...r, ...o ];
return r.length < 10 && s.length > 10 ? this.preloadPlayerInfos(s, r.length, n + 1) : s;
}
initSeedStrategy(e, t) {
this.disposeSeedStrategy = super.setSeedStrategy({
fetch: async () => {
const n = (await this.getStream(e, t)).data;
if (!n) return {
error: new Error("Failed to fetch stream"),
loading: !1
};
const r = new ab(n, XR, ZR), i = await lb(r, (async e => {
const n = e.map(((e, t) => ({
...e,
index: t
})));
return t || n.sort(((e, t) => Math.random() - .5 + (e.index - t.index) / n.length)), 
n;
}));
return {
loading: !1,
uninitialized: !1,
data: pI({
loading: !1,
skipped: !1,
data: await this.preloadPlayerInfos(i)
})
};
}
});
}
setDefaultEmptyFragment(e) {
nl((() => {
const e = this.get();
e.data || e.update({
...e.toProps(),
uninitialized: !1,
loading: !1,
data: []
});
}));
}
getFriendRecommendation(e) {
return this.get().data?.find((t => t.photonPlayerId === e));
}
removeFriendRecommendation(e) {
return nl((() => {
const t = this.get();
t.update({
...t.toProps(),
data: t.data?.filter((t => t.photonPlayerId !== e))
});
}));
}
async dismissFriendRecommendation(e) {
const t = this.user?.tokenInfo.userId, {eaPlayerId: n} = s_(e), r = this.getFriendRecommendation(e);
return this.removeFriendRecommendation(e), t && n ? this.photonGrpcApi.FriendRecommendations.DismissFriendRecommendation({
entityId: {
playerId: {
id: t
}
},
targetEntityId: {
playerId: {
id: n
}
},
recommendationTracking: {
trackingTag: r?.trackingTag
}
}) : Promise.reject(new Error("Missing data"));
}
}, [tx, nx] = El({
debugName: "friendRecommendationsFragmentStore",
create: e => new ex(e.get(ky), e.get(fv), e.get(b_))
}), rx = 1e3, ix = 1e3, ox = Sl({
debugName: "hasReachedFriendRequestCeiling",
get: function({get: e}) {
return (e(iE).get().data?.size || 0) >= rx;
}
}), ax = Sl({
debugName: "hasReachedSentFriendRequestCeiling",
get: function({get: e}) {
return (e(aE).get().data?.size || 0) >= ix;
}
}), sx = J_.object({
inviteStatus: J_.map(J_.object({
success: J_.boolean
}))
});
function lx(e, t, n, r) {
return j_((async () => {
const {data: i} = await nl((() => yI(LA(e, r), 1e4)));
return ev(i), t.BatchSendFriendInvites({
entityId: {
playerId: {
id: n.tokenInfo.userId
}
},
invites: [ {
entityId: {
playerId: {
id: i.eaPlayerId
}
},
sourcePlayerNetworkId: {
id: n.personaInfo.playerNetworkId
},
targetPlayerNetworkId: {
id: i.playerNetworkId
}
} ]
});
}), sx, {});
}
function cx(e, t, n, r, i, o, a) {
const {showNotification: s, showErrorNotification: l} = n, c = mv(e);
return async () => {
try {
if (e.getUntracked(ax)) {
const e = new Error("Invite ceiling reached");
return l({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_INVITE-FAIL")
}, "add ea friend", e), {
error: e,
loading: !1,
skipped: !1
};
}
if (!c_(r)) throw new Error("No EA photon player for " + r);
const {data: n} = await yI(e.getUntracked(b_).get(r), 8e3);
ev(n), s(3, 3, {
icon: ih.ADD_USER,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_FRIENDS_INVITE-SENT", {
"%primaryID%": NT(kO(e, n, c), {
allowEllipsis: !0
})
})
}), e.get(tx).removeFriendRecommendation(r);
const d = await lx(e, t, c, r);
if (a && n.eaPlayerId && (i.triggerFriends({
action: "invite_sent",
friend: n.eaPlayerId,
friend_invite_id: qA(c.tokenInfo.userId, n.eaPlayerId),
source: qE(0, a, o),
status_code: d.error ? d.error.message : void 0
}), e.get(oI).addEvent({
eventType: "photon_friends",
action: "invite_sent",
error: !!d.error,
error_code: d.error?.message
})), d.error) throw d.error;
if (!n.eaPlayerId || d.data?.inviteStatus[n.eaPlayerId] && !d.data.inviteStatus[n.eaPlayerId].success) throw Error("Could not invite " + n.eaPlayerId);
return d;
} catch (e) {
return l({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_SEND-FRIEND-REQUEST-FAIL")
}, "add ea friend", e), {
error: e,
loading: !1,
skipped: !1
};
}
};
}
var dx = (e, t) => {
const n = av(), r = ol(), {Invites: i} = Tm(), o = bO(), a = QS("main");
return DR(1, e, UE(n, cx(r, i, o, e, n, a.history.location, t), t && {
msg_id: t.msg_id ?? t.destination_name,
option: "add_friend",
...t,
context: {
rel: "not_friend",
...t.context
}
}), {
throttleTime: 1e4
});
}, ux = J_.object({}), px = async (e, t, n) => {
const r = mv(e);
return j_((async () => t.DeleteFriend({
entityId: {
playerId: {
id: r.tokenInfo.userId
}
},
targetEntityId: {
playerId: {
id: n
}
}
})), ux, {});
}, fx = (e, t, n, r, i, o, a, s) => {
const {showNotification: l, showErrorNotification: c} = r, d = mv(e), u = d.personaInfo.playerNetworkId;
return async () => {
try {
const {data: r} = await yI(e.getUntracked(b_).get(i), 8e3);
ev(r);
const c = NT(kO(e, r, d), {
allowEllipsis: !0
});
if (await new Promise((e => {
const n = () => e(!0), r = () => e(!1);
t((() => H.createElement(wL, {
title: Em("PHOTON-SOCIAL_FRIENDS_OVERLAY_TITLE_REMOVE-FRIEND", {
"%primaryID%": c
}),
body: Em("PHOTON-SOCIAL_FRIENDS_OVERLAY_DESC_REMOVE-FRIEND", {
"%localPlatform%": Bv(u)
}),
onConfirm: n,
onCancel: r,
autoClose: !0,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
})));
})) && r.eaPlayerId) {
const t = e.getUntracked(PS), i = nl((() => t.get().data?.get(r.photonPlayerId)));
t.removeFriend(r.eaPlayerId), l(3, 3, {
icon: ih.REMOVE,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_FRIENDS_REMOVED", {
"%primaryID%": c
})
});
const d = await px(e, n, r.eaPlayerId);
if (s && o.triggerFriends({
friend: r.eaPlayerId,
friend_invite_id: "",
action: "remove",
source: qE(0, s, a),
status_code: d.error ? d.error.message : void 0
}), d.error) throw i && t.addFriend(i), d.error;
return d;
}
return {
data: void 0,
loading: !1,
skipped: !1
};
} catch (e) {
return c({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_REMOVE-FRIEND-FAIL")
}, "remove ea friend", e), {
error: e,
loading: !1,
skipped: !1
};
}
};
}, hx = (e, t) => {
const {Friends: n} = Tm(), r = bO(), {showModal: i} = CE(), o = av(), a = ol(), s = QS("main");
return UE(o, fx(a, i, n, r, e, o, s.history.location, t), t && {
...t,
option: "remove_friend"
});
}, mx = Qg("/player-search", "tab_search"), gx = (fm.InputBindings.Action, fs.Input.GamePadInput), yx = (fs.Input.DeviceType, 
J_.custom((e => "string" == typeof e && e in gx))), Ix = (J_.array(J_.object({
buttonState: J_.union2(J_.literal("up"), J_.literal("down")),
device: J_.union2(J_.literal("mouseandkeyboard"), J_.union2(J_.literal("xbox"), J_.literal("playstation")))
}, {
gamePadInput: yx,
keyboardKeycode: J_.number
})), J_.object({
typedInput: J_.string
}), fm.InputBindings.Action), _x = (fs.Input.GamePadInput, fs.Input.DeviceType, 
fs.Input.ButtonState, Ix.Primary, Ix.Secondary, Ix.Decline, Ix.OpenActionList, Ix.GoUp, 
Ix.GoDown, Ix.GoLeft, Ix.GoRight, Ix.NextPage, Ix.PreviousPage, Ix.Settings, Ix.NotificationFocus, 
Ix.ToggleMode, Ix.TogglePhoton, Ix.LeaveParty, Ix.Tertiary, class {
constructor(e, t) {
this.id = e, this.save = t, this.itemsSeenInPreviousSession = new Set, this.seenItemState = new Zs({}), 
this.unseenItemCount = mt.box(0, {
deep: !1
}), this.setItems = An((e => {
let t = this.unseenItemCount.get();
for (let n = 0, r = e.length; n < r; n++) this._addItem(e[n]) && t++;
this.unseenItemCount.set(t);
})), this.addItem = An((e => {
this._addItem(e) && this.increaseUnseenCount();
})), this.removeItem = An((e => {
const t = this.seenItemState.get(e);
void 0 !== t && (this.seenItemState.delete(e), t || this.decreaseUnseenCount());
})), this.setItemSeen = e => {
const t = this.seenItemState.get(e);
void 0 === t || t || (this.seenItemState.set(e, !0), this.decreaseUnseenCount(), 
this.save());
}, this.addItemsSeenInPreviousSession = An((e => {
let t = this.unseenItemCount.get();
for (let n = 0, r = e.length; n < r; n++) {
const r = e[n], i = this.seenItemState.get(r);
void 0 === i ? this.itemsSeenInPreviousSession.add(r) : !1 === i && (this.seenItemState.set(r, !0), 
t--);
}
this.unseenItemCount.set(t);
})), this.isItemSeen = e => this.seenItemState.get(e), this.getSeenItems = () => nl((() => {
const e = [];
for (const [t, n] of this.seenItemState.entries()) n && e.push(t);
return e;
})), this.getUnseenCount = () => this.unseenItemCount.get();
}
_addItem(e) {
if (this.seenItemState.has(e)) return void console.error(`The item '${e}' has already been added to ${this.id} before`);
const t = this.itemsSeenInPreviousSession.has(e);
if (this.seenItemState.set(e, t), !t) return !0;
this.itemsSeenInPreviousSession.delete(e);
}
increaseUnseenCount() {
this.unseenItemCount.set(this.unseenItemCount.get() + 1);
}
decreaseUnseenCount() {
this.unseenItemCount.set(this.unseenItemCount.get() - 1);
}
}), bx = J_.custom(((e, t, n) => {
if (!Array.isArray(e)) return n(t, "Data was not an array, got: " + typeof e), !1;
for (let r = 0; r < e.length; r++) {
const i = e[r];
if ("string" != typeof i && Number.isNaN(parseInt(i, 10))) return n(t, `Index ${r} was not integer or string, got: ${i}`), 
!1;
}
return !0;
})), Sx = class {
constructor(e) {
this.localStorage = e, this.seenStates = new Map, this.loadSeenState = async e => {
if (void 0 === this.userId) return;
const t = this.get(e), n = `SeenItems-${e}-${this.userId}`;
try {
const e = await this.localStorage.getItem(n);
if (e) {
const n = JSON.parse(e);
if (bx.validate(n)) return void t.addItemsSeenInPreviousSession(n);
}
} catch (e) {}
};
}
get(e) {
let t = this.seenStates.get(e);
return t || (t = new _x(e, NI((() => this.saveSeenState(e)), {
wait: 2e3,
leading: !0
})), this.seenStates.set(e, t), this.userId && this.loadSeenState(e)), t;
}
async init(e) {
this.userId = e, await Promise.all(Array.from(this.seenStates.keys()).map(this.loadSeenState));
}
async saveSeenState(e) {
if (void 0 === this.userId) return;
const t = this.get(e), n = `SeenItems-${e}-${this.userId}`, r = t.getSeenItems();
if (bx.validate(r)) {
const e = JSON.stringify(r);
await this.localStorage.setItem(n, e);
}
}
}, [vx, Tx] = El({
debugName: "seenStateMapState",
create: e => {
const t = e.get(zh);
return new Sx(t.localStorage);
}
});
function Ex(e) {
return Tx().get(e);
}
var Px = e => {
const t = gv(), n = Tx();
return H.useEffect((() => {
n.init(t);
}), [ n, t ]), H.createElement(H.Fragment, null, e.children);
}, Ox = () => Ex("FriendRequests");
function Cx(e) {
return e.eaPlayerId;
}
function Nx() {
const e = oE(), t = Ox();
H.useEffect((() => {
let n = cE((() => e.get().data), (e => {
t.setItems(e.getSortedList().map(Cx)), n = e.observe((e => {
switch (e.type) {
case "add":
t.addItem(Cx(e.newValue));
break;

case "delete":
t.removeItem(Cx(e.oldValue));
}
}));
}));
return () => {
n();
};
}), [ e, t ]);
}
function Ax(e) {
return $T(e, "frr_0", "FriendRequestReminders");
}
var Lx = 864e5, wx = e => e.createTimeMs + 2592e6 - Date.now(), kx = e => Math.ceil(wx(e) / Lx), Rx = e => kx(e) <= 23, xx = e => kx(e) <= 10, Bx = e => kx(e) <= 29, Dx = e => "friendRequestReminderTimestamp_" + e, Fx = (e, t, n) => {
const r = [], i = [], o = [];
for (let e = 0; e < t.length; e++) {
const n = t[e];
kx(n) <= 7 && r.push(n), Rx(n) && i.push(n), Bx(n) && o.push(n);
}
const a = nl((() => (e.get(PS).get().data?.size ?? 0) <= 2));
if (n > 0) {
if (r.length > 0) return {
meta: {
icon: ih.INFORMATION,
text: 1 === r.length ? Em("PHOTON-SOCIAL_TOAST_FRIEND-REQUESTS_EXPIRING_SINGLE") : Em("PHOTON-SOCIAL_TOAST_FRIEND-REQUESTS_EXPIRING_PLURAL")
},
pgId: "tst_fr_reminder_exp"
};
if (i.length > 0) return {
meta: {
icon: ih.INFORMATION,
text: 1 === i.length ? Em("PHOTON-SOCIAL_TOAST_FRIEND-REQUESTS_REMINDER_SINGLE") : Em("PHOTON-SOCIAL_TOAST_FRIEND-REQUESTS_REMINDER_PLURAL", {
"%numberOfFriendRequests%": `${i.length}`
})
},
pgId: "tst_fr_reminder_pending"
};
}
if (a && o.length > 0) return {
meta: {
icon: ih.INFORMATION,
text: Em("PHOTON-SOCIAL_FTUE_TOAST_FRIEND-REQUESTS")
},
pgId: "tst_fr_reminder_first"
};
}, Mx = (e, t) => {
if (!(0 === e.getSetting(0, 4))) return !1;
const n = Number(t);
return !!Number.isNaN(n) || n + 6048e5 < Date.now();
}, Ux = (e = 3e5) => {
const t = ol(), n = fP(), r = gv(), {showNotification: i, notificationManager: o} = bO(), a = oE(), s = $p().localStorage, {getUnseenCount: l} = Ox(), c = WT();
H.useEffect((() => {
let d;
const u = async (e = !1) => {
const c = Dx(r), p = await s.getItem(c);
nl((() => {
if (e || Mx(n, p)) if (o.isInGamePlay) d = hr((() => !o.isInGamePlay), (() => u(e))); else {
const e = l(), n = a.get().data?.getSortedList() || [], r = Fx(t, n, e);
r && (i(3, 1, r.meta, {
telemetryInfo: {
pg_id: r.pgId
}
}), s.setItem(c, `${Date.now()}`));
}
}));
};
d = hr((() => c.isReady), (() => {
if (Ax(t)) {
const t = setTimeout(u, e);
d = () => {
clearTimeout(t);
};
}
}));
const p = void 0;
return () => {
d(), p?.();
};
}), [ r, l, o, a, n, i, t, e, s, c ]);
};
function Hx(e, t, n) {
const r = e.length;
if (0 === r || n(t, e[r - 1]) > 0) return void e.push(t);
if (n(t, e[0]) < 0) return void e.splice(0, 0, t);
let i = 0, o = r, a = 0, s = r;
for (;i < o; ) {
const r = i + o >>> 1, l = n(t, e[r]);
if (l > 0 ? i = r : l < 0 ? o = r : (o = r, i = r), a === i && s === o) break;
a = i, s = o;
}
e.splice(o, 0, t);
}
var Vx = class {
constructor(e = [], t, n = 50) {
this.sortMethod = t, this.setMultiThreshold = n, this.listAtom = Ae("list");
const r = e.map((([, e]) => e));
r.sort(this.sortMethod), this.items = new Zs(e), this.list = r;
}
get(e) {
return this.items.get(e);
}
has(e) {
return this.items.has(e);
}
get size() {
return this.items.size;
}
keys() {
return Array.from(this.items.keys());
}
getSortedList() {
return this.listAtom.reportObserved(), this.list;
}
set(e, t) {
return fr((() => nl((() => {
const n = this.list.slice();
this.addToList(n, e, t), this.updateList(n);
}))));
}
setMulti(e) {
return fr((() => nl((() => {
const t = this.list.slice();
if (e.length < this.setMultiThreshold) for (const [n, r] of e) this.addToList(t, n, r); else {
for (const [n, r] of e) {
const e = this.items.get(n);
if (e) {
t[this.findIndexOrThrow(t, e, n)] = r;
} else t.push(r);
this.items.set(n, r);
}
t.sort(this.sortMethod);
}
this.updateList(t);
}))));
}
delete(e) {
return fr((() => nl((() => {
const t = this.items.get(e);
if (t) {
const n = this.list.slice(), r = this.findIndexOrThrow(n, t, e);
return n.splice(r, 1), this.items.delete(e), this.updateList(n), !0;
}
return !1;
}))));
}
deleteMulti(e) {
return fr((() => nl((() => {
const t = this.list.slice();
for (const n of e) {
const e = this.items.get(n);
if (e) {
const r = this.findIndexOrThrow(t, e, n);
t.splice(r, 1), this.items.delete(n);
}
}
this.updateList(t);
}))));
}
replace(e) {
return fr((() => {
const t = e.map((([, e]) => e));
t.sort(this.sortMethod), this.items.replace(e), this.updateList(t);
}));
}
forEach(e) {
this.getSortedList().forEach(e);
}
map(e) {
return this.getSortedList().map(e);
}
observe(e) {
return or(this.items, e);
}
addToList(e, t, n) {
const r = this.items.get(t);
if (r) {
const n = this.findIndexOrThrow(e, r, t);
e.splice(n, 1);
}
Hx(e, n, this.sortMethod), this.items.set(t, n);
}
updateList(e) {
this.list = e, this.listAtom.reportChanged();
}
findIndexOrThrow(e, t, n) {
const r = e.indexOf(t);
if (-1 === r) throw new Error("Entry for id " + n + " was not found in list");
return r;
}
}, Jx = fm.XboxPlatform.XUserPrivilege, Gx = fm.XboxPlatform.XboxPermission, zx = fm.XboxPlatform.XblAnonymousUserType, jx = (fm.XboxPlatform.XblPermissionDenyReason, 
fm.XboxPlatform.XUserPrivilegeOptions, fm.XboxPlatform.XGameUiMessageDialogButton, 
Jx.AddFriends, Jx.Broadcast, Jx.UserGeneratedContent, Jx.SocialNetworkSharing, Jx.CloudJoinSession, 
Jx.Clubs, Jx.Communications, Jx.CloudSavedGames, Jx.CrossPlay, Jx.GameDvr, Jx.ManageProfilePrivacy, 
Jx.Multiplayer, Jx.MultiplayerParties, Jx.Sessions, Gx.CommunicateUsingText, Gx.CommunicateUsingVideo, 
Gx.CommunicateUsingVoice, Gx.ViewTargetProfile, Gx.ViewTargetGameHistory, Gx.ViewTargetVideoHistory, 
Gx.ViewTargetMusicHistory, Gx.ViewTargetExerciseInfo, Gx.ViewTargetPresence, Gx.ViewTargetVideoStatus, 
Gx.ViewTargetMusicStatus, Gx.PlayMultiplayer, Gx.ViewTargetUserCreatedContent, Gx.BroadcastWithTwitch, 
Gx.WriteComment, Gx.ShareItem, Gx.ShareTargetContentToExternalNetworks, zx.CrossNetworkUser, 
zx.CrossNetworkFriend, Cl({
debugName: "betaWatermarkOverride",
default: !1
})), qx = Qc({
zOffset: TN
}), Yx = Qc({
zOffset: 1,
padding: Vc(Rd.DimensionSpace.large),
flex: 1,
justifyContent: "center",
alignItems: "center"
}), Wx = Qc({
backgroundColor: Rd.ColorNeutral._800
}), Kx = ({children: e, style: t, opaque: n}) => {
const {fullscreenStyle: r} = lf();
return H.createElement("surface", {
style: [ qx, r, t, n ? Wx : void 0 ]
}, H.createElement("surface", {
style: Yx
}, e));
}, Xx = {
duration: Rd.AnimationTime.fastest,
easing: Rd.AnimationEasing.ease
}, Qx = Ii.observer((() => {
const e = ol(), t = e.getUntracked(EE), n = hP(t ? 1 : 1.05), r = hP(t ? 1 : 0), [i, o] = H.useState((() => t));
H.useEffect((() => Dn((() => e.get(EE)), (e => {
const t = () => {
n.transition(1.05, 1, Xx), r.transition(0, 1, Xx), o(e);
};
i ? i !== e && (n.transition(1, .95, Xx), r.transition(1, 0, {
...Xx,
onFinished: t
})) : t();
}), {
fireImmediately: !0
})), [ i, e, r, n ]);
const a = [ n.propStyle("scaleX"), n.propStyle("scaleY"), r.propStyle("opacity") ];
return H.createElement(Nh, {
id: "modal-overlay",
isolate: !!i,
disable: !i
}, i ? H.createElement(Kx, {
style: a,
opaque: i.opaque
}, H.createElement("surface", {
key: i.id
}, i.component())) : null);
})), $x = () => !1, Zx = ({children: e, router: t, shouldIsolate: n = $x}) => {
const r = Um(t), [i, o] = H.useState((() => n(r.location)));
return H.useEffect((() => (o(n(r.location)), r.listen((e => {
o(n(e));
})))), [ r, n ]), H.createElement(No, {
history: r
}, H.createElement(Nh, {
id: "router:" + t,
isolate: i
}, e));
}, eB = Qc({
zOffset: PN,
position: "absolute",
start: Vc(Rd.DangerZone.width),
bottom: Vc(Rd.DangerZone.height)
});
function tB(e) {
return !!e.label;
}
var nB = Sl({
debugName: "bottomBarInputsState",
get: function({get: e}) {
return e(em).filter(tB).sort(((e, t) => e.priority && t.priority ? e.priority > t.priority ? 1 : -1 : e.priority ? -1 : t.priority ? 1 : 0));
}
}), rB = () => dl(nB), iB = (Ii.observer((() => {
const e = rB();
return H.createElement(eh, {
actions: e,
style: eB
});
})), {
GlobalDismiss: "dismiss",
GlobalSettings: "social_settings",
GlobalChatParty: "chat_party",
GlobalLeaveParty: "leave_party"
}), oB = ({action: e}) => {
const {history: t} = XS("main"), n = iB[e.id], r = av(), i = H.useMemo((() => {
if (n) return {
pg_id: LE(t.location),
destination_name: "bottom_bar",
msg_id: "bottom_bar",
option: n,
context: {
tpid: Fs.productId
}
};
}), [ t, n ]);
VE(i);
const o = H.useMemo((() => i ? {
...e,
callback: UE(r, e.callback, {
...i,
status: "click"
})
} : e), [ e, r, i ]);
return H.createElement($f, {
action: o
});
}, aB = Ii.observer((() => {
const e = rB();
return H.createElement(Zf, {
style: eB
}, e.map((e => H.createElement(oB, {
key: e.id,
action: e
}))));
})), sB = Qc({
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "center",
height: Vc(52)
}), lB = Qc({
minWidth: gd.RB[0]
});
function cB() {
const e = Sf(), t = e ? 1 : 0;
return {
previousKeyBinding: Tf(e ? 0 : 1),
nextKeyBinding: Tf(t)
};
}
var dB, uB = ({children: e, onNext: t, onPrev: n}) => {
const {previousKeyBinding: r, nextKeyBinding: i} = cB(), o = Uc(r.primaryButton), a = Uc(i.primaryButton), s = r.primaryButton.keyboardKeyLabel, l = i.primaryButton.keyboardKeyLabel;
return Wp({
keyBinding: r,
callback: n
}), Wp({
keyBinding: i,
callback: t
}), H.createElement("surface", {
style: sB
}, H.createElement(Ud, {
type: o,
buttonLabel: s,
style: s ? lB : void 0,
color: Zu.TabBar.ButtonIcon.color,
onClick: n
}), e, H.createElement(Ud, {
type: a,
buttonLabel: l,
style: l ? lB : void 0,
color: Zu.TabBar.ButtonIcon.color,
onClick: t
}));
}, pB = zc({
singleDigitBadge: {
1: Cs("/photon/quantum/badges/Single_Digit_Badge-54006121.png"),
2: Cs("/photon/quantum/badges/Single_Digit_Badge_2x-de90746c.png")
},
doubleDigitBadge: {
1: Cs("/photon/quantum/badges/Double_Digit_Badge-0eb93931.png"),
2: Cs("/photon/quantum/badges/Double_Digit_Badge_2x-b76ffacb.png")
},
tripleDigitBadge: {
1: Cs("/photon/quantum/badges/Triple_Digit_Badge-6fba5c3e.png"),
2: Cs("/photon/quantum/badges/Triple_Digit_Badge_2x-0439d89b.png")
}
}), fB = 36, hB = Qc({
height: Vc(fB),
justifyContent: "center"
}), mB = Qc({
width: Vc(fB),
texture: pB.singleDigitBadge
}), gB = Qc({
width: Vc(44),
texture: pB.doubleDigitBadge
}), yB = Qc({
width: Vc(52),
texture: pB.tripleDigitBadge
}), IB = Qc({
color: Zu.DigitBadge.LabelText.color,
fontSize: Jc(Zu.DigitBadge.LabelText.fontSize),
fontFamily: mu.name,
textAlign: "center",
zOffset: 1
}), _B = {
easing: Rd.AnimationEasing.ease,
duration: Rd.AnimationTime.faster,
rebound: !0
}, bB = {
easing: Rd.AnimationEasing.ease,
duration: Rd.AnimationTime.average
}, SB = ({digit: e}) => {
const t = hP(1), n = hP(0), r = H.useRef(0);
H.useEffect((() => {
const i = r.current;
if (r.current = e, i !== e) return e > i ? (n.set(1), void t.transition(1, 1.3, _B)) : void (0 === e && (t.transition(1, .8, bB), 
n.transition(1, 0, bB)));
}), [ e, t, n ]);
let i, o = "" + Math.max(e, 1);
return e < 10 ? i = mB : e < 100 ? i = gB : (o = "99+", i = yB), H.createElement("surface", {
style: [ hB, i, t.propStyle("scaleX"), t.propStyle("scaleY"), n.propStyle("opacity") ]
}, H.createElement("surface", {
text: o,
style: IB
}));
}, vB = Qc({
padding: Vc([ Zu.TabButton.Container.paddingTop, Zu.TabButton.Container.paddingEnd, Zu.TabButton.Container.paddingBottom, Zu.TabButton.Container.paddingStart ]),
marginLeft: Vc(Zu.TabButton.Container.marginStart),
marginRight: Vc(Zu.TabButton.Container.marginEnd)
}), TB = Qc({
position: "absolute",
width: Vc(fB),
height: Vc(fB),
top: Vc(-18),
right: Vc(-18),
zOffset: 1
}), EB = Qc({
wordWrap: "normal",
maxWidth: (dB = 2, hf(dB) + uf)
}), PB = Ii.observer((e => {
const {focusItem: t, isFocused: n, isPressed: r} = Of(e), i = uh({
isFocused: n,
isPressed: r,
isActive: e.isActive
});
let o, a = Zu.TabButton.LabelText.color;
return e.isActive ? (a = Zu.TabButtonActive.LabelText.color, o = Zu.TabButtonActive.LabelText.backgroundColor) : r ? (a = Zu.TabButtonPressed.LabelText.color, 
o = Zu.TabButtonPressed.LabelText.backgroundColor) : n && (a = Zu.TabButtonFocused.LabelText.color), 
H.createElement("surface", {
style: [ vB, dh({
backgroundColor: o,
borderColor: i
}) ],
...t.hooks
}, H.createElement("surface", {
style: TB
}, H.createElement(SB, {
digit: e.counter || 0
})), H.createElement(tp, {
text: e.label,
color: a,
style: EB
}));
})), [, OB] = El({
debugName: "playSoundEffectState",
create: e => {
const t = e.get(sI);
return t.hasMethod("UserExperience", "playSoundEffect") ? e => {
t.UserExperience.playSoundEffect({
effect: e
}).catch((e => {}));
} : () => {};
}
}), CB = fm.InputBindings.Action, NB = fm.UserExperience.SoundEffect, AB = Vc(726), LB = Qc({
position: "relative",
marginTop: Vc(36),
flex: 1
}), wB = Qc({
top: 0,
left: 0,
position: "absolute",
translateX: 0,
right: 0,
height: AB
}), kB = {
duration: Rd.AnimationTime.fast,
easing: Rd.AnimationEasing.ease
}, RB = "tab", xB = Vc(48), BB = H.memo((e => {
const {isCurrent: t, path: n, exact: r, children: i} = e, o = H.useContext(Co), a = H.useRef(o), s = H.useMemo((() => t ? {
...o,
match: Bo(o.location.pathname, {
path: n,
exact: r
}) ?? o.match
} : a.current), [ t, n, r, o ]);
return H.useEffect((() => {
a.current = s;
}), [ s ]), H.createElement(Co.Provider, {
value: s
}, i);
})), DB = ({tab: e, tabIndex: t, currentTabIndex: n, previousTabIndex: r, children: i}) => {
const {timeout: o, disposeTimeout: a} = dp(), s = t === r, l = t === n, [c, d] = H.useState(l), u = hP(0), p = hP(0);
return H.useEffect((() => {
if (l) {
const e = af(t < (r ?? 0) ? -xB : xB);
a(RB), d(!0), void 0 !== r && u.transition(e, 0, kB), p.to(1, kB);
} else if (s) {
const e = af(t > n ? xB : -xB);
u.transition(0, e, kB), p.to(0, kB), o(RB, (() => d(!1)), kB.duration);
} else a(RB), d(!1);
}), [ o, a, u, p, t, l, s, n, r ]), H.createElement("surface", {
style: [ wB, u.propStyle("translateX"), p.propStyle("opacity") ]
}, (l || s && c) && H.createElement(BB, {
isCurrent: l,
path: e.route.path,
exact: e.exact
}, i));
}, FB = Ii.observer((({tab: e, onSelect: t, isSelected: n}) => {
const r = H.useCallback((() => {
t(e.route);
}), [ t, e.route ]), i = e.getUnseenCount?.() ?? void 0;
return H.createElement(PB, {
id: e.route.path,
isActive: n,
label: e.title,
onClick: r,
counter: i
});
}));
function MB(e, t) {
const n = Bo(e, t.route.path);
return !!n && (!t.exact || n.isExact);
}
function UB(e, t) {
const n = e.findIndex((e => MB(t, e)));
return -1 !== n ? n : 0;
}
function HB(e) {
const t = UB(e, qo().pathname), n = H.useRef({
current: t
}).current, r = n.current === t ? n.previous : n.current;
return H.useEffect((() => {
n.current !== t && (n.previous = n.current, n.current = t);
}), [ n, t ]), {
currentTabIndex: t,
previousTabIndex: r
};
}
var VB = ({tabs: e}) => {
const {currentTabIndex: t, previousTabIndex: n} = HB(e), {history: r, navigate: i} = XS(), o = OB(), a = kh(), {previousKeyBinding: s, nextKeyBinding: l} = cB(), c = WL(CB.Settings), d = WL(CB.TogglePhoton), u = WL(CB.ToggleMode);
_p((({getKeyBindingText: n}) => [ Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_TAB-MENU_NAME", {
"%tabLabel%": e[t].title
}), Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_TAB-MENU_TAB-NUMBER", {
"%tabNumber%": t + 1 + "",
"%tabTotal%": e.length + ""
}), Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_TAB-MENU_NAVIGATION", {
"%leftNavKey%": n(s),
"%rightNavKey%": n(l)
}) ]), [ e, t, s, l ], 0), _p((({getKeyBindingText: e}) => [ Fs.isPartyEnabled ? Em("PHOTON-SOCIAL_NARRATION_BOTTOM-BAR_PARTIES-ENABLED", {
"%backKey%": e(d),
"%settingsKey%": e(c),
"%voipKey%": e(u)
}) : Em("PHOTON-SOCIAL_NARRATION_BOTTOM-BAR_PARTIES-DISABLED", {
"%backKey%": e(d),
"%settingsKey%": e(c)
}) ]), [ t, d, c, u ], 3);
const {onTabSelect: p, onPrevTab: f, onNextTab: h} = H.useMemo((() => ({
onTabSelect(e) {
i(e.link());
},
onPrevTab() {
const t = UB(e, r.location.pathname), n = e[t <= 0 ? e.length - 1 : t - 1];
o(NB.PageLeft), i(n.route.link()), a.setFocus(void 0, 2);
},
onNextTab() {
const t = UB(e, r.location.pathname), n = e[(t + 1) % e.length];
o(NB.PageRight), i(n.route.link()), a.setFocus(void 0, 2);
}
})), [ i, e, r, o, a ]);
return H.createElement(H.Fragment, null, H.createElement(uB, {
onPrev: f,
onNext: h
}, H.createElement(Nh, {
disableForControllerMode: !0
}, e.map(((e, n) => H.createElement(FB, {
key: e.route.path,
tab: e,
onSelect: p,
isSelected: n === t
}))))), H.createElement("surface", {
style: LB
}, e.map(((e, r) => H.createElement(DB, {
key: e.route.path,
tab: e,
tabIndex: r,
currentTabIndex: t,
previousTabIndex: n
}, H.createElement(Nh, {
disable: r !== t
}, e.content))))));
}, JB = zc({
dotBadge: {
1: Cs("/photon/quantum/badges/Dot_Badge-282ef68e.png"),
2: Cs("/photon/quantum/badges/Dot_Badge@2x-fc6ef56e.png")
}
}), GB = Vc(Zu.DotBadge.Container.width), zB = Qc({
width: GB,
height: Vc(Zu.DotBadge.Container.height),
texture: JB.dotBadge
}), jB = ({style: e}) => H.createElement("surface", {
style: [ zB, e ]
}), qB = Vc(Zu.ListControlBase.Content.paddingStart), YB = Vc(Rd.DimensionSpace.smaller), WB = Vc(Zu.ListControlBase.Container.minHeight), KB = 1, XB = 2, QB = 3, $B = {
container: td((e => ({
minHeight: WB + (e ? 0 : 2 * YB)
})), {
flexDirection: "row",
alignItems: "center",
justifyContent: "space-between"
}),
content: Qc({
flex: 1,
flexDirection: "row",
alignItems: "center",
justifyContent: "space-between",
padding: [ 0, Vc(Zu.ListControlBase.Content.paddingEnd), 0, Vc(Zu.ListControlBase.Content.paddingStart) ],
zOffset: KB
}),
borderStyle: td((e => ({
top: e ? Vc(Zu.ListControlBase.Border.top) : 0,
left: e ? Vc(Zu.ListControlBase.Border.left) : 0,
right: e ? Vc(Zu.ListControlBase.Border.right) : 0,
bottom: e ? Vc(Zu.ListControlBase.Border.bottom) : 0,
zOffset: KB
}))),
actionContainer: Qc({
flexDirection: "row",
flexShrink: 0
}),
action: Qc({
minHeight: Vc(Zu.ListControlBase.Action.minHeight),
padding: Vc([ Zu.ListControlBase.Action.paddingTop, Zu.ListControlBase.Action.paddingEnd, Zu.ListControlBase.Action.paddingBottom, Zu.ListControlBase.Action.paddingStart ]),
alignItems: "center",
zOffset: XB,
flexShrink: 0
}),
actionIdentifier: rd("zOffset", QB),
actionColor: (e, t, n, r) => {
let i;
return i = n ? r ? Zu.ListControlBaseActionSecondaryDisabled.Container.backgroundColor : Zu.ListControlBaseActionPrimaryDisabled.Container.backgroundColor : e ? r ? Zu.ListControlBaseActionSecondaryPressed.Container.backgroundColor : Zu.ListControlBaseActionPrimaryPressed.Container.backgroundColor : t ? r ? Zu.ListControlBaseActionSecondaryHover.Container.backgroundColor : Zu.ListControlBaseActionPrimaryHover.Container.backgroundColor : r ? Zu.ListControlBaseActionSecondary.Container.backgroundColor : Zu.ListControlBaseActionPrimary.Container.backgroundColor, 
rd("color", i);
},
icon: Qc({
width: Vc(32),
height: Vc(32)
}),
dividerStyle: Qc({
marginLeft: Vc(Zu.ListControlBase.Divider.marginStart),
marginRight: Vc(Zu.ListControlBase.Divider.marginEnd),
width: Vc(Zu.ListControlBase.Divider.width),
height: Vc(Zu.ListControlBase.Divider.height),
backgroundColor: Zu.ListControlBase.Divider.backgroundColor
}),
textContainerStyle: Qc({
minHeight: Vc(Zu.ListControlBase.LabelText.minHeight),
padding: [ Vc(Zu.ListControlBase.LabelText.paddingTop), Vc(Zu.ListControlBase.LabelText.paddingEnd), Vc(Zu.ListControlBase.LabelText.paddingBottom), Vc(Zu.ListControlBase.LabelText.paddingStart) ]
}),
controlBodyWrapperStyle: Qc({
flexShrink: 1,
flexDirection: "row",
alignItems: "center"
}),
controlBodyIconStyle: Qc({
width: Vc(Rd.DimensionSpace.larger),
height: Vc(Rd.DimensionSpace.larger),
marginStart: Vc(Rd.DimensionSpace.medium)
})
}, ZB = Qc({
padding: Vc([ Zu.SectionHeader.Container.paddingTop, Zu.SectionHeader.Container.paddingEnd, Zu.SectionHeader.Container.paddingBottom, Zu.SectionHeader.Container.paddingStart ]),
flexDirection: "row",
justifyContent: "space-between",
alignItems: "center",
color: Zu.SectionHeader.Container.color
}), eD = e => H.createElement("surface", {
style: [ ZB, hh({
radius: Rd.DimensionSpace.smaller
}), e.style ]
}, e.children), tD = Qc({
fontSize: Jc(Rd.TextSizeLabel.medium),
zOffset: 1,
textLineSpacing: Vc(0),
textLetterSpacing: Vc(.5)
}), nD = e => H.createElement("surface", {
text: e.text,
style: [ bu, tD, e.style, rd("color", e.color || Rd.TextColorStandard.default) ]
}), rD = Qc({
flexDirection: "row",
flexShrink: 0
}), iD = Qc({
flexDirection: "row",
alignItems: "center",
zOffset: 1
}), oD = Qc({
width: Vc(Rd.DimensionSpace.micro),
height: Vc(Rd.DimensionSpace.larger),
backgroundColor: Rd.ColorNeutral._400
}), aD = Qc({
rotateZ: 0
}), sD = Qc({
rotateZ: 180,
width: Vc(Rd.DimensionSpace.larger),
height: Vc(Rd.DimensionSpace.larger),
color: Rd.ColorNeutral._0,
zOffset: 1,
texture: oh.down
}), lD = Qc({
marginStart: Vc(Rd.DimensionSpace.large)
}), cD = Al({
debugName: "collapsibleSectionsState",
default: () => {}
});
function dD() {
return Tf(2);
}
var uD = Ii.observer((e => {
const {onToggle: t, isExpanded: n, showDot: r, children: i, ...o} = e, a = dD(), s = Uc(a.primaryButton), l = a.primaryButton.keyboardKeyLabel, {focusItem: c, isFocused: d, isPressed: u} = Of({
...o,
onClick: t,
input: {
keyBinding: a,
callback: t
}
}), p = Gf(u, "large"), f = Rd.TextColorStandard.emphasized, h = !n && r, m = "string" == typeof e.title ? H.createElement(nD, {
text: e.title,
color: f
}) : e.title, g = h ? H.createElement("surface", {
style: iD
}, H.createElement(jB, {
style: rd("marginEnd", Vc(Rd.DimensionSpace.small))
}), m) : m;
return H.createElement("surface", {
style: e.style,
...c.hooks
}, H.createElement(eD, {
style: p
}, d ? H.createElement("surface", {
style: [ Rf, $B.borderStyle(!0) ]
}) : void 0, g, H.createElement("surface", {
style: rD
}, H.createElement("surface", {
style: oD
}), (s || l) && d ? H.createElement(op, {
buttonLabel: l,
icon: s,
style: lD
}) : null, H.createElement("surface", {
style: [ sD, n ? aD : void 0, lD ]
}))), n ? i : null);
}));
function pD({id: e, rememberExpandedState: t, isInitiallyExpanded: n, onToggleCallback: r}) {
const [i, o] = [ ul(a = cD, s = e), hl(a, s) ];
var a, s;
const l = yl(cD, e);
H.useEffect((() => t ? void 0 : l), [ l, t ]);
const c = H.useCallback((() => {
o((e => {
const t = !(e ?? n);
return r?.(t), t;
}));
}), [ o, r, n ]);
return {
isExpanded: i ?? n,
onToggle: c
};
}
Ii.observer((({children: e, ...t}) => {
const {isExpanded: n, onToggle: r} = pD(t);
return H.createElement(uD, {
title: t.title,
id: t.id,
isExpanded: n,
onToggle: r,
style: t.style,
showDot: t.showDot
}, e);
}));
var fD = ({style: e, height: t, width: n, delay: r = 0, lightVariant: i}) => {
const [o, a] = H.useState(0 === r), {timeout: s} = dp();
return H.useEffect((() => {
o || s("delay", (() => {
a(!0);
}), r);
}), [ r, s, o ]), o ? H.createElement("surface", {
style: [ e, rd("height", t), n ? rd("width", n) : void 0, dh({
backgroundColor: i ? Rd.BackgroundColor.alt2 : Rd.BackgroundColor.base,
borderColor: void 0
}) ]
}) : null;
}, hD = Vc(30), mD = Vc(600), gD = ({numSections: e, numRows: t, width: n, height: r, lightVariant: i}) => {
const o = e > 0 ? e : 1, a = n || mD, s = r || hD;
return H.createElement(H.Fragment, null, Array.from({
length: o
}).map(((n, r) => H.createElement("surface", {
style: rd("flexDirection", "column"),
key: r
}, e > 0 && H.createElement(fD, {
height: Vc(60),
lightVariant: i
}), Array.from({
length: t
}).map(((e, t) => H.createElement(fD, {
key: t,
style: rd("margin", Vc([ Rd.DimensionSpace.medium, 0, Rd.DimensionSpace.medium, 0 ])),
height: s,
width: a,
lightVariant: i
})))))));
}, yD = Qc({
flexDirection: "row"
}), ID = Qc({
width: Vc(32),
height: Vc(32),
marginEnd: Vc(Rd.DimensionSpace.small)
}), _D = ({texture: e, text: t, iconColor: n, textColor: r, style: i}) => H.createElement("surface", {
style: [ yD, i ]
}, H.createElement("surface", {
style: [ ID, rd("texture", e), rd("color", n) ]
}), H.createElement(tp, {
color: r,
text: t
})), bD = e => H.createElement(_D, {
...e,
texture: ih.CHECK_FILL,
iconColor: Rd.ColorSystem.success
}), SD = Qc({
minWidth: Vc(32),
width: Vc(32),
height: Vc(32),
marginStart: Vc(Rd.DimensionSpace.smallest)
}), vD = H.forwardRef((({children: e, interaction: t, transparent: n, style: r, borderOutside: i, isFocusableWhenActive: o}, a) => {
const {isFocused: s, focusItem: l, isActive: c, isDisabled: d} = t;
let u;
u = c ? o ? Zu.ListControlBaseActive.Container.backgroundColor2 : Zu.ListControlBaseActive.Container.backgroundColor : d ? n ? void 0 : Zu.ListControlBaseDisabled.Container.backgroundColor : n ? void 0 : Zu.ListControlBase.Container.backgroundColor;
const p = i ? Zu.ListControlBase.ContainerBorderOutside.borderRadius : Zu.ListControlBase.Container.borderRadius;
return H.createElement(Cf.Provider, {
value: t
}, H.createElement("surface", {
ref: a,
...l.hooks,
style: [ $B.container(i), u ? hh({
radius: p
}) : void 0, r, rd("color", u) ]
}, !s || !o && c ? void 0 : H.createElement("surface", {
style: [ Rf, $B.borderStyle(i) ]
}), e));
})), TD = ({style: e, children: t}) => H.createElement("surface", {
style: [ $B.content, e ]
}, t), ED = Ii.observer((e => {
const {children: t, transparent: n, style: r, ...i} = e, o = Of(i);
return H.createElement(vD, {
style: r,
interaction: o,
transparent: n,
isFocusableWhenActive: e.isFocusableWhenActive
}, H.createElement(TD, null, t));
})), PD = ({isActive: e, isDisabled: t, isFocused: n}, r, i) => e ? i ? Zu.ListControlBaseActive.LabelText.colorFocusable : Zu.ListControlBaseActive.LabelText.color : t ? Zu.ListControlBaseDisabled.LabelText.color : n ? Zu.ListControlBaseFocused.LabelText.color : r ? Zu.ListControlBaseDimmed.LabelText.color : Zu.ListControlBase.LabelText.color, OD = e => {
const t = Nf(), n = t.isFocused || t.isPressed;
if (e.showOnPressedOrFocused && !n) return null;
if (e.hideOnPressedOrFocused && n) return null;
const r = PD(t, !0);
return H.createElement("surface", {
style: [ $B.controlBodyWrapperStyle, $B.textContainerStyle, e.wrapperStyle ]
}, H.createElement(IT, {
color: r,
...e
}), e.icon && H.createElement("surface", {
style: [ $B.controlBodyIconStyle, rd("color", e.icon.color), rd("texture", e.icon.type), e.icon.style ]
}));
}, CD = Qc({
flex: 1
}), ND = Qc({
marginStart: Vc(Zu.ListControlBase.PrimaryID.marginStart),
textEllipsis: !0
}), AD = Qc({
marginStart: Vc(Zu.ListControlBase.Skeleton.marginStart)
}), LD = ({isFocusableWhenActive: e, style: t, ...n}) => {
const r = Nf(), i = PD(r, void 0, e);
return H.createElement("surface", {
style: [ rd("flex", 1), $B.textContainerStyle ]
}, H.createElement(tp, {
...n,
style: [ CD, t ],
color: i
}));
}, wD = e => {
const t = Nf(), n = PD(t);
return H.createElement("surface", {
style: [ TT.primaryId, CD, $B.textContainerStyle, e.style ]
}, H.createElement(AT, {
platform: e.playerNetworkId,
style: rd("color", n)
}), e.name ? H.createElement(IT, {
style: [ ND, rd("color", n) ],
text: e.name,
key: "name"
}) : H.createElement(fD, {
key: "name",
style: AD,
height: Vc(Zu.ListControlBase.Skeleton.height),
width: Vc(Zu.ListControlBase.Skeleton.width)
}), !!e.icon && H.createElement("surface", {
style: [ SD, rd("texture", e.icon) ]
}));
}, kD = Ii.observer((e => {
const {action: t, isSecondary: n, roundedSides: r} = e, i = gc({
onClick: t.callback,
disabled: t.disabled
}), o = Kp({
keyBinding: t.keyBinding,
callback: t.callback
}, void 0, !t.disabled);
if (t.disabled && t.disabledContent) return H.createElement("surface", null, t.disabledContent);
const a = Uc(t.keyBinding.primaryButton), s = i.isPressed || o, l = t.keyBinding.primaryButton.keyboardKeyLabel, c = Gf(s);
let d;
return (a || l) && t.label ? d = H.createElement(ap, {
style: $B.actionIdentifier,
label: t.label,
icon: a,
buttonLabel: l
}) : a || l ? d = H.createElement(op, {
buttonLabel: l,
icon: a
}) : t.label && (d = H.createElement(tp, {
style: $B.actionIdentifier,
text: t.label,
color: Zu.ListControlBase.Action.color
})), H.createElement("surface", {
style: [ $B.action, $B.actionColor(s, i.isHovered, t.disabled, n), hh({
radius: Zu.ListControlBase.Action.borderRadius,
applyRadiusTo: r
}), c ],
...i.hooks
}, d);
})), RD = ({primaryAction: e, secondaryAction: t}) => {
const n = Sf();
return t ? H.createElement("surface", {
style: $B.actionContainer
}, H.createElement(kD, {
action: t,
isSecondary: !0,
roundedSides: n ? 1 : 0
}), H.createElement(kD, {
action: e,
roundedSides: n ? 0 : 1
})) : H.createElement(kD, {
action: e
});
}, xD = ({text: e}) => {
const t = Nf(), n = PD(t);
return H.createElement(bD, {
style: $B.action,
textColor: n,
text: e
});
}, BD = ({texture: e, isFocusableWhenActive: t, style: n}) => {
const r = Nf(), i = PD(r, void 0, t);
return H.createElement("surface", {
style: [ $B.icon, rd("texture", e), rd("color", i), n ]
});
}, DD = ({type: e, showOnPressedOrFocused: t, isFocusableWhenActive: n, style: r}) => {
const i = Nf(), {isPressed: o, isFocused: a, isActive: s, isDisabled: l} = i, c = o || a, d = PD(i, void 0, n), u = t && !c || s && !n || l ? rd("opacity", 0) : void 0;
return H.createElement(Ud, {
type: e,
color: d,
style: [ u, r ]
});
}, FD = () => H.createElement("surface", {
style: $B.dividerStyle
}), MD = ({showOnPressedOrFocused: e, hideOnPressedOrFocused: t, children: n}) => {
const r = Nf(), {isPressed: i, isFocused: o} = r, a = i || o;
return e && !a || t && a ? null : H.createElement(H.Fragment, null, n);
}, UD = Qc({
position: "absolute",
marginStart: Vc(Zu.ActionIdentifierListControl.UnseenMarker.marginStart),
zOffset: 1
}), HD = Qc({
paddingStart: Vc(Zu.ActionIdentifierListControl.Content.paddingStart),
marginStart: GB + Vc(Rd.DimensionSpace.small)
}), VD = Ii.observer((e => {
const {children: t, primaryAction: n, secondaryAction: r, showDot: i, narrationItem: o, style: a, ...s} = e, l = Of(s), {isFocused: c, isPressed: d} = l, u = c || d;
return bp((e => o({
primaryAction: n,
secondaryAction: r
}, e)), [ o, n, r ], l.focusItem.focusId), H.createElement(vD, {
style: a,
transparent: !0,
interaction: l,
borderOutside: !0
}, i && H.createElement(jB, {
style: UD
}), H.createElement(TD, {
style: HD
}, t), n && u ? H.createElement(RD, {
primaryAction: n,
secondaryAction: r
}) : null);
}));
function JD({playerName: e, supplementaryText: t}) {
return H.useCallback((({primaryAction: n, secondaryAction: r}, {getKeyBindingText: i, getRegisteredTertiaryActions: o}) => {
const a = o(), s = [ e, t, n || r || a.length ? Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_PRESS-BUTTON") : void 0, n?.label ? Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_CTA-1", {
"%buttonPrimary%": i(n.keyBinding),
"%actionPrimary%": n.label
}) : void 0, r?.label ? Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_CTA-2", {
"%buttonSecondary%": i(r.keyBinding),
"%actionSecondary%": r.label
}) : void 0 ];
return a.length && s.push(...a.map((e => Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_CTA-3", {
"%buttonTertiary%": i(e.keyBinding),
"%actionTertiary%": e.label
})))), s;
}), [ e, t ]);
}
var GD = 6e4, zD = 36e5, jD = 24 * zD, qD = 7 * jD;
function YD(e, t, n) {
const r = Math.abs(e - t) % n;
return t > e ? r || n : n - r;
}
var WD, KD = (e, t, n) => {
const r = Date.now(), i = Math.abs(r - n), o = n > r;
let a, s, l = {
singular: "",
plural: ""
};
if (i >= 3024e6) return {
str: t.fiveWeeks
};
if (i >= qD) a = Math.floor(i / qD), l = t.weeks; else if (i >= jD) {
a = Math.floor(i / jD), l = t.days;
s = YD(r, n, o && 1 === a ? zD : jD);
} else if (i >= zD) {
a = Math.floor(i / zD), l = t.hours;
s = YD(r, n, o && 1 === a ? GD : zD);
} else {
if (!(i >= GD)) return {
nextUpdateMs: YD(r, n, GD),
str: t.seconds
};
a = Math.floor(i / GD), l = t.minutes, s = YD(r, n, GD);
}
return {
nextUpdateMs: s,
str: a ? e.replace("[num]", String(a)).replace("[unit]", 1 === a ? l.singular : l.plural) : t.seconds
};
}, XD = (e, t, n) => {
const [r, i] = H.useState((() => KD(e, t, n)));
return H.useEffect((() => {
let r;
if (function o() {
const a = KD(e, t, n);
i((e => e.str !== a.str || e.nextUpdateMs !== a.nextUpdateMs ? a : e)), a.nextUpdateMs && (r = setTimeout(o, a.nextUpdateMs));
}(), r) return () => {
r && clearTimeout(r);
};
}), [ e, n, t ]), r.str;
}, QD = (e, t) => t === e.seconds || t === e.fiveWeeks, $D = (e, t, n) => {
const r = n || Em("TIME_AGO");
return QD(e, t) ? t : r.replace("%time%", t);
};
function ZD(e, t) {
const n = WD || (WD = {
fiveWeeks: Em("MORE-THAN-4-WEEKS"),
weeks: {
singular: Em("WEEK_SINGULAR"),
plural: Em("WEEK_PLURAL")
},
days: {
singular: Em("DAY_SINGULAR"),
plural: Em("DAY_PLURAL")
},
hours: {
singular: Em("HOUR_SINGULAR"),
plural: Em("HOURS_PLURAL")
},
minutes: {
singular: Em("MINUTE_SINGULAR"),
plural: Em("MINUTE_PLURAL")
},
seconds: Em("LESS-THAN-A-MINUTE_1")
}), r = XD("[num] [unit]", n, e);
return $D(n, r, t);
}
var eF = Qc({
textEllipsis: !0,
marginStart: Vc(Rd.DimensionSpace.macro),
maxWidth: Vc(525),
flexShrink: 0
}), tF = Ii.observer((({style: e, ...t}) => H.createElement(OD, {
...t,
style: [ eF, e ]
}))), nF = ({timeMs: e, hideOnPressedOrFocused: t, customText: n, ...r}) => {
const i = ZD(e, n);
return H.createElement(tF, {
hideOnPressedOrFocused: t,
text: i,
...r
});
}, rF = e => (_p((() => [ e.title, e.headline, e.body ]), [ e.title, e.headline, e.body ], 1), 
H.createElement(fL, {
...e
})), iF = ({telemetryInfo: e, onClick: t, onFocus: n, input: r, ...i}) => {
const o = av(), {onClickWithTelemetry: a, onFocusWithTelemetry: s, callbackWithTelemetry: l} = H.useMemo((() => ({
onClickWithTelemetry: UE(o, t, e),
callbackWithTelemetry: UE(o, r?.callback, e),
onFocusWithTelemetry: UE(o, n, {
status: "impression",
...e
})
})), [ o, r?.callback, t, n, e ]), c = r && {
...r,
callback: l
};
return H.createElement(jf, {
...i,
onFocus: s,
onClick: a,
input: c,
narrationItem: uO
});
}, oF = fm.InputBindings.Action, aF = Qc({
marginTop: Vc(Rd.DimensionSpace.larger)
}), sF = {
destination_name: "empty_state",
msg_id: "empty_state",
option: "start_adding_friends"
}, lF = ({headline: e, body: t, telemetryPageId: n}) => {
const {navigate: r} = XS(), i = WL(oF.Primary), o = H.useCallback((() => {
r(mx.link());
}), [ r ]), a = H.useMemo((() => ({
keyBinding: i,
callback: o
})), [ i, o ]), s = H.useMemo((() => ({
...sF,
pg_id: n
})), [ n ]);
return VE(s), H.createElement(rF, {
headline: e,
body: t
}, H.createElement("surface", {
style: [ mf(4), aF ]
}, H.createElement(iF, {
onClick: o,
input: a,
label: Em("PHOTON-SOCIAL_FRIENDS_LIST_EMPTY_BUTTON"),
id: "friends-no-friends",
telemetryInfo: s
})));
};
function cF(e) {
const {eaPlayerId: t} = s_(e);
return eC(cS().get(), (e => t ? e.get(t) : void 0));
}
var dF = Qg("/player-actions/:photonPlayerId/:photonSessionId?", "overlay_player_actions_other"), uF = Qg("/player-actions/:photonPlayerId/:photonSessionId?", "overlay_player_actions_self");
function pF(e, t, n, r, i, o = "", a, s) {
const {data: l} = e.getItemUntracked(nE, r), c = {
friend: l ? "yes" : "no",
group_member: nl((() => HO(e, r, void 0) || PC(e, r, void 0))) ? "yes" : "no"
};
return a && (c.details = a), {
action: i,
target: o,
source: LE(n),
status_code: s,
context: c
};
}
function fF(e, t, n, r, i, o, a, s) {
t.triggerPlayerGrievance(pF(e, 0, n, r, i, o, a, s));
}
function hF(e, t, n, r, i, o, a, s) {
const l = pF(e, 0, n, r, i, o, a, s);
return e => {
t.triggerPlayerGrievance({
...l,
status_code: e
});
};
}
var mF = J_.object({});
function gF() {
const e = ol(), t = av(), n = QS("main"), {BlockService: r} = Tm(), {showNotification: i, showErrorNotification: o} = bO(), a = oT(), {showModal: s} = CE(), l = _l((({get: e}) => t => {
const {eaPlayerId: n} = s_(t);
if (!n) return [];
const r = e(b_).findByEaPlayerId(n);
return nl((() => mI(r).map((e => e.photonPlayerId))));
}), []), c = _l((({get: e, getItem: t}) => n => {
const r = e(fv).tokenInfo.userId, {eaPlayerId: i} = s_(n), {name: o, playerNetworkId: a} = t(kw, n);
return {
targetPlayerId: i,
name: o,
playerNetworkId: a,
isSelf: r === i,
ownPlayerId: r
};
}), []), d = H.useCallback(((e, t) => {
const {name: n, playerNetworkId: r} = c(e);
l(e).forEach((e => {
a.removePresence(e);
})), i(3, 3, {
icon: ih.BLOCK,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_BLOCK", {
"%primaryID%": NT({
name: n,
playerNetworkId: r
}, {
allowEllipsis: !0
})
})
}), t.onSuccess?.();
}), [ c, l, i, a ]), u = H.useCallback(((e, t) => {
o({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_BLOCK-PLAYER-FAIL")
}, "block player", e.error), t.onError?.(e.error?.message ?? "Unknown");
}), [ o ]), p = H.useCallback(((e, t) => {
const {name: n, playerNetworkId: r} = c(e);
i(3, 3, {
icon: ih.CHECK_CIRCLE,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_UNBLOCK", {
"%primaryID%": NT({
name: n,
playerNetworkId: r
}, {
allowEllipsis: !0
})
})
}), t.onSuccess?.();
}), [ c, i ]), f = H.useCallback(((e, t) => {
o({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_UNBLOCK-PLAYER-FAIL")
}, "unblock player", e.error), t.onError?.(e.error?.message ?? "Unknown");
}), [ o ]), h = H.useCallback(((e, t) => {
const {targetPlayerId: n, ownPlayerId: i} = c(e), o = j_((() => r.BlockPlayer({
entityId: {
playerId: {
id: i
}
},
targetEntityId: {
playerId: {
id: n
}
}
})), mF);
return o.then((n => {
q_(n, {
onSuccess: () => d(e, t),
onError: () => u(n, t)
});
})), o;
}), [ r, c, u, d ]), m = _l((({get: e}) => (t, n) => {
const {targetPlayerId: r} = c(t), i = nl((() => e(lS).get().data));
if (r && i) {
nl((() => i.has(r))) || (i.set(r, {
eaPlayerId: r,
createTimeMs: Date.now(),
photonPlayerId: i_({
eaPlayerId: r,
playerNetworkId: "EA"
})
}), h(t, n).then((e => {
e.error && fr((() => {
i.delete(r);
}));
})));
}
}), [ c, h ]), g = H.useCallback(((e, t) => {
const {targetPlayerId: n, ownPlayerId: i} = c(e), o = j_((() => r.UnblockPlayer({
entityId: {
playerId: {
id: i
}
},
targetEntityId: {
playerId: {
id: n
}
}
})), mF);
return o.then((n => {
q_(n, {
onSuccess: () => p(e, t),
onError: () => f(n, t)
});
})), o;
}), [ r, c, f, p ]), y = _l((({get: e}) => (t, n) => {
const {targetPlayerId: r} = c(t), i = nl((() => e(lS).get().data));
if (r && i) {
const e = nl((() => i.get(r)));
e && (i.delete(r), g(t, n).then((t => {
t.error && i.set(r, e);
})));
}
}), [ c, g ]), I = H.useCallback(((r, i = {}) => {
if (!c_(r)) return void u({
loading: !1,
skipped: !1,
error: new Error("Invalid player, not an EA account")
}, {});
const {name: o, playerNetworkId: a, targetPlayerId: l} = c(r), d = i.onSuccess, p = i.onError, f = hF(e, t, n.history.location, r, "block", l), h = t => {
e.get(oI).addEvent({
eventType: "photon_player_grievance",
action: "block",
source: LE(n.history.location),
error: !!t,
error_code: t
});
};
i.onSuccess = () => {
f(), h(), d?.();
}, i.onError = e => {
f(e), h(e), p?.(e);
}, s((() => H.createElement(wL, {
title: Em("PHOTON-SOCIAL_BLOCK_AFFIRM_TITLE", {
"%playerID%": NT({
name: o,
playerNetworkId: a
}, {
allowEllipsis: !0
})
}),
body: Em("PHOTON-SOCIAL_BLOCK_AFFIRM_DESC"),
onConfirm: () => m(r, i),
autoClose: i.autoClose,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
})), {
sequenceId: i.modalSequenceId
});
}), [ e, t, n, c, s, u, m ]), _ = H.useCallback((r => {
if (!c_(r)) return void f({
loading: !1,
skipped: !1,
error: new Error("Invalid player, not an EA account")
}, {});
const {name: i, playerNetworkId: o, targetPlayerId: a} = c(r), l = hF(e, t, n.history.location, r, "unblock", a), d = {
onSuccess: () => {
l();
},
onError: e => {
l(e);
}
};
s((() => H.createElement(wL, {
title: Em("PHOTON-SOCIAL_UNBLOCK_AFFIRM_TITLE", {
"%playerID%": NT({
name: i,
playerNetworkId: o
}, {
allowEllipsis: !0
})
}),
body: Em("PHOTON-SOCIAL_UNBLOCK_AFFIRM_DESC"),
onConfirm: () => y(r, d),
autoClose: !0,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
})));
}), [ e, t, n, c, s, f, y ]);
return H.useMemo((() => ({
block: I,
unblock: _
})), [ I, _ ]);
}
var [yF, IF] = Qs("BlockPlayerControlsContext"), _F = ({children: e}) => {
const t = gF();
return H.createElement(yF.Provider, {
value: t
}, e);
}, bF = Cl({
debugName: "noop",
default: {
skipped: !0,
loading: !1
}
});
function SF(e, t) {
const {skipQueryOnMount: n, queryIsReady: r = !0} = t, i = n || !r;
H.useEffect((() => {
i || e();
}), [ t.debugName, e, i ]);
}
function vF(e, t, n, r) {
return H.useCallback((async i => {
n((e => ({
...e,
loading: !0,
skipped: !1
})), i);
const o = await j_((() => e(i)), t, {
transformResponse: r.transformResponse,
debugName: r.debugName
});
return n(o, i), o;
}), [ r.debugName, r.transformResponse, n, t, e ]);
}
function TF(e) {
const t = H.useRef(!1);
return H.useEffect((() => (t.current = !0, () => {
t.current = !1;
})), []), H.useCallback((n => {
t.current && e(n);
}), [ e ]);
}
function EF(e) {
const t = pl(e.cache ?? bF);
return H.useCallback((n => {
e.cache && t(n);
}), [ e.cache, t ]);
}
function PF(e) {
const t = e.onSuccess, n = e.onError;
return H.useCallback(((e, r) => {
const i = "function" == typeof e ? e({
skipped: !1,
loading: !1
}) : e;
i.loading || !t && !n || (i.error && n ? n(i, r) : i.data && t && t(i, r));
}), [ n, t ]);
}
function OF(e, t) {
const n = TF(e), r = EF(t), i = PF(t), o = H.useMemo((() => {
const e = [ i ];
return t.cache ? e.push(r) : e.push(n), e;
}), [ t.cache, i, r, n ]);
return H.useCallback(((e, t) => {
o.forEach((n => n(e, t)));
}), [ o ]);
}
function CF(e, t, n, r = {}) {
const i = H.useCallback(e, t), [o, a] = H.useState({
skipped: !0,
loading: !1
}), s = dl(r.cache ?? bF), l = vF(i, n, OF(a, r), r);
SF(l, r);
const c = r.cache ? s : o;
return H.useMemo((() => ({
...c,
fetch: r.queryIsReady ?? 1 ? l : void 0
})), [ c, r.queryIsReady, l ]);
}
function NF(e, t, n, r = {}) {
const i = vF(H.useCallback(e, t), n, PF(r), r);
return r.queryIsReady ?? 1 ? i : void 0;
}
function AF() {
return ZO(Lw());
}
function LF(e) {
const {eaPlayerId: t} = s_(e);
return eC(Lw().get(), (e => t ? e.get(t) : void 0));
}
function wF(e) {
return eC(tw().get(), (t => e ? t.players.get(e) : void 0));
}
function kF() {
return eC(rw().get(), (e => e));
}
var RF = J_.object({
error: J_.optional(J_.string)
});
function xF() {
const {Voip: e} = Tm();
return NF((t => (ev(t, "Couldn't mute player, params were missing."), e.mutePlayer(t))), [ e ], RF);
}
function BF() {
const {Voip: e} = Tm();
return NF((t => (ev(t, "Couldn't unmute player, params were missing."), e.unmutePlayer(t))), [ e ], RF);
}
function DF() {
const {Voip: e} = Tm();
return NF((t => (ev(t, "Couldn't set muted players, params were missing."), e.setMutedPlayers(t))), [ e ], RF);
}
function FF() {
const e = xF(), t = BF(), n = DF(), r = H.useCallback((async e => {
if (n) return n({
playerIds: e
});
}), [ n ]);
return {
mutePlayer: H.useCallback((async t => {
if (e) return e({
playerId: t
});
}), [ e ]),
unmutePlayer: H.useCallback((async e => {
if (t) return t({
playerId: e
});
}), [ t ]),
setMutedPlayers: r
};
}
function MF() {
const {data: e} = AF(), {data: t} = eC(tw().get(), (e => e)), {mutePlayer: n, unmutePlayer: r, setMutedPlayers: i} = FF();
H.useEffect((() => {
nl((() => {
if (e && (e?.size ?? 0) > 0) {
const t = Array.from(e.keys());
i(t);
}
}));
}), [ n, e, i ]), H.useEffect((() => {
nl((() => {
if (e && t) return e?.observe_((({type: e, name: t}) => {
t && ("add" === e ? n(t) : "delete" === e && r(t));
}));
}));
}), [ n, e, r, t ]);
}
var UF = fm.XboxPlatform.XboxPermission, HF = fm.XboxPlatform.XblPermissionDenyReason, VF = fm.XboxPlatform.XUserPrivilege, JF = J_.object({});
function GF() {
const e = ol(), t = av(), n = QS("main"), {MuteService: r} = Tm(), {showNotification: i, showErrorNotification: o} = bO(), a = av(), {mutePlayer: s, unmutePlayer: l} = FF(), c = _l((({get: e, getItem: t}) => n => {
const r = e(fv).tokenInfo.userId, {eaPlayerId: i} = s_(n), {name: o, playerNetworkId: a} = t(kw, n);
return {
targetPlayerId: i,
name: o,
playerNetworkId: a,
isSelf: r === i,
ownPlayerId: r
};
}), []), d = H.useCallback((r => {
const {name: o, playerNetworkId: a, isSelf: s, targetPlayerId: l} = c(r);
s ? i(3, 3, {
icon: ih.MICROPHONE_MUTE,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE_SELF-MUTE")
}) : (i(3, 3, {
icon: ih.MUTE,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE_MUTE", {
"%primaryID%": NT({
name: o,
playerNetworkId: a
}, {
allowEllipsis: !0
})
})
}), fF(e, t, n.history.location, r, "mute", l));
}), [ e, t, n, c, i ]), u = H.useCallback(((r, i, a, s, l) => {
if (o(i, r + " player", a.error), s) {
const {targetPlayerId: i} = c(s);
fF(e, t, n.history.location, s, r, i, void 0, l ?? a.error?.message ?? "");
}
}), [ c, n, e, t, o ]), p = H.useCallback(((e, t) => {
u("mute", {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_MUTE-FAIL")
}, e, t);
}), [ u ]), f = H.useCallback(((e, t, n = {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_UNMUTE-FAIL")
}, r) => {
u("unmute", n, e, t, r);
}), [ u ]), h = H.useCallback((r => {
const {name: o, playerNetworkId: a, isSelf: s, targetPlayerId: l} = c(r);
s ? i(3, 3, {
icon: ih.MICROPHONE,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE_SELF-UNMUTE")
}) : (i(3, 3, {
icon: ih.VOLUME_UP,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE_UNMUTE", {
"%primaryID%": NT({
name: o,
playerNetworkId: a
}, {
allowEllipsis: !0
})
})
}), fF(e, t, n.history.location, r, "unmute", l));
}), [ e, t, n, c, i ]), m = H.useCallback((e => {
const {targetPlayerId: t, ownPlayerId: n} = c(e), i = j_((() => r.MutePlayer({
entityId: {
playerId: {
id: n
}
},
targetEntityId: {
playerId: {
id: t
}
}
})), JF);
return i.then((t => {
q_(t, {
onSuccess: () => d(e),
onError: () => p(t, e)
});
})), i;
}), [ c, r, p, d ]), g = _l((({get: e}) => (t, n) => {
if (!c_(t)) return void p({
loading: !1,
skipped: !1,
error: new Error("Invalid player, not an EA account")
});
const {isSelf: r, targetPlayerId: i} = c(t), o = nl((() => e(Aw).get().data));
r && i ? s(i).then((e => {
e?.error ? p(e, t) : d(t);
})) : i && o && (o.set(i, {
eaPlayerId: i,
photonPlayerId: i_({
eaPlayerId: i,
playerNetworkId: "EA"
})
}), m(t).then((e => {
e.error && o.delete(i);
}))), n && ME(a, {
...n,
option: "mute"
});
}), [ a, c, s, m, p, d ]), y = H.useCallback((e => {
const {targetPlayerId: t, ownPlayerId: n} = c(e), i = j_((() => r.UnmutePlayer({
entityId: {
playerId: {
id: n
}
},
targetEntityId: {
playerId: {
id: t
}
}
})), JF);
return i.then((t => {
q_(t, {
onSuccess: () => h(e),
onError: () => f(t, e)
});
})), i;
}), [ c, r, f, h ]), I = _l((({get: t}) => async (n, r) => {
if (!c_(n)) return void f({
loading: !1,
skipped: !1,
error: new Error("Invalid player, not an EA account")
});
const {isAllowed: i, privacyResult: o} = await QE(e, n, [ UF.CommunicateUsingVoice ], VF.Communications), s = o?.permissionChecks[0]?.permissionDeniedReason[0], {targetPlayerId: d, isSelf: u, name: p, playerNetworkId: m} = c(n);
if (!i) return void f({
loading: !1,
skipped: !1,
error: new Error("Prevented by xbox permissions")
}, n, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-UNMUTE", {
"%playerID%": NT({
name: p,
playerNetworkId: m
}, {
allowEllipsis: !0
}),
"%localPlatform%": Bv(TO(e).playerNetworkId)
}),
icon: ih.MUTE
}, void 0 !== s ? HF[s] : void 0);
const g = nl((() => t(Aw).get().data));
if (u && d) l(d).then((e => {
e?.error ? f(e) : h(n);
})); else if (d && y && g) {
const e = nl((() => g.get(d)));
e && (g.delete(d), y(n).then((t => {
t.error && g.set(d, e);
})));
}
r && ME(a, {
...r,
option: "unmute"
});
}), [ e, c, y, f, l, h, a ]);
return H.useMemo((() => ({
mute: g,
muteQuery: m,
unmute: I,
unmuteQuery: y
})), [ m, g, y, I ]);
}
var [zF, jF] = Qs("MutePlayerControlsContext"), qF = ({children: e}) => {
const t = GF();
return H.createElement(zF.Provider, {
value: t
}, e);
}, YF = [ hh({
radius: Zu.Card.Container.borderRadius
}), Qc({
color: Zu.Card.Container.color,
padding: [ Vc(Zu.Card.Container.paddingY), Vc(Zu.Card.Container.paddingX), Vc(Zu.Card.Container.paddingY), Vc(Zu.Card.Container.paddingX) ]
}) ], WF = ({children: e, style: t}) => H.createElement("surface", {
style: [ YF, t ]
}, e), KF = Qc({
marginBottom: Vc(Zu.Card.Headline.marginBottom)
}), XF = ({headline: e, body: t}) => H.createElement(WF, null, H.createElement(aL, {
text: e,
color: Zu.Card.Headline.color,
style: KF
}), H.createElement(IT, {
text: t,
color: Zu.Card.Body.color
}));
function QF() {
const [e, t] = H.useState((() => !1));
return {
isHovered: e,
hoverHooks: H.useMemo((() => ({
onMouseEnter: () => {
t(!0);
},
onMouseLeave: () => {
t(!1);
}
})), [])
};
}
var $F = Vc(Zu.ScrollBar.Container.width), ZF = Vc(200), eM = Vc(Zu.ScrollBar.Container.marginTop), tM = Qc({
width: $F,
position: "absolute",
top: 0,
right: 0,
bottom: 0,
backgroundColor: "#00000001"
}), nM = Qc({
width: $F,
borderRadius: Vc(Zu.ScrollBar.Container.borderRadius)
}), rM = Zu.ScrollBar.Container.backgroundColor, iM = Zu.ScrollBarHovered.Container.backgroundColor;
function oM(e, t, n, r, i) {
return e / (n - t) * (i - r);
}
function aM(e, t, n) {
const r = $p(), i = wl(), [o, a] = H.useState(!1), s = H.useRef({
isCapturing: !1
}).current, l = H.useRef(), c = H.useRef();
H.useEffect((() => () => {
s.isCapturing && (s.isCapturing = !1, r.inputHandler.stopCapture());
}), [ r, s ]);
const d = H.useMemo((() => {
const o = r => {
const i = l.current, o = c.current;
i && n && o && n(oM(r - i.bounds.absY, o.bounds.absHeight, i.bounds.absHeight, e, t));
};
return {
onScrollbarMouseDown: e => {
const t = c.current, n = t?.bounds, l = e.surfaces.find((e => e.surfaceId === t?.surfaceId));
if (!n || !l) return;
i.setMouseMode(!0);
const d = l.y + n.y - n.absY, u = Ph(i);
a(!0), s.isCapturing = !0, r.inputHandler.captureMouse(((e, t) => {
o(t - d);
}), (() => {
u(), a(!1), s.isCapturing = !1;
})), e.stopPropagation();
},
onScrollbarContainerMouseDown: e => {
i.setMouseMode(!0);
const t = l.current, n = c.current?.bounds, r = t?.bounds, a = e.surfaces.find((e => e.surfaceId === t?.surfaceId));
if (!a || !r || !n) return;
const s = a.y + r.y;
o(s - n.absHeight / 2);
},
onScrollbarContainerBounds: (e, t) => {
l.current = {
bounds: e,
surfaceId: t
};
},
onScrollbarBounds: (e, t) => {
c.current = {
bounds: e,
surfaceId: t
};
}
};
}), [ r, i, e, t, n, s ]);
return {
...d,
isScrolling: o
};
}
var sM = ({scrollPercent: e, containerHeight: t, contentHeight: n, visible: r = !0, setContentScrollPosition: i}) => {
const o = Math.max(Math.floor(t / n * t), ZF) + 2 * eM, a = Math.max(Math.min(e, 1), 0), s = Math.floor(a * (t - o)), l = id((() => ({
height: o - 2 * eM,
translateY: s + eM
})), [ o, s ]), {onScrollbarMouseDown: c, onScrollbarContainerMouseDown: d, onScrollbarContainerBounds: u, onScrollbarBounds: p, isScrolling: f} = aM(t, n, i), h = hP(f || r ? 1 : 0);
H.useEffect((() => {
h.to(f || r ? 1 : 0, {
duration: Rd.AnimationTime.fast
});
}), [ h, r, f ]);
const {isHovered: m, hoverHooks: g} = QF();
return n <= t || o >= t ? null : H.createElement("surface", {
style: tM,
onBounds: u,
onMouseDown: d
}, H.createElement("surface", {
style: [ nM, l, h.propStyle("opacity"), rd("backgroundColor", f || m ? iM : rM) ],
onBounds: p,
onMouseDown: c,
...g
}));
}, lM = Vc(1084), cM = lM - $F - 2 * YB, dM = Qc({
width: cM
}), uM = Qc({
marginBottom: Vc(Rd.DimensionSpace.small),
width: lM
}), pM = ({children: e, noScrollbar: t}) => H.createElement("surface", {
style: [ uM, t ? dM : void 0 ]
}, e), fM = Qc({
flexDirection: "row"
}), hM = ({children: e, justifyContent: t = "space-between"}) => H.createElement("surface", {
style: [ fM, rd("justifyContent", t) ]
}, e), mM = Qc({
width: Vc(570)
}), gM = ({children: e}) => H.createElement("surface", {
style: mM
}, e), yM = fm.InputBindings.Action, IM = Qc({
width: yf.width,
height: yf.height
}), _M = Qc({
height: Vc(314),
marginTop: Vc(Rd.DimensionLayout.smallest)
}), bM = Qc({
textEllipsis: !0,
marginBottom: Vc(Rd.DimensionSpace.large)
}), SM = Qc({
width: cM
}), vM = Qc({
width: cM
}), TM = ({title: e, body: t, actions: n, closeAction: r, closeLabel: i, buttonNarrationItem: o}) => {
const {closeModal: a} = CE(), [s, l] = H.useState();
NL({
title: e,
body: t,
overlayTitleNarrationItem: kL
}), HL({
callback: r || a,
label: i,
action: yM.Decline
});
const c = l, d = H.useCallback((e => {
l((t => t?.id === e.id ? void 0 : t));
}), [ l ]);
return H.createElement("surface", {
style: IM
}, H.createElement("surface", {
style: _M
}, H.createElement(lL, {
text: e,
color: Rd.TextColorStandard.emphasized,
style: bM
}), !!t && H.createElement(IT, {
text: t,
color: Rd.TextColorStandard.default,
style: SM
})), H.createElement(hM, null, H.createElement(pM, {
noScrollbar: !0
}, H.createElement(OL, {
actions: n,
onFocus: c,
onBlur: d,
alignStart: !0,
buttonStyle: vM,
buttonNarrationItem: o
})), H.createElement(gM, null, s?.title && s?.description ? H.createElement(XF, {
headline: s.title,
body: s.description
}) : void 0)));
};
function EM(e) {
const t = gv(), {eaPlayerId: n} = s_(e), {data: r} = wF(e), {data: i} = LF(e);
if (!c_(e)) return !1;
const o = t === n, a = r?.status === fm.Voip.VoipStatus.SelfMuted;
return o ? a : !!i;
}
function PM(e, t) {
const n = ol(), r = hv(), {mute: i, unmute: o} = jF(), a = EM(e), s = r.photonPlayerId === e, l = s && cw(n);
return H.useMemo((() => {
if (!(s && !Fs.isPartyEnabled || l) && c_(e)) return {
id: "mute_ea_friend",
text: Em(a ? "PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_UNMUTE" : "PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_MUTE"),
action: () => {
a ? o(e, t) : i(e, t);
}
};
}), [ e, s, a, l, o, t, i ]);
}
var OM = class {
constructor(e, t, n, r) {
this.photon = e, this.config = t, this.pinClient = n, this.onDone = r, this.current = {
state: 0
}, this.categoryPath = [], this.sendReport = e => {
const t = this.currentCategory;
if (t && 2 === this.current.state) {
this.current = {
state: 3
};
const n = this.getCurrentCategoryChain();
this.photon.Moderation.reportPlayer({
categoryId: t.categoryId,
targetPlayerId: this.config.targetPlayerId,
targetPlayerNetworkId: this.config.targetPlayerNetworkId,
targetPersonaId: this.config.targetPersonaId,
targetPersonaName: this.config.targetPersonaName
}).then((t => {
t?.success ? e(n) : (e(n, t?.errorMessage ?? "Unknown"), this.current = {
state: 4,
errorMessage: t?.errorMessage ?? Em("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_ERROR_ACTION-FAIL")
});
})).catch((() => {
this.current = {
state: 4,
errorMessage: Em("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_ERROR_ACTION-FAIL")
};
}));
} else this.current = {
state: 4,
errorMessage: Em("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_ERROR_ACTION-FAIL")
};
}, this.abortConfirmation = () => {
this.categoryPath.pop(), this.current = {
state: 0
};
}, Or(this, {
current: mt,
categoryPath: mt,
currentCategory: _t
}), this.photonPlayerId = i_({
eaPlayerId: this.config.targetPlayerId,
playerNetworkId: e_(this.config.targetPlayerNetworkId)
});
}
getCurrentCategoryChain() {
const e = [];
let t = this.config.categories;
return this.categoryPath.forEach((n => {
const r = t.find((e => e.categoryId === n));
r && (e.push(r), t = r.subCategories);
})), e;
}
get currentCategory() {
const e = this.getCurrentCategoryChain();
return e.length ? e[e.length - 1] : void 0;
}
currentCategories() {
return this.currentCategory?.subCategories ?? this.config.categories;
}
get title() {
return this.currentCategory?.title ?? this.config.title;
}
get description() {
return this.currentCategory?.description ?? Em("PHOTON-SOCIAL_REPORT_INTRO_DESC");
}
get telemetryPageId() {
const e = this.currentCategory;
return e ? `overlay_report_${e.telemetryName}` : "overlay_report";
}
abort() {
this.onDone(!0);
}
complete() {
this.onDone(!1);
}
goBack() {
ME(this.pinClient, {
pg_id: this.telemetryPageId,
msg_id: this.telemetryPageId,
option: "back"
}), 0 === this.current.state ? this.categoryPath.length > 0 ? this.categoryPath.pop() : this.abort() : this.complete();
}
selectCategory(e) {
if (0 !== this.current.state) return;
const t = this.currentCategories();
this.categoryPath.push(e.categoryId), 0 === e.subCategories.length && (this.current = {
state: 2
});
const n = 1 + t.findIndex((t => t.categoryId === e.categoryId));
ME(this.pinClient, {
pg_id: this.telemetryPageId,
msg_id: this.telemetryPageId,
option: "sub_category",
index: {
item_index: n,
total_items: t.length
}
});
}
}, CM = ({reportPlayer: e}) => {
const t = e.current, n = 4 === t.state ? t.errorMessage : void 0, {showErrorNotification: r} = bO();
return H.useEffect((() => {
r({
text: n
}, "report player error modal", new Error(n)), e.complete();
}), [ r, e, n ]), null;
}, NM = Ii.observer((({reportPlayer: e}) => {
const t = ol(), n = av(), r = QS("main"), i = e.photonPlayerId, {name: o, playerNetworkId: a} = xw(i);
if (2 !== e.current.state) return null;
const s = e.telemetryPageId, l = H.useCallback((() => {
ME(n, {
pg_id: s,
msg_id: s,
option: "back"
}), e.abortConfirmation();
}), [ n, s, e ]), c = H.useCallback((() => {
ME(n, {
pg_id: s,
msg_id: s,
option: "confirm"
}), e.sendReport(((i, o) => {
const a = i.map((e => ({
id: e.telemetryName,
name: e.title
})));
fF(t, n, r.history.location, e.photonPlayerId, "report", e.config.targetPlayerId, a, o), 
t.get(oI).addEvent({
eventType: "photon_player_grievance",
action: "report",
source: LE(r.history.location),
error: !!o,
error_code: o
});
}));
}), [ n, s, e, t, r ]);
return H.createElement(wL, {
title: Em("PHOTON-SOCIAL_REPORT_INTRO_TITLE", {
"%primaryID%": NT({
name: o,
playerNetworkId: a
}, {
allowEllipsis: !0
})
}),
body: Em("PHOTON-SOCIAL_REPORT_OVERLAY_DESC_CONFIRM", {
"%selectedCategory%": e.title
}),
cancelLabel: Em("BUTTON_BACK"),
onConfirm: c,
onCancel: l,
autoClose: !1,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
});
})), AM = Ii.observer((({reportPlayer: e}) => {
const t = e.photonPlayerId, {name: n, playerNetworkId: r} = xw(t), i = av(), {showNotification: o} = bO(), a = EM(t), {mute: s} = jF(), {data: l} = cF(t), {block: c} = IF(), d = e.telemetryPageId;
H.useEffect((() => {
o(3, 3, {
icon: ih.CHECK_CIRCLE,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_REPORT_CONFIRM", {
"%primaryID%": NT({
name: n,
playerNetworkId: r
}, {
allowEllipsis: !0
})
})
});
}), [ n, r, o ]);
const {actions: u, closeAction: p} = H.useMemo((() => {
const n = {
id: "done",
action: UE(i, (() => e.complete()), {
pg_id: d,
msg_id: d,
option: "done"
}),
label: Em("BUTTON_DONE")
}, r = [ n ], o = [];
return !a && s && o.push({
id: "mute_ea_friend",
label: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_MUTE"),
action: UE(i, (() => {
s(t), e.complete();
}), {
pg_id: d,
msg_id: d,
option: "mute"
})
}), l || o.push({
id: "block_ea_friend",
label: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_BLOCK"),
action: UE(i, (() => {
c(t), e.complete();
}), {
pg_id: d,
msg_id: d,
option: "block"
})
}), o.length && r.push({
id: "more_actions",
title: Em("PHOTON-SOCIAL_REPORT_PAGE-CONFIRM_SUBTITLE"),
body: Em("PHOTON-SOCIAL_REPORT_PAGE-CONFIRM_ADDITIONAL_DESC"),
actions: o
}), {
closeAction: n.action,
actions: r
};
}), [ a, s, l, e, d, i, t, c ]);
return H.createElement(LL, {
title: Em("PHOTON-SOCIAL_REPORT_PAGE-CONFIRM_TITLE"),
body: Em("PHOTON-SOCIAL_REPORT_PAGE-CONFIRM_DESC"),
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO,
actions: u,
closeAction: p,
closeLabel: Em("BUTTON_DONE"),
withoutCloseButton: !0,
withoutGlobalCloseInputLabel: !0
});
})), LM = Ii.observer((({reportPlayer: e}) => {
const t = H.useCallback((() => {
e.goBack();
}), [ e ]), n = e.current, r = e.currentCategories(), i = e.telemetryPageId, o = H.useMemo((() => r.map((t => ({
id: t.categoryId,
label: t.title,
title: t.title,
description: t.description,
action: () => e.selectCategory(t)
})))), [ r, e ]);
return NE(i), 4 === n.state ? H.createElement(CM, {
reportPlayer: e
}) : 2 === n.state ? H.createElement(NM, {
reportPlayer: e
}) : 3 === n.state ? H.createElement(AM, {
reportPlayer: e
}) : H.createElement(TM, {
closeAction: t,
closeLabel: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK"),
title: e.title,
body: e.description,
actions: o,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
});
})), wM = () => {
const e = Tm(), {showModal: t, closeModal: n} = CE(), r = ol(), {showErrorNotification: i} = bO(), o = av(), a = fk(), s = H.useCallback((async s => {
const {name: l, playerNetworkId: c} = Rw(r, s), d = nl((() => LA(r, s).data));
if (d && d.eaPlayerId && d.personaId) try {
const r = await e.Moderation.getReportCategories({
targetPlayerId: d.eaPlayerId,
targetPlayerNetworkId: d.playerNetworkId,
targetPersonaId: d.personaId,
targetPersonaName: d.displayName
});
if (!r?.categories) return void i(void 0, "open report player modal", new Error("Empty report player categories"));
if (0 === r?.categories.length) {
const {data: e} = await yI(a.get(Fs.productId));
return t((() => H.createElement(LL, {
title: Em("PHOTON-SOCIAL_REPORT_OVERLAY_UNREPORTABLE_TITLE"),
body: Em("PHOTON-SOCIAL_REPORT_OVERLAY_UNREPORTABLE_DESC", {
"%gameName%": e?.title ?? Em("PHOTON-SOCIAL_GAME-NAME-FALLBACK")
}),
actions: [],
closeAction: () => {
ME(o, {
pg_id: "overlay_reporting_unavailable",
msg_id: "overlay_reporting_unavailable",
option: "got_it"
}), n();
},
closeLabel: Em("BUTTON_GOT-IT"),
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
})), {
telemetryId: "overlay_reporting_unavailable"
});
}
const s = {
targetPlayerId: d.eaPlayerId,
targetPlayerNetworkId: d.playerNetworkId,
targetPersonaId: d.personaId,
targetPersonaName: d.displayName,
title: Em("PHOTON-SOCIAL_REPORT_INTRO_TITLE", {
"%primaryID%": NT({
name: l,
playerNetworkId: c
})
}),
categories: r.categories
}, u = new OM(e, s, o, (() => {
n();
}));
return t((() => H.createElement(LM, {
reportPlayer: u
})), {
telemetryId: "overlay_report"
}), () => u.abort();
} catch (e) {
i(void 0, "open report player modal", e);
}
}), [ a, o, n, r, e, i, t ]);
return {
openReportPlayerModal: s
};
};
function kM(e, t, n) {
const {isCurrentEaUser: r} = Iv(e), {openReportPlayerModal: i} = wM(), o = ol();
return H.useMemo((() => {
if (c_(e)) return r ? void 0 : {
id: "report_ea_friend",
text: Em("BUTTON_REPORT"),
action: zE(o, e, t, (() => i(e)), n && {
msg_id: n.destination_name,
option: "report",
...n
})
};
}), [ o, r, i, e, t, n ]);
}
function RM(e, t, n) {
return e && e.playerNetworkId === n && e.playerId === t;
}
function xM(e, t) {
return RM(e?.partyLeader, t?.tokenInfo.userId, t?.personaInfo.playerNetworkId);
}
var BM = J_.object({}), DM = {
setPartyLeader: "overlay_promote_player",
kickPartyMember: "overlay_kick_player"
}, FM = (e, t) => ({
pg_id: DM[e],
msg_id: DM[e],
option: t
}), MM = ({method: e, getSuccessMessage: t, icon: n, getConfirmTitle: r, getConfirmBody: i, getErrorMessage: o, telemetryId: a}) => El({
debugName: "party leader " + e,
create: s => {
const l = s.get(sI), c = s.get(ov), d = s.get(OE), {showNotification: u, showErrorNotification: p} = s.get(_O);
return f => {
const h = mv(s);
if (!xM(nl((() => uN(s).data)), h)) return void p({}, "party leader" + e, new Error("not party leader"));
const m = NT(Rw(s, f), {
allowEllipsis: !0
}), g = t => {
const n = nl((() => uN(s).data));
Rk(s, e, f, n, t);
}, y = UE(c, (async () => {
const r = await j_((() => {
const {eaPlayerId: t, playerNetworkId: n} = s_(f);
return ev(t), l.Party[e]({
playerId: t,
playerNetworkId: n
});
}), BM);
r.error ? p(o && {
text: o(m)
}, "party leader " + e, r.error) : u(3, 3, {
icon: n,
text: t(m)
}), g(r.error);
}), FM(e, "confirm")), I = () => ME(c, FM(e, "cancel"));
d.showModal((() => H.createElement(wL, {
title: r(m),
body: i(m),
onConfirm: y,
onCancel: I,
showLoadingOnConfirm: !0,
autoClose: !0,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
})), {
telemetryId: a
});
};
}
}), [UM, HM] = MM({
method: "kickPartyMember",
getSuccessMessage: e => Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_REMOVE", {
"%primaryID%": e
}),
icon: ih.REMOVE,
getConfirmTitle: e => Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_KICK", {
"%primaryID%": e
}),
getConfirmBody: () => Em("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_KICK"),
getErrorMessage: () => Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_KICK-PLAYER-FAIL"),
telemetryId: "overlay_kick_player"
}), VM = Sl({
debugName: "isCurrentUserPartyLeader",
get: function({get: e}) {
if (!Fs.isPartyEnabled) return !1;
const t = e(fv), {data: n} = e(bC).get();
return xM(n, t);
}
});
function JM() {
return dl(VM);
}
function GM({title: e, body: t, actions: n, overlayTitleNarrationItem: r, buttonNarrationItem: i}, o) {
const {showModal: a} = CE();
return H.useCallback((() => {
a((() => H.createElement(LL, {
title: e,
body: t,
actions: n,
overlayTitleNarrationItem: r,
buttonNarrationItem: i,
withoutCloseButton: !0,
withoutGlobalCloseInputLabel: !0
})), {
sequenceId: o
});
}), [ a, o, e, t, n, r, i ]);
}
function zM(e, t, n) {
const r = ol(), {closeModal: i} = CE(), o = "block_ea_friend", a = EM(e), {mute: s} = jF(), {openReportPlayerModal: l} = wM(), c = JM(), d = lN((t => t.has(e))).data, u = H.useMemo((() => {
const t = [];
if (c && d) {
const n = r.get(UM);
t.push({
id: "kick",
action: () => {
n(e), i();
},
label: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_REMOVE")
});
}
return !a && s && t.push({
id: "mute",
action: () => {
s(e), i();
},
label: Em("BUTTON_MUTE")
}), t.push({
id: "report",
action: () => {
l(e), i();
},
label: Em("BUTTON_REPORT")
}), [ {
id: "close",
action: () => {
i();
},
label: Em("BUTTON_DONE")
}, {
id: "additionalSteps",
title: Em("PHOTON-SOCIAL_BLOCK_CONFIRM_SUBTITLE"),
body: Em("PHOTON-SOCIAL_BLOCK_CONFIRM_DESC"),
actions: t
} ];
}), [ r, a, s, i, l, e, c, d ]), p = GM({
title: Em("PHOTON-SOCIAL_BLOCK_CONFIRM_TITLE"),
actions: u,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
}, o), {block: f, unblock: h} = IF(), {data: m} = cF(e), {isCurrentEaUser: g} = Iv(e);
return H.useMemo((() => {
if (c_(e) && !g) {
const i = () => {
m ? h(e) : f(e, {
onSuccess: p,
modalSequenceId: o,
autoClose: !1
});
};
return {
id: "block_ea_friend",
text: Em(m ? "PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_UNBLOCK" : "PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_BLOCK"),
action: zE(r, e, t, i, n && {
msg_id: n.destination_name,
...n,
option: m ? "unblock" : "block"
})
};
}
}), [ p, g, m, n, h, e, t, f, r ]);
}
var jM = (e, t) => {
e(3, 3, {
icon: ih.INFORMATION,
text: t
}, {
screenTimeInSec: 6
});
}, qM = (e, t, n) => {
const r = IE(), i = ol(), o = hv(), {showNotification: a, showErrorNotification: s} = bO(), l = H.useCallback((async () => nl((async () => {
try {
const t = LA(i, e).data;
if (!t || !t.eaPlayerId) throw Error("Could not find player info.");
const n = i.get(PS).get().data?.get(e);
if (n) {
a(3, 3, {
icon: ih.STAR,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ADD-FAVORITE", {
"%primaryID%": NT(kO(i, t, o), {
allowEllipsis: !0
})
})
});
const n = await r.addFavoriteFriend(e);
if (n && "error" in n && n.error instanceof Error) throw n.error;
return n;
}
const s = i.get(aE).get().data?.get(t.eaPlayerId);
if (s) return jM(a, Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ADD-FAVORITE-PENDING-SENT"));
const l = i.get(iE).get().data?.get(t.eaPlayerId);
if (l) return jM(a, Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ADD-FAVORITE-PENDING-RECEIVED"));
jM(a, Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ADD-FAVORITE-NOT-CONNECTED"));
} catch (e) {
s({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_ADD-FAVORITE-FAIL")
}, "add favorite ea friend", e);
}
}))), [ i, e, s, a, r, o ]);
return zE(i, e, t, l, n && {
...n,
option: "add_fav"
});
}, YM = (e, t, n) => {
const r = IE(), i = ol(), o = hv(), {showNotification: a, showErrorNotification: s} = bO(), l = H.useCallback((async () => {
try {
const t = nl((() => LA(i, e).data));
if (!t) throw Error("Could not find player info.");
a(3, 3, {
icon: ih.REMOVE,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_REMOVE-FAVORITE", {
"%primaryID%": NT(kO(i, t, o), {
allowEllipsis: !0
})
})
});
const n = await r.removeFavoriteFriend(e);
if (n && "error" in n && n.error instanceof Error) throw n.error;
} catch (e) {
s({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_REMOVE-FAVORITE-FAIL")
}, "remove favorite ea friend", e);
}
}), [ i, e, s, a, r, o ]);
return zE(i, e, t, l, n && {
...n,
option: "remove_fav"
});
};
function WM(e, t) {
return {
id: e ? "remove_ea_favorite_friend" : "add_ea_favorite_friend",
keepOverlay: t
};
}
var KM = vl({
debugName: "eaFriendActionsState",
get: function(e, {get: t}) {
const {isCurrentEaUser: n} = _v(t, e);
if (n) return [];
const r = e ? s_(e).eaPlayerId : void 0;
if (!r || !e) return [];
const {data: i} = t(b_).get(e), {data: o} = t(lS).get(), {data: a} = t(PS).get(), {data: s} = t(yE).get();
if (!i || !a || !o || o.has(r) || !s) return [];
const l = s.has(r);
if (a.has(e)) return [ WM(l, !1), {
id: "remove_ea_friend"
} ];
const {data: c} = t(aE).get();
if (c?.get(r)) return [ {
id: "cancel_ea_friend_request"
}, WM(l, !0) ];
const {data: d} = t(iE).get();
return d?.get(r) ? [ {
id: "accept_ea_friend_request"
}, {
id: "decline_ea_friend_request"
}, WM(l, !0) ] : [ {
id: "add_ea_friend"
}, WM(l, !0) ];
}
}), XM = (e, t, n) => {
const r = dx(e, n), i = hx(e, n), o = eL(e, t, n), a = tL(e, t, n), s = nL(e, t, n), l = qM(e, t, n), c = YM(e, t, n), d = ul(KM, e);
return H.useMemo((() => d.map((e => {
const {id: t, keepOverlay: n} = e;
return "add_ea_favorite_friend" === t && l ? {
id: t,
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ADD-FAVORITE"),
action: l,
icon: ih.STAR,
keepOverlay: n
} : "remove_ea_favorite_friend" === t && c ? {
id: t,
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_REMOVE-FAVORITE"),
action: c,
keepOverlay: n
} : "add_ea_friend" === t && r ? {
id: t,
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-ADD"),
action: r.performAction,
keepOverlay: n
} : "remove_ea_friend" === t && i ? {
id: t,
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-REMOVE"),
action: i,
keepOverlay: n
} : "accept_ea_friend_request" === t && o ? {
id: t,
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-ACCEPT"),
action: o,
keepOverlay: n
} : "cancel_ea_friend_request" === t && s ? {
id: t,
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-RESCIND"),
action: s,
keepOverlay: n
} : "decline_ea_friend_request" === t && a ? {
id: t,
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-EA_FRIEND-DECLINE"),
action: a,
keepOverlay: n
} : void 0;
})).filter((e => !!e))), [ d, l, c, r, i, o, s, a ]);
};
function QM(e, t, n, r, i, o) {
return UE(t, (() => {
o.DeepLink.invokePlayerAction({
playerId: n.eaPlayerId,
playerNetworkId: n.playerNetworkId,
personaId: n.personaId,
playerActionId: e.playerActionId
}), i.close();
}), r && {
...r,
option: "game_action",
context: {
game_action: e.telemetryName
}
});
}
function $M(e, t, n, r, i, o, a) {
return UE(t, ok({
action: e,
DeepLink: i.DeepLink,
notifications: o,
modals: a,
player: n,
showLoading: !1
}), r && {
...r,
option: "game_action",
context: {
game_action: e.telemetryName
}
});
}
var ZM = (e, t) => {
const n = Tm(), r = gA(), i = av(), o = CE(), a = bO(), {data: s} = kA(e), l = !!s_(e).eaPlayerId, [c, d] = H.useState({
actions: [],
isLoading: n.hasMethod("DeepLink", "getPlayerActionsAsync") && l
});
return H.useEffect((() => {
const {eaPlayerId: e, playerNetworkId: l, personaId: c} = s ?? {};
if (!e || !l || !c) return;
(async () => {
const t = [];
if (n.hasMethod("DeepLink", "getPlayerActionsAsync")) {
const r = await n.DeepLink.getPlayerActionsAsync({
playerId: e,
playerNetworkId: l,
personaId: c
});
r?.actions && t.push(...r.actions);
}
if (n.hasMethod("DeepLink", "getPlayerActions")) {
const r = n.DeepLink.getPlayerActions({
playerId: e,
playerNetworkId: l,
personaId: c
});
r?.actions && t.push(...r.actions);
}
return t;
})().then((s => {
if (!s.length) return void d({
actions: [],
isLoading: !1
});
const u = n.hasMethod("DeepLink", "invokePlayerActionAsync");
return d({
actions: s.map((s => ({
id: `game_${s.playerActionId}`,
text: s.localizedName,
icon: u ? void 0 : ih.OPEN_EXTERNAL,
action: u ? $M(s, i, {
eaPlayerId: e,
playerNetworkId: l,
personaId: c
}, t, n, a, o) : QM(s, i, {
eaPlayerId: e,
playerNetworkId: l,
personaId: c
}, t, r, n)
}))),
isLoading: !1
});
})).catch((e => {}));
}), [ s, n, i, t, r, a, o ]), c;
}, [eU, tU] = MM({
method: "setPartyLeader",
getSuccessMessage: e => Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_PROMOTE", {
"%primaryID%": e
}),
icon: ih.PARTY_LEADER,
getConfirmTitle: e => Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_PROMOTE", {
"%primaryID%": e
}),
getConfirmBody: e => Em("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_PROMOTE", {
"%primaryID%": e
}),
getErrorMessage: () => Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_PROMOTE-PLAYER-FAIL"),
telemetryId: "overlay_promote_player"
}), nU = J_.object({});
async function rU(e, t) {
const n = await j_((() => e.leaveParty({})), nU);
return n.error || t.updateParty(void 0), n;
}
function iU(e) {
return {
status: "click",
pg_id: "overlay_leave_current_party",
msg_id: "overlay_leave_current_party",
option: e
};
}
async function oU(e, t, n, r, i, o) {
const {showNotification: a, showErrorNotification: s} = r, l = await rU(t, n);
return l.error ? s({
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_LEAVE-PARTY-FAIL")
}, "leave party", l.error) : a(3, 3, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PARTY_LEFT"),
icon: ih.EXIT
}), kk(e, i, o, l.error), l;
}
function aU() {
const e = bO(), {showModal: t} = CE(), n = SC(), r = ol(), i = Tm(), {data: o} = lN((e => e.size)), a = av(), s = void 0 !== o && o > 1;
return H.useMemo((() => {
if (s) {
return {
leaveParty: () => new Promise((o => {
const {data: s} = MO(r), {data: l} = uN(r), c = async () => {
const t = await oU(r, i.Party, n, e, l, s);
o(t);
};
t((() => {
return H.createElement(wL, {
title: Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_LEAVE-PARTY"),
body: (e = !Fs.isTightlyCoupledParties, t = i.Notifications.getInGamePlay({})?.inGamePlay ?? !1, 
n = !!s, Em(t && e && n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-A" : t && e && !n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-B" : t && !e ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-C" : !t && e && n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-D" : t || !e || n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-F" : "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_LEAVE-PARTY-E")),
confirmLabel: Em("BUTTON_CONTINUE"),
onConfirm: UE(a, c, iU("continue")),
onCancel: UE(a, (() => o(void 0)), iU("cancel")),
showLoadingOnConfirm: !0,
autoClose: !0,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
});
var e, t, n;
}), {
telemetryId: "overlay_leave_current_party"
});
})),
isLeaveable: s
};
}
return {
leaveParty: void 0,
isLeaveable: s
};
}), [ s, r, t, n, e, a, i ]);
}
var sU = vl({
debugName: "playerCanJoinMyLobbyState",
get: function(e, {get: t, getItem: n}) {
if (Fs.isTightlyCoupledParties) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
}
};
const {photonPlayerId: r} = h_(e);
if (!c_(r)) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("INVALID_USER")
};
const i = t(DO).get(), o = t(bC).get(), a = t(b_).get(r), s = n(nE, r), l = n(oN, r), c = hI([ i, a, s ]), d = o.data;
if (c.loading || c.uninitialized) return c;
const u = i.data;
if (!u) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("NO_LOBBY")
};
if (!a.data) return {
loading: !1,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("NO_PLAYER_INFO")
};
if (!u.invitable) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("LOBBY_UNINVITABLE")
};
const p = !!u.members.get(r);
if (!(u.members.size < u.maxSize)) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("LOBBY_FULL")
};
if (p) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("USER_IN_LOBBY")
};
if (d) {
if (!d.invitable) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("PARTY_NOT_INVITABLE")
};
if (d.members.size >= d.maxSize) return {
data: {
invitable: !1,
incompatible: !1
},
loading: !1,
error: new Error("PARTY_FULL")
};
}
if (!s.data && !l) return {
...s,
data: {
invitable: !1,
incompatible: !1
},
error: new Error("NO_RELATION")
};
const f = t(kC).get(r)?.uninvitable;
return hC(n(NC, e)) ? {
data: {
invitable: !1,
incompatible: !0
},
loading: !1,
error: new Error("CROSSPLAY_PREVENTED")
} : f ? {
data: {
invitable: !1,
incompatible: !0
},
loading: !1,
error: new Error("INVITE_PREVENTED")
} : {
data: {
invitable: !0,
incompatible: !1
},
loading: !1,
error: void 0
};
}
}), lU = vl({
debugName: "commonInviteOptionsState",
get: function(e, {getItem: t}) {
const n = t(cN, e), r = t(sU, e), i = hI([ n, r ]);
if (n.data && r.data) {
const {data: e} = n, {data: t} = r, o = e.invitable, a = t.invitable;
return {
...i,
data: {
canInvite: a || o,
isMyPartyJoinable: o,
isMyLobbyJoinable: a,
isIncompatible: e.incompatible || t.incompatible,
gameInviteTypes: sR(o, a)
}
};
}
return {
...i,
data: void 0
};
}
}), cU = (e, t) => ul(lU, m_(e, t));
function dU(e, t) {
const {data: n} = dR(e), r = Fs.isPartyEnabled && n?.gameJoinTokenTypes.includes("party"), i = n?.gameJoinTokenTypes.includes("lobby"), o = n && n.senderProductId === Fs.productId, a = n && !tR(n).expired && o, s = LC(e, t) && a, {acceptInvite: l} = SR(e, t);
return {
joinable: a,
crossplayPrevented: s,
acceptGameInvite: H.useCallback((async () => {
const e = [];
return r && e.push("party"), i && e.push("lobby"), l(e);
}), [ l, r, i ]),
gameInvite: n,
isPartyGameInvite: r,
isLobbyGameInvite: i,
isGameInviteForSameGame: o
};
}
var uU = (e, t) => {
const {joinable: n, crossplayPrevented: r, acceptGameInvite: i, gameInvite: o, isPartyGameInvite: a, isLobbyGameInvite: s, isGameInviteForSameGame: l} = dU(e, t), {joinable: c, crossplayPrevented: d, directJoinParty: u} = Vk(e, t), {joinable: p, crossplayPrevented: f, directJoinLobby: h} = qk(e, t), m = d || f || r, g = Kk(e), y = !m && (n || c || p), I = H.useCallback((async () => {
n ? await i() : c && p && u && h ? await g() : c && u ? await u() : p && h && await h();
}), [ n, p, c, i, h, u, g ]);
return H.useMemo((() => ({
canJoin: y,
joinAction: I,
gameInvite: o,
isCrossplayPrevented: m,
isGameInviteForSameGame: l,
isPartyGameInvite: a,
isLobbyGameInvite: s,
isPartyJoinable: c,
isLobbyJoinable: p
})), [ y, o, m, l, s, p, a, c, I ]);
};
function pU(e) {
return nl((() => {
const t = new Set;
let n = 0;
const r = e.get(pA).data?.[0];
if (r) for (const {presence: i} of r) {
const {photonPlayerId: r, photonSessionId: o} = i, {eaPlayerId: a} = s_(r);
if (!a) continue;
const s = m_(r, o);
(e.getItem(Jk, s).data?.joinable || e.getItem(Bk, s).data?.joinable || e.getItem(sU, s).data?.invitable || e.getItem(cN, s).data?.invitable) && (t.add(a), 
n++);
}
return {
frnds_on_act: t.size,
pop_on_act: n
};
}));
}
var fU = (e, t, n, r, i) => () => zE(e, t, n, r, i && {
...i,
context: {
...pU(e),
...i.context
}
})(), hU = (e, t, n) => {
const r = ol(), i = av(), o = hv(), {data: a} = sN(), {data: s} = cU(e, t), {isActionTaken: l, performAction: c} = YR(e), d = dN(e, t), {gameInvite: u, isGameInviteForSameGame: p, isPartyGameInvite: f, isLobbyGameInvite: h, isPartyJoinable: m, isLobbyJoinable: g, joinAction: y, canJoin: I} = uU(e, t), _ = u?.senderProductId ?? Fs.productId, {declineInvite: b} = SR(e, t, n), {isLeaveable: S, leaveParty: v} = aU();
return H.useMemo((() => {
const T = [], {isCurrentPhotonUser: E} = yv(e, o);
if (E) S && v && T.push({
id: "party_leave",
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_LEAVE"),
action: UE(i, v, {
pg_id: "overlay_player_actions_self",
msg_id: "overlay_player_actions_self",
option: "leave_party"
})
}); else {
if (u) {
p && I && (f ? T.push({
id: "party_join",
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_JOIN"),
action: fU(r, e, t, y, n && {
...n,
option: "join_party_invite",
context: {
tpid: _
}
})
}) : h && !f && T.push({
id: "lobby_join",
text: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-JOIN"),
action: fU(r, e, t, y, n && {
...n,
option: "join_lobby_invite",
context: {
tpid: _
}
})
}), f && h && T.push({
id: "combo_join",
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-JOIN-COMBO"),
action: fU(r, e, t, y, n && {
...n,
option: "join_combo_invite",
context: {
tpid: _
}
})
}));
const {expired: i} = tR(u);
if (!i) {
let i = "not_set";
f && h ? i = "decline_combo_invite" : f && !h ? i = "decline_party_invite" : !f && h && (i = "decline_lobby_invite"), 
T.push({
id: "invite_decline",
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-INVITE-DECLINE"),
action: zE(r, e, t, b, n && {
...n,
option: i,
context: {
tpid: _
}
})
});
}
} else m && g && I ? T.push({
id: "combo_join",
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-JOIN-COMBO"),
action: fU(r, e, t, y, n && {
...n,
option: "join_combo_hot_join",
context: {
tpid: _
}
})
}) : m ? T.push({
id: "party_join",
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_JOIN"),
action: fU(r, e, t, y, n && {
...n,
option: "join_party_hot_join",
context: {
tpid: _
}
})
}) : g && T.push({
id: "lobby_join",
text: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-JOIN"),
action: fU(r, e, t, y, n && {
...n,
option: "join_lobby_hot_join",
context: {
tpid: _
}
})
});
if (s?.canInvite) {
let i, o, a;
s.isMyLobbyJoinable && s.isMyPartyJoinable ? (o = "combo_invite", i = Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-LOBBY"), 
a = "invite_to_combo") : s.isMyPartyJoinable ? (o = "party_invite", i = Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-PARTY"), 
a = "invite_to_party") : (o = "lobby_invite", i = Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-LOBBY"), 
a = "invite_to_lobby"), T.push({
id: o,
isDisabled: l,
text: i,
disabledContent: H.createElement(bD, {
textColor: Rd.TextColorStandard.emphasized,
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_INVITE-SENT")
}),
action: fU(r, e, t, (() => c(s.gameInviteTypes)), n && {
...n,
context: {
tpid: _
},
option: a
})
});
}
if (a && d && xM(a, o)) {
if (a.promotionEnabled) {
const t = r.get(eU);
T.push({
id: "party_promote_leader",
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_PROMOTE"),
action: UE(i, (() => t(e)), n && {
...n,
option: "promote_to_party_leader"
})
});
}
const t = r.get(UM);
T.push({
id: "party_kick_player",
text: Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_REMOVE"),
action: UE(i, (() => t(e)), n && {
...n,
option: "remove_from_party"
})
});
}
}
return T;
}), [ _, r, e, t, o, S, v, u, m, g, I, s, a, d, p, f, h, i, y, n, b, l, c ]);
};
function mU(e, t, n) {
const r = hv(), i = xA(e, n);
return H.useMemo((() => {
const n = i.data.filter((n => {
const i = n.photonPlayerId !== e, o = "EA" === n.playerNetworkId || r.playerNetworkIds.includes(n.playerNetworkId);
return t ? i && o : i;
})).sort((e => "EA" === e.playerNetworkId ? -1 : 1));
return {
...i,
data: n
};
}), [ r, i, e, t ]);
}
function gU(e) {
return "NINTENDO" === e ? Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-PLATFORM_VIEW_SWITCH") : Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-PLATFORM_VIEW", {
"%localPlatform%": Bv(e)
});
}
var yU = (e, t) => {
const {playerNetworkId: n} = vO(), r = Tm(), i = gA(), o = av(), {showNotification: a} = bO(), {navigate: s} = XS(), l = H.useCallback((() => s($S.link())), [ s ]), {data: c} = mU(e, !0), {data: d} = kA(e), u = d?.playerNetworkId === n ? d : c.find((e => e.playerNetworkId === n));
return H.useMemo((() => {
const e = [];
if (!u || u.playerNetworkId !== n) return e;
const s = "EA" === u.playerNetworkId ? u.eaPlayerId : u.firstPartyPlayerId;
return s ? (e.push({
id: "platform_view_profile",
text: gU(n),
action: UE(o, (async () => {
try {
if (r.hasMethod("DeepLink", "openFirstPartyProfileAsync")) {
const e = await r.DeepLink.openFirstPartyProfileAsync({
playerId: s
});
e?.errorMessage && a(0, 0, {
text: e.errorMessage,
icon: ih.WARNING,
iconColor: Rd.ColorSystem.warning
});
} else r.DeepLink.openFirstPartyProfile({
playerId: s
});
l(), i.close();
} catch (e) {
Fs.isPC && a(0, 0, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_ERROR_VIEW-PROFILE-FAIL"),
icon: ih.WARNING,
iconColor: Rd.ColorSystem.warning
});
}
}), t && {
...t,
option: "view_local_platform_profile"
}),
icon: ih.OPEN_EXTERNAL,
keepOverlay: !0
}), e) : e;
}), [ u, n, o, t, r, l, i, a ]);
};
function IU(e, t, n) {
const {navigate: r} = XS("overlay"), {isCurrentEaUser: i} = Iv(e), o = H.useCallback((() => {
r(i ? uF.link({
photonPlayerId: e,
photonSessionId: t
}) : dF.link({
photonPlayerId: e,
photonSessionId: t
}));
}), [ i, r, e, t ]);
return jE(e, t, o, n && {
option: "see_player_actions",
msg_id: n.destination_name,
...n
});
}
var _U = [ "party_join", "lobby_join", "combo_join", "party_invite", "lobby_invite", "combo_invite", "add_ea_friend", "accept_ea_friend_request" ], bU = (e, t, n) => {
const r = [];
return e.forEach((e => {
if (e) {
if (n && _U.includes(e.id)) return;
r.push({
...e,
action: () => {
e.action(), e.keepOverlay || t();
}
});
}
})), r;
}, SU = {
pg_id: "overlay_player_actions_other",
msg_id: "overlay_player_actions_other"
}, vU = (e, t, n) => {
const {isCurrentEaUser: r} = Iv(e), i = !!cF(e).data, o = hU(e, t, SU), a = XM(e, t, SU), s = yU(e, SU), l = ZM(e, SU), c = PM(e, H.useMemo((() => {
const e = r ? "overlay_player_actions_self" : "overlay_player_actions_other";
return {
pg_id: e,
msg_id: e
};
}), [ r ])), d = zM(e, t, SU), u = kM(e, t, SU);
return H.useMemo((() => {
const e = [];
return o && e.push({
id: Fs.isPartyEnabled ? "party_actions" : "lobby_actions",
actions: bU(o, n, i)
}), e.push({
id: "ea_actions",
actions: bU([ c, ...a, d, u ], n, i)
}), s && e.push({
id: "platform_actions",
actions: bU(s, n, i)
}), e.push({
id: "game_actions",
isLoading: l.isLoading,
actions: bU(l.actions, n, i)
}), e;
}), [ o, d, c, a, u, n, i, s, l ]);
}, TU = ({children: e, navigate: t}) => {
const n = Ep(), r = H.useCallback(((e, r) => {
const i = t(e, r);
return i !== Xp ? i : n(e, r);
}), [ t, n ]);
return H.createElement(Tp.Provider, {
value: r
}, e);
}, EU = Qc({
position: "relative",
layer: !0,
layerClip: !0
});
function PU({rows: e, height: t, width: n, scrollPosition: r, style: i, prefetchRows: o}) {
const a = e[e.length - 1]?.bottom ?? 0, s = Math.max(0, Math.min(a - t, r)), l = id((() => ({
height: t,
width: n
})), [ t, n ]), c = s, d = c + t, u = [], p = [], f = [];
let h;
for (let t = 0, n = e.length; t < n; t++) {
const n = e[t];
if (n.bottom > c && n.top < d) 0 === u.length && t > 0 && p.push(e[t - 1]), u.push(n); else if (u.length > 0) {
f.push(e[t]), o && (h = e.slice(t + 1, t + 1 + o));
break;
}
}
const m = [ ...p, ...u, ...f ];
return H.useEffect((() => {
if (h) {
for (let e = 0, t = m.length; e < t; e++) {
const t = m[e];
t.prefetch?.(t.renderProps);
}
for (let e = 0, t = h.length; e < t; e++) {
const t = h[e];
t.prefetch?.(t.renderProps);
}
}
})), H.createElement("surface", {
style: [ EU, l, i ]
}, m.map((e => e.render(e.top - s, e.renderProps))));
}
var OU = Qc({
layer: !0,
layerClip: !0
}), CU = (e, t, n = Vc(64)) => {
const r = e ? rd("layerSoftClipTop", n) : void 0, i = t ? rd("layerSoftClipBottom", n) : void 0;
return [ OU, r, i ];
}, NU = ({fadeTop: e, fadeBottom: t, fadeHeight: n = Vc(64), style: r, children: i}) => {
const o = CU(e, t, n);
return H.createElement("surface", {
style: [ o, r ]
}, i);
}, AU = class {
constructor() {
this.height = 0, this.rows = [];
}
addRow(e, t, n, r, i, o, a) {
this.rows.push({
focused: i,
focusId: t,
render: n,
renderProps: r,
prefetch: o,
top: this.height,
bottom: this.addSpace(e)
}), void 0 !== a && this.addSpace(a);
}
addSpace(e) {
return this.height += e, this.height;
}
}, LU = Ii.observer((e => {
const {onMouseScroll: t, height: n, contentHeight: r, scrollPosition: i, children: o, style: a} = e, s = Oh(), l = Ch(s), {isHovered: c, hoverHooks: d} = QF(), u = Math.max(0, r - n), p = r > n;
return H.createElement(Nh, {
id: s
}, H.createElement("surface", {
onMouseScroll: t,
...d,
style: [ rd("backgroundColor", "#00000001"), a ]
}, o, p && H.createElement(sM, {
setContentScrollPosition: e.setContentScrollPosition,
visible: l || c,
scrollPercent: u > 0 ? i / u : 0,
containerHeight: n,
contentHeight: r
})));
}));
function wU(e, t) {
if (t > -1) {
const n = e[t - 1]?.top;
return 0 === t ? 0 : n ?? e[t]?.top;
}
}
function kU({rows: e, height: t, width: n, style: r, prefetchRows: i}) {
const o = e.findIndex((e => e.focused)), a = wU(e, o), s = e[o]?.focusId, l = pl(Dl), [c, d] = H.useState(a ?? 0), u = H.useRef(c);
H.useLayoutEffect((() => {
void 0 !== a && (d(a), s && l({
focusId: s,
source: 2
}));
}), [ a, s, l ]), H.useEffect((() => {
u.current = c;
}), [ c ]);
const p = e[e.length - 1]?.bottom ?? 0, f = Math.max(0, p - t);
H.useEffect((() => {
d((e => Math.min(f, e)));
}), [ f ]);
const h = H.useCallback((n => {
const r = u.current, i = e[n];
if (!i) return;
if (0 === n) return void d(0);
const o = e[n - 1], a = e[n + 1], s = (a ? a.bottom : i.bottom) - t, l = o ? o.top : i.top;
s > r ? d(s) : l < r && d(l);
}), [ e, d, t ]), m = H.useCallback(((t, n) => {
if (3 === n || 2 === n) {
const r = e.findIndex((e => e.focusId === t));
if (-1 !== r) {
const t = r + (3 === n ? 1 : -1), i = e[t];
if (i) return h(t), i.focusId;
}
}
return Xp;
}), [ e, h ]), g = n - $F, y = c > 0, I = f > c;
return H.createElement(TU, {
navigate: m
}, H.createElement(LU, {
setContentScrollPosition: d,
onMouseScroll: e => {
const t = e.scrollDelta * Vc(Rd.ScrollFactor.fast);
d((e => Math.min(f, Math.max(0, e - t))));
},
height: t,
contentHeight: p,
scrollPosition: c,
style: rd("width", n)
}, H.createElement(PU, {
height: t,
rows: e,
width: g,
scrollPosition: c,
prefetchRows: i,
style: [ CU(y, I), r ]
})));
}
var RU = ({headline: e = Em("PHOTON-SOCIAL_PAGE-ERROR_TITLE_GENERIC"), body: t = Em("PHOTON-SOCIAL_PAGE-ERROR_DESC_GENERIC"), buttonLabel: n = Em("PHOTON-SOCIAL_PAGE-ERROR_BUTTON_GENERIC"), buttonAction: r}) => H.createElement(rF, {
headline: e,
body: t
}, r && H.createElement(jf, {
variant: 0,
id: "error-content-button",
label: n,
onClick: r,
narrationItem: uO
})), xU = {
duration: Rd.AnimationTime.rapid,
easing: Rd.AnimationEasing.ease
}, BU = ({children: e, style: t}) => {
const n = hP(1), [r, i] = H.useState(void 0), o = H.Children.toArray(e);
let a;
return o.forEach(((e, t) => {
if (void 0 !== a || !H.isValidElement(e)) return;
e.props.visible && (a = t);
})), H.useEffect((() => {
if (void 0 === r) return i(a), void n.set(1);
r !== a && n.to(0, {
...xU,
onFinished: () => {
i(a), n.to(1, xU);
}
});
}), [ r, n, a ]), void 0 !== r ? H.createElement("surface", {
style: [ n.propStyle("opacity"), t ]
}, o[r]) : null;
}, DU = ({children: e}) => H.createElement(H.Fragment, null, e), FU = AB - Vc(Rd.DimensionSpace.medium), MU = lM, [UU, HU] = Qs("PlayerDetailsPage"), VU = Cl({
debugName: "selectedItemState",
default: void 0
}), JU = e => H.createElement(kU, {
...e,
height: e.height ?? FU,
width: MU,
style: rd("margin", -YB)
}), GU = Ii.observer((({fallbackContent: e}) => {
const t = dl(VU);
let n;
if (t) {
const {photonPlayerId: e, photonSessionId: r, PlayerDetailsComponent: i, telemetryInfo: o} = t;
n = H.createElement(i, {
photonPlayerId: e,
photonSessionId: r,
telemetryInfo: o
});
} else n = e;
return H.createElement(gM, null, n);
})), zU = ({children: e, contentHasNoScrollbar: t, fallbackContent: n}) => {
const r = pl(VU), i = H.useMemo((() => ({
setSelectedItem: r
})), [ r ]);
return H.createElement(UU.Provider, {
value: i
}, H.createElement(hM, null, H.createElement(pM, {
noScrollbar: t
}, e), H.createElement(GU, {
fallbackContent: n
})));
}, jU = Ii.observer((({loading: e, error: t, empty: n, emptyContent: r, rows: i, prefetchRows: o, beforeContent: a, scrollHeight: s, detailsFallbackContent: l}) => t ? H.createElement(RU, null) : H.createElement(BU, {
style: rd("flex", 1)
}, H.createElement(DU, {
visible: e
}, H.createElement(pM, {
noScrollbar: !0
}, H.createElement(gD, {
numSections: 2,
numRows: 1
}))), r ? H.createElement(DU, {
visible: n
}, r) : null, H.createElement(DU, {
visible: !n
}, H.createElement(zU, {
fallbackContent: l
}, a, H.createElement(JU, {
height: s,
rows: i,
prefetchRows: o
}))))));
function qU(e, t) {
const n = oT().get(), r = ol();
return {
...n.toProps(),
data: HS(r, n.data, e, t)
};
}
function YU(e) {
const t = fk();
return e ? t.get(e) : {
loading: !1,
data: void 0
};
}
function WU(e, t) {
const n = Vc(t);
return e?.get(`${n}x${n}`);
}
function KU(e) {
return WU(e, 128);
}
var XU = e => {
const {data: t} = YU(e?.productId);
return t?.title ?? e?.productTitle;
}, QU = (e, t) => {
const {data: n} = qU(e, t), r = XU(n), i = ol();
return HO(i, e, t) ? Em("PHOTON-SOCIAL_LOBBY_YOUR") : PC(i, e, t) ? Em("PHOTON-SOCIAL_PARTY_PARTY-YOUR") : r;
}, $U = (e, t) => {
const {data: n} = qU(e, t);
if (VS() && n?.properties?.status) {
if ("DO_NOT_DISTURB" === n?.properties?.status) return {
text: Em("PHOTON-SOCIAL_STATUS_DO-NOT-DISTURB_RADIO")
};
if ("DOWN_TO_PLAY" === n.properties.status) return {
text: Em("PHOTON-SOCIAL_STATUS_READY-TO-PLAY_RADIO"),
color: Rd.ColorSystem.success
};
}
}, ZU = {
container: Qc({
marginBottom: Vc(Rd.DimensionSpace.large)
}),
header: Qc({
flexDirection: "row",
alignItems: "center"
}),
title: Qc({
marginBottom: Vc(Rd.DimensionSpace.smallest)
}),
iconStyle: Qc({
width: Vc(Rd.DimensionSpace.largest),
height: Vc(Rd.DimensionSpace.larger),
marginEnd: Vc(Rd.DimensionSpace.medium)
})
}, eH = ({sectionTitle: e, icon: t, style: n, textColor: r, children: i}) => H.createElement("surface", {
style: [ ZU.container, n ]
}, H.createElement("surface", {
style: ZU.header
}, t && H.createElement("surface", {
style: [ ZU.iconStyle, rd("color", t.color), rd("texture", t.type), t.style ]
}), H.createElement(IT, {
text: e,
color: r ?? Rd.TextColorStandard.default,
style: ZU.title
})), i), tH = (e, t, n) => {
if (1 !== e) {
if (64 == (64 & e)) return Em("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-PLATFORM-SELF_DESC");
if (sC(e)) return Em("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-PLATFORM-OTHER_DESC");
if (t ? cC(e) : lC(e)) return Em("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-GAME_DESC");
if (dC(e)) return Em("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-SELF_DESC");
if (uC(e)) return Em("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-OTHER_DESC");
}
if (n && n.uninvitable) return n.reason ?? Em("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER-GENERIC_DESC");
}, nH = Ii.observer((({isReceivedGameInvite: e, photonPlayerId: t, photonSessionId: n, style: r, bodyTextStyle: i}) => {
const o = AC(t, n), a = RC(t, n), s = tH(o, e, a);
return s ? H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_PLAYER-DETAIL_INCOMPATIBLE-PLAYER_TITLE"),
icon: {
type: ih.INCOMPATIBLE_WHITE
},
style: r,
textColor: Rd.TextColorStandard.emphasized
}, H.createElement(IT, {
style: i,
text: s,
color: Rd.TextColorStandard.default
})) : null;
}));
function rH(e, t) {
const {data: n} = cU(e, t), r = uU(e, t), i = r.isCrossplayPrevented || n?.isIncompatible;
return !(r.canJoin || n?.canInvite || !i);
}
var iH = fm.PresenceSession.InputType, oH = fs.Input.DeviceType, aH = (J_.object({
presenceSessionId: J_.optional(J_.nullable(J_.string)),
presenceSessionToken: J_.optional(J_.nullable(J_.object({
token: J_.optional(J_.anyObject)
})))
}), J_.object({})), sH = J_.object({
playerNetworkId: J_.optional(nb),
productId: J_.optional(J_.nullable(J_.object({
id: J_.nullable(J_.string)
}))),
devicePlatformId: J_.optional(rb),
locale: J_.optional(J_.string)
}), lH = J_.object({
integerValue: J_.number
}), cH = J_.object({
stringValue: J_.string
}), dH = J_.enum(iH, iH.INPUT_TYPE_UNSPECIFIED), uH = J_.object({
presenceSessionId: J_.string,
online: J_.boolean,
joinable: J_.optional(J_.boolean),
updateTimestamp: J_.nullable(K_),
client: J_.optional(sH),
inputTypes: J_.optional(J_.nullable(J_.array(dH))),
activityDescription: J_.optional(J_.string),
activityDetails: J_.optional(J_.string),
properties: J_.optional(J_.object({}, {
photon_maxPartySize: lH,
photon_currentPartySize: lH,
photon_partyJoinable: lH,
photon_partyCrossplayEnabled: lH,
photon_maxLobbySize: lH,
photon_currentLobbySize: lH,
photon_lobbyJoinable: lH,
photon_lobbyCrossplayEnabled: lH,
photon_crossplayEnabled: lH,
photon_status: cH
})),
gameJoinTokenTypes: J_.optional(J_.array(J_.string)),
updated: J_.boolean
}), pH = J_.object({
playerId: Z_,
playerOnline: J_.optional(J_.nullable(J_.boolean)),
lastSeenOnline: J_.optional(J_.nullable(K_)),
sessionNotification: uH
}), fH = J_.object({
presenceNotification: pH
}), hH = J_.object({}), mH = J_.object({
stream: J_.custom(sb()),
response: hH
});
function gH(e) {
if (e) {
if (e.includes(iH.INPUT_TYPE_MOUSE)) return iH.INPUT_TYPE_MOUSE;
if (e.includes(iH.INPUT_TYPE_KEYBOARD)) return iH.INPUT_TYPE_MOUSE;
if (e.includes(iH.INPUT_TYPE_CONTROLLER)) return iH.INPUT_TYPE_CONTROLLER;
}
}
function yH(e) {
return e === oH.MouseAndKeyboard ? iH.INPUT_TYPE_MOUSE : iH.INPUT_TYPE_CONTROLLER;
}
function IH(e) {
return !(e.locale && Fs.locale && Ws.preTranslatedRichPresence) || du(Fs.locale, e.locale);
}
function _H(e, t) {
return {
addedItems: new Set(Array.from(e).filter((e => !t.has(e)))),
removedItems: new Set(Array.from(t.values()).filter((t => !e.has(t))))
};
}
function bH() {
const e = H.useRef(new Set), t = H.useCallback((t => {
t.forEach((t => {
e.current.add(t);
}));
}), []), n = H.useCallback((t => {
t.forEach((t => {
e.current.delete(t);
}));
}), []);
return H.useCallback(((r, i) => {
const {addedItems: o, removedItems: a} = _H(r, e.current);
(o.size || a.size) && (t(o), n(a), i({
addedItems: o,
removedItems: a
}));
}), [ t, n ]);
}
var SH = Sl({
debugName: "extraPresenceEaPlayerIdsState",
get: function({get: e}) {
const t = e(fv).tokenInfo.userId, n = e(PS).get(), r = e(SS).get(), i = e(DO).get(), o = e(bC).get(), a = e(lS).get(), s = e(nN), l = [ n, r, a ];
Fs.isPartyEnabled && l.push(o), Fs.isTightlyCoupledParties || l.push(i), Fs.playerListsEnabled && l.push(s);
const c = hI(l);
if (c.loading || c.uninitialized) return new Set;
const d = new Set(a.data?.keys()), u = e(xS), p = [ ...RS(Array.from(r.data?.values() ?? []).map((e => e.photonPlayerId))), ...RS(Array.from(i.data?.members.keys() ?? [])), ...RS(Array.from(o.data?.members.keys() ?? [])), ...s.data ?? [] ].filter((e => !d.has(e) && !u.has(e) && e !== t));
return new Set(p);
}
}), vH = J_.object({});
function TH() {
const {PresenceSession: e} = Tm();
return {
subscribeToPresence: H.useCallback((t => j_((() => e.subscribeToPlayersPresence({
targetPlayerIds: t.map((e => ({
id: e
})))
})), vH)), [ e ]),
unsubscribeFromPresence: H.useCallback((t => j_((() => e.unsubscribeFromPlayersPresence({
targetPlayerIds: t.map((e => ({
id: e
})))
})), vH)), [ e ])
};
}
function EH() {
const e = ol(), {subscribeToPresence: t} = TH();
return H.useCallback((n => {
e.getUntracked(SH).has(n) && t([ n ]);
}), [ e, t ]);
}
function PH(e) {
const t = ol();
Il((({get: e}) => {
t.set(kS, e(SH));
}), [ t ]);
const n = bH(), r = _l((({get: e}) => t => !e(xS).has(t)), []), {subscribeToPresence: i, unsubscribeFromPresence: o} = TH(), a = _l((({get: e}) => async t => {
await o(t);
const n = e(b_), r = e(iT);
nl((() => {
t.forEach((e => {
n.findByEaPlayerId(e).forEach((e => {
const t = e.data?.photonPlayerId;
t && r.removeSelectPointsOfPresence(t, (e => e.isEAPresence));
}));
}));
}));
}), [ o ]);
Il((({get: t}) => {
e && n(t(SH), (async ({addedItems: e, removedItems: t}) => {
const n = Array.from(t).filter(r);
if (n.length && await a(n), e.size) {
const t = Array.from(e);
await i(t);
}
}));
}), [ e, r, i, a, n ]);
}
var OH = fm.PresenceSession.InputType, CH = fm.PresenceSession.Operation, NH = fm.DeepLink.Setting, AH = Cl({
debugName: "throttledDeviceTypeState",
default: void 0
});
Object.values(OH).filter((e => "string" != typeof e));
function LH() {
const e = ol();
H.useEffect((() => Dn((() => e.get(Gp)), (t => {
e.set(AH, t);
}), {
delay: 1e4,
fireImmediately: !0
})), [ e ]);
}
var wH = class {
constructor(e, t) {
this.gameJoinTokenType = e, this.customFields = t;
}
clearCachedState() {
this.gameJoinToken = void 0, this.maxSize = void 0, this.currentSize = void 0, this.joinable = void 0, 
this.crossplayEnabled = void 0;
}
setGameJoinToken(e, t) {
this.gameJoinToken !== t && (e.gameJoinTokens[this.gameJoinTokenType] = {
operation: CH.OPERATION_UPDATE,
value: {
token: mw(t)
}
}, this.gameJoinToken = t);
}
removeGameJoinToken(e) {
void 0 !== this.gameJoinToken && (e.gameJoinTokens[this.gameJoinTokenType] = {
operation: CH.OPERATION_REMOVE
}, this.gameJoinToken = void 0);
}
setMaxSize(e, t) {
this.maxSize !== t && (e.properties[this.customFields.maxSize] = {
operation: CH.OPERATION_UPDATE,
value: {
integerValue: t
}
}, this.maxSize = t);
}
removeMaxSize(e) {
void 0 !== this.maxSize && (e.properties[this.customFields.maxSize] = {
operation: CH.OPERATION_REMOVE
}, this.maxSize = void 0);
}
setCurrentSize(e, t) {
this.currentSize !== t && (e.properties[this.customFields.currentSize] = {
operation: CH.OPERATION_UPDATE,
value: {
integerValue: t
}
}, this.currentSize = t);
}
removeCurrentSize(e) {
void 0 !== this.currentSize && (e.properties[this.customFields.currentSize] = {
operation: CH.OPERATION_REMOVE
}, this.currentSize = void 0);
}
setJoinable(e, t) {
this.joinable !== t && (e.properties[this.customFields.joinable] = {
operation: CH.OPERATION_UPDATE,
value: {
integerValue: t ? 1 : 0
}
}, this.joinable = t);
}
removeJoinable(e) {
void 0 !== this.joinable && (e.properties[this.customFields.joinable] = {
operation: CH.OPERATION_REMOVE
}, this.joinable = void 0);
}
setCrossplayEnabled(e, t) {
this.crossplayEnabled !== t && this.customFields.crossplayEnabled && (e.properties[this.customFields.crossplayEnabled] = {
operation: CH.OPERATION_UPDATE,
value: {
integerValue: t ? 1 : 0
}
}, this.crossplayEnabled = t);
}
removeCrossplayEnabled(e) {
void 0 !== this.crossplayEnabled && this.customFields.crossplayEnabled && (e.properties[this.customFields.crossplayEnabled] = {
operation: CH.OPERATION_REMOVE
}, this.crossplayEnabled = void 0);
}
getJoinable() {
return this.joinable;
}
get() {
return {
joinable: this.joinable,
currentSize: this.currentSize,
maxSize: this.maxSize,
crossPlayEnabled: this.crossplayEnabled
};
}
}, kH = class {
constructor() {
this.party = new wH("party", {
maxSize: "photon_maxPartySize",
currentSize: "photon_currentPartySize",
joinable: "photon_partyJoinable",
crossplayEnabled: "photon_partyCrossplayEnabled"
}), this.lobby = new wH("lobby", {
maxSize: "photon_maxLobbySize",
currentSize: "photon_currentLobbySize",
joinable: "photon_lobbyJoinable",
crossplayEnabled: "photon_lobbyCrossplayEnabled"
});
}
clearCachedState() {
this.inputType = void 0, this.appearOffline = void 0, this.joinable = void 0, this.crossplayEnabled = void 0, 
this.party.clearCachedState(), this.lobby.clearCachedState();
}
setInputType(e, t) {
this.inputType !== t && (e.inputTypes = {
operation: CH.OPERATION_UPDATE,
values: [ yH(t) ]
}, this.inputType = t);
}
setAppearOffline(e, t) {
this.appearOffline !== t && (e.appearOffline = {
operation: CH.OPERATION_UPDATE,
value: t
}, this.appearOffline = t);
}
removeInputType(e) {
void 0 !== this.inputType && (e.inputTypes = {
operation: CH.OPERATION_REMOVE,
values: []
}, this.inputType = void 0);
}
updateJoinable(e) {
const t = !!this.lobby.getJoinable() || !!this.party.getJoinable();
this.joinable !== t && (e.joinable = {
operation: CH.OPERATION_UPDATE,
value: !!t
}, this.joinable = t);
}
updateCrossplayEnabled(e, t) {
this.crossplayEnabled !== t && (e.properties.photon_crossplayEnabled = {
operation: CH.OPERATION_UPDATE,
value: {
integerValue: t ? 1 : 0
}
}, this.crossplayEnabled = t);
}
setStatus(e, t) {
this.status !== t && (e.properties.photon_status = {
operation: CH.OPERATION_UPDATE,
value: {
stringValue: t
}
}, this.status = t);
}
removeStatus(e) {
void 0 !== this.status && (e.properties.photon_status = {
operation: CH.OPERATION_REMOVE
}, this.status = void 0);
}
getCurrent() {
const e = this.party.get(), t = this.lobby.get();
return {
joinable: this.joinable,
inputType: void 0 !== this.inputType ? yH(this.inputType) : void 0,
appearOffline: this.appearOffline,
properties: {
maxPartySize: e.maxSize,
currentPartySize: e.currentSize,
partyJoinable: e.joinable,
maxLobbySize: t.maxSize,
currentLobbySize: t.currentSize,
lobbyJoinable: t.joinable,
crossplayEnabled: this.crossplayEnabled
}
};
}
}, [, RH] = El({
debugName: "presenceStateCacheState",
create: () => new kH
}), xH = Cl({
debugName: "userPresenceState",
default: {
properties: {}
}
});
function BH(e) {
for (const t of Object.values(e)) {
if ("operation" in t) return !0;
if (Object.keys(t).length > 0) return !0;
}
return !1;
}
var DH = e => {
const {PresenceSession: t} = Tm(), n = fP(), r = LS.availableSettings.includes(NH.Party);
LH();
const i = RH(), o = pl(xH);
Il((({get: a}) => {
if (e) {
const e = a(AH), s = Uv({
get: a
}), l = a(bC).get().data, c = a(DO).get().data, d = a(OC), u = a(jS);
let p = !0;
(!Fs.isPartyEnabled && r || Fs.isPartyEnabled) && (p = n.getSetting(1, 0));
const f = {
properties: {},
gameJoinTokens: {}
};
if (void 0 !== e ? i.setInputType(f, e) : i.removeInputType(f), "APPEAR_OFFLINE" !== u ? i.setStatus(f, u || "ONLINE") : i.removeStatus(f), 
l) {
const e = l.joinable && l.members.size < l.maxSize;
i.party.setJoinable(f, e && p), i.party.setGameJoinToken(f, l.partyId), i.party.setMaxSize(f, l.maxSize), 
i.party.setCurrentSize(f, l.members.size), i.party.setCrossplayEnabled(f, l.crossPlayEnabled);
} else i.party.removeJoinable(f), i.party.removeGameJoinToken(f), i.party.removeMaxSize(f), 
i.party.removeCurrentSize(f), i.party.removeCrossplayEnabled(f);
if (c) {
const e = c.joinable && c.members.size < c.maxSize;
i.lobby.setJoinable(f, e && p), i.lobby.setGameJoinToken(f, c.lobbyId), i.lobby.setMaxSize(f, c.maxSize), 
i.lobby.setCurrentSize(f, c.members.size), i.lobby.setCrossplayEnabled(f, c.crossPlayEnabled);
} else i.lobby.removeJoinable(f), i.lobby.removeGameJoinToken(f), i.lobby.removeMaxSize(f), 
i.lobby.removeCurrentSize(f), i.lobby.removeCrossplayEnabled(f);
i.updateCrossplayEnabled(f, d), i.updateJoinable(f), (Fv() || VS()) && i.setAppearOffline(f, s), 
BH(f) && (t.partialUpdatePresence({
presenceUpdate: f
}), o(i.getCurrent()));
}
}), [ e, t, i, r, o, n ]), H.useEffect((() => {
if (e) return () => {
i.clearCachedState();
};
}), [ e, i ]);
}, FH = {
small: rd("marginBottom", Vc(Zu.DetailCardGameInfo.Body.marginBottom))
}, MH = Qc({
borderCenter: !0,
texture2Border: Vc(Zu.DetailCardGameInfo.Texture.borderRadius),
flexShrink: 0,
texture2: fh({
radius: Zu.DetailCardGameInfo.Texture.borderRadius
})
}), UH = Qc({
width: Vc(128),
height: Vc(128),
marginEnd: Vc(Zu.DetailCardGameInfo.Texture.marginEnd)
}), HH = ({texture: e, title: t, body1: n, body2: r, inactive: i, style: o, textureStyle: a}) => {
const s = id((() => ({
texture: e,
opacity: i ? Zu.DetailCardGameInfoInactive.Texture.opacity : 1
})), [ e, i ]), l = i ? Zu.DetailCardGameInfoInactive.Body1.color : Zu.DetailCardGameInfo.Body1.color;
if (!(e || t || n || r)) return null;
let c = null;
return n && r ? c = H.createElement(H.Fragment, null, H.createElement(IT, {
useEllipsis: !0,
text: n,
color: l,
style: FH.small
}), H.createElement(IT, {
useEllipsis: !0,
text: r,
color: Zu.DetailCardGameInfo.Body2.color
})) : n ? c = H.createElement(IT, {
text: ST(n, 72),
color: l,
style: FH.small
}) : r && (c = H.createElement(IT, {
text: ST(r, 72),
color: Zu.DetailCardGameInfo.Body2.color
})), H.createElement("surface", {
style: [ rd("flexDirection", "row"), o ]
}, e ? H.createElement("surface", {
style: [ s, MH, UH, a ]
}) : null, H.createElement("surface", {
style: rd("flex", 1)
}, t ? H.createElement(IT, {
useEllipsis: !0,
text: t,
color: Zu.DetailCardGameInfo.Title.color,
style: FH.small
}) : null, c));
};
function VH(e) {
return 1 === e.gameJoinTokenTypes.length && e.gameJoinTokenTypes.includes("lobby");
}
var JH = Ii.observer((({body1: e, body2: t, productId: n, expired: r, gameInvite: i}) => {
const {data: o} = YU(n);
let a = o?.title;
i && a && VH(i) && (a = Em("PHOTON-SOCIAL_INVITE-DETAILS-CARD_GAME-LOBBY", {
"%gameName%": a
}));
const s = KU(o?.gameTitleLogo)?.url;
return H.createElement(HH, {
texture: s,
title: a,
body1: e,
body2: t,
inactive: r || i?.isRevoked,
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger))
});
})), GH = ({input: e, ...t}) => {
Wp(e);
const n = Uc(e.keyBinding.primaryButton);
return H.createElement(ap, {
buttonLabel: e.keyBinding.primaryButton.keyboardKeyLabel,
icon: n,
...t
});
}, zH = fm.InputBindings.Action, jH = ({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, ...r}) => {
const i = IU(e, t, n), o = WL(zH.OpenActionList);
return vp({
keyBinding: o,
label: Em("PHOTON-SOCIAL_BUTTON_SEE-ACTIONS")
}), H.createElement(GH, {
label: Em("PHOTON-SOCIAL_BUTTON_SEE-ACTIONS"),
input: {
keyBinding: o,
callback: i
},
...r
});
}, qH = Qc({
height: Vc(80),
width: Vc(80),
marginEnd: Vc(Rd.DimensionSpace.large)
});
function YH(e, t) {
let n, r;
for (const e of t) if ("ANONYMOUS" !== e.toUpperCase()) {
r = e;
break;
}
if (r) {
const i = e.getItem(kw, i_({
eaPlayerId: r,
playerNetworkId: "EA"
}));
i.name && (n = t.length > 1 ? Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-MUTUALS", {
"%playerID%": NT(i, {
allowEllipsis: !0
}),
"%numberOfMutualFriends%": t.length - 1 + ""
}) : Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-SINGLE-MUTUALS", {
"%playerID%": NT(i, {
allowEllipsis: !0
})
}));
}
return n || (n = t.length > 1 ? Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-ANON-MUTUALS", {
"%numberOfMutualFriends%": t.length + ""
}) : Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ACTIONS-ANON-SINGLE-MUTUALS")), n;
}
function WH(e) {
const t = Date.now(), n = 864e5, r = t - 1728e5, i = t - 6048e5, o = t - 2592e6;
return e > t - n ? Em("TODAY") : e > r ? Em("YESTERDAY") : e > i ? Em("PAST-WEEK") : e > o ? Em("PAST-MONTH") : void 0;
}
var KH = Ii.observer((({sharedEntitlement: e, style: t}) => {
const n = YU(e.productId), r = [ rd("marginTop", Vc(Rd.DimensionSpace.small)), t ];
if (n.loading) return H.createElement(fD, {
height: Vc(80),
lightVariant: !0,
style: r
});
if (!n.data?.title) return null;
const i = KU(n.data?.gameTitleLogo)?.url, o = WH(e.timestampMs);
return H.createElement("surface", {
style: [ rd("flexDirection", "row"), rd("marginTop", Vc(Rd.DimensionSpace.small)), t ]
}, i ? H.createElement("surface", {
style: [ MH, qH, rd("texture", i) ]
}) : null, H.createElement("surface", {
style: [ rd("flex", 1), rd("justifyContent", "space-around") ]
}, H.createElement(IT, {
useEllipsis: !0,
text: n.data.title,
color: Zu.DetailCardGameInfo.Title.color
}), H.createElement(IT, {
text: o ?? ""
})));
})), XH = Ii.observer((e => {
const {photonPlayerId: t} = e, n = OS().get().data?.get(t), r = nx(), i = ol(), o = ZT("fr_1_5", "Attributes");
if (n) return null;
const a = r.getFriendRecommendation(t);
if (!a) return null;
const s = YH(i, a.mutualFriendEaPlayerIds);
return H.createElement(H.Fragment, null, H.createElement(IT, {
text: s,
style: rd("marginBottom", Vc(Rd.DimensionSpace.large))
}), o && a.sharedEntitlement.length ? H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_PLAYER-DETAIL_IN-COMMON_LABEL")
}, a.sharedEntitlement.slice(0, 3).map(((e, t) => H.createElement(KH, {
key: e.productId,
sharedEntitlement: e,
style: 0 === t ? rd("marginTop", 0) : void 0
})))) : void 0, Ws.supportsUnfinishedFeatures && o && a.firstLanguage && a.installCountry ? H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_PLAYER-DETAIL_LOCATION_LABEL")
}, H.createElement(IT, {
text: Em("PHOTON-SOCIAL_PLAYER-DETAIL_LANGUAGE_LOCATION", {
"%locale%": a.installCountry,
"%firstLanguage%": a.firstLanguage
}),
color: Rd.TextColorStandard.emphasized
})) : void 0);
}));
function QH(e, t) {
return HO(ol(), e, t);
}
var $H = Ii.observer((({photonPlayerId: e, photonSessionId: t}) => {
const {data: n} = qU(e, t), {data: r} = Gk(e, t), i = n?.properties?.currentLobbySize, o = n?.properties?.maxLobbySize, a = QH(e, t);
if (void 0 === r || void 0 === i || void 0 === o) return null;
let s;
return s = a ? Em("PHOTON-SOCIAL_LOBBY_YOUR") : i >= o ? Em("PHOTON-SOCIAL_LOBBY_FULL", {
"%currentLobbySize%": "" + i,
"%maxLobbySize%": "" + o
}) : r.joinable ? Em("PHOTON-SOCIAL_LOBBY_JOINABLE", {
"%currentLobbySize%": "" + i,
"%maxLobbySize%": "" + o
}) : Em("PHOTON-SOCIAL_LOBBY_NOT-JOINABLE", {
"%currentLobbySize%": "" + i,
"%maxLobbySize%": "" + o
}), H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_LOBBY_TITLE")
}, H.createElement(IT, {
text: s,
color: Rd.TextColorStandard.emphasized
}));
})), ZH = Ii.observer((() => {
const e = dl(xH), {currentLobbySize: t, maxLobbySize: n, lobbyJoinable: r} = e.properties;
if (void 0 === r || void 0 === t || void 0 === n) return null;
const i = Em(r ? "PHOTON-SOCIAL_LOBBY_JOINABLE" : "PHOTON-SOCIAL_LOBBY_NOT-JOINABLE", {
"%currentLobbySize%": "" + t,
"%maxLobbySize%": "" + n
});
return H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_LOBBY_TITLE")
}, H.createElement(IT, {
text: i,
color: Rd.TextColorStandard.emphasized
}));
}));
function eV(e, t, n) {
return KO(rC(Bk, m_(e, t)), n);
}
var tV = fm.Voip.VoipChannel;
function nV(e, t, n) {
if (e?.status !== fm.Voip.VoipStatus.Disabled && t?.status !== fm.Voip.VoipStatus.Disabled) switch (t?.channel) {
case tV.Party:
return Em(n ? "PHOTON-SOCIAL_VOICE_CHAT-PARTY" : "PHOTON-SOCIAL_PARTY_LIST_PRESENCE_PARTY-CHAT");

case tV.Game:
return Em(n ? "PHOTON-SOCIAL_VOICE_CHAT-TEAM" : "PHOTON-SOCIAL_PARTY_LIST_PRESENCE_TEAM-CHAT");
}
}
var rV = Ii.observer((({photonPlayerId: e, inlineTitle: t}) => {
const n = hv(), {data: r} = wF(n.photonPlayerId), {data: i} = wF(e), o = nV(r, i, t);
return o ? H.createElement(H.Fragment, null, t ? void 0 : H.createElement(IT, {
text: Em("PHOTON-SOCIAL_VOICE_TITLE"),
color: Rd.TextColorStandard.default,
style: rd("marginBottom", Vc(Rd.DimensionSpace.smallest))
}), H.createElement(IT, {
text: o,
color: Rd.TextColorStandard.emphasized,
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger))
})) : null;
})), iV = Ii.observer((({photonPlayerId: e, photonSessionId: t}) => {
const {data: n} = qU(e, t), {data: r} = eV(e, t, 0), i = n?.properties?.currentPartySize, o = n?.properties?.maxPartySize, a = dN(e, t);
if (void 0 === r?.joinable || void 0 === i || void 0 === o) return null;
let s;
return s = a ? Em("PHOTON-SOCIAL_PARTY_PARTY-YOUR") : i >= o ? Em("PHOTON-SOCIAL_PARTY_FULL", {
"%currentPartySize%": "" + i,
"%maxPartySize%": "" + o
}) : r.joinable ? Em("PHOTON-SOCIAL_PARTY_PARTY-JOINABLE", {
"%currentPartySize%": "" + i,
"%maxPartySize%": "" + o
}) : Em("PHOTON-SOCIAL_PARTY_PARTY-NOT-JOINABLE", {
"%currentPartySize%": "" + i,
"%maxPartySize%": "" + o
}), s ? H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_PARTY_TITLE")
}, H.createElement(IT, {
text: s,
style: rd("marginBottom", Vc(Zu.DetailCardGameInfo.Body.marginBottom)),
color: Rd.TextColorStandard.emphasized
}), H.createElement(rV, {
photonPlayerId: e,
inlineTitle: !0
})) : null;
})), oV = Ii.observer((() => {
const e = dl(xH), {currentPartySize: t, maxPartySize: n, partyJoinable: r} = e.properties;
if (void 0 === r || void 0 === t || void 0 === n) return null;
let i;
return t > 1 ? i = Em(r ? "PHOTON-SOCIAL_PARTY_PARTY-JOINABLE" : "PHOTON-SOCIAL_PARTY_PARTY-NOT-JOINABLE", {
"%currentPartySize%": "" + t,
"%maxPartySize%": "" + n
}) : r && 1 === t && (i = Em("PHOTON-SOCIAL_PARTY_SOLO-JOINABLE")), i ? H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_PARTY_TITLE")
}, H.createElement(IT, {
text: i,
color: Rd.TextColorStandard.emphasized
})) : null;
})), aV = fm.PresenceSession.InputType, sV = (Qc({
position: "relative",
flexDirection: "row",
flexWrap: "nowrap"
}), Qc({
color: Rd.IconColorStandard.emphasized,
position: "absolute",
alignSelf: "center"
}), ({inputDevice: e}) => {
const t = e === aV.INPUT_TYPE_CONTROLLER ? Em("PHOTON-SOCIAL_PLAYER-DETAIL_INPUT_CONTROLLER") : Em("PHOTON-SOCIAL_PLAYER-DETAIL_INPUT_MOUSE-KEYBOARD");
return H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_PLAYER-DETAIL_INPUT_TITLE")
}, H.createElement(IT, {
text: t,
color: Rd.TextColorStandard.emphasized
}));
}), lV = Qc({
backgroundColor: Zu.ListControlBase.Divider.backgroundColor,
height: Vc(2),
flex: 1,
marginBottom: Vc(Rd.DimensionSpace.large)
}), cV = () => H.createElement("surface", {
style: lV
}), dV = Ii.observer((e => {
const {photonPlayerId: t, playerPresence: n} = e, {eaPlayerId: r} = s_(t), {data: i} = mU(t, !0), o = hv();
if (n?.isOnline || o.tokenInfo.userId === r || 0 === i.length) return null;
const a = i.slice(0, 2);
return H.createElement(H.Fragment, null, H.createElement(nD, {
text: Em("PHOTON-SOCIAL_IDENTITIES_TITLE"),
style: [ rd("marginBottom", Vc(Rd.DimensionSpace.smallest)), _u ]
}), a.map((e => H.createElement(Dw, {
key: e.photonPlayerId,
player: e,
style: rd("marginBottom", Vc(Rd.DimensionSpace.smallest))
}))), H.createElement("surface", {
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger - Rd.DimensionSpace.smallest))
}));
}));
function uV(e) {
switch (e) {
case "EA":
return Em("PHOTON-SOCIAL_FRIENDS_LIST_PRESENCE_EA-APP");

case "PSN":
return Em("PHOTON-SOCIAL_FRIENDS_LIST_PRESENCE_LOCAL-PLATFORM-PS");

default:
return Em("PHOTON-SOCIAL_FRIENDS_LIST_PRESENCE_LOCAL-PLATFORM", {
"%localPlatform%": Bv(e)
});
}
}
var pV = Ii.observer((({photonPlayerId: e, playerPresence: t}) => {
const n = ol(), r = hv(), {playerNetworkId: i, eaPlayerId: o} = s_(e);
if (r.photonPlayerId === e) return Uv(n) ? null : H.createElement(JH, {
productId: Fs.productId
});
if (t?.isOnline) {
if (t.productId) {
let e, n;
return IH(t) && (e = t.activityDescription, n = t.activityDetails), H.createElement(JH, {
productId: t.productId,
body1: e,
body2: n
});
}
return t.productTitle ? H.createElement(eH, {
sectionTitle: t.productTitle,
textColor: Rd.TextColorStandard.emphasized
}) : H.createElement(eH, {
sectionTitle: uV(i),
textColor: Rd.TextColorStandard.emphasized
});
}
return n.getItem(nE, e).data || o && n.get(SH)?.has(o) ? H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_PRESENCE_OFFLINE"),
textColor: Rd.TextColorStandard.emphasized
}) : null;
})), fV = Ii.observer((({photonPlayerId: e, photonSessionId: t, playerPresence: n}) => {
const r = hv();
return r.photonPlayerId === e || n?.productId ? Fs.isPartyEnabled ? r.photonPlayerId === e ? H.createElement(oV, null) : H.createElement(iV, {
photonPlayerId: e,
photonSessionId: t
}) : r.photonPlayerId === e ? H.createElement(ZH, null) : H.createElement($H, {
photonPlayerId: e,
photonSessionId: t
}) : null;
})), hV = Ii.observer((({photonPlayerId: e, playerPresence: t, showIncompatibleWarning: n}) => {
const r = ol();
if (hv().photonPlayerId === e) {
const e = r.get(xH);
if (e.inputType) return H.createElement(sV, {
inputDevice: e.inputType,
key: "presence-input"
});
} else if (t?.isOnline && !n && void 0 !== t.inputType) return H.createElement(sV, {
inputDevice: t.inputType,
key: "presence-input"
});
return null;
})), mV = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n} = e, {playerNetworkId: r, name: i} = xw(t), {data: o} = kA(t, 0), a = bE(t), s = $U(t, n);
return o ? H.createElement(WF, null, H.createElement("surface", {
style: rd("marginBottom", Vc(Rd.DimensionSpace.large))
}, H.createElement(wT, {
name: i,
playerNetworkId: r,
icon: a ? ih.STAR : void 0
}), s && H.createElement(IT, {
text: s?.text,
color: s?.color,
style: rd("marginStart", LT + vT)
})), H.createElement(H.Fragment, null, e.children), H.createElement(cV, null), e.additionalActions, H.createElement(jH, {
photonPlayerId: t,
photonSessionId: n,
telemetryInfo: e.telemetryInfo
})) : null;
})), gV = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n} = e, {data: r} = qU(t, n), i = rH(t, n);
return H.createElement(mV, {
...e
}, H.createElement(pV, {
photonPlayerId: t,
playerPresence: r,
key: "product-player-details"
}), H.createElement(hV, {
photonPlayerId: t,
playerPresence: r,
showIncompatibleWarning: i,
key: "input-player-details"
}), H.createElement(fV, {
photonPlayerId: t,
photonSessionId: n,
playerPresence: r,
key: "party-lobby-status"
}), !e.excludeFriendRecommendation && H.createElement(XH, {
photonPlayerId: t,
key: "mutual-friends"
}), H.createElement(dV, {
photonPlayerId: t,
playerPresence: r,
key: "other-identities"
}), i && H.createElement(nH, {
photonPlayerId: t,
photonSessionId: n,
key: "compatibility-warnings"
}), e.additionalDetails);
})), yV = ({photonPlayerId: e, photonSessionId: t, PlayerDetailsComponent: n = gV, telemetryInfo: r}) => {
const i = HU();
return H.useMemo((() => ({
handleFocus: () => {
i.setSelectedItem({
photonPlayerId: e,
photonSessionId: t,
PlayerDetailsComponent: n,
telemetryInfo: r
});
},
handleBlur: () => {
i.setSelectedItem((n => {
if (e !== n?.photonPlayerId || t !== n.photonSessionId) return n;
}));
}
})), [ i, e, t, n, r ]);
}, IV = Qc({
position: "absolute",
left: YB,
right: YB
}), _V = class {
constructor() {
this.sections = [];
}
addSection(e) {
this.sections.push(e);
}
getSections() {
return this.sections;
}
isEmpty(e) {
return !e || this.sections.every((t => !e[t.id]?.length));
}
size(e) {
let t = 0;
for (const n of this.sections) t += e?.[n.id]?.length ?? 0;
return t;
}
static createMergedSection(e, t) {
const n = new _V;
return n.sections.push(...e.getSections(), ...t.getSections()), n;
}
}, bV = Ii.observer((({focusId: e, title: t, narrationTitle: n, top: r, isExpanded: i, getShowDot: o, onToggle: a, itemsInSection: s, telemetryInfo: l}) => {
const c = id((() => ({
top: r
})), [ r ]), d = o?.(), u = dD(), p = H.useRef(i);
return VE(l), bp((({getKeyBindingText: e}) => {
const r = p.current !== i;
if (p.current = i, r) return Em(i ? "PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-HEADER-EXPAND-ACTION" : "PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-HEADER-COLLAPSE-ACTION", {
"%primaryKey%": e(u)
});
const o = "string" == typeof t ? t : n ?? "";
return Em(i ? "PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-HEADER-EXPANDED" : "PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-HEADER-COLLAPSED", {
"%headerLabel%": o,
"%sectionCount%": s + "",
"%primaryKey%": e(u)
});
}), [ i, t, n, s, u ], e), H.createElement(uD, {
title: t,
id: e,
focusId: e,
style: [ IV, c ],
isExpanded: i,
showDot: d,
onToggle: a
});
})), SV = ({top: e, forwardFocusId: t, children: n}) => {
const r = id((() => ({
top: e
})), [ e ]);
return H.createElement("surface", {
style: [ IV, r ],
key: t
}, H.createElement(Op, {
id: t
}, n));
}, vV = {
headingHeight: Vc(76),
itemHeight: Vc(76),
defaultWidth: lM,
scrollbarWidth: $F + Vc(Rd.DimensionSpace.large)
};
function TV(e, t) {
return e + "[" + t.photonPlayerId + "]";
}
function EV(e, t) {
const {focusId: n, component: r} = t;
return H.createElement(SV, {
top: e,
forwardFocusId: n,
key: n
}, H.createElement(r));
}
function PV(e, t) {
const {focusId: n, itemWidth: r, titleString: i, isExpanded: o, getShowDot: a, onToggle: s, itemsLength: l, telemetryObject: c, narrationTitle: d} = t;
return H.createElement(bV, {
key: n,
top: e,
width: r,
focusId: n,
title: i,
isExpanded: o,
getShowDot: a,
onToggle: s,
itemsInSection: l,
telemetryInfo: c,
narrationTitle: d
});
}
function OV(e, t) {
const {forwardFocusId: n, component: r, props: i} = t;
return H.createElement(SV, {
top: e,
forwardFocusId: n,
key: n
}, H.createElement(r, i));
}
var [CV] = El({
debugName: "ScrollWindowPhotonPlayerRowsCacheState",
create: () => ({})
});
function NV(e, t, n, r) {
const i = r?.itemHeight ?? vV.itemHeight, o = r?.width ?? vV.defaultWidth, a = r?.prefetch, {history: s} = XS(), {photonPlayerId: l, photonSessionId: c} = Yo(), d = ol(), u = H.useMemo((() => {
const n = c || l;
if (!n || !t) return;
const r = e => e.photonPlayerId === n, i = e.getSections();
for (let e = 0; e < i.length; e++) {
const o = i[e];
if ((t[o.id] ?? []).some(r)) return {
focusId: TV(o.focusId, {
photonPlayerId: n
}),
section: o
};
}
}), [ t, e, l, c ]);
return H.useEffect((() => {
if (u) return !1 === u.section.isExpanded && u.section.onToggle(), hr((() => d.get(Fl) === u.focusId), (() => s.replace(n.link())));
}), [ u, s, n, d ]), H.useMemo((() => {
if (!t) return {
rows: [],
height: 0
};
const n = new AU;
if (r?.cacheName && r.cacheKey) {
let e = r.cacheKey;
u && (e += "-" + u.focusId);
const t = d.get(CV), i = t[r.cacheName];
if (i && i.cacheKey === e) return i.rowFactory;
t[r.cacheName] = {
cacheKey: e,
rowFactory: n
};
}
const s = o - vV.scrollbarWidth, l = e.getSections();
if (n.addSpace(YB), r?.beforeListContent) {
const e = r.beforeListContent.focusId, t = {
focusId: e,
component: r.beforeListContent.component
};
n.addRow(vV.headingHeight, e, EV, t, void 0, void 0, Vc(Rd.DimensionSpace.large));
}
for (let e = 0; e < l.length; e++) {
const {id: o, title: c, isExpanded: d, getShowDot: p, onToggle: f, component: h, afterItemsComponent: m, focusId: g, telemetryInfo: y, narrationTitle: I} = l[e], _ = t[o] ?? [];
if (0 === _.length) continue;
const b = "function" == typeof c ? c(_) : c, S = "function" == typeof y ? y(_) : y, v = {
focusId: g,
itemWidth: s,
titleString: b,
isExpanded: d,
getShowDot: p,
onToggle: f,
itemsLength: _.length,
telemetryObject: S,
narrationTitle: I
};
if (r?.flat || n.addRow(vV.headingHeight, g, PV, v, void 0, void 0, Vc(Rd.DimensionSpace.medium)), 
r?.flat || d || u?.section.id === o) {
const e = _.length;
for (let t = 0; t < e; t++) {
const o = _[t], s = TV(g, o), l = e === t + 1 && !m && !r?.flat, c = {
forwardFocusId: s,
component: h,
props: o
};
n.addRow(i, s, OV, c, s === u?.focusId, a, l ? Vc(Rd.DimensionSpace.large) : void 0);
}
if (m) {
const e = g + "[afterContent]", t = {
focusId: e,
component: m
};
n.addRow(vV.headingHeight, e, EV, t, void 0, void 0, Vc(Rd.DimensionSpace.large));
}
}
}
return n;
}), [ d, t, o, e, r?.beforeListContent, r?.cacheKey, r?.cacheName, r?.flat, u, i, a ]);
}
function AV(e, t, n) {
const {delay: r = 1e3} = n || {}, [i, o] = H.useState(e);
H.useEffect((() => {
function n(t) {
return t.data !== e.data || t.timestamp !== e.timestamp ? e : t;
}
if (t.isEmpty(e.data)) {
const e = setTimeout((() => {
o(n);
}), r);
return () => {
clearTimeout(e);
};
}
o(n);
}), [ r, e, t ]);
const a = !e.data && !e.error && (e.loading || !!e.uninitialized), s = !a && t.isEmpty(e.data);
return {
...e,
loading: a,
empty: s,
data: i.data,
sectionsState: t,
cacheKey: i.timestamp + t.getSections().map((({isExpanded: e}) => e)).join("-")
};
}
var LV = Qc({
maxHeight: Vc(150),
layer: !0
}), wV = Ii.observer((({recentlyMetEncounter: e}) => {
const t = e.primaryContext, n = e.secondaryContext, r = ZD(1e3 * (e.timestamp ?? 0));
return H.createElement(H.Fragment, null, H.createElement(nD, {
text: Em("PHOTON-SOCIAL_RECENTLY-MET_LIST_DESCRIPTOR-CARD_TITLE"),
style: [ rd("marginBottom", Vc(Rd.DimensionSpace.smallest)), _u ]
}), H.createElement("surface", {
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger))
}, t ? H.createElement(IT, {
text: t,
useEllipsis: !!n,
color: Rd.TextColorStandard.emphasized,
style: n ? rd("marginBottom", Vc(Rd.DimensionSpace.smallest)) : LV
}) : null, n ? H.createElement(IT, {
text: n,
useEllipsis: !!t,
color: Rd.TextColorStandard.emphasized,
style: rd("marginBottom", Vc(Rd.DimensionSpace.smallest))
}) : null, H.createElement(IT, {
text: r,
color: Rd.TextColorStandard.emphasized
})));
})), kV = Ii.observer((({playerLists: e}) => H.createElement(H.Fragment, null, H.createElement(nD, {
text: Em("PHOTON-SOCIAL_FRIEND-REQUEST_DETAILS_SHARED-GROUPS_LABEL"),
style: [ rd("marginBottom", Vc(Rd.DimensionSpace.smallest)), _u ]
}), H.createElement("surface", {
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger))
}, e.map(((e, t, {length: n}) => H.createElement(IT, {
key: e.localizedTitle,
text: e.localizedTitle,
color: Rd.TextColorStandard.emphasized,
style: t !== n - 1 ? rd("marginBottom", Vc(Rd.DimensionSpace.smallest)) : LV,
useEllipsis: !0
}))))))), RV = Ii.observer((e => {
const {recentlyMetEncounter: t, playerLists: n} = JA(e.photonPlayerId);
return H.createElement(mV, {
...e
}, t && H.createElement(wV, {
recentlyMetEncounter: t
}), n.length > 0 && H.createElement(kV, {
playerLists: n
}));
})), xV = (e, t, n, r = !1) => {
const i = e.length, o = e.map(((e, r) => ({
telemetryInfo: {
pg_id: "tab_friend_requests",
msg_id: n,
destination_name: n,
index: {
item_index: r + 1,
total_items: i
}
},
friendRequest: e,
photonPlayerId: i_({
eaPlayerId: e.eaPlayerId,
playerNetworkId: e[t]
}),
expiresInMs: wx(e)
})));
return r ? o.sort(((e, t) => {
const n = xx(e.friendRequest), r = xx(t.friendRequest);
return n && r ? e.expiresInMs - t.expiresInMs : n ? -1 : r ? 1 : t.friendRequest.createTimeMs - e.friendRequest.createTimeMs;
})) : o;
}, BV = Sl({
debugName: "friendRequestsListState",
get: function({get: e}) {
const t = e(iE).get(), n = e(aE).get(), r = e(b_), i = t.data?.getSortedList(), o = n.data?.getSortedList(), a = i?.slice(0, 20) ?? [];
a.length < 20 && o && a.push(...o.slice(0, 20 - a.length));
const s = hI([ t, n, {
...hI(a.map((e => r.get(i_({
eaPlayerId: e.eaPlayerId,
playerNetworkId: "EA"
}))))),
error: void 0
} ]), l = !s.loading && !s.uninitialized;
return {
...s,
data: l && i && o ? {
0: xV(i, "sourcePlayerNetworkId", "received_requests", !0),
1: xV(o, "targetPlayerNetworkId", "sent_requests")
} : void 0
};
}
}), DV = fm.InputBindings.Action, FV = {
0: Np(),
1: Np()
}, MV = Ii.observer((e => {
const {id: t, photonPlayerId: n, friendRequest: r, primaryAction: i, secondaryAction: o, onFocus: a, showDot: s, metaInfo: l} = e, c = void 0, {name: d, playerNetworkId: u} = xw(n), p = IU(n, c, e.telemetryInfo), f = r.createTimeMs ? H.createElement(nF, {
hideOnPressedOrFocused: !0,
timeMs: r.createTimeMs
}) : null, h = l ?? f, {handleFocus: m, handleBlur: g} = yV({
photonPlayerId: n,
photonSessionId: c,
telemetryInfo: e.telemetryInfo,
PlayerDetailsComponent: RV
}), y = H.useCallback((() => {
a?.(), m();
}), [ a, m ]), I = JD({
playerName: d
});
return H.createElement(VD, {
id: t,
narrationItem: I,
onFocus: y,
onBlur: g,
onClick: p,
primaryAction: i,
secondaryAction: o,
showDot: s
}, H.createElement(wD, {
playerNetworkId: u,
name: d
}), h);
})), UV = Ii.observer((e => {
const {friendRequest: t, photonPlayerId: n, expiresInMs: r} = e, i = void 0, o = Cx(t), {setItemSeen: a, isItemSeen: s} = Ox(), l = eL(n, i, e.telemetryInfo), c = tL(n, i, e.telemetryInfo), d = WL(DV.Primary), u = WL(DV.Secondary), p = H.useCallback((() => {
a(o);
}), [ a, o ]), f = kx(t);
let h;
f < 10 && (h = H.createElement(tF, {
hideOnPressedOrFocused: !0,
text: 1 === f ? Em("PHOTON-SOCIAL_FRIEND-REQUESTS_VIOLATOR_EXPIRING_DAY-SINGLE") : Em("PHOTON-SOCIAL_FRIEND-REQUESTS_VIOLATOR_EXPIRING_DAYS-PLURAL", {
"%numberOfDays%": `${f}`
}),
color: Rd.TextColorStandard.warning
}));
let m = {
primaryAction: {
label: Em("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_ACTIONS_ACCEPT"),
keyBinding: d,
callback: l
},
secondaryAction: {
label: Em("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_ACTIONS_DECLINE"),
keyBinding: u,
callback: c
}
};
return kA(n).data || (m = {
primaryAction: {
label: Em("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_ACTIONS_DECLINE"),
keyBinding: d,
callback: c
}
}), l && c ? H.createElement(MV, {
id: "received-" + n,
photonPlayerId: n,
friendRequest: t,
expiresInMs: r,
...m,
onFocus: p,
showDot: !1 === s(o),
telemetryInfo: e.telemetryInfo,
metaInfo: h
}) : null;
})), HV = H.memo((e => {
const t = e.photonPlayerId, n = nL(t, void 0, e.telemetryInfo), r = WL(DV.Primary);
return n ? H.createElement(MV, {
friendRequest: e.friendRequest,
id: "sent-" + t,
photonPlayerId: t,
expiresInMs: e.expiresInMs,
primaryAction: {
label: Em("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_ACTIONS_CANCEL"),
keyBinding: r,
callback: n
},
telemetryInfo: e.telemetryInfo
}) : null;
}));
function VV() {
const {isExpanded: e, onToggle: t} = pD({
id: "friend-requests-section-received",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: HE("tab_friend_requests", "received_requests")
}), {isExpanded: n, onToggle: r} = pD({
id: "friend-requests-section-sent",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: HE("tab_friend_requests", "sent_requests")
}), {getUnseenCount: i} = Ox();
return H.useMemo((() => {
const o = new _V;
return o.addSection({
id: 0,
isExpanded: e,
getShowDot: () => i() > 0,
onToggle: t,
title: Em("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_SECTION-HEAD_RECEIVED"),
component: UV,
focusId: FV[0],
telemetryInfo: {
pg_id: "tab_friend_requests",
destination_name: "received_requests",
msg_id: "received_requests"
}
}), o.addSection({
id: 1,
isExpanded: n,
onToggle: r,
title: Em("PHOTON-SOCIAL_FRIEND-REQUESTS_LIST_SECTION-HEAD_SENT"),
component: HV,
focusId: FV[1],
telemetryInfo: {
pg_id: "tab_friend_requests",
destination_name: "sent_requests",
msg_id: "sent_requests"
}
}), o;
}), [ e, n, i, t, r ]);
}
var JV = Ii.observer((() => {
const e = AV(dl(BV), VV()), t = S_(), n = H.useCallback((e => {
const n = p_(e.props.photonPlayerId);
t.get(n);
}), [ t ]), {rows: r} = NV(e.sectionsState, e.data, Zg, {
prefetch: n
});
return H.createElement(jU, {
loading: e.loading,
empty: e.empty,
emptyContent: H.createElement(lF, {
headline: Em("PHOTON-SOCIAL_FRIEND-REQUESTS_EMPTY-TITLE"),
body: Em("PHOTON-SOCIAL_FRIEND-REQUESTS_EMPTY-DESC"),
telemetryPageId: "tab_friend_requests"
}),
error: e.error,
rows: r,
prefetchRows: 20
});
})), GV = () => {
const {showNotification: e} = bO();
sl((t => {
t && e(0, 0, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_FRIENDS_MAX-REQUEST"),
icon: ih.WARNING,
iconColor: Rd.IconColorStandard.alert
}, {
telemetryInfo: {
pg_id: "tst_friend_max"
}
});
}), [ e ], ox, !0);
}, zV = fm.InputBindings.Action, [jV, qV] = El({
debugName: "friendRequestsListUpdateEventState",
create: () => new os
}), YV = () => {
const e = ol(), t = XS("main"), n = qV(), {showNotification: r} = bO(), i = hv(), {Invites: o} = Tm(), a = bO(), s = av(), l = WL(zV.Primary), c = QS("main");
H.useEffect((() => n.subscribe((async t => {
let n;
const d = await yI(e.get(UA).get());
if (nl((() => d.data?.get(t.photonPlayerId)))) n = Em("PHOTON-SOCIAL-FRIEND-REQUEST-RECENTLY_MET_CONTEXT_ACTIONABLE_TOAST"); else if (c_(t.photonPlayerId)) {
const [r] = e.getItemUntracked(aN, t.photonPlayerId);
r && (n = Em("PHOTON-SOCIAL-FRIEND-REQUEST-PLAYER_LIST_CONTEXT_ACTIONABLE_TOAST", {
"%nameOfPlayerList%": r.localizedTitle
}));
}
r(1, 2, {
icon: ih.ADD_USER,
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_FRIENDS_INVITE-RECEIVE", {
"%senderPrimaryID%": NT(kO(e, t, i), {
allowEllipsis: !0
})
}),
secondaryText: n,
actions: [ {
id: "accept",
callback: () => {
const n = YA(e, o, "AcceptReceivedFriendInvite", a, t.photonPlayerId, s, c.history.location);
UE(s, n, {
pg_id: "tst_friendreq_received",
msg_id: "tst_friendreq_received",
destination_name: "actions",
option: "accept"
})();
},
label: Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_ACCEPT"),
keyBinding: l
}, {
id: "decline",
callback: () => {
const n = YA(e, o, "DeclineReceivedFriendInvite", a, t.photonPlayerId, s, c.history.location, {
getSuccessMessage: KA,
successIcon: ih.REMOVE
});
UE(s, n, {
pg_id: "tst_friendreq_received",
msg_id: "tst_friendreq_received",
destination_name: "actions",
option: "decline"
})();
},
label: Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_DECLINE"),
keyBinding: l
} ]
}, {
telemetryInfo: {
pg_id: "tst_friendreq_received"
},
setting: 2
});
}))), [ c, r, i, l, t, n, e, o, a, s ]);
}, WV = class {
constructor() {
this.gates = new Zs({}), this.teleport = (e, t) => {
this.gates.set(e, t);
}, this.clear = e => {
this.gates.delete(e);
};
}
}, [KV, XV] = El({
debugName: "portalState",
create: () => new WV
}), QV = {
ftue_lobby_intro: "tst_ftue_lobby_hidden",
ftue_voip_intro: "tst_ftue_voip_hidden",
ftue_settings_button: "ttip_adjust_notif_pref_hidden",
ftue_settings_notification: "tst_set_notif_hidden"
}, $V = J_.custom((e => null !== e && "object" == typeof e && (!!e && Object.values(e).every((e => "boolean" == typeof e))))), ZV = class {
constructor(e, t, n, r) {
this.moby = e, this.storage = t, this.notificationManager = n, this.skipFTUEFlow = r, 
this.completedState = void 0, this.showingToast = !1, this.seenState = {}, Or(this, {
completedState: mt,
showingToast: mt,
setShowingToast: An,
isLoaded: _t
});
}
init(e) {
return this.storageKey = "ftue_" + e, this.loadStoredSettings();
}
setShowingToast(e) {
this.showingToast = e;
}
getCompletedState() {
return nl((() => this.completedState));
}
seenThisSession(e) {
this.seenState[e] = !0;
}
get isInGamePlay() {
return this.notificationManager.isInGamePlay;
}
sendHiddenByExperimentTelemetry(e) {
const t = this.moby.get(ov), n = QV[e];
ME(t, {
pg_id: n,
msg_id: n,
status: "impression"
});
}
shouldShowFTUE(e, t) {
return nl((() => $T(this.moby, "ftue_0", XT.ftue_0.SkipFTUE) ? (this.completedState?.[e] || (this.sendHiddenByExperimentTelemetry(t ?? e), 
this.setAsDone(e)), !1) : !(void 0 === this.completedState || this.isInGamePlay || this.completedState[e] || this.seenState[e] || this.skipFTUEFlow)));
}
get isLoaded() {
return !!this.completedState;
}
isDone(e) {
return this.completedState?.[e];
}
async setAsDone(e) {
return nl((async () => {
this.completedState && (this.completedState[e] = !0, await this.saveSettings());
}));
}
async loadStoredSettings() {
if (this.storageKey) try {
const e = await this.storage.getItem(this.storageKey);
if (e) {
const t = JSON.parse(e);
$V.validate(t) ? this.completedState = t : this.completedState = {};
} else this.completedState = {};
} catch (e) {}
}
getSetting(e) {
return nl((() => this.completedState?.[e] ?? !1));
}
async saveSettings() {
if (this.storageKey) return this.storage.setItem(this.storageKey, JSON.stringify(dr(this.completedState)));
}
}, eJ = fm.InputBindings.Action, tJ = Vc(54), nJ = Vc(30), rJ = Vc(27) - Vc(5);
var iJ = zc({
beak: {
1: Cs("/photon/quantum/misc/Bird-beak-1px-border-432e5c47.png"),
2: Cs("/photon/quantum/misc/Bird-beak-1px-border2x-d8ac81d4.png")
},
glow: {
1: Cs("/photon/quantum/misc/Glow-8e5d13db.png"),
2: Cs("/photon/quantum/misc/Glow-2x-cd501375.png")
},
border: {
1: Cs("/photon/quantum/backgrounds/1px_stroke_primary-79d177b5.png"),
2: Cs("/photon/quantum/backgrounds/1px_stroke_primary2x-df65e40c.png")
}
}), oJ = td((e => 1 === e ? {
top: -rJ,
end: nJ,
rotateX: 180
} : {
bottom: -rJ,
start: nJ
}), {
width: tJ,
height: Vc(27),
texture: iJ.beak,
zOffset: 2,
position: "absolute"
}), aJ = Qc({
flexDirection: "row",
alignItems: "center"
}), sJ = Qc({
marginStart: Vc(Rd.DimensionSpace.smaller),
marginEnd: Vc(Rd.DimensionSpace.smaller)
}), lJ = Vc(200), cJ = Vc(100), dJ = td((e => ({
translateX: 1 === e || 3 === e ? lJ : -lJ,
translateY: 2 === e || 3 === e ? cJ : -cJ
}))), uJ = {
from: .8,
to: 1,
rebound: !0,
loopCount: -1,
duration: 2 * Rd.AnimationTime.slowest
}, pJ = Qc({
flexDirection: "column",
padding: [ cJ, lJ, cJ, lJ ],
textureMode: "fill",
texture: iJ.glow,
textureScaleX: uJ,
textureScaleY: uJ
}), fJ = ({children: e, notificationLocation: t}) => H.createElement("surface", {
style: rd("flexDirection", "row")
}, H.createElement("surface", {
style: [ dJ(t) ]
}, H.createElement("surface", {
style: pJ
}, e))), hJ = ({id: e, onDismiss: t, message: n, onMount: r, showArrow: i, withOpenInfo: o, notificationLocation: a, position: s}) => {
H.useEffect((() => (r(), () => {
t();
})), [ t, r ]);
const l = WL(eJ.TogglePhoton), c = Uc(l.primaryButton), d = l.primaryButton.keyboardKeyLabel, [u, p] = YP(Em("PHOTON-SOCIAL_FTUE_ACTIONABLE-TOAST_BUTTON-PRESS"));
return H.createElement(PP, null, H.createElement(fJ, {
notificationLocation: a
}, H.createElement(vP, {
key: e,
style: [ rd("color", null), rd("texture", iJ.border) ],
outerContent: i ? H.createElement("surface", {
style: oJ(s)
}) : void 0
}, H.createElement(EP, null, H.createElement(NP, {
texture: ih.LIGHT_BULB,
color: Rd.TextColorStandard.emphasized,
wrapperStyle: [ rd("justifyContent", "flex-start"), rd("marginTop", Vc(Rd.DimensionSpace.medium)) ]
}), H.createElement("surface", null, H.createElement(kP, {
text: n,
color: Rd.TextColorStandard.emphasized
}), o ? H.createElement("surface", {
style: aJ
}, H.createElement(IT, {
text: u,
color: Rd.TextColorStandard.emphasized
}), H.createElement(op, {
style: sJ,
buttonLabel: d,
icon: c
}), H.createElement(IT, {
text: p,
color: Rd.TextColorStandard.emphasized
})) : void 0)))));
}, [mJ, gJ] = El({
debugName: "FTUEManager",
create: e => {
const t = e.get(zh), n = e.get(_O), r = Ws.disableFTUE || !Lv.UseFTUE(t.bindings.Utilities);
return {
ftueManager: new ZV(e, t.localStorage, n.notificationManager, r),
showFTUENotification: (e, r, i, o, a) => {
const {telemetryInfo: s, showAsToast: l, attachToSurface: c, withOpenInfo: d} = a ?? {}, u = l ? i : () => {
t.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !0
}), i();
}, p = l ? r : () => {
t.bindings.Input.setFocusNotificationRequireHold({
holdRequired: !1
}), r();
}, f = {
telemetryInfo: s,
screenTimeInSec: 10
};
var h;
l && (f.appearance = {
attachToSurface: c ? {
...(h = c.position, {
offsetX: 1 !== h ? -nJ - tJ / 2 : 0,
offsetY: rJ
}),
...c
} : void 0,
animation: 1,
animationOffset: Vc(Rd.DimensionSpace.small),
portalId: "InsideContent"
}), n.showNotificationComponent(0, 1, (t => H.createElement(hJ, {
...t,
type: e,
message: o,
onDismiss: p,
onMount: u,
showArrow: !!l,
withOpenInfo: d,
position: a?.attachToSurface?.position
})), f, {
text: o
});
}
};
}
}), yJ = Sl({
debugName: "hasOnlineFriendState",
get: function({get: e}) {
const t = e(pA), n = (t.data?.[0].length ?? -1) > 0;
return {
...t,
data: t.data ? n : void 0
};
}
}), IJ = () => {
const {ftueManager: e, showFTUENotification: t} = gJ(), {data: n} = dl(yJ), r = H.useMemo((() => !!e.shouldShowFTUE("ftue_lobby_intro") && n), [ e, n ]);
H.useEffect((() => {
if (r) {
t("ftue_lobby_intro", (async () => {
await e.setAsDone("ftue_lobby_intro");
}), (() => {}), Em("PHOTON-SOCIAL_FTUE_INVITE-TO-LOBBY_TOAST"), {
telemetryInfo: {
pg_id: "tst_ftue_lobby"
}
});
}
}), [ e, r, t ]);
}, _J = ({children: e, delay: t}) => {
const [n, r] = H.useState(!1);
return H.useEffect((() => {
let e = setTimeout((() => {
e = void 0, r(!0);
}), t);
return () => {
e && clearTimeout(e);
};
}), [ r, t ]), n ? H.createElement(H.Fragment, null, e) : null;
}, bJ = Qc({
maxWidth: Vc(525),
flexShrink: 0,
flexDirection: "row",
alignItems: "center"
}), SJ = Qc({
textEllipsis: !0
}), vJ = Qc({
marginStart: Vc(Rd.DimensionSpace.small),
marginEnd: Vc(Rd.DimensionSpace.small)
}), TJ = ({texts: e, style: t, ...n}) => {
const r = e.filter((e => "string" == typeof e || !!e?.text));
return r.length ? H.createElement("surface", {
style: bJ
}, r.map(((e, r) => {
const i = "string" == typeof e ? e : e.text, o = "string" == typeof e ? void 0 : e.color;
return H.createElement(H.Fragment, {
key: i
}, r > 0 ? H.createElement(OD, {
...n,
text: "-",
color: Rd.TextColorStandard.default,
style: vJ
}) : void 0, H.createElement(OD, {
...n,
text: i,
color: o,
style: [ SJ, t ]
}));
}))) : null;
}, EJ = Qc({
width: Vc(Rd.DimensionSpace.largest),
height: Vc(Rd.DimensionSpace.larger),
marginStart: Vc(Rd.DimensionSpace.small)
}), PJ = Ii.observer((() => {
const {isFocused: e} = Nf();
return H.createElement("surface", {
style: [ EJ, rd("texture", e ? ih.INCOMPATIBLE_WHITE : ih.INCOMPATIBLE_NEUTRAL) ]
});
})), OJ = fm.InputBindings.Action;
function CJ(e, t, n) {
const r = ol();
return H.useCallback(((i, o, a) => {
const s = !n && o?.isPartyJoinable || o?.isPartyGameInvite, l = !n && o?.isLobbyJoinable || o?.isLobbyGameInvite;
if (!s && !l) return;
let c = {};
return s && l ? c = {
label: Em("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_JOIN"),
telemetryOption: "join_party_and_lobby"
} : s ? c = {
label: Em("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_PARTY-JOIN"),
telemetryOption: "join_party"
} : l && (c = {
label: Em("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_LOBBY-JOIN"),
telemetryOption: "join_lobby"
}), {
label: c.label,
keyBinding: i,
callback: () => zE(r, e, t, o?.joinAction, {
...a(),
status: "click",
option: c.telemetryOption
})()
};
}), [ n, r, e, t ]);
}
function NJ(e, t) {
const {data: n} = kA(e), {isActionTaken: r, performAction: i} = YR(e), o = ol();
return H.useCallback(((a, s, l) => {
let c = "invite_to_combo";
s.data?.isMyPartyJoinable && !s.data?.isMyLobbyJoinable ? c = "invite_to_party" : !s.data?.isMyPartyJoinable && s.data?.isMyLobbyJoinable && (c = "invite_to_lobby");
const d = async () => {
n && n.eaPlayerId && n.personaId && await i();
};
return {
label: (u = s.data?.gameInviteTypes ?? [], u.includes("lobby") ? Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-LOBBY") : Em("PHOTON-SOCIAL_PLAYER-ACTIONS_PARTY_INVITE-PARTY")),
keyBinding: a,
callback: () => zE(o, e, t, d, {
...l(),
status: "click",
option: c
})(),
disabled: r,
disabledContent: H.createElement(xD, {
text: Em("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_INVITE-SENT")
})
};
var u;
}), [ r, o, e, t, n, i ]);
}
function AJ(e, t, n) {
const {navigate: r} = XS("main"), i = cU(e, t), o = dN(e, t), a = uU(e, t), s = WL(OJ.Primary), l = WL(OJ.Secondary), c = CJ(e, t)(s, a, n), d = NJ(e, t);
return H.useMemo((() => {
const e = e => o ? {
label: Em("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_VIEW-PARTY"),
keyBinding: e,
callback: () => {
r(xk.link());
}
} : void 0;
return a?.canJoin ? i.data?.canInvite ? {
primaryAction: c,
secondaryAction: d(l, i, n)
} : {
primaryAction: c
} : i.data?.canInvite ? {
primaryAction: d(s, i, n),
secondaryAction: e(l)
} : {
primaryAction: e(s)
};
}), [ a, i, l, o, r, c, d, n, s ]);
}
var LJ = fm.InputBindings.Action;
function wJ(e, t, n) {
const {eaPlayerId: r} = s_(e), i = H.useMemo((() => n && {
...n,
msg_id: "player_details_card"
}), [ n ]), o = dx(e, i), a = qM(e, t, i), s = YM(e, t, i), l = OS().get().data?.has(e), c = bE(e), d = sE().get(), u = !!r && d.data?.has(r), p = oE().get(), f = !!r && p.data?.has(r);
let h, m;
const g = !l && !u && !f;
g ? h = Em("PHOTON-SOCIAL_BUTTON_REQUEST-ADD") : c ? h = Em("PHOTON-SOCIAL_PLAYER-ACTIONS_REMOVE-FAVORITE") : (h = Em("PHOTON-SOCIAL_PLAYER-ACTIONS_ADD-FAVORITE"), 
m = ih.STAR);
return {
action: H.useCallback((async () => g ? o.performAction() : c && s ? s() : !c && a ? a() : void 0), [ a, s, o, c, g ]),
label: h,
icon: m
};
}
var kJ = Qc({
marginBottom: Vc(Rd.DimensionSpace.large)
}), RJ = Qc({
alignSelf: "stretch",
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "flex-start"
}), xJ = Qc({
marginStart: Vc(Rd.DimensionSpace.smallest),
marginTop: Vc(2),
minWidth: Vc(32),
width: Vc(32),
height: Vc(32)
}), BJ = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, ...r}) => {
const {label: i, action: o, icon: a} = wJ(e, t, n), s = WL(LJ.Tertiary);
return vp({
keyBinding: s,
label: i
}), H.createElement("surface", {
style: RJ
}, H.createElement(GH, {
style: kJ,
label: i,
input: {
keyBinding: s,
callback: o
},
textStyle: rd("textEllipsis", !0),
...r
}), !!a && H.createElement("surface", {
style: [ xJ, rd("texture", a) ]
}));
})), DJ = e => {
const {photonPlayerId: t, photonSessionId: n} = e, {eaPlayerId: r} = s_(t), i = !!r && H.createElement(BJ, {
photonPlayerId: t,
photonSessionId: n,
telemetryInfo: e.telemetryInfo
});
return H.createElement(gV, {
...e,
excludeFriendRecommendation: !0,
additionalActions: i
});
}, FJ = fm.InputBindings.Action;
function MJ(e, t, n) {
const r = ol();
return AJ(e, t, H.useCallback((() => ({
...n,
context: {
...n.context,
...pU(r)
}
})), [ r, n ]));
}
var UJ = Ii.observer((({photonPlayerId: e, photonSessionId: t, setFriendActions: n, telemetryInfo: r}) => {
const i = MJ(e, t, r);
return H.useEffect((() => {
n(i);
}), [ n, i ]), null;
})), HJ = ({photonPlayerId: e, photonSessionId: t, setHandlers: n, telemetryInfo: r}) => {
const i = yV({
photonPlayerId: e,
photonSessionId: t,
telemetryInfo: r,
PlayerDetailsComponent: DJ
});
return H.useEffect((() => {
n(i);
}), [ n, i ]), null;
}, VJ = {
pg_id: "tab_friends",
destination_name: "online_friends",
option: "see_player_actions"
}, JJ = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n} = h_(e.photonPlayerId), [r, i] = H.useState(void 0), [o, a] = H.useState(void 0), {data: s} = kA(t), l = IU(t, n, VJ), c = rH(t, n), {name: d, playerNetworkId: u} = xw(t), p = QU(t, n), f = $U(t, n), h = JD({
playerName: d,
supplementaryText: p
}), m = bE(t);
if (!s) return null;
const g = !(!r?.primaryAction && !r?.secondaryAction);
return H.createElement(VD, {
id: "onlineFriend-" + t,
narrationItem: h,
onFocus: o?.handleFocus,
onBlur: o?.handleBlur,
onClick: l,
...r
}, H.createElement(_J, {
delay: 500
}, H.createElement(UJ, {
photonPlayerId: t,
photonSessionId: n,
setFriendActions: i,
telemetryInfo: e.telemetryInfo
}), H.createElement(HJ, {
photonPlayerId: t,
photonSessionId: n,
setHandlers: a,
telemetryInfo: e.telemetryInfo
})), H.createElement(wD, {
playerNetworkId: u,
name: d,
icon: m ? ih.STAR : void 0
}), H.createElement(TJ, {
hideOnPressedOrFocused: g,
texts: [ p, f ]
}), c && H.createElement(PJ, null));
})), GJ = {
pg_id: "tab_friends",
destination_name: "offline_friends",
option: "see_player_actions"
}, zJ = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const [n, r] = H.useState(void 0), [i, o] = H.useState(void 0), a = hv(), {playerNetworkId: s} = s_(e), {data: l} = kA(e), {data: c} = DA(e), d = BA(e), u = c?.photonPlayerId || e;
let p;
p = s !== a.personaInfo.playerNetworkId ? u : e;
const f = void 0, h = IU(p, f, GJ), m = xw(p), g = JD({
playerName: m.name
}), y = bE(p);
if (!l) return null;
const I = !(!i?.primaryAction && !i?.secondaryAction);
return H.createElement(VD, {
id: "offlineFriend-" + e,
narrationItem: g,
onFocus: n?.handleFocus,
onBlur: n?.handleBlur,
onClick: h,
...i
}, H.createElement(_J, {
delay: 500
}, H.createElement(UJ, {
photonPlayerId: p,
photonSessionId: f,
setFriendActions: o,
telemetryInfo: t
}), H.createElement(HJ, {
photonPlayerId: p,
photonSessionId: f,
setHandlers: r,
telemetryInfo: t
})), H.createElement(wD, {
playerNetworkId: m.playerNetworkId,
name: m.name,
icon: y ? ih.STAR : void 0
}), d?.mostRecentlyLoggedInPersonaDate ? H.createElement(nF, {
hideOnPressedOrFocused: I,
timeMs: 1e3 * d.mostRecentlyLoggedInPersonaDate
}) : null);
})), jJ = {
pg_id: "tab_friends",
destination_name: "blocked",
option: "see_player_actions"
}, qJ = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const [n, r] = H.useState(void 0), i = void 0, o = ol(), {data: a} = cF(e), s = IU(e, i, jJ), {name: l, playerNetworkId: c} = xw(e), {unblock: d} = IF(), u = WL(FJ.Primary), p = H.useMemo((() => ({
keyBinding: u,
label: Em("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_UNBLOCK"),
callback: zE(o, e, i, (() => d(e)), t && {
...t,
msg_id: t.destination_name,
option: "unblock"
})
})), [ e, i, u, t, d, o ]), f = JD({
playerName: l
});
return a ? H.createElement(VD, {
id: "blockedPlayer-" + e,
narrationItem: f,
onFocus: n?.handleFocus,
onBlur: n?.handleBlur,
onClick: s,
primaryAction: p
}, H.createElement(_J, {
delay: 500
}, H.createElement(HJ, {
photonPlayerId: e,
photonSessionId: i,
setHandlers: r,
telemetryInfo: t
})), H.createElement(wD, {
playerNetworkId: c,
name: l
}), !!a.createTimeMs && H.createElement(nF, {
hideOnPressedOrFocused: !0,
timeMs: a.createTimeMs
})) : null;
}));
function YJ(e) {
const [t, n] = ml(fA), r = KO(oT().get(), e);
return H.useEffect((() => {
!t || r.loading || r.uninitialized || n(!1);
}), [ r.loading, r.uninitialized, n, t ]), {
...r,
loading: t
};
}
function WJ(e) {
const t = YJ(e), n = KO(nC(pA), e), r = hI([ n, t ]);
return {
...r,
timestamp: n.timestamp,
data: r.loading ? void 0 : n.data
};
}
var KJ = {
0: Np(),
1: Np(),
2: Np()
};
function XJ() {
const {isExpanded: e, onToggle: t} = pD({
id: "friend-section-online",
onToggleCallback: HE("tab_friends", "online_friends"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), {isExpanded: n, onToggle: r} = pD({
id: "friend-section-offline",
onToggleCallback: HE("tab_friends", "offline_friends"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), {isExpanded: i, onToggle: o} = pD({
id: "friend-section-blocked",
onToggleCallback: HE("tab_friends", "blocked"),
isInitiallyExpanded: !1,
rememberExpandedState: !0
});
return H.useMemo((() => {
const a = new _V;
return a.addSection({
id: 0,
isExpanded: e,
onToggle: t,
title: Em("PHOTON-SOCIAL_FRIENDS_LIST_SECTION-HEAD_ONLINE-ALL"),
component: JJ,
focusId: KJ[0],
telemetryInfo: {
pg_id: "tab_friends",
destination_name: "online_friends",
msg_id: "online_friends"
}
}), a.addSection({
id: 1,
isExpanded: n,
onToggle: r,
title: Em("PHOTON-SOCIAL_FRIENDS_LIST_SECTION-HEAD_OFFLINE"),
component: zJ,
focusId: KJ[1],
telemetryInfo: {
pg_id: "tab_friends",
destination_name: "offline_friends",
msg_id: "offline_friends"
}
}), a.addSection({
id: 2,
isExpanded: i,
onToggle: o,
title: Em("PHOTON-SOCIAL_FRIENDS_LIST_SECTION-HEAD_BLOCKED"),
component: qJ,
focusId: KJ[2],
telemetryInfo: {
pg_id: "tab_friends",
destination_name: "blocked",
msg_id: "blocked"
}
}), a;
}), [ i, e, n, o, t, r ]);
}
var QJ = Cl({
debugName: "metricSentThisGameSession",
default: !1
}), $J = e => {
const t = ol(), n = H.useRef(Date.now());
H.useEffect((() => {
nl((() => {
if (!t.get(QJ) && !e) {
const e = (() => {
const e = t.get(pA);
return e.data ? e.data[0].length + e.data[1].length : -1;
})();
t.get(oI).addEvent({
eventType: "photon_page_view",
num_of_friends: e,
ldur_ms: Date.now() - n.current
}), t.set(QJ, !0);
}
}));
}), [ e, t ]);
}, ZJ = Qc({
marginBottom: Vc(Rd.DimensionSpace.medium),
fontSize: Jc(Rd.TextSizeHeading.smaller)
}), eG = () => {
const e = wE();
return VE({
pg_id: e,
msg_id: "information_card_friends"
}), H.createElement(WF, null, H.createElement(IT, {
color: Rd.TextColorStandard.emphasized,
text: Em("PHOTON-SOCIAL_FRIENDS_LIST_DESCRIPTOR-CARD_TITLE"),
style: ZJ
}), H.createElement(IT, {
text: Em("PHOTON-SOCIAL_FRIENDS_LIST_DESCRIPTOR-CARD_BODY")
}));
}, tG = Ii.observer((() => {
const e = ol(), t = AV(WJ(8e3), XJ()), {rows: n} = NV(t.sectionsState, t.data, $g, {
cacheName: "friends-page",
cacheKey: t.cacheKey
});
let r;
return IJ(), $J(t.loading), !Fs.isPartyEnabled && $T(e, "fic_0", "InfoCard") && (r = H.createElement(eG, null)), 
H.createElement(jU, {
loading: t.loading,
empty: t.empty,
emptyContent: H.createElement(lF, {
headline: Em("PHOTON-SOCIAL_FRIENDS_EMPTY_TITLE"),
body: Em("PHOTON-SOCIAL_FRIENDS_LIST_EMPTY_DESC"),
telemetryPageId: "tab_friends"
}),
detailsFallbackContent: r,
error: t.error,
rows: n
});
})), [nG, rG] = El({
debugName: "friendListUpdateEventState",
create: () => new os
}), iG = () => {
const e = rG(), {showNotification: t} = bO(), n = hv(), r = ol();
H.useEffect((() => e.subscribe((e => {
t(2, 2, {
icon: ih.AVATAR,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_FRIENDS_ADD-CONFIRM", {
"%primaryID%": NT(kO(r, e, n), {
allowEllipsis: !0
})
})
}, {
setting: 3,
telemetryInfo: {
pg_id: "tst_friendreq_accepted"
}
});
}))), [ r, e, n, t ]);
}, oG = () => {
const e = av();
return H.useEffect((() => {
ME(e, {
pg_id: "tab_game_invites",
status: "impression",
destination_name: "empty_state",
msg_id: "empty_state"
});
}), [ e ]), H.createElement(rF, {
headline: Em("PHOTON-SOCIAL_INVITES_EMPTY_TITLE"),
body: Em("PHOTON-SOCIAL_INVITES_EMPTY_DESC")
});
}, aG = Ii.observer((({productId: e, productTitle: t, ...n}) => {
const {data: r} = YU(e), i = r?.title ?? t;
return i ? H.createElement(tF, {
...n,
text: i
}) : null;
})), sG = ({gameInvite: e, presence: t}) => {
const n = Date.now() < e.expiryTimestampMs, r = !n && !e.isRevoked, i = ZD(e.createdTimestampMs), o = Em("PHOTON-SOCIAL_INVITE-DETAILS-CARD_TIME-RECEIVED", {
"%time%": i.toLowerCase()
}), a = ZD(e.expiryTimestampMs), s = Em("PHOTON-SOCIAL_INVITE-DETAILS-CARD_TIME-EXPIRED", {
"%time%": a.toLowerCase()
}), l = t?.properties?.currentPartySize, c = t?.properties?.maxPartySize;
let d, u;
if (n ? void 0 !== l && void 0 !== c && (d = Em("PHOTON-SOCIAL_INVITE-DETAILS-CARD_PARTY-SIZE", {
"%currentPartySize%": "" + l,
"%maxPartySize%": "" + c
})) : d = s, n) u = o; else {
u = r ? Em("PHOTON-SOCIAL_INVITE-DETAILS-CARD_EXPIRED-TIMED-OUT") : void 0;
}
return H.createElement(JH, {
productId: e.senderProductId,
body1: d,
body2: u,
expired: r,
gameInvite: e
});
};
function lG(e) {
const t = e.gameJoinTokenTypes.includes("party"), n = e.gameJoinTokenTypes.includes("lobby"), r = t && n;
return Em(t && !r ? "PHOTON-SOCIAL_INVITE-DETAILS-CARD_TITLE" : n && !r ? "PHOTON-SOCIAL_LOBBY-INVITE-DETAILS-CARD_TITLE" : "PHOTON-SOCIAL_COMBO-INVITE-DETAILS-CARD_TITLE");
}
var cG = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n, telemetryInfo: r} = e, {data: i} = qU(t, n), {data: o} = dR(t), {name: a, playerNetworkId: s} = xw(t), l = LC(t, n);
if (!o) return null;
let c, d;
if (i?.isOnline) {
const e = IH(i);
c = e ? i.activityDescription : void 0, d = e ? i.activityDetails : void 0;
} else c = Em("PHOTON-SOCIAL_PRESENCE_OFFLINE");
return H.createElement(WF, null, H.createElement(aL, {
text: lG(o),
color: Rd.TextColorStandard.emphasized,
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger))
}), H.createElement(sG, {
gameInvite: o,
presence: i
}), H.createElement(IT, {
text: Em("PHOTON-SOCIAL_INVITE-DETAILS-CARD_SENDER-INFO", {
"%senderPrimaryID%": NT({
name: a,
playerNetworkId: s
}, {
allowEllipsis: !0
})
}),
color: Rd.TextColorStandard.emphasized,
style: rd("marginBottom", Vc(Rd.DimensionSpace.smaller))
}), c ? H.createElement(IT, {
text: c,
color: Rd.TextColorStandard.default,
style: d ? rd("marginBottom", Vc(Rd.DimensionSpace.smallest)) : void 0
}) : null, d ? H.createElement(IT, {
text: d,
color: Rd.TextColorStandard.default
}) : null, l && H.createElement(nH, {
isReceivedGameInvite: !0,
photonPlayerId: t,
photonSessionId: n,
style: rd("marginTop", Vc(Rd.DimensionSpace.larger))
}), H.createElement(jH, {
photonPlayerId: t,
telemetryInfo: r,
photonSessionId: n,
style: rd("marginTop", Vc(Rd.DimensionSpace.larger))
}));
})), [dG, uG] = Qs("GameInvitesSeenStatus");
function pG(e, t) {
e.length && e.push(H.createElement(FD, {
key: "divider" + e.length
})), e.push(t);
}
var fG = Ii.observer((({photonPlayerId: e, expired: t, forAnotherGame: n, gameInvite: r, seenState: i, telemetryInfo: o}) => {
const a = r?.senderProductId ?? Fs.productId, s = void 0, l = H.useMemo((() => ({
...o,
context: {
tpid: a
}
})), [ a, o ]), c = IU(e, s, l), d = TR(e, s, l), {name: u, playerNetworkId: p} = xw(e), f = LC(e, s), {handleFocus: h, handleBlur: m} = yV({
photonPlayerId: e,
photonSessionId: s,
PlayerDetailsComponent: cG,
telemetryInfo: l
}), g = eR(r), y = H.useCallback((() => {
i?.setItemSeen(g), h();
}), [ h, g, i ]), I = [];
(t || n) && pG(I, H.createElement(aG, {
hideOnPressedOrFocused: !0,
productId: r.senderProductId,
key: "productTitle",
style: rd("marginEnd", Vc(Rd.DimensionSpace.small))
})), t || pG(I, H.createElement(nF, {
timeMs: r.createdTimestampMs,
key: "fromNow",
style: rd("marginStart", Vc(Rd.DimensionSpace.small))
}));
const _ = JD({
playerName: u
});
return H.createElement(VD, {
id: e,
narrationItem: _,
onFocus: y,
onBlur: m,
onClick: c,
showDot: !1 === i?.isItemSeen(g),
...d
}, H.createElement(wD, {
playerNetworkId: p,
name: u
}), H.createElement(MD, {
hideOnPressedOrFocused: !0
}, H.createElement(H.Fragment, null, I, f && H.createElement(PJ, null))));
})), hG = H.memo((({photonPlayerId: e, gameInvite: t, telemetryInfo: n}) => {
const {gameInvites: r} = uG();
return H.createElement(fG, {
photonPlayerId: e,
gameInvite: t,
telemetryInfo: n,
seenState: r
});
})), mG = H.memo((({photonPlayerId: e, gameInvite: t, telemetryInfo: n}) => {
const {crossGameInvites: r} = uG();
return H.createElement(fG, {
photonPlayerId: e,
gameInvite: t,
telemetryInfo: n,
seenState: r,
forAnotherGame: !0
});
})), gG = H.memo((({photonPlayerId: e, gameInvite: t, telemetryInfo: n}) => H.createElement(fG, {
photonPlayerId: e,
gameInvite: t,
telemetryInfo: n,
expired: !0
}))), yG = Sl({
debugName: "PlayersByGameInviteSection",
get: function({get: e}) {
const t = e(Qk).get(), n = e(b_);
let r;
return t.data && (r = aR(n, t.data, !1)), {
...t.toProps(),
data: r
};
}
}), IG = e => e.photonPlayerId, _G = e => {
const t = KO(nC(yG), e), n = RA(H.useMemo((() => {
return t.data ? [ ...(e = t.data)[2].map(IG), ...e[3].map(IG), ...e[4].map(IG) ] : [];
var e;
}), [ t.data ]), e);
return {
...hI([ t, n ]),
data: t.data
};
}, bG = Qg("/game-invite/:photonPlayerId?", "tab_game_invites"), SG = {
2: Np(),
3: Np(),
4: Np()
};
function vG(e = "tab_game_invites") {
const {isExpanded: t, onToggle: n} = pD({
id: "game-invite-section-current-game-invites",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: HE(e, "current_game_invites")
}), {isExpanded: r, onToggle: i} = pD({
id: "game-invite-section-ea-game-invites",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: HE(e, "other_game_invites")
}), {isExpanded: o, onToggle: a} = pD({
id: "game-invite-section-expired-invites",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: HE(e, "expired_game_invites")
}), {gameInvites: s, crossGameInvites: l} = uG(), {data: c} = YU(Fs.productId), d = Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_INVITES_GAME-CURRENT", {
"%currentGame%": c?.title ?? Em("PHOTON-SOCIAL_GAME-NAME-FALLBACK")
});
return H.useMemo((() => {
const c = new _V;
return c.addSection({
id: 2,
isExpanded: t,
getShowDot: () => s.getUnseenCount() > 0,
onToggle: n,
title: d,
component: hG,
focusId: SG[2],
telemetryInfo: {
pg_id: e,
destination_name: "current_game_invites",
msg_id: "current_game_invites"
}
}), c.addSection({
id: 3,
isExpanded: r,
getShowDot: () => l.getUnseenCount() > 0,
onToggle: i,
title: Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_INVITES_GAME-OTHER"),
component: mG,
focusId: SG[3],
telemetryInfo: {
pg_id: e,
destination_name: "other_game_invites",
msg_id: "other_game_invites"
}
}), c.addSection({
id: 4,
isExpanded: o,
onToggle: a,
title: Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_INVITES_EXPIRED"),
component: gG,
focusId: SG[4],
telemetryInfo: {
pg_id: e,
destination_name: "expired_game_invites",
msg_id: "expired_game_invites"
}
}), c;
}), [ e, t, n, d, r, i, o, a, s, l ]);
}
var TG = Ii.observer((() => {
const e = AV(_G(8e3), vG()), {rows: t} = NV(e.sectionsState, e.data, bG);
return H.createElement(jU, {
loading: e.loading,
empty: e.empty,
emptyContent: H.createElement(oG, null),
error: e.error,
rows: t
});
})), [EG, PG] = Qs("NotificationStepsContext"), OG = ({children: e, initialStep: t}) => {
const [n, r] = H.useState(t), i = H.useMemo((() => ({
currentStep: n,
setCurrentStepCallback: e => () => r(e)
})), [ n ]);
return H.createElement(EG.Provider, {
value: i
}, e);
}, CG = ({children: e, id: t}) => {
const {currentStep: n} = PG(), [r, i] = H.useState(n === t), {timeout: o} = dp(), a = hP(r ? 1 : 0);
return H.useEffect((() => {
n !== t ? (a.to(0, SP), o("opacityOutDone", (() => {
i(!1);
}), SP.duration)) : (o("showContent", (() => {
i(!0);
}), SP.duration), o("opacityInStart", (() => {
a.to(1, SP);
}), 1.75 * SP.duration));
}), [ n, t, a, o ]), H.createElement("surface", {
style: a.propStyle("opacity")
}, r ? e : void 0);
}, NG = ({confirmAction: e, dismiss: t, narrationItem: n}) => H.createElement(H.Fragment, null, H.createElement(EP, {
style: mP
}, H.createElement(NP, {
texture: ih.EXIT
}), H.createElement(kP, {
text: e.title
})), H.createElement(xP, {
style: mP
}, H.createElement(NP, {
texture: ih.INFORMATION
}), H.createElement(kP, {
text: e.description ?? Em("PHOTON-SOCIAL_NOTIFICATION_INVITE-DESC_LEAVE-PARTY")
})), H.createElement(Nh, {
id: "notificationConfirmStep",
isolate: !0
}, H.createElement(BP, null, H.createElement(DP, {
variant: 0,
id: "confirm",
text: Em("BUTTON_CONFIRM"),
callback: e.callback,
narration: {
buttonNumber: 1,
buttonTotal: 2
},
narrationItem: n
}), H.createElement(DP, {
style: gP,
id: "cancel",
text: Em("BUTTON_CANCEL"),
callback: t,
narration: {
buttonNumber: 2,
buttonTotal: 2
},
narrationItem: n
})))), AG = ({actions: e, onDecline: t, narrationItem: n}) => H.createElement(BP, null, e.map(((t, r) => H.createElement(DP, {
key: t.id,
narration: {
buttonNumber: r + 1,
buttonTotal: e.length + 1
},
narrationItem: n,
variant: 0 === r ? 0 : void 0,
id: t.id,
style: 0 !== r ? gP : void 0,
text: t.label,
callback: t.callback
}))), H.createElement(DP, {
id: "decline",
text: Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_DECLINE"),
callback: t,
style: gP,
narration: {
buttonNumber: e.length + 1,
buttonTotal: e.length + 1
},
narrationItem: n,
variant: 0 === e.length ? 0 : 1
})), LG = Qc({
justifyContent: "center",
alignItems: "center",
padding: Vc(Rd.DimensionSpace.smallest)
}), wG = (e, t, n) => {
const r = e.gameJoinTokenTypes.includes("party"), i = e.gameJoinTokenTypes.includes("lobby");
return r && !i ? Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_INVITE-RECEIVE", {
"%senderPrimaryID%": t
}) : i && !r ? Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_LOBBY_INVITE-RECEIVE", {
"%senderPrimaryID%": t
}) : Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_COMBO_INVITE-RECEIVE", {
"%senderPrimaryID%": t,
"%gameName%": n
});
}, kG = Ii.observer((({declineAction: e, dismiss: t, onClose: n, isActivated: r, stayActive: i, holdOptions: o, disclaimer: a, actions: s, gameImage: l, gameName: c, invite: d, primaryId: u, player: p, partySupport: f, showConfirm: h}) => {
const {DeepLink: m} = Tm(), g = bO(), y = CE(), [I, _] = H.useState(), [b, S] = H.useState(!1), {activateText: v, holdActivateText: T} = fO(), {setCurrentStepCallback: E} = PG(), P = H.useCallback((() => {
e(), t();
}), [ e, t ]), O = H.useMemo((() => s.map((e => ({
...e,
callback: async () => {
!f?.isSupported && f?.enableSupportAction ? (S(!0), await ok({
action: f?.enableSupportAction,
DeepLink: m,
notifications: g,
modals: y,
player: p,
confirmAction: (n, r) => new Promise((() => {
_({
callback: async () => {
t(), await r(), e.callback();
},
title: n.localizedTitle,
description: n.localizedDescription
}), E("Confirm")();
}))
})()) : h ? (_({
callback: async () => {
e.callback(), t();
},
title: d.gameJoinTokenTypes.includes("party") ? Em("PHOTON-SOCIAL_NOTIFICATION_INVITE_CONFIRM-LEAVE-PARTY") : Em("PHOTON-SOCIAL_NOTIFICATION_INVITE_CONFIRM-LEAVE-LOBBY")
}), E("Confirm")()) : (e.callback(), t());
}
})))), [ s, f?.isSupported, f?.enableSupportAction, h, m, g, y, p, E, t, d.gameJoinTokenTypes ]);
return H.createElement(H.Fragment, null, H.createElement(CG, {
id: "Actions"
}, H.createElement(EP, {
style: mP
}, l ? H.createElement(LP, {
texture: l
}) : void 0, H.createElement(kP, {
text: wG(d, u, c)
})), H.createElement(iO, {
onClose: n,
isActivated: r,
onActivated: i,
activateText: v,
holdActivateText: T,
holdRequired: o.holdRequired,
holdTime: o.holdTimeMs
}, a ? H.createElement(xP, {
style: mP
}, H.createElement(NP, {
texture: a.icon
}), H.createElement(kP, {
text: a.text
})) : void 0, b ? H.createElement("surface", {
style: LG
}, H.createElement(gL, null)) : H.createElement(AG, {
actions: O,
onDecline: P,
narrationItem: pO
}))), I ? H.createElement(CG, {
id: "Confirm"
}, H.createElement(NG, {
confirmAction: I,
dismiss: t,
narrationItem: pO
})) : void 0);
})), RG = ({id: e, ...t}) => H.createElement(vP, {
key: e
}, H.createElement(OG, {
initialStep: "Actions"
}, H.createElement(kG, {
...t
}))), xG = fm.InputBindings.Action, [BG, DG] = El({
debugName: "gameInviteAddedEventState",
create: () => new os
}), FG = () => {
const e = DG(), t = XS("main"), n = hv(), r = WL(xG.Primary), i = ol(), o = CE(), a = bO(), s = av(), l = hw(), c = Tm(), d = fk();
H.useEffect((() => {
const {Lobby: t, Party: d, PresenceSession: u, GameInvite: p, Voip: f, DeepLink: h} = c, {showNotification: m, showNotificationComponent: g} = a;
return e.subscribe((async (e, f, h) => {
const {senderProductId: y, senderPlayerNetworkId: I} = e;
if ("NINTENDO" !== n.personaInfo.playerNetworkId && n.personaInfo.playerNetworkId === I) return;
const _ = Fs.productId === y, b = h?.title ?? Em("PHOTON-SOCIAL_GAME-NAME-FALLBACK"), S = NT(kO(i, f, n), {
allowEllipsis: !0
}), v = (T = h?.gameTitleLogo, WU(T, 80))?.url;
var T;
const E = i.getItemUntracked(NC, f.photonPlayerId), P = fC(E), O = tH(E, !0), C = O ? {
text: O,
icon: ih.INCOMPATIBLE_WHITE
} : void 0;
if (_) {
const {actions: n, telemetryToasterId: m} = IR(i, t, d, 0, u, p, 0, o, a, l, f.photonPlayerId, e, r, !1, s, {
pg_id: "tst_combo_invite_received",
destination_name: "actions",
context: {
tpid: h?.productId
}
}, c, P, "connect_toast"), y = UE(s, bR(i, f.photonPlayerId), {
pg_id: m,
msg_id: m,
destination_name: "actions",
option: "decline",
context: {
tpid: h?.productId
}
});
let I;
if (Fs.isPartyEnabled) {
const {data: t} = await Ow(i, u, p, f.photonPlayerId, e), {partyId: n} = mk(t, [ "party" ]);
n && (I = (await d.isPartySupported({
partyIds: [ n ]
}))?.partySupport[0] ?? {
isSupported: !0
});
}
const _ = !!MO(i).data, T = (pN(i) ?? 0) > 1 || _;
g(1, 4, (t => H.createElement(RG, {
gameName: b,
gameImage: v,
primaryId: S,
invite: e,
showConfirm: T,
actions: n,
declineAction: y,
disclaimer: C,
partySupport: I,
player: f,
...t
})), {
setting: 5,
telemetryInfo: {
pg_id: m,
msg_id: m,
context: {
tpid: h?.productId
}
}
}, {
hasActions: !0,
text: "GameJoinNotification - " + e.gameInviteId
});
} else m(1, 4, {
icon: v,
iconSize: 1,
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_GAME_INVITE-RECEIVE", {
"%senderPrimaryID%": S
}),
infoArea: {
icon: ih.INFORMATION,
text: Em("PHOTON-SOCIAL_NOTIFICATION_INVITE-DESC_SWITCH-GAMES", {
"%gameName%": b
})
},
actions: [ {
id: "got-it",
callback: () => {},
label: Em("BUTTON_GOT-IT"),
keyBinding: r
}, {
id: "decline",
callback: () => {
bR(i, f.photonPlayerId)();
},
label: Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_DECLINE"),
keyBinding: r
} ]
}, {
setting: 5
});
}));
}), [ l, s, e, n, r, t, i, o, a, c, d ]);
}, MG = fs.Input.DeviceType, UG = () => {
const {showNotification: e} = bO(), [t, n] = H.useState(new Set);
sl((e => {
e !== MG.NotSet && n((t => new Set(t).add(e)));
}), [], Gp, !0), H.useEffect((() => {
t.size > 1 && e(3, 3, {
icon: ih.INFORMATION,
text: Em("PHOTON-SOCIAL_NOTIFICATION_GLOBAL_INPUT_CONFIRM-NEW")
});
}), [ e, t.size ]);
}, HG = fm.InputBindings.Action, VG = Cl({
debugName: "voipButtonSurfaceId",
default: null
}), JG = () => {
const {ftueManager: e} = gJ(), t = pl(VG);
return yi.useObserver((() => e.isLoaded && e.isDone("ftue_voip_intro"))) ? void 0 : t;
}, GG = () => {
const e = ol(), {ftueManager: t, showFTUENotification: n} = gJ(), r = Ip(), i = WL(HG.ToggleMode), o = hv(), {data: a} = wF(o.photonPlayerId), s = !!a?.channel;
H.useEffect((() => {
if (!s) return;
return dE((() => e.get(VG)), (e => {
if (t.shouldShowFTUE("ftue_voip_intro")) {
n("ftue_voip_intro", (async () => {
await t.setAsDone("ftue_voip_intro");
}), (() => {}), Em("PHOTON-SOCIAL_FTUE_GAME-VOIP-TOOLTIP", {
"%key%": r.getKeyBindingText(i)
}), {
attachToSurface: {
surfaceId: e
},
showAsToast: !0,
telemetryInfo: {
pg_id: "ttip_voip_toggle",
destination_name: "tab_party"
}
});
}
}));
}), [ t, s, i, e, r, n ]);
}, zG = fm.InputBindings.Action, jG = Qc({
marginEnd: Vc(Rd.DimensionSpace.large)
}), qG = Qc({
marginStart: 0
}), YG = Qc({
flexDirection: "row",
alignItems: "center"
}), WG = ({primaryAction: e}, {getKeyBindingText: t}) => [ Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_ADD-PLAYERS"), e ? Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_PRESS-ACTION", {
"%key%": t(e.keyBinding)
}) : void 0 ], KG = Ii.observer((() => {
const e = ol(), {navigate: t} = XS(), n = av(), r = WL(zG.Primary), i = H.useCallback((() => {
ME(n, {
pg_id: "tab_party",
destination_name: "party_members",
msg_id: "party_members",
option: "add_players_to_voice_party",
context: {
tpid: Fs.productId
}
});
const r = e.getUntracked(pA).data?.[0][0]?.photonPlayerId;
t($g.link(r ? {
photonPlayerId: p_(r),
photonSessionId: r
} : void 0));
}), [ e, t, n ]);
return H.createElement(VD, {
onClick: i,
id: "addPartyMembersLink",
primaryAction: {
callback: i,
keyBinding: r
},
narrationItem: WG
}, H.createElement("surface", {
style: YG
}, H.createElement(BD, {
texture: ih.PLUS,
style: jG
}), H.createElement(tF, {
style: qG,
color: Rd.TextColorStandard.emphasized,
text: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_ADD-PLAYERS")
})));
})), XG = fm.InputBindings.Action, QG = (e, t, n) => {
const r = av(), i = WL(XG.Primary), o = WL(XG.Secondary), a = hv(), {eaPlayerId: s, playerNetworkId: l} = s_(e), {data: c} = wF(e), {data: d} = wF(a.photonPlayerId), u = s === a.tokenInfo.userId, p = PM(e, n), {data: f} = cU(e, t), h = f?.isMyLobbyJoinable, {isActionTaken: m, performAction: g} = YR(e), y = H.useCallback((() => {
g([ "lobby" ]);
}), [ g ]);
if (u && s && l) return d && p ? {
primaryAction: {
keyBinding: i,
label: p.text,
callback: p.action
}
} : {};
const I = h ? {
keyBinding: i,
label: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_LOBBY-INVITE"),
disabled: m,
disabledContent: H.createElement(xD, {
text: Em("PHOTON-SOCIAL_FRIENDS_LIST_ACTIONS_INVITE-SENT")
}),
callback: UE(r, y, n && {
...n,
status: "click",
option: "invite_to_lobby",
pg_id: "tab_party"
})
} : void 0, _ = e => sw(d, c) && p ? {
keyBinding: e,
label: p.text,
callback: p.action
} : void 0;
return I ? {
primaryAction: I,
secondaryAction: _(o)
} : {
primaryAction: _(i)
};
}, $G = fm.XboxPlatform.XboxPermission, ZG = fm.XboxPlatform.XUserPrivilege;
function ez(e, t) {
const [n, r] = H.useState({
isAllowed: !0,
privacyResult: void 0
}), i = ol(), o = EM(e);
return H.useEffect((() => {
if (mv(i).photonPlayerId === e || !o) return;
let n = !0;
return QE(i, e, [ $G.CommunicateUsingVoice ], t ? ZG.Communications : void 0).then((e => {
n && r((t => t.isAllowed !== e.isAllowed || t.privacyResult !== e.privacyResult ? e : t));
})), () => {
n = !1;
};
}), [ i, e, t, o, r ]), n;
}
var tz = e => kA(e), nz = fm.Voip.VoipStatus, rz = Qc({
position: "absolute",
top: 0,
left: 0,
right: 0,
bottom: 0
}), iz = {
speakerStroke: Qc({
texture: ih.SPEAKER_STROKE
}),
speakerFill: Qc({
texture: ih.SPEAKER_FILL
}),
speakerMuteLine: Qc({
texture: ih.SPEAKER_MUTE_LINE
}),
speakingLines: Qc({
texture: ih.SPEAKING_LINES
}),
microphone: Qc({
texture: ih.MICROPHONE
}),
microphoneMute: Qc({
texture: ih.MICROPHONE_MUTE_LINE
})
}, oz = Rd.TextColorStandard.emphasized, az = Rd.IconColorStandard.error, sz = Rd.IconColorStandard.success, lz = H.memo((({status: e, style: t}) => {
if (e === nz.None || e === nz.Disabled) return null;
let n;
return e === nz.Muted ? n = H.createElement(H.Fragment, null, H.createElement("surface", {
style: [ rz, iz.speakerStroke, rd("color", oz) ]
}), H.createElement("surface", {
style: [ rz, iz.speakerMuteLine, rd("color", az) ]
})) : e === nz.Speaking ? n = H.createElement(H.Fragment, null, H.createElement("surface", {
style: [ rz, iz.speakerFill, rd("color", oz) ]
}), H.createElement("surface", {
style: [ rz, iz.speakingLines, rd("color", sz) ]
})) : e === nz.Silent ? n = H.createElement("surface", {
style: [ rz, iz.speakerStroke, rd("color", oz) ]
}) : e === nz.SelfMuted && (n = H.createElement(H.Fragment, null, H.createElement("surface", {
style: [ rz, iz.microphone, rd("color", oz) ]
}), H.createElement("surface", {
style: [ rz, iz.microphoneMute, rd("color", az) ]
}))), H.createElement("surface", {
style: [ $B.icon, t ]
}, n);
})), cz = fm.XboxPlatform.XboxPermission, dz = {
type: ih.VOIP_RESTRICTED,
style: Qc({
height: Vc(Rd.DimensionSpace.larger),
width: Vc(Rd.DimensionSpace.larger)
})
}, uz = ({photonPlayerId: e}) => {
const [t, n] = H.useState(!1), r = ol(), i = Lw(), {eaPlayerId: o} = s_(e), a = !!o && nl((() => !!i.get().data?.get(o))), s = mv(r).photonPlayerId === e;
return H.useEffect((() => {
if (s || !a) return;
let t = !0;
return QE(r, e, [ cz.CommunicateUsingVoice ]).then((({isAllowed: e}) => {
!e && t && n(!0);
})), () => {
t = !1;
};
}), [ s, a, r, e ]), t ? H.createElement(eH, {
sectionTitle: Em("PHOTON-SOCIAL_PARTY_LIST_PRESENCE_RESTRICTED"),
textColor: Rd.TextColorStandard.emphasized,
icon: dz
}, H.createElement(IT, {
text: Em("PHOTON-SOCIAL_PLAYER-DETAIL_RESTRICTED", {
"%localPlatform%": Bv(TO(r).playerNetworkId)
})
})) : null;
}, pz = e => {
const t = Y_() && H.createElement(uz, {
photonPlayerId: e.photonPlayerId
});
return H.createElement(gV, {
...e,
additionalDetails: t
});
}, fz = fm.Voip.VoipStatus;
function hz(e, t) {
return e && e.status !== fz.Disabled && void 0 !== t && t.status !== fz.None && t.status !== fz.Disabled && e.channel === t.channel;
}
var mz = Qc({
marginLeft: Vc(Rd.DimensionSpace.small),
marginRight: Vc(Rd.DimensionSpace.small)
}), gz = Ii.observer((e => {
const {photonPlayerId: t, isMemberPartyLeader: n, isCommunicationRestricted: r} = e, {data: i} = wF(t), o = hv(), {data: a} = wF(o.photonPlayerId), s = r, l = n, c = hz(a, i), d = c || l, u = s ? Em("PHOTON-SOCIAL_PARTY_LIST_PRESENCE_RESTRICTED") : nV(a, i);
if (!d && !u) return null;
const p = e.hideOnPressedOrFocused;
return H.createElement(H.Fragment, null, d ? H.createElement(FD, null) : null, l && H.createElement(BD, {
texture: ih.PARTY_LEADER
}), c && i && H.createElement(lz, {
style: n ? mz : void 0,
status: i.status
}), H.createElement("surface", {
style: rd("flex", 1)
}), u ? H.createElement(tF, {
hideOnPressedOrFocused: p,
text: u,
icon: s ? {
type: ih.VOIP_RESTRICTED,
color: Rd.IconColorStandard.default
} : void 0
}) : null);
})), yz = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const n = void 0, {name: r, playerNetworkId: i} = xw(e), {isAllowed: o} = ez(e), a = IU(e, n, t), s = QG(e, n, t), {handleFocus: l, handleBlur: c} = yV({
photonPlayerId: e,
photonSessionId: n,
telemetryInfo: t,
PlayerDetailsComponent: pz
}), {data: d} = tz(e), {data: u} = sN(), p = JD({
playerName: r
});
if (!d || !u) return null;
const f = RM(u.partyLeader, d.eaPlayerId, d.playerNetworkId), h = !(!s?.primaryAction && !s?.secondaryAction);
return H.createElement(VD, {
id: e,
narrationItem: p,
onFocus: l,
onBlur: c,
onClick: a,
...s
}, H.createElement(wD, {
playerNetworkId: i,
name: r,
style: rd("flex", 0)
}), H.createElement(gz, {
hideOnPressedOrFocused: h,
isMemberPartyLeader: f,
photonPlayerId: e,
isCommunicationRestricted: !o
}));
})), Iz = Ii.observer((({encounter: e, telemetryInfo: t}) => {
const n = e.photonPlayerId, r = void 0, i = ol(), {data: o} = kA(n), {isAllowed: a} = ez(n), s = IU(n, r, t), l = QG(n, r, t), {handleFocus: c, handleBlur: d} = yV({
photonPlayerId: n,
photonSessionId: r,
telemetryInfo: t
}), {playerNetworkId: u} = vO(), p = o?.displayName ?? "", f = LO(i, u, o), h = JD({
playerName: p
}), m = !(!l?.primaryAction && !l?.secondaryAction);
return H.createElement(VD, {
id: n,
narrationItem: h,
onFocus: c,
onBlur: d,
onClick: s,
...l
}, H.createElement(wD, {
playerNetworkId: f,
name: p,
style: rd("flex", 0)
}), H.createElement(gz, {
photonPlayerId: n,
hideOnPressedOrFocused: m,
isCommunicationRestricted: !a
}));
})), _z = Cl({
debugName: "canCreatePartyState",
default: void 0
}), bz = fm.Voip.VoipChannel, Sz = () => {
const e = Tm(), t = pl(_z), n = SC(), r = ol(), i = bO(), o = av(), a = fw();
H.useEffect((() => Dn((() => ({
isInParty: r.get(ek),
isPartySupported: !!r.get(_z)?.isSupported
})), (({isInParty: e, isPartySupported: t}, {isPartySupported: o}) => {
!e && t && n.reseed().then((() => {
if (!o) {
const e = cw(r);
lw(r) || (e ? i.showCtaNotification(3, 3, {
icon: ih.VOIP
}, Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED_IN-PARTY"), Em("PHOTON-SOCIAL_NOTIFICATION_PARTY-VOIP_BUTTON_OPEN"), (() => a({
channel: bz.Party
}))) : uw(r, {
channel: bz.Party
}));
}
}));
}))), [ r, i, n, a ]), H.useEffect((() => (AS(e).then((e => {
t(e?.partySupport);
})), e.Party.onCreatePartySupportedChanged.subscribe((({partySupport: e}) => {
t(e);
})))), [ r, n, o, t, e ]);
}, vz = () => dl(_z), Tz = fm.InputBindings.Action, Ez = {
destination_name: "empty_state",
msg_id: "empty_state",
pg_id: "tab_party"
}, Pz = () => {
const e = vz(), t = hv(), n = CE(), r = bO(), i = av(), o = WL(Tz.Primary), {DeepLink: a} = Tm(), s = H.useMemo((() => {
const s = e?.enableSupportAction;
if (!s) return;
return {
callback: () => (ME(i, {
pg_id: "tab_party",
destination_name: "empty_state",
msg_id: "empty_state",
option: s.telemetryName
}), ok({
action: s,
DeepLink: a,
notifications: r,
modals: n,
player: {
eaPlayerId: t.tokenInfo.userId,
playerNetworkId: t.personaInfo.playerNetworkId,
personaId: t.personaInfo.personaId
},
showLoading: !0,
loadingTelemetryId: "overlay_enable_party"
})()),
keyBinding: o
};
}), [ e?.enableSupportAction, a, r, i, o, n, t ]);
VE(Ez);
const l = e?.enableSupportAction?.localizedName;
return s && l ? {
action: s,
label: l
} : void 0;
}, Oz = Qc({
marginTop: Vc(Rd.DimensionSpace.larger)
}), Cz = Ii.observer((({action: e, label: t}) => H.createElement("surface", {
style: [ mf(4), Oz ]
}, H.createElement(jf, {
onClick: e?.callback,
input: e,
label: t,
id: "no-party-cta"
})))), Nz = Ii.observer((() => {
const e = vz(), t = Pz();
return H.createElement(rF, {
headline: e?.localizedTitle,
body: e?.localizedReason
}, t && H.createElement(Cz, {
action: t.action,
label: t.label
}));
})), Az = i_({
eaPlayerId: "1",
playerNetworkId: "EA"
}), Lz = Qc({
marginEnd: Vc(Rd.DimensionSpace.large)
}), wz = Qc({
marginStart: 0
}), kz = Qc({
flexDirection: "row",
alignItems: "center"
}), Rz = Ii.observer((() => {
const e = vz();
return e?.localizedTitle && e?.localizedReason ? H.createElement(WF, null, H.createElement(aL, {
text: e.localizedTitle,
color: Rd.TextColorStandard.emphasized,
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger))
}), H.createElement(IT, {
text: e.localizedReason
})) : null;
})), xz = Ii.observer((() => {
const e = Pz();
let t = Em("PHOTON-SOCIAL_PARTY_EMPTY_NO-PARTY"), n = ih.PARTY;
e && (t = e.label, n = ih.EXIT);
const {handleBlur: r, handleFocus: i} = yV({
photonPlayerId: Az,
photonSessionId: void 0,
PlayerDetailsComponent: Rz
}), o = H.useMemo((() => ({primaryAction: e}, {getKeyBindingText: n}) => [ t, e ? Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_FOCUSED-LIST-CONTROL_PRESS-ACTION", {
"%key%": n(e.keyBinding)
}) : void 0 ]), [ t ]);
return H.createElement(VD, {
onClick: e?.action.callback,
id: "partiesUnavailable",
primaryAction: e?.action,
narrationItem: o,
onFocus: i,
onBlur: r
}, H.createElement("surface", {
style: kz
}, H.createElement(BD, {
texture: n,
style: Lz
}), H.createElement(tF, {
style: wz,
color: Rd.TextColorStandard.emphasized,
text: t
})));
})), Bz = Sl({
debugName: "sessionPlayersState",
get: function({get: e}) {
const t = e(fv).tokenInfo.userId, n = e(FA).get();
let r;
if (t && n.data) {
const e = n.data.getSortedList(), i = [];
let o = [];
const a = e.find((e => e.playerId === t));
a ? e.forEach((e => {
e.playerId !== t && (e.teamId === a.teamId ? i.push(e) : o.push(e));
})) : o = e, r = {
teammates: i,
opponents: o
};
}
return {
...n.toProps(),
data: r
};
}
}), Dz = Sl({
debugName: "recentlyMetListState",
get: function({get: e}) {
const t = e(fv).tokenInfo.userId, n = e(PS).get(), r = e(UA).get(), i = e(Bz), o = e(lS).get();
let a;
if (i.data && r.data && n.data && o.data) {
const e = r.data.getSortedList();
let s = i.data.opponents, l = i.data.teammates;
const c = new Set(n.data.keys()), d = new Set(o.data.keys()), u = [], p = new Set, f = new Set(s.concat(l).map((e => e.photonPlayerId)));
for (const n of e) n.playerId === t || c.has(n.photonPlayerId) || d.has(n.playerId) || f.has(n.photonPlayerId) || p.has(n.photonPlayerId) || (p.add(n.photonPlayerId), 
u.push(n));
s = s.filter((e => !d.has(e.playerId))), l = l.filter((e => !d.has(e.playerId))), 
a = {
0: FE(l),
1: FE(s),
2: FE(u)
};
}
const s = hI([ n, i, r ]);
return {
...s,
data: s.hasData ? a : void 0
};
},
equals: (e, t) => {
if (e.loading !== t.loading || e.uninitialized !== t.uninitialized || e.error !== t.error) return !1;
const n = e.data?.[0] || [], r = t.data?.[0] || [], i = e.data?.[1] || [], o = t.data?.[1] || [], a = e.data?.[2] || [], s = t.data?.[2] || [];
return n.length === r.length && i.length === o.length && a.length === s.length && (rA(n, r, "photonPlayerId") && rA(i, o, "photonPlayerId") && rA(a, s, "photonPlayerId"));
}
}), Fz = e => eC(HA().get(), (t => t.get(e))), Mz = (e, t, n) => {
const r = n.sort(((n, r) => n.photonPlayerId === e ? -1 : r.photonPlayerId === e ? 1 : RM(t, n.eaPlayerId, n.playerNetworkId) ? -1 : RM(t, r.eaPlayerId, r.playerNetworkId) ? 1 : n.joinTimestampMs - r.joinTimestampMs)), i = r.length;
return r.map(((e, t) => ({
...e,
telemetryInfo: {
pg_id: "tab_party",
msg_id: "party_members",
destination_name: "party_members",
index: {
item_index: t + 1,
total_items: i
},
context: {
tpid: Fs.productId
}
}
})));
}, Uz = (e, t) => {
const n = {};
t.forEach((e => {
n[e.photonPlayerId] = !0;
}));
const r = e.teammates.filter((e => !n[e.photonPlayerId])), i = r.length;
return r.map(((e, t) => ({
encounter: e,
photonPlayerId: e.photonPlayerId,
telemetryInfo: {
pg_id: "tab_party",
msg_id: "other_team_members",
destination_name: "other_team_members",
index: {
item_index: t + 1,
total_items: i
},
context: {
tpid: Fs.productId
}
}
})));
}, Hz = Sl({
debugName: "playersBySectionState",
get: function({get: e}) {
const t = e(fv), n = e(bC).get(), r = e(Qk).get(), i = e(b_), o = e(Bz);
let a;
if (r.data) {
let e = [], s = [];
if (n.data && o.data) {
const r = Array.from(n.data.members.values());
e = Mz(t.photonPlayerId, n.data.partyLeader, r), s = Uz(o.data, r);
}
a = {
0: e,
1: s,
...aR(i, r.data, !0)
};
}
const s = hI([ r, o ]);
return {
...hI([ s, n ]),
data: s.hasData ? a : void 0
};
}
}), Vz = e => e.photonPlayerId, Jz = e => {
const t = KO(nC(Hz), e), n = RA(H.useMemo((() => {
return t.data ? [ ...(e = t.data)[0].map(Vz), ...e[1].map(Vz), ...e[2].map(Vz), ...e[3].map(Vz), ...e[4].map(Vz) ] : [];
var e;
}), [ t.data ]), e);
return {
...hI([ t, n ]),
data: t.data
};
}, Gz = {
0: Np(),
1: Np(),
2: Np(),
3: Np(),
4: Np()
}, zz = Qc({
flexDirection: "row"
}), jz = Qc({
marginEnd: Vc(8),
flexShrink: 1
}), qz = Qc({
flexShrink: 0,
marginEnd: Vc(Rd.DimensionSpace.large)
}), Yz = ({title: e, partyMaxSize: t, partySize: n}) => H.createElement("surface", {
style: zz
}, H.createElement("surface", {
style: jz
}, H.createElement(nD, {
color: Rd.TextColorStandard.emphasized,
style: rd("textEllipsis", !0),
text: e
})), H.createElement(nD, {
color: Rd.TextColorStandard.emphasized,
style: qz,
text: Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_PARTY-SIZE", {
"%currentPartySize%": String(n),
"%maxPartySize%": String(t)
})
}));
function Wz() {
const e = vG("tab_party"), {data: t} = YU(Fs.productId), {isExpanded: n, onToggle: r} = pD({
id: "party-section-party-members",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: HE("tab_party", "party_members")
}), {isExpanded: i, onToggle: o} = pD({
id: "party-section-other-team-members",
isInitiallyExpanded: !0,
rememberExpandedState: !0,
onToggleCallback: HE("tab_party", "other_team_members")
}), {data: a} = sN(), {data: s = 0} = lN((e => e.size)), l = a?.maxSize ?? 0, c = s >= l;
let d, u;
return a?.localizedPartyTitle ? (d = H.createElement(Yz, {
partyMaxSize: l,
partySize: s,
title: a.localizedPartyTitle
}), u = Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_OPTIONAL", {
"%partyName%": a.localizedPartyTitle,
"%currentPartySize%": String(s),
"%maxPartySize%": String(l)
})) : d = t?.title ? Fs.isTightlyCoupledParties ? Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_TIGHTLY-COUPLED", {
"%gameName%": t.title,
"%currentPartySize%": String(s),
"%maxPartySize%": String(l)
}) : Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_LOOSELY-COUPLED", {
"%gameName%": t.title,
"%currentPartySize%": String(s),
"%maxPartySize%": String(l)
}) : Fs.isTightlyCoupledParties ? Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_TIGHTLY-COUPLED-GENERIC", {
"%currentPartySize%": String(s),
"%maxPartySize%": String(l)
}) : Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_LOOSELY-COUPLED-GENERIC", {
"%currentPartySize%": String(s),
"%maxPartySize%": String(l)
}), H.useMemo((() => {
const t = new _V;
return t.addSection({
id: 0,
isExpanded: n,
onToggle: r,
title: d,
component: yz,
focusId: Gz[0],
afterItemsComponent: c ? void 0 : KG,
telemetryInfo: {
pg_id: "tab_party",
destination_name: "party_members",
msg_id: "party_members"
},
narrationTitle: u
}), t.addSection({
id: 1,
isExpanded: i,
onToggle: o,
title: Em("PHOTON-SOCIAL_PARTY_LIST_SECTION-HEAD_MEMBERS_TEAM-CURRENT"),
component: Iz,
focusId: Gz[1],
telemetryInfo: {
pg_id: "tab_party",
destination_name: "other_team_members",
msg_id: "other_team_members"
}
}), _V.createMergedSection(t, e);
}), [ n, r, d, c, u, i, o, e ]);
}
var Kz = {
component: xz,
focusId: "partyEmptyListControl"
}, Xz = Ii.observer((() => {
GG();
const e = AV(Jz(8e3), Wz()), t = e.data?.[0].length, {rows: n} = NV(e.sectionsState, e.data, xk, {
beforeListContent: t ? void 0 : Kz
});
return H.createElement(jU, {
loading: e.loading,
empty: e.empty,
emptyContent: H.createElement(Nz, null),
error: e.error,
rows: n
});
})), Qz = fs.Input.ButtonState, $z = fs.Input.DeviceType, Zz = /[\u0020-\u007E\u00A0-\u017F\u0192\u01FA-\u01FF\u20AC\u2122\u2012\u2013\u2014\u2018\u2019\u201C\u201D\u0410-\u042F\u0490\u0406\u0402\u0452\u0403\u0453\u0456\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\u040B\u045B\u040C\u045C\u0455\u040E\u045E\u040F\u045F\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E]/, ej = class {
constructor(e, t, {value: n = "", onEnter: r, onChange: i, onActivate: o, onDeactivate: a, onButtonDown: s, onClear: l, maxTextLength: c, clearButton: d}) {
this.twinkle = e, this.inputHandler = t, this.state = {
text: "",
cursor: 0,
active: !1
}, this.shouldUseVirtualKeyboard = !0, this.inputAreaRef = H.createRef(), this.setText = An((e => {
this.state.text = e || "", this.onChange?.(this.state.text, "");
})), this._onButtonDown = An((e => {
const {text: t, cursor: n} = this.state;
switch (e.keyboardKeycode) {
case 13:
this.onEnter?.(t);
break;

case 27:
this.deactivate();
break;

case 37:
this.state.cursor = Math.max(0, n - 1);
break;

case 39:
this.state.cursor = Math.min(t.length, n + 1);
break;

case 8:
this.state.text = t.substring(0, n - 1) + t.substring(n), this.state.cursor = Math.max(0, n - 1), 
this.onChange?.(this.state.text, "");
break;

case 46:
this.state.text = t.substring(0, n) + t.substring(n + 1), this.state.cursor = Math.min(this.state.text.length, n), 
this.onChange?.(this.state.text, "");
}
this.clearButton && (e.keyboardKeycode && this.clearButton.keyboardKeycode === e.keyboardKeycode || e.gamePadInput && this.clearButton.gamePadInput === e.gamePadInput) && (this.state.text = "", 
this.state.cursor = 0, this.onClear?.(), this.onChange?.("", "")), this.onButtonDown?.({
button: e,
state: this.state,
deactivate: this.deactivate
});
})), this.onTypingInput = An(((e, t) => {
e || "" !== t || (t = this.getTextFromClipboard());
let n = t.split("").filter((e => Zz.test(e))).join("").substr(0, this.maxTextLength);
if (e) this.state = {
text: n,
cursor: n.length,
active: !1
}, this.onEnter?.(n), this.onDeactivate?.(); else {
if (!n) return;
const {text: e, cursor: t} = this.state;
if (e.length >= this.maxTextLength) return;
n = n.substr(0, this.maxTextLength - e.length), this.state = {
text: e.substring(0, t) + n + e.substring(t),
cursor: t + n.length,
active: !0
};
}
this.onChange?.(this.state.text, n);
})), this.deactivate = An((() => {
this.state.active && (this.state.active = !1, this.onDeactivate?.());
})), this.activate = An((() => {
if (this.state.active) return;
this.state.active = !0, this.onActivate?.(), this.inputHandler.resetPressed();
const e = this.shouldUseVirtualKeyboard;
e && this.twinkle.bindings.Input.showVirtualKeyboard({
characterType: fs.Input.KeyboardCharType.LatinFull,
defaultText: this.state.text,
title: "",
description: "",
maxTextLength: this.maxTextLength
});
const t = [ () => {
e && this.twinkle.bindings.Input.hideVirtualKeyboard({});
}, this.twinkle.bindings.Input.onButtonStateChanged.subscribe((e => {
e.state === Qz.Down && this._onButtonDown(e.button);
})), this.twinkle.bindings.Input.onTypingInput.subscribe((e => {
const t = e.fromVirtualKeyboard, n = e.virtualKeyboardSuccess, r = e.typedInput;
t && !n ? this.deactivate() : this.onTypingInput(t, r);
})), this.twinkle.inputHandler.onMouseEventHandled.subscribe((e => {
if (e.event === fs.Input.MouseEventType.Click && (e.button === fs.Input.MouseButton.Left || e.button === fs.Input.MouseButton.Right)) {
const t = this.inputAreaRef.current?.getSurfaceId();
e.surfaces.every((e => e.surfaceId !== t)) && this.deactivate();
}
})), this.inputHandler.disable() ];
hr((() => !this.state.active), (() => {
t.forEach((e => e()));
}));
})), this.state.text = n, this.state.cursor = n.length, this.clearButton = d, this.onEnter = r, 
this.onChange = i, this.onActivate = o, this.onDeactivate = a, this.onButtonDown = s, 
this.onClear = l, this.maxTextLength = c, Or(this, {
state: mt,
shouldUseVirtualKeyboard: mt,
setShouldUseVirtualKeyboard: An
});
}
getState() {
return {
...this.state
};
}
setOnEnter(e) {
this.onEnter = e;
}
setOnChange(e) {
this.onChange = e;
}
setOnActivate(e) {
this.onActivate = e;
}
setOnDeactivate(e) {
this.onDeactivate = e;
}
setOnButtonDown(e) {
this.onButtonDown = e;
}
setOnClear(e) {
this.onClear = e;
}
setClearKeyButton(e) {
this.clearButton = e;
}
setShouldUseVirtualKeyboard(e) {
this.shouldUseVirtualKeyboard = e;
}
getTextFromClipboard() {
const e = 100 * this.maxTextLength;
try {
return this.twinkle.bindings.Clipboard.getText({
maxSizeBytes: e
})?.text || "";
} catch (e) {
return "";
}
}
}, tj = ({value: e, onEnter: t, onChange: n, onActivate: r, onDeactivate: i, onButtonDown: o, onClear: a, maxTextLength: s, clearButton: l}) => {
const c = $p(), d = im(), [u] = H.useState((() => new ej(c, d, {
value: e,
onEnter: t,
onChange: n,
onActivate: r,
onDeactivate: i,
onButtonDown: o,
maxTextLength: s,
clearButton: l,
onClear: a
})));
return sl((e => {
const t = u.shouldUseVirtualKeyboard, n = !vs.isPC && e !== $z.MouseAndKeyboard;
u.setShouldUseVirtualKeyboard(n), t !== n && u.deactivate();
}), [ u ], Gp, !0), H.useEffect((() => {
u.setOnChange(n), u.setOnEnter(t), u.setOnActivate(r), u.setOnDeactivate(i), u.setOnButtonDown(o), 
u.setOnClear(a), u.setClearKeyButton(l);
}), [ u, n, t, r, i, o, e, a, l ]), H.useEffect((() => u.deactivate), [ u ]), {
setText: u.setText,
state: u.getState(),
activate: u.activate,
deactivate: u.deactivate,
inputAreaRef: u.inputAreaRef,
shouldUseVirtualKeyboard: u.shouldUseVirtualKeyboard
};
}, nj = Vc(34), rj = Qc({
position: "absolute",
top: 0,
left: 0,
flexDirection: "row"
}), ij = Qc({
width: Vc(2),
height: nj,
backgroundColor: Zu.InputField.Cursor.backgroundColor
}), oj = Qc({
flex: 1,
flexDirection: "row"
}), aj = Qc({
layer: !0,
layerClip: !0,
flex: 1,
position: "relative",
height: nj
}), sj = td((e => ({
textAlign: e ? "end" : "start"
})), {
color: Zu.InputField.LabelText.color,
whiteSpace: "nowrap"
}), lj = Qc({
padding: 0,
minHeight: 0
}), cj = Qc({
position: "absolute"
}), dj = "cursorTimeout", uj = ({text: e, cursor: t, active: n, shouldUseVirtualKeyboard: r}) => {
const i = hP(0), {timeout: o, disposeTimeout: a} = dp();
return H.useEffect((() => {
r || (n ? (i.set(1), o(dj, (() => {
i.to(0, {
duration: 500,
rebound: !0,
loopDelay: 500,
loopCount: -1
});
}), 1e3)) : (a(dj), i.set(0)));
}), [ n, i, e, t, a, o, r ]), i;
};
function pj(e, t) {
if (e.gamePadInput) return e.gamePadInput === t.primaryButton.gamePadInput || t.secondaryButtons.some((t => t.gamePadInput === e.gamePadInput));
}
var fj = Ii.observer((e => {
const {navigate: t} = wl(), {id: n, focusId: r, value: i, onChange: o, onEnter: a, onClear: s, onActivate: l, onDeactivate: c, primaryAction: d, secondaryAction: u, clearActionInfo: p, icon: f, openButtonLabel: h, placeholder: m, style: g, assistiveText: y, maxTextLength: I} = e, _ = Tf(5), b = Tf(6), S = Tf(2), v = H.useCallback((({button: e, deactivate: n, state: r}) => {
switch (e.keyboardKeycode) {
case 27:
return void n();

case 38:
return n(), void t(2);

case 40:
return n(), void t(3);
}
pj(e, _) && (n(), t(2)), pj(e, b) && (n(), t(3)), pj(e, S) && a?.(r.text);
}), [ b, _, t, a, S ]), T = Sf(), {activate: E, deactivate: P, state: O, inputAreaRef: C, shouldUseVirtualKeyboard: N, setText: A} = tj({
value: i,
onChange: o,
onEnter: a,
onActivate: l,
onDeactivate: c,
onClear: s,
maxTextLength: I,
onButtonDown: v,
clearButton: p?.keyBinding.primaryButton
}), L = uj(O), [w, k] = H.useState({
outerBounds: 1,
innerBounds: 0
}), R = Of({
id: n,
focusId: r,
isFocused: e => e || O.active
}), {isFocused: x, isPressed: B} = R;
Il((({get: e}) => {
if (O.active) {
const t = e(Fl);
t && t !== R.focusItem.focusId && P();
}
}), [ P, R.focusItem.focusId, O.active ]), yL(N || !x || O.active ? void 0 : {
callback: E,
action: 2
});
const D = (x || B) && (!!N || O.active), F = O.active && w.innerBounds > w.outerBounds ? w.innerBounds - w.outerBounds : 0, M = id((() => ({
left: -F
})), [ F ]), {onOuterBounds: U, onInnerBounds: V} = H.useMemo((() => ({
onOuterBounds: e => k((t => t.outerBounds === e.width ? t : {
...t,
outerBounds: e.width
})),
onInnerBounds: e => k((t => t.innerBounds === e.width ? t : {
...t,
innerBounds: e.width
}))
})), []), J = H.useMemo((() => {
if (p?.label && p?.keyBinding) return {
label: p.label,
keyBinding: p.keyBinding,
callback: () => {
A(""), s?.();
}
};
}), [ p?.keyBinding, p?.label, s, A ]);
let G;
const z = u || (O.text ? J : void 0);
D && (N ? G = H.createElement(RD, {
primaryAction: {
callback: E,
keyBinding: S,
label: h
},
secondaryAction: z
}) : d && (G = H.createElement(RD, {
primaryAction: d,
secondaryAction: z
})));
const {text: j, cursor: q} = O, Y = T ? j.substring(q) : j.substring(0, q);
return H.createElement("surface", {
style: g
}, H.createElement(vD, {
borderOutside: !0,
interaction: R,
ref: C
}, H.createElement("surface", {
style: rd("flex", 1),
onClick: E
}, H.createElement(TD, null, H.createElement("surface", {
style: oj
}, void 0 !== f && H.createElement(BD, {
style: rd("marginEnd", Vc(Rd.DimensionSpace.medium)),
texture: f
}), H.createElement("surface", {
style: aj,
onBounds: U
}, H.createElement("surface", {
style: [ cj, M ]
}, !N && O.active && H.createElement("surface", {
style: rj,
onBounds: V
}, H.createElement(IT, {
style: [ rd("opacity", 0), sj(T) ],
text: Y
}), H.createElement("surface", {
style: [ ij, L.propStyle("opacity") ]
})), j ? H.createElement(OD, {
style: sj(T),
wrapperStyle: lj,
text: j
}) : H.createElement(IT, {
text: m
})))))), G), !!y && H.createElement(IT, {
style: rd("marginTop", Vc(Zu.InputField.AssistiveText.marginTop)),
text: y
}));
})), hj = ({text: e, children: t}) => (_p((() => e), [ e ], 1), H.createElement(H.Fragment, null, t));
function mj(e, t = 3) {
return e.slice(0, t).map(((t, n) => ({
...t,
telemetryInfo: {
index: {
item_index: n + 1,
total_items: e.length
},
context: {
p_cnt: e.length,
mutual_friends: t.mutualFriendEaPlayerIds.length,
nucleus: t.eaPlayerId,
shared_entitlements: t.sharedEntitlement.map((e => e.productId)),
language: t.firstLanguage,
location: t.installCountry
}
}
})));
}
var gj = (e, t = 3) => {
if (e?.length) return {
100: mj(e, t)
};
}, yj = Sl({
debugName: "friendRecommendationsBySection",
get: function({get: e}) {
const t = e(tx).get(), n = e(lS).get(), r = e(YT).isInVariant("fr_1_5", "Attributes"), i = hI([ n, t ]), o = new Set(n.data?.keys());
return {
...i,
data: gj(t.data?.filter((e => !o.has(e.eaPlayerId))), r ? 5 : 3)
};
}
}), Ij = fm.InputBindings.Action, _j = e => ({
label: Em("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_ADD-FRIEND"),
callback: e.performAction,
disabled: e.isActionTaken,
disabledContent: H.createElement(xD, {
text: Em("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_REQUEST-SENT")
})
}), bj = (e, t, n = SE, r) => {
const i = ul(n, e), o = zM(e, t, r), a = dx(e, r), s = rL(e, t, r), l = kM(e, t, r), c = WL(Ij.Primary), d = WL(Ij.Secondary), u = {
keyBinding: c
};
switch (i) {
case 5:
return {};

case 0:
case 1:
case 2:
if (o) return {
primaryAction: {
...u,
label: o.text,
callback: o.action
}
};
break;

case 3:
case 4:
case 6:
if ((3 === i || 4 === i) && l && !a.isActionTaken) return {
primaryAction: {
...u,
label: Em("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_VIEW-REQUEST"),
callback: s
},
secondaryAction: {
keyBinding: d,
label: Em("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_REPORT"),
callback: l.action
}
};
if (a && l) return {
primaryAction: {
...u,
..._j(a)
},
secondaryAction: {
keyBinding: d,
label: Em("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_REPORT"),
callback: l.action
}
};
break;

case void 0:
return {};

default:
Xs("Unhandled case");
}
return {};
}, Sj = fm.InputBindings.Action, vj = (e, t, n) => {
const r = e.getUntracked(ov), i = e.getUntracked(tx);
return ME(r, n), i.dismissFriendRecommendation(t);
}, Tj = (e, t) => {
const n = dx(e, t), r = ol(), i = WL(Sj.Primary), o = WL(Sj.Secondary), a = av();
return H.useMemo((() => {
const s = _j(n);
return {
primaryAction: {
...s,
keyBinding: i,
callback: UE(a, s.callback, {
...t,
option: "add_friend"
})
},
secondaryAction: {
label: Em("PHOTON-SOCIAL_PARTY_LIST_ACTIONS_REMOVE"),
keyBinding: o,
callback: UE(a, (() => vj(r, e, t)), {
...t,
option: "dismiss"
})
}
};
}), [ n, r, e, a, i, o, t ]);
}, Ej = Np(), Pj = Ii.observer((({photonPlayerId: e}) => {
const t = nx().getFriendRecommendation(e)?.mutualFriendEaPlayerIds.length;
if (!t) return null;
const n = t > 1 ? Em("PHOTON-SOCIAL_FRIEND_RECOS_LIST_MUTUALS_MULTIPLE", {
"%numberOfMutualFriends%": t + ""
}) : Em("PHOTON-SOCIAL_FRIEND_RECOS_LIST_MUTUALS_SINGLE");
return H.createElement(OD, {
text: n,
hideOnPressedOrFocused: !0
});
})), Oj = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const n = void 0, r = xw(e), i = wE(), o = kA(e), a = nx();
H.useEffect((() => {
o.error && a.removeFriendRecommendation(e);
}), [ e, o.error, a ]);
const s = H.useMemo((() => ({
...t,
msg_id: "friend_recos",
destination_name: "friend_recos",
pg_id: i
})), [ i, t ]);
VE(s);
const l = IU(e, n, s), c = Tj(e, s), {handleFocus: d, handleBlur: u} = yV({
photonPlayerId: e,
photonSessionId: n,
telemetryInfo: s
}), p = JD({
playerName: r.name
});
return H.createElement(VD, {
id: e,
narrationItem: p,
onFocus: d,
onBlur: u,
onClick: l,
...o.data ? c : void 0
}, H.createElement(wD, {
playerNetworkId: r.playerNetworkId,
name: r.name
}), H.createElement(Pj, {
photonPlayerId: e
}));
})), Cj = () => {
const e = wE(), {isExpanded: t, onToggle: n} = pD({
id: "friend-recommendations-section",
onToggleCallback: HE(e, "friend_recos"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
});
return H.useMemo((() => {
const r = new _V;
return r.addSection({
id: 100,
isExpanded: t,
onToggle: n,
title: Em("PHOTON-SOCIAL_FRIEND_RECOS_HEADING"),
component: Oj,
focusId: Ej,
telemetryInfo: {
pg_id: e,
destination_name: "friend_recos",
msg_id: "friend_recos"
}
}), r;
}), [ t, n, e ]);
}, Nj = Ii.observer((({height: e}) => {
const t = AV(KO(nC(yj), 0), Cj()), {rows: n} = NV(t.sectionsState, t.data, mx);
return H.createElement(BU, null, H.createElement(DU, {
visible: t.loading
}, H.createElement(pM, {
noScrollbar: !0
}, H.createElement(gD, {
numSections: 1,
numRows: 1
}))), H.createElement(DU, {
visible: !t.empty
}, H.createElement(kU, {
rows: n,
height: e ?? FU,
width: MU,
style: rd("margin", -YB)
})));
})), Aj = J_.object({}, {
value: J_.string
}), Lj = J_.object({
personaId: Aj,
pidId: Aj,
displayName: Aj,
nameSpaceName: Aj
}), wj = J_.object({
personas: J_.array(Lj),
searchPhrase: J_.string
}), kj = {
cem_ea_id: "EA",
ps3: "PSN",
steam: "STEAM",
nx: "NINTENDO",
xbox: "XBOX"
};
function Rj(e) {
return kj[e] || "EA";
}
function xj(e, t) {
return e.displayNameLowerCase.localeCompare(t.displayNameLowerCase);
}
var Bj = {
PSN: 0,
XBOX: 0,
EA: 1,
EPIC: 1,
APPLE_GAMECENTER: 1,
GOOGLE_PLAY: 1,
STEAM: 2,
NINTENDO: 3
}, Dj = e => (t, n) => {
const r = Bj[t.playerNetworkId] - Bj[n.playerNetworkId];
if (0 === r) {
return xj(e[t.photonPlayerId], e[n.photonPlayerId]);
}
return r;
}, Fj = (e, t) => {
const n = Dj(t);
return (t, r) => {
if ("EA" === t.playerNetworkId || "EA" === r.playerNetworkId) {
if (t.playerNetworkId === r.playerNetworkId) return xj(t, r);
if ("EA" === t.playerNetworkId) return -1;
if ("EA" === r.playerNetworkId) return 1;
}
return t.playerNetworkId === e || r.playerNetworkId === e ? t.playerNetworkId === r.playerNetworkId ? xj(t, r) : t.playerNetworkId === e ? -1 : 1 : n(t, r);
};
}, Mj = Cl({
debugName: "playerSearchCache",
default: {
loading: !1,
skipped: !0
}
}), Uj = Cl({
debugName: "inputFieldValueState",
default: ""
}), Hj = Sl({
debugName: "playerSearchList",
get: function({get: e}) {
const t = e(fv).personaInfo.playerNetworkId, n = (r = e(Mj), {
...r,
uninitialized: r.skipped
});
var r;
if (void 0 === n.data) return n;
const {searchPhrase: i, players: o} = n.data, a = e(b_), s = hI(o.map((e => a.get(e.photonPlayerId)))), l = o.filter((e => a.getMaybeUntracked(e.photonPlayerId)?.data)), c = {}, d = {
0: [],
1: [],
2: []
};
for (let e = 0; e < l.length; e++) {
const n = l[e];
"EA" === n.playerNetworkId ? d[0].push(n) : n.playerNetworkId === t ? d[1].push(n) : d[2].push(n);
const r = a.get(i_({
eaPlayerId: n.eaPlayerId,
playerNetworkId: "EA"
})).data;
r && (c[n.photonPlayerId] = r);
}
var u;
d[1].sort((u = c, (e, t) => xj(u[e.photonPlayerId], u[t.photonPlayerId]))), d[2].sort(Dj(c)), 
l.sort(Fj(t, c));
return {
...hI([ n, {
...s,
error: void 0
} ]),
data: {
searchPhrase: i,
sections: d,
players: l
}
};
}
});
function Vj(e) {
const t = [];
return e.personas.forEach((e => {
if (!(e.pidId.value && e.personaId.value && e.displayName.value && e.nameSpaceName.value)) return;
const n = Rj(e.nameSpaceName.value), r = e.pidId.value;
t.push({
playerNetworkId: n,
personaId: e.personaId.value,
photonPlayerId: i_({
eaPlayerId: r,
playerNetworkId: n
}),
eaPlayerId: r,
displayName: e.displayName.value,
displayNameLowerCase: e.displayName.value.toLowerCase()
});
})), {
searchPhrase: e.searchPhrase,
players: t,
sections: {
0: [],
1: [],
2: []
}
};
}
var Jj = new Set(Object.keys(kj));
function Gj(e) {
return `${e.replaceAll('"', '\\"')}`;
}
function zj(e) {
let t = `displayName="${Gj(e)}"`;
return e.includes("#") && (t += ` OR displayName="${Gj(e.replaceAll("#", ""))}"`), 
t;
}
function jj(e) {
const {PlayerSearch: t} = Tm(), n = S_(), r = SI(), i = aI();
return CF((async e => {
if (e = e?.trim(), !e) return {
personas: [],
searchPhrase: e
};
const o = Date.now(), a = () => {
i.addEvent({
eventType: "photon_search",
duration_ms: Date.now() - o
});
}, s = await t.SearchPlayers({
query: {
value: zj(e)
},
namespaces: []
});
if (!s?.personas?.length) return a(), {
personas: [],
searchPhrase: e
};
const l = [], c = [];
return s.personas.forEach((e => {
e.pidId?.value && e.nameSpaceName?.value && Jj.has(e.nameSpaceName.value) && (l.push(i_({
eaPlayerId: e.pidId.value,
playerNetworkId: Rj(e.nameSpaceName.value)
})), c.push(e));
})), await r(n.getByIds(l)), a(), {
personas: c,
searchPhrase: e
};
}), [ r, t, n, i ], wj, {
cache: Mj,
transformResponse: Vj,
skipQueryOnMount: !0,
debugName: "playerSearch",
onError: e?.onError,
onSuccess: e?.onSuccess
});
}
function qj(e, t, n, r) {
t.searchPhrase && e.triggerSearch({
term: t.searchPhrase,
type: "friend_search",
duration_ms: r ?? 0,
status: n,
result_count: t.players.length,
result: t.players.map((e => e.eaPlayerId + "_" + e.playerNetworkId))
});
}
function Yj() {
const e = av(), {showErrorNotification: t} = bO(), n = dl(Hj), r = H.useCallback(((n, r) => {
r && qj(e, {
searchPhrase: r,
players: [],
sections: {
0: [],
1: [],
2: []
}
}, "error", 0), t({}, "search player", n.error);
}), [ e, t ]);
return {
...n,
fetch: jj({
onSuccess: H.useCallback((t => {
t.data && qj(e, t.data, "success", t.duration);
}), [ e ]),
onError: r
}).fetch
};
}
function Wj(e, t) {
const n = !e.data && e.loading, r = !n && t.isEmpty(e.data?.sections), i = t.size(e.data?.sections);
return {
...e,
loading: n,
empty: r,
sectionsState: t,
size: i
};
}
var Kj = Ii.observer((({photonPlayerId: e}) => {
const t = ol(), {eaPlayerId: n, playerNetworkId: r} = s_(e), i = hv(), o = vO();
if ("EA" === r && "EA" === o.playerNetworkId) return null;
let a;
if (n) {
const e = "EA" !== r ? "EA" : o.playerNetworkId;
a = LA(t, i_({
eaPlayerId: n,
playerNetworkId: e
})).data;
}
if (!a) return null;
const s = NT("EA" === a.playerNetworkId ? {
name: a.displayName,
playerNetworkId: a.playerNetworkId
} : kO(t, a, i), {
allowEllipsis: !0
});
return H.createElement(OD, {
hideOnPressedOrFocused: !0,
text: s
});
})), Xj = Qc({
marginBottom: Vc(Rd.DimensionSpace.medium)
}), Qj = Ii.observer((({photonPlayerId: e, displayName: t, playerNetworkId: n, telemetryInfo: r}) => {
const i = void 0, o = ol(), a = "EA" === n ? {
name: t,
playerNetworkId: n
} : o.getItem(kw, e), s = {
destination_name: "search_results",
...r
}, l = IU(e, i, s), c = bj(e, i, void 0, s), {handleFocus: d, handleBlur: u} = yV({
photonPlayerId: e,
photonSessionId: i,
telemetryInfo: s
}), p = JD({
playerName: t
});
return H.createElement(VD, {
id: e,
narrationItem: p,
onFocus: d,
onBlur: u,
onClick: l,
style: Xj,
...c
}, H.createElement(wD, {
playerNetworkId: a.playerNetworkId,
name: a.name
}), H.createElement(Kj, {
photonPlayerId: e
}));
})), $j = {
0: Np(),
1: Np(),
2: Np()
};
function Zj() {
const {isExpanded: e, onToggle: t} = pD({
id: "search-section-ea",
onToggleCallback: HE("tab_search", "search_results"),
isInitiallyExpanded: !1,
rememberExpandedState: !0
}), n = vO(), {isExpanded: r, onToggle: i} = pD({
id: "search-section-same-platform",
onToggleCallback: HE("tab_search", "search_results"),
isInitiallyExpanded: !1,
rememberExpandedState: !0
}), {isExpanded: o, onToggle: a} = pD({
id: "search-section-other-platform",
onToggleCallback: HE("tab_search", "search_results"),
isInitiallyExpanded: !1,
rememberExpandedState: !0
});
return H.useMemo((() => {
const s = new _V;
return s.addSection({
id: 0,
isExpanded: e,
onToggle: t,
title: e => Em("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-RESULTS_SECTION-HEAD_EA", {
"%numberEaResults%": String(e.length)
}),
component: Qj,
focusId: $j[0],
telemetryInfo: {
pg_id: "tab_search",
destination_name: "search_results",
msg_id: "search_results"
}
}), s.addSection({
id: 1,
isExpanded: r,
onToggle: i,
title: e => Em("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-RESULTS_SECTION-HEAD_SAME", {
"%localPlatform%": Bv(n.playerNetworkId),
"%numberLocalResults%": String(e.length)
}),
component: Qj,
focusId: $j[1],
telemetryInfo: {
pg_id: "tab_search",
destination_name: "search_results",
msg_id: "search_results"
}
}), s.addSection({
id: 2,
isExpanded: o,
onToggle: a,
title: e => Em("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-RESULTS_SECTION-HEAD_OTHER", {
"%numberOtherResults%": String(e.length)
}),
component: Qj,
focusId: $j[2],
telemetryInfo: {
pg_id: "tab_search",
destination_name: "search_results",
msg_id: "search_results"
}
}), s;
}), [ e, r, o, t, i, a, n ]);
}
var eq = fm.InputBindings.Action, tq = "narrate-search-action", nq = Qc({
marginBottom: Vc(Rd.DimensionSpace.larger),
flexDirection: "row",
flexWrap: "wrap"
}), rq = Qc({
marginEnd: Vc(Rd.DimensionSpace.medium)
}), iq = Ii.observer((() => {
const e = gv(), t = kA(i_({
eaPlayerId: e,
playerNetworkId: "EA"
})).data;
return t ? H.createElement(WF, null, H.createElement(aL, {
color: Rd.TextColorStandard.emphasized,
text: Em("PHOTON-SOCIAL_PLAYER-SEARCH_INFO-CARD_TITLE_ADDING-FRIENDS"),
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger))
}), H.createElement("surface", {
style: nq
}, H.createElement(tp, {
text: Em("PHOTON-SOCIAL_PLAYER-SEARCH_INFO-CARD_YOUR-ID"),
color: Rd.TextColorStandard.emphasized,
style: rq
}), H.createElement(wT, {
name: t.displayName,
playerNetworkId: t.playerNetworkId
})), H.createElement(IT, {
text: Em("PHOTON-SOCIAL_PLAYER-SEARCH_INFO-CARD_DESC")
})) : H.createElement("surface", null);
})), oq = AB - Vc(200), aq = Qc({
marginBottom: Vc(Rd.DimensionSpace.larger),
fontSize: Jc(Rd.TextSizeHeading.small)
}), sq = {
pg_id: "tab_search",
msg_id: "search_results",
destination_name: "search_results"
}, lq = Ii.observer((({rows: e, searchStr: t, players: n}) => (VE(sq), H.createElement(H.Fragment, null, H.createElement(aL, {
text: Em("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-RESULTS_TITLE", {
"%numberSearchResults%": String(n?.length || 0),
"%playerSearchID%": t || ""
}),
color: Rd.ColorNeutral._0,
style: aq
}), H.createElement(kU, {
rows: e,
height: oq,
width: MU,
style: [ rd("margin", -YB) ]
}))))), cq = {
pg_id: "tab_search",
msg_id: "search_input",
destination_name: "search_input"
}, dq = Ii.observer((e => {
const {assistiveText: t, onSearch: n} = e, [r, i] = ml(Uj), o = WL(eq.Primary), a = WL(eq.Secondary), s = av(), l = Ip(), c = xp(), [d, u] = H.useState(!1), {timeout: p, disposeTimeout: f} = dp();
VE(cq), bp((({getKeyBindingText: e}) => Em("PHOTON-SOCIAL_NARRATION_PLAYER-SEARCH_INPUT-FIELD-FOCUSED", {
"%primaryKey%": e(o)
})), [ o ], c);
const h = H.useCallback((e => {
n?.(e), f(tq), ME(s, {
destination_name: "search_input",
msg_id: "search_input",
option: "search",
pg_id: "tab_search"
});
}), [ f, n, s ]), m = _l((({get: e}) => () => {
h(e(Uj));
}), [ h ]), g = H.useCallback((() => {
u(!0), vs.isPC || ME(s, {
destination_name: "search_input",
msg_id: "search_input",
option: "open",
pg_id: "tab_search"
});
}), [ s ]), y = H.useCallback((() => {
u(!1);
}), []);
H.useEffect((() => {
f(tq), d && r.length && p(tq, (() => {
l.narrate(Em("PHOTON-SOCIAL_NARRATION_PLAYER-SEARCH_SEARCH-ACTION", {
"%primaryKey%": l.getKeyBindingText(o)
}));
}), 2e3);
}), [ f, r, d, l, o, p ]);
const I = H.useCallback(((e, t) => {
i(e), t.length && l.narrateNow(t), e || n?.("");
}), [ l, n, i ]), _ = n && r ? {
label: Em("PHOTON-SOCIAL_PLAYER-SEARCH_ACTIONS_SEARCH"),
keyBinding: o,
callback: m
} : void 0, b = {
label: Em("PHOTON-SOCIAL_PLAYER-SEARCH_ACTIONS_CLEAR"),
keyBinding: a
}, S = H.useCallback((() => {
ME(s, {
destination_name: "search_input",
msg_id: "search_input",
pg_id: "tab_search",
option: "clear"
});
}), [ s ]);
return H.createElement(fj, {
id: "search-field",
focusId: c,
icon: ih.SEARCH,
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger)),
placeholder: Em("PHOTON-SOCIAL_PLAYER-SEARCH_SEARCH-BAR_PLACEHOLDER"),
onEnter: h,
onChange: I,
onClear: S,
onActivate: g,
onDeactivate: y,
value: r,
primaryAction: _,
clearActionInfo: b,
maxTextLength: 50,
openButtonLabel: Em("PHOTON-SOCIAL_PLAYER-SEARCH_ACTIONS_OPEN"),
assistiveText: t
});
})), uq = Ii.observer((() => {
const e = Yj(), {sectionsState: t, data: n, loading: r, error: i, size: o} = Wj(e, Zj()), a = ZT("fr_1_5", "Base"), s = ZT("fr_1_5", "Attributes"), l = a || s, {rows: c} = NV(t, e.data?.sections, mx, {
flat: o <= 5
});
let d = l ? H.createElement(Nj, {
height: oq
}) : void 0;
return r ? d = H.createElement(gD, {
numSections: 1,
numRows: 1
}) : !i && n?.players && n.searchPhrase && (d = n.players.length ? H.createElement(hj, {
text: Em("PHOTON-SOCIAL_NARRATION_PLAYER-SEARCH_VIEW-RESULTS")
}, H.createElement(lq, {
rows: c,
searchStr: n.searchPhrase,
players: n.players
})) : H.createElement(hj, {
text: Em("PHOTON-SOCIAL_PLAYER-SEARCH_NO-SEARCH-RESULTS")
}, H.createElement(fL, {
style: rd("marginTop", Vc(Rd.DimensionSpace.larger)),
headline: Em("PHOTON-SOCIAL_PLAYER-SEARCH_NO-SEARCH-RESULTS")
}))), H.createElement(zU, {
contentHasNoScrollbar: !0,
fallbackContent: H.createElement(iq, null)
}, H.createElement(dq, {
onSearch: e.fetch
}), d);
}));
function pq(e) {
const t = H.useRef(e);
return H.useEffect((() => {
null != e && (t.current = e);
}), [ e ]), e ?? t.current ?? void 0;
}
var fq = Vc(64), hq = Qc({
backgroundColor: "#00000001",
flex: 1
}), mq = Qc({
flex: 1,
position: "relative"
}), gq = Qc({
position: "absolute",
left: 0,
right: 0
}), yq = Ii.observer((e => {
const {id: t, height: n, children: r, style: i, scrollbarAlwaysVisible: o} = e, a = Oh(), [s, l] = H.useState(0), [c, d] = H.useState(n), u = H.useRef(0), p = s < 0, f = 0 === c || c + s - n > 0, h = c > n, m = h ? -s / (c - n) : 0, g = id((() => ({
height: n
})), [ n ]), y = id((() => ({
translateY: s
})), [ s ]), I = -(c - n), _ = H.useCallback((e => {
if (!h) return void l(0);
const t = e.scrollDelta * Vc(Rd.ScrollFactor.fast);
l((e => Math.max(I, Math.min(0, e + t))));
}), [ h, I, 0 ]), b = H.useCallback((e => {
l(h ? Math.max(I, Math.min(0, -e)) : 0);
}), [ h, I, 0 ]), S = H.useCallback((e => {
const t = e.height;
u.current = e.y, l((e => n >= t ? 0 : t - n < Math.abs(e) ? -t + n : e)), d(t);
}), [ n ]);
Il((({get: e, getItem: t}) => {
if (e(Vl)) return;
if (c <= n) return void l(0);
const r = t(pc, a), i = t(Bl, r);
if (!r || !i) return;
const o = (s = t(Xl, a), Object.keys(s).sort(((e, t) => (s[e]?.y || 0) - (s[t]?.y || 0))));
var s;
const d = o[0], p = o[o.length - 1];
l(d !== r ? p !== r ? e => {
const t = Math.floor(i.y - u.current);
if (-t + fq > e) return -t + fq;
const r = i.height;
return -t - r + n - fq < e ? -t - r + n - fq : e;
} : -c + n : 0);
}), [ a, n, c ]);
const v = Ch(a), {isHovered: T, hoverHooks: E} = QF();
return H.createElement(Nh, {
id: a
}, H.createElement("surface", {
onMouseScroll: _,
...E,
style: [ rd("paddingRight", Vc(Rd.DimensionSpace.large) + $F), g, hq, i ]
}, H.createElement(NU, {
fadeTop: p,
fadeBottom: f,
fadeHeight: fq,
style: [ g, mq, i ]
}, H.createElement("surface", {
style: [ gq, y ],
onBounds: S
}, r)), h && H.createElement(sM, {
setContentScrollPosition: b,
visible: o || v || T,
scrollPercent: m,
containerHeight: n,
contentHeight: c
})));
})), Iq = ({children: e}) => {
const [t, n] = H.useState(0);
return H.createElement("surface", {
onBounds: e => n(e.height),
style: rd("flex", 1)
}, e(t));
}, _q = ({children: e, ...t}) => H.createElement(Iq, null, (n => H.createElement(yq, {
...t,
height: n,
style: 0 === n ? rd("flex", 1) : void 0
}, e))), bq = class {
constructor(e) {
this.moby = e, this.focusIds = mt.box([], {
deep: !1
}), this.hasFocus = _t((() => {
const e = this.moby.get(Fl);
return !!e && this.focusIds.get().includes(e);
}));
}
addFocusId(e) {
return nl((() => {
this.focusIds.set(this.focusIds.get().concat(e));
})), () => {
nl((() => {
const t = this.focusIds.get(), n = t.indexOf(e);
if (n > -1) {
const e = t.slice();
e.splice(n, 1), this.focusIds.set(e);
}
}));
};
}
setMetadata(e, t) {
nl((() => {
this.metadata || (this.metadata = mt.box({}, {
deep: !1
})), this.metadata.set({
...this.metadata.get(),
[e]: t
});
}));
}
getMetadata(e) {
return this.metadata || (this.metadata = mt.box({}, {
deep: !1
})), this.metadata.get()[e];
}
}, [Sq, vq] = Qs("NarrationGroupContext"), Tq = () => {
const e = ol();
return H.useState((() => new bq(e)))[0];
}, Eq = Qc({
padding: qB,
marginBottom: Vc(Rd.DimensionSpace.smaller)
}), Pq = Qc({
margin: Vc(Rd.DimensionSpace.medium),
marginStart: Vc(Rd.DimensionSpace.large)
}), Oq = e => {
const {item: t, narrationItem: n, style: r} = e, i = xp(e.focusId), o = Tf(2), a = Uc(o.primaryButton), s = vq(), l = {
keyBinding: o,
callback: t.action
};
return bp((e => t.isDisabled ? void 0 : n({
keyBinding: o,
label: t.text,
group: s,
icon: t.icon
}, e)), [ n, o, t.text, t.icon, t.isDisabled, s ], i), H.useEffect((() => s.addFocusId(i)), [ s, i ]), 
t.isDisabled && t.disabledContent ? H.createElement("surface", {
style: Eq
}, t.disabledContent) : H.createElement(ED, {
key: t.id,
id: t.id,
onClick: t.isDisabled ? void 0 : t.action,
input: t.isDisabled ? void 0 : l,
isActive: t.isActive,
isDisabled: t.isDisabled,
isFocusableWhenActive: t.isFocusableWhenActive,
focusId: i,
transparent: !0,
style: [ r, rd("marginBottom", Vc(Rd.DimensionSpace.smaller)) ]
}, void 0 !== t.inputIconOverride && H.createElement(BD, {
isFocusableWhenActive: t.isFocusableWhenActive,
texture: t.inputIconOverride,
style: rd("marginEnd", Vc(Rd.DimensionSpace.small))
}), !t.inputIconOverride && a ? H.createElement(DD, {
type: a,
showOnPressedOrFocused: !0,
isFocusableWhenActive: t.isFocusableWhenActive,
style: rd("marginEnd", Vc(Rd.DimensionSpace.small))
}) : null, H.createElement(LD, {
text: t.text,
isFocusableWhenActive: t.isFocusableWhenActive
}), t.icon ? H.createElement(BD, {
texture: t.icon,
isFocusableWhenActive: t.isFocusableWhenActive,
style: [ rd("marginStart", Vc(Rd.DimensionSpace.small)), t.iconStyle ]
}) : null);
}, Cq = Qc({
flexDirection: "column"
}), Nq = Vc(300), Aq = Vc(15), Lq = ({items: e, narrationItem: t}) => {
const n = Tq();
return H.createElement(Sq.Provider, {
value: n
}, e.filter((e => e.isLoading || e.actions.length)).map(((e, n) => H.createElement("surface", {
style: Cq,
key: e.id
}, !!e.title && H.createElement(nD, {
color: Rd.ColorNeutral._0,
style: [ rd("marginBottom", Vc(Rd.DimensionSpace.small)), 0 !== n ? rd("marginTop", Vc(Rd.DimensionSpace.larger)) : void 0 ],
text: e.title
}), e.isLoading ? H.createElement("surface", {
style: Pq
}, H.createElement(gD, {
numRows: 3,
numSections: e.title ? 1 : 0,
width: Nq,
height: Aq,
lightVariant: !0
})) : e.actions.map((e => H.createElement(Oq, {
key: e.id,
item: e,
narrationItem: t
})))))));
}, wq = (Qc({
marginBottom: Vc(Rd.DimensionSpace.larger)
}), rd("marginBottom", Vc(Rd.DimensionSpace.largest))), kq = Qc({
color: Rd.TextColorStandard.emphasized
}), Rq = [ Qc({
marginBottom: Vc(53)
}), kq ], xq = 755, Bq = Vc(60), Dq = Vc(66), Fq = {
portal: vN,
background: 1,
contextualMenu: 2,
menu: 3
}, Mq = Qc({
zOffset: Fq.portal,
flexDirection: "row"
}), Uq = Qc({
position: "absolute",
top: 0,
bottom: 0,
left: 0,
width: Vc(xq),
paddingRight: Vc(Rd.DangerZone.width),
backgroundColor: Rd.BackgroundColor.base,
flexDirection: "column",
zOffset: Fq.menu
}), Hq = Qc({
zOffset: Fq.background,
flex: 1
}), Vq = Qc({
zOffset: Fq.contextualMenu,
position: "absolute",
left: Vc(xq),
top: 0,
bottom: 0,
width: Vc(731),
flexDirection: "row"
}), Jq = Qc({
width: Vc(2),
backgroundColor: Rd.BackgroundColor.alt2
}), Gq = Qc({
flex: 1,
backgroundColor: Rd.BackgroundColor.base,
paddingLeft: Vc(Rd.DimensionSpace.largest),
paddingRight: Vc(Rd.DimensionSpace.largest)
}), zq = {
duration: Rd.AnimationTime.faster,
easing: Rd.AnimationEasing.accelerate
}, jq = H.memo((e => {
const {children: t, isVisible: n} = e, r = hP(af(-Bq)), i = hP(0), [o, a] = H.useState(n), {fullScreenHorizontalMargin: s, fullScreenVerticalMargin: l} = lf(), c = id((() => ({
left: s + Vc(xq)
})), [ s ]), d = id((() => ({
paddingTop: l + Vc(Rd.DangerZone.height),
paddingBottom: l + Vc(Rd.DangerZone.height) + Dq
})), [ l ]);
return H.useEffect((() => {
if (!n) {
r.to(af(-Bq), zq), i.to(0, zq);
const e = setTimeout((() => {
a(!1);
}), zq.duration);
return () => {
clearTimeout(e);
};
}
a(!0), r.to(0, zq), i.to(1, zq);
}), [ n, i, r ]), H.createElement(Nh, {
disable: !n
}, o || n ? H.createElement("surface", {
style: [ Vq, c, r.propStyle("translateX"), i.propStyle("opacity") ]
}, H.createElement(H.Fragment, null, H.createElement("surface", {
style: Jq
}), H.createElement("surface", {
style: [ Gq, d ]
}, t))) : null);
})), qq = ({children: e, isVisible: t, contextualSheet: n, onDimmerClick: r, extraDimmerContent: i}) => {
const o = hP(af(-Bq)), a = hP(0), s = hP(0), [l, c] = H.useState(t), {fullscreenStyle: d, fullScreenHorizontalMargin: u, fullScreenVerticalMargin: p} = lf(), f = id((() => ({
paddingTop: p + Vc(Rd.DangerZone.height),
paddingBottom: p + Vc(Rd.DangerZone.height) + Dq,
paddingLeft: u + Vc(Rd.DangerZone.width),
width: u + Vc(xq)
})), [ u, p ]);
return H.useEffect((() => {
if (!t) {
o.to(af(-Bq), zq), a.to(0, zq), s.to(0, zq);
const e = setTimeout((() => {
c(!1);
}), zq.duration);
return () => {
clearTimeout(e);
};
}
c(!0), o.to(0, zq), a.to(1, zq), s.to(1, zq);
}), [ s, t, a, o ]), l || t ? H.createElement("surface", {
style: [ Mq, d ]
}, H.createElement("surface", {
style: [ Uq, f, o.propStyle("translateX"), a.propStyle("opacity") ]
}, e), n, H.createElement("surface", {
style: [ Hq, s.propStyle("opacity") ],
onClick: r
}, i)) : null;
};
function Yq() {
const {navigate: e} = XS();
return H.useCallback((() => e($S.link())), [ e ]);
}
var Wq = Ii.observer((e => {
const {isVisible: t, ...n} = e, {addZoom: r, removeZoom: i} = Im();
return H.useEffect((() => {
if (t) return r(), () => {
setTimeout((() => i()), 100);
};
}), [ r, t, i ]), H.createElement(qq, {
isVisible: t,
...n
});
})), Kq = fm.InputBindings.Action, Xq = Qc({
padding: Vc(24),
marginBottom: Vc(Rd.DimensionSpace.larger)
}), Qq = ({label: e, group: t, keyBinding: n}, {getKeyBindingText: r}) => [ Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_PLAYER-ACTIONS_ACTION-FOCUSED", {
"%actionName%": e,
"%primaryKey%": r(n)
}), t.getMetadata(0) ], $q = Ii.observer((({photonPlayerId: e, photonSessionId: t, onClose: n}) => {
const r = vU(e, t, n);
return H.createElement(Lq, {
items: r,
narrationItem: Qq
});
})), Zq = Ii.observer((({photonPlayerId: e, photonSessionId: t}) => {
const {navigate: n} = XS(), r = H.useCallback((() => n($S.link())), [ n ]), {data: i, loading: o} = kA(e, 8e3), {data: a} = mU(e, !0), {name: s} = xw(e), l = bE(e), c = rH(e, t);
return _p((() => s ? Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_PLAYER-ACTIONS_MENU-OPEN", {
"%primaryID%": s
}) : void 0), [ s ], 0), H.useEffect((() => {
o || i || r();
}), [ r, e, i, o ]), H.createElement(H.Fragment, null, H.createElement(aL, {
text: Em("PHOTON-SOCIAL_ACTIONS-PLAYER_TITLE"),
style: [ kq, rd("marginBottom", Vc(Rd.DimensionSpace.largest)) ]
}), H.createElement(Bw, {
photonPlayerId: e,
style: rd("marginBottom", Vc(Rd.DimensionSpace.large)),
textStyle: rd("fontSize", Jc(Rd.TextSizeHeading.smaller)),
useEllipsis: !1,
icon: l ? ih.STAR : void 0
}), a.length ? H.createElement("surface", {
style: [ Xq, dh({
backgroundColor: Rd.BackgroundColor.body,
borderColor: void 0
}) ]
}, a.map(((e, t) => H.createElement(Dw, {
key: e.photonPlayerId,
player: e,
style: 0 !== t ? rd("marginTop", Vc(Rd.DimensionSpace.small)) : void 0
})))) : null, c && H.createElement(nH, {
photonPlayerId: e,
photonSessionId: t,
bodyTextStyle: rd("marginStart", Vc(Rd.DimensionSpace.macro))
}), H.createElement(_q, {
id: "player_actions"
}, i && H.createElement($q, {
photonPlayerId: e,
photonSessionId: t,
onClose: r
})));
})), eY = {
pg_id: "overlay_player_actions_self",
msg_id: "overlay_player_actions_self"
}, tY = {
pg_id: "overlay_player_actions_other",
msg_id: "overlay_player_actions_other"
}, nY = Ii.observer((({match: e}) => {
const {navigate: t} = XS(), n = av(), r = hv(), i = pq(e?.params.photonPlayerId), o = pq(e?.params.photonSessionId), {isCurrentPhotonUser: a} = i ? yv(i, r) : {
isCurrentPhotonUser: !1
}, s = a ? eY : tY, l = !!e;
VE(l ? s : void 0);
const c = H.useCallback((() => {
t($S.link()), ME(n, {
...s,
option: "back"
});
}), [ t, n, s ]), d = Kq.Decline, u = WL(d);
return HL(l ? {
action: d,
callback: c,
label: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK")
} : void 0), _p((({getKeyBindingText: e}) => Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_MENU-EXIT", {
"%backKey%": e(u)
})), [ u ], 2, l), i ? H.createElement(Wq, {
onDimmerClick: c,
isVisible: l
}, H.createElement(Nh, {
disable: !l
}, H.createElement(Zq, {
photonPlayerId: i,
photonSessionId: o
}))) : null;
})), rY = fm.InputBindings.Action, iY = {
destination_name: "empty_state",
msg_id: "empty_state",
option: "player_list_empty"
}, oY = Ii.observer((({emptyState: e}) => {
const t = WL(rY.Primary), {DeepLink: n} = Tm(), r = bO(), i = CE(), o = hv();
VE({
...iY,
pg_id: "tab_player_list",
option: void 0
});
const a = e.playerActions.map((e => {
const a = ok({
action: e,
DeepLink: n,
notifications: r,
modals: i,
player: {
eaPlayerId: o.tokenInfo.userId,
personaId: o.personaInfo.personaId,
playerNetworkId: o.personaInfo.playerNetworkId
},
loadingTelemetryId: "overlay_player_list_action"
});
return H.createElement(iF, {
onClick: a,
input: {
keyBinding: t,
callback: a
},
label: e.localizedName,
id: "player_list_empty_action-" + e.playerActionId,
telemetryInfo: {
pg_id: "tab_player_list",
...iY,
option: e.telemetryName
},
key: "action-" + e.playerActionId
});
}));
return H.createElement(rF, {
headline: e.localizedTitle,
body: e.localizedReason
}, H.createElement("surface", {
style: [ mf(4), rd("marginTop", Vc(Rd.DimensionSpace.larger)) ]
}, a));
})), aY = fm.PlayerList.Icon, sY = zc({
[aY.Star]: {
1: Cs("/photon/quantum/icons/playerlist/Star_48px-cc2c4df6.png"),
2: Cs("/photon/quantum/icons/playerlist/Star_48px@2x-94aa5a32.png")
},
[aY.Shield]: {
1: Cs("/photon/quantum/icons/playerlist/Shield_48px-2c5c6c35.png"),
2: Cs("/photon/quantum/icons/playerlist/Shield_48px@2x-27477021.png")
},
[aY.Hexagon]: {
1: Cs("/photon/quantum/icons/playerlist/Hexagon_48px-c6ff4787.png"),
2: Cs("/photon/quantum/icons/playerlist/Hexagon_48px@2x-fbd9a547.png")
},
[aY.ClipBoard]: {
1: Cs("/photon/quantum/icons/playerlist/Clipboard_48px-82d2e599.png"),
2: Cs("/photon/quantum/icons/playerlist/Clipboard_48px@2x-d7ac333c.png")
},
[aY.StarShield]: {
1: Cs("/photon/quantum/icons/playerlist/Shield_with_star_48px-3c7b0a48.png"),
2: Cs("/photon/quantum/icons/playerlist/Shield_with_star_48px@2x-35133720.png")
},
[aY.Flag]: {
1: Cs("/photon/quantum/icons/playerlist/Flag_48px-8d9e77b9.png"),
2: Cs("/photon/quantum/icons/playerlist/Flag_48px@2x-2f51557a.png")
}
}), lY = zc({
[aY.Star]: {
1: Cs("/photon/quantum/icons/playerlist/Star_32px-903d224a.png"),
2: Cs("/photon/quantum/icons/playerlist/Star_32px@2x-8c9c4d67.png")
},
[aY.Shield]: {
1: Cs("/photon/quantum/icons/playerlist/Shield_32px-308b7e5c.png"),
2: Cs("/photon/quantum/icons/playerlist/Shield_32px@2x-cac135f6.png")
},
[aY.Hexagon]: {
1: Cs("/photon/quantum/icons/playerlist/Hexagon_32px-7fd6f41b.png"),
2: Cs("/photon/quantum/icons/playerlist/Hexagon_32px@2x-4127c97b.png")
},
[aY.ClipBoard]: {
1: Cs("/photon/quantum/icons/playerlist/Clipboard_32px-6960d790.png"),
2: Cs("/photon/quantum/icons/playerlist/Clipboard_32px@2x-2a0f078c.png")
},
[aY.StarShield]: {
1: Cs("/photon/quantum/icons/playerlist/Shield_with_star_32px-1ff0a8e6.png"),
2: Cs("/photon/quantum/icons/playerlist/Shield_with_star_32px@2x-fda712a3.png")
},
[aY.Flag]: {
1: Cs("/photon/quantum/icons/playerlist/Flag_32px-2aa77ec1.png"),
2: Cs("/photon/quantum/icons/playerlist/Flag_32px@2x-55c74680.png")
}
});
function cY(e) {
const t = ol();
return e ? t.getItem(QC, e) : {
data: void 0,
loading: !1,
uninitialized: !1,
error: new Error("No playerlists")
};
}
var [dY, uY] = Qs("PlayerListIdContext");
function pY() {
const {playerListId: e} = uY();
return cY(e);
}
function fY(e) {
const {playerListId: t} = uY(), n = ol();
if (t) return n.getItem(qC, t).data?.get(e);
}
var hY = fm.PlayerList.Icon, mY = Vc(32), gY = {
iconRow: Qc({
position: "relative",
flexDirection: "row",
flexWrap: "nowrap",
alignItems: "center",
marginBottom: Vc(Rd.DimensionSpace.smaller)
}),
icon: Qc({
width: mY,
height: mY,
color: Rd.IconColorStandard.emphasized,
position: "absolute"
})
};
function yY(e, t) {
return t?.[e] ?? hY[e];
}
function IY(e) {
return sY[e];
}
var _Y = Ii.observer((({photonPlayerId: e}) => {
const t = fY(e), n = pY();
if (!t?.icons.size) return null;
const r = Array.from(t.icons).map((e => H.createElement("surface", {
style: gY.iconRow,
key: "icon-" + e
}, H.createElement("surface", {
style: [ gY.icon, rd("texture", IY(e)) ]
}), H.createElement(IT, {
text: yY(e, n.data?.localizedIconLegend),
color: Rd.TextColorStandard.emphasized,
style: rd("marginStart", mY + Vc(Rd.DimensionSpace.small))
}))));
return H.createElement(eH, {
sectionTitle: n.data?.localizedLegendTitle ?? Em("PHOTON-SOCIAL_LEGEND_TITLE")
}, r);
})), bY = fm.PlayerList.Purpose, SY = (e, t) => {
const n = rH(e, t), r = pY().data?.purpose === bY.PlayTogether;
return n && r;
}, vY = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n}) => {
let r;
c_(e) && (r = H.createElement(_Y, {
photonPlayerId: e,
key: "icon-legend"
}));
const {data: i} = qU(e, t), o = SY(e, t);
return H.createElement(mV, {
photonPlayerId: e,
photonSessionId: t,
telemetryInfo: n
}, H.createElement(pV, {
photonPlayerId: e,
playerPresence: i,
key: "product-player-details"
}), r, H.createElement(fV, {
photonPlayerId: e,
photonSessionId: t,
playerPresence: i,
key: "party-lobby-status"
}), H.createElement(dV, {
photonPlayerId: e,
playerPresence: i,
key: "other-identities"
}), o && H.createElement(nH, {
photonPlayerId: e,
photonSessionId: t,
key: "compatibility-warnings"
}));
})), TY = fm.PlayerList.Purpose, EY = fm.InputBindings.Action;
function PY(e, t) {
return e.data?.title ? e.data.title : t.data?.productTitle ? t.data.productTitle : t.data?.isOnline ? Em("PHOTON-SOCIAL_PRESENCE_ONLINE") : Em("PHOTON-SOCIAL_PRESENCE_OFFLINE");
}
var OY = ({icons: e}) => e.size ? H.createElement(H.Fragment, null, H.createElement(FD, null), Array.from(e.keys()).map((e => H.createElement(BD, {
texture: lY[e],
key: "icon-" + e,
style: rd("marginRight", Vc(Rd.DimensionSpace.smallest))
})))) : null, CY = Ii.observer((({photonPlayerId: e, photonSessionId: t, hideTitleOnFocus: n}) => {
const r = fY(e), i = qU(e, t), o = YU(i.data?.productId), a = hv(), s = $U(e, t), l = SY(e, t);
if (!r) return null;
const c = r.playerId === a.tokenInfo.userId ? void 0 : PY(o, i);
return H.createElement(H.Fragment, null, H.createElement(OY, {
icons: r.icons
}), H.createElement("surface", {
style: rd("flex", 1)
}), H.createElement(TJ, {
hideOnPressedOrFocused: n,
texts: [ c, s ]
}), l && H.createElement(PJ, null));
}));
function NY(e, t) {
H.useEffect((() => t(e)), [ t, e ]);
}
function AY(e, t, n, r, i) {
const o = yv(e, n.get(fv)).isCurrentEaUser;
if (!!n.get(PS).get().data?.get(e) || o) return;
const {eaPlayerId: a} = s_(e), s = a ? n.get(aE).get().data?.get(a) : void 0, l = a ? n.get(iE).get().data?.get(a) : void 0;
return r.isActionTaken || !s && !l ? {
keyBinding: t,
label: Em("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_ADD-FRIEND"),
callback: r.performAction,
disabled: r.isActionTaken,
disabledContent: H.createElement(xD, {
text: Em("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_REQUEST-SENT")
})
} : {
keyBinding: t,
label: Em("PHOTON-SOCIAL_PLAYER-SEARCH_LIST_ACTIONS_VIEW-REQUEST"),
callback: i
};
}
var LY = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, setActions: r}) => {
const i = uU(e, t), o = CJ(e, t, !0), a = cU(e, t), s = NJ(e, t), l = WL(EY.Primary), c = WL(EY.Secondary), d = H.useCallback((() => n), [ n ]), u = ol(), p = dx(e, n), f = rL(e, t, n);
return NY(H.useMemo((() => i.canJoin && i.gameInvite && a.data?.canInvite ? {
primaryAction: o(l, i, d),
secondaryAction: s(c, a, d)
} : a.data?.canInvite ? {
primaryAction: s(l, a, d),
secondaryAction: AY(e, c, u, p, f)
} : {
primaryAction: AY(e, l, u, p, f)
}), [ p, s, o, d, a, i, u, e, l, c, f ]), r), null;
})), wY = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, setActions: r}) => {
const i = dx(e, n), o = rL(e, t, n), a = WL(EY.Primary), s = ol(), l = !!s.get(PS).get().data?.get(e);
return NY(H.useMemo((() => l ? {} : {
primaryAction: AY(e, a, s, i, o)
}), [ i, l, a, s, e, o ]), r), null;
})), kY = {
[TY.PlayTogether]: LY,
[TY.MakeFriends]: wY,
[TY.None]: void 0
}, RY = Ii.observer((({playerListId: e, ...t}) => {
const {data: n} = cY(e);
if (void 0 !== n?.purpose && n.purpose !== TY.None) {
const e = kY[n.purpose];
if (e) return H.createElement(e, {
...t
});
}
return null;
})), xY = Ii.observer((({photonPlayerId: e, photonSessionId: t, PlayerDetailsComponent: n, setHandlers: r, telemetryInfo: i}) => (NY(yV({
photonPlayerId: e,
photonSessionId: t,
PlayerDetailsComponent: n,
telemetryInfo: i
}), r), null))), BY = Ii.observer((({photonPlayerId: e, telemetryInfo: t}) => {
const n = void 0, {name: r, playerNetworkId: i} = xw(e), o = IU(e, n, t), [a, s] = H.useState(), [l, c] = H.useState(), {playerListId: d} = uY(), u = H.useMemo((() => e => H.createElement(dY.Provider, {
value: {
playerListId: d
}
}, H.createElement(vY, {
...e
}))), [ d ]), p = JD({
playerName: r
}), f = !(!a?.primaryAction && !a?.secondaryAction);
return H.createElement(VD, {
id: "playerList-" + e,
narrationItem: p,
onClick: o,
onFocus: l?.handleFocus,
onBlur: l?.handleBlur,
...a
}, !!d && H.createElement(_J, {
delay: 500
}, H.createElement(xY, {
photonPlayerId: e,
photonSessionId: n,
PlayerDetailsComponent: u,
setHandlers: c,
telemetryInfo: t,
key: "handlers-loader"
}), H.createElement(RY, {
photonPlayerId: e,
photonSessionId: n,
setActions: s,
playerListId: d,
telemetryInfo: t,
key: "actions-loader"
})), H.createElement(wD, {
playerNetworkId: i,
name: r,
style: rd("flex", 0)
}), H.createElement(CY, {
photonPlayerId: e,
photonSessionId: n,
hideTitleOnFocus: f
}));
})), DY = Qg("/playerList/:photonPlayerId?", "tab_player_list");
function FY(e) {
const {data: t} = e, n = ol();
return t ? n.getItem(tN, t.id) : {
...e,
data: void 0
};
}
function MY(e, t, n) {
return () => {
const r = e.getItemUntracked($C, t);
e.setItem($C, t, !r), ME(n, {
pg_id: "tab_player_list",
destination_name: t,
msg_id: t,
option: r ? "collapse" : "expand"
});
};
}
function UY(e) {
const {data: t} = e, n = ol(), r = av(), i = t?.id ? n.getItem(eN, t.id) : ZC;
return H.useMemo((() => {
const e = new _V;
return t ? (t.sections.forEach(((o, a) => {
var s, l;
e.addSection({
id: a,
isExpanded: i[a],
onToggle: MY(n, o.id, r),
title: o.localizedTitle,
component: BY,
focusId: (s = t.id, l = o.id, `playerlist-${s}-section-${l}`),
telemetryInfo: {
pg_id: "tab_player_list",
msg_id: o.id,
index: {
total_items: t.sections.length,
item_index: 1 + a
},
context: {
p_cnt: o.personas.length
}
}
});
})), e) : e;
}), [ i, n, t, r ]);
}
function HY() {
const e = ol();
return sl((() => {
const t = e.getUntracked(WC), n = e.getUntracked(YC);
void 0 !== t && n.includes(t) || e.set(WC, n[0]);
}), [ e ], YC, !0), [ e.get(WC), pl(WC) ];
}
var VY = Vc(Rd.DimensionSpace.larger), JY = Vc(Rd.TextSizeHeading.medium) + VY, GY = Ii.observer((() => {
const [e] = HY(), t = cY(e), n = ol().get(zC), r = AV(FY(t), UY(t)), {rows: i} = NV(r.sectionsState, r.data, DY);
return n?.emptyState && t.error ? H.createElement(oY, {
emptyState: n.emptyState
}) : H.createElement(dY.Provider, {
value: {
playerListId: t.data?.id
}
}, H.createElement(jU, {
loading: r.loading,
empty: r.empty,
error: r.error,
beforeContent: H.createElement(aL, {
text: t.data?.localizedTitle ?? "",
color: Rd.TextColorStandard.emphasized,
style: rd("marginBottom", VY),
useEllipsis: !0
}),
scrollHeight: FU - JY,
rows: i,
emptyContent: t.data?.emptyState ? H.createElement(oY, {
emptyState: t.data?.emptyState
}) : void 0
}));
})), zY = Ii.observer((({portalId: e}) => XV().gates.get(e) ?? null)), [jY, qY] = El({
debugName: "presenceUpdateEventState",
create: () => new os
});
function YY(e, t, n) {
switch (e) {
case 0:
return {
notificationMeta: {
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_FRIENDS_FRIEND-ONLINE", {
"%primaryID%": t
})
},
notificationOptions: {
setting: 1,
telemetryInfo: {
pg_id: "tst_friend_online"
}
}
};

case 2:
return {
notificationMeta: {
text: Em("PHOTON-SOCIAL_NOTIFICATION_FAVORITES_FRIEND_ONLINE_DESC", {
"%username%": t
}),
icon: ih.AVATAR
},
notificationOptions: {
setting: 8,
telemetryInfo: {
pg_id: "tst_fav_online"
},
cooldownInfo: {
type: "FavoriteFriendOnline",
key: n
}
}
};

case 3:
return {
notificationMeta: {
text: Em("PHOTON-SOCIAL_NOTIFICATION_FAVORITES_FRIEND_READY-TO-PLAY_DESC", {
"%username%": t
}),
icon: ih.AVATAR
},
notificationOptions: {
setting: 8,
telemetryInfo: {
pg_id: "tst_fav_friend_invite_status"
},
cooldownInfo: {
type: "FavoriteFriendDownToPlay",
key: n
}
}
};

case 1:
return {
notificationMeta: {
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PLAYER_LIST-ONLINE", {
"%primaryID%": t
})
},
notificationOptions: {
setting: 7,
telemetryInfo: {
pg_id: "tst_playerlist_member_online"
}
}
};

default:
Xs("Unhandled PlayerType");
}
}
var WY = () => {
const e = qY(), {showNotification: t} = bO(), n = hv(), r = ol();
H.useEffect((() => e.subscribe(((e, i, o) => {
const a = NT(kO(r, i, n), {
allowEllipsis: !0
}), {notificationMeta: s, notificationOptions: l} = YY(o.playerType, a, i.photonPlayerId);
t(2, 2, s, l);
}))), [ r, e, n, t ]);
}, KY = () => {
const e = wE();
return VE({
pg_id: e,
destination_name: "empty_state",
msg_id: "empty_state"
}), H.createElement(rF, {
headline: Em("PHOTON-SOCIAL_RECENT-MET_EMPTY-TITLE"),
body: Em("PHOTON-SOCIAL_RECENT-MET_EMPTY-DESC")
});
}, XY = Qc({
maxHeight: Vc(150),
layer: !0
}), QY = Ii.observer((e => {
const {photonPlayerId: t, photonSessionId: n} = e, {data: r} = Fz(t), {data: i} = qU(t, n), o = r?.primaryContext, a = r?.secondaryContext, s = !!o || !!a;
return H.createElement(mV, {
...e
}, s && H.createElement("surface", {
style: rd("marginBottom", Vc(Rd.DimensionSpace.larger))
}, H.createElement(nD, {
text: Em("PHOTON-SOCIAL_DETAILS_TITLE"),
style: [ rd("marginBottom", Vc(Rd.DimensionSpace.smallest)), _u ]
}), o ? H.createElement(IT, {
text: o,
useEllipsis: !!a,
color: Rd.TextColorStandard.emphasized,
style: a ? rd("marginBottom", Vc(Rd.DimensionSpace.smallest)) : XY
}) : null, a ? H.createElement(IT, {
text: a,
useEllipsis: !!o,
color: Rd.TextColorStandard.emphasized
}) : null), H.createElement(dV, {
photonPlayerId: t,
playerPresence: i
}));
})), $Y = Qg("/recently-met", "tab_recently_met"), ZY = (Qg("/find-friends", "tab_find_friends"), 
{
0: Np(),
1: Np(),
2: Np()
}), eW = Ii.observer((({type: e, photonPlayerId: t, setActions: n, telemetryInfo: r, source: i}) => {
const o = void 0, a = wE(), s = H.useMemo((() => r && {
pg_id: a,
destination_name: i,
...r
}), [ a, i, r ]), l = yV({
photonPlayerId: t,
photonSessionId: o,
PlayerDetailsComponent: 1 === e ? QY : gV,
telemetryInfo: s
}), c = bj(t, o, void 0, s);
return H.useEffect((() => {
n({
...l,
...c
});
}), [ n, l, c ]), null;
})), tW = Ii.observer((e => {
const t = e.photonPlayerId, n = kA(t), r = wE(), [i, o] = H.useState(), {name: a, playerNetworkId: s} = wO(n.data), l = IU(t, void 0, H.useMemo((() => ({
...e.telemetryInfo,
pg_id: r,
destination_name: "played_together",
option: "see_player_actions"
})), [ e.telemetryInfo, r ])), c = JD({
playerName: a
});
return H.createElement(VD, {
id: "player" + t,
narrationItem: c,
onFocus: i?.handleFocus,
onBlur: i?.handleBlur,
onClick: l,
primaryAction: i?.primaryAction,
secondaryAction: i?.secondaryAction
}, n.data ? H.createElement(H.Fragment, null, H.createElement(_J, {
delay: 500
}, H.createElement(eW, {
type: 1,
photonPlayerId: t,
setActions: o,
telemetryInfo: e.telemetryInfo,
source: "played_together"
})), H.createElement(wD, {
playerNetworkId: s,
name: a
})) : H.createElement(H.Fragment, null, H.createElement(fD, {
height: hD,
width: mD
}), H.createElement("surface", {
style: rd("flex", 1)
})), !!e.timestamp && H.createElement(nF, {
hideOnPressedOrFocused: !!i?.primaryAction,
timeMs: 1e3 * e.timestamp
}));
})), nW = Ii.observer((e => {
const t = wE(), n = e.photonPlayerId, r = kA(n), [i, o] = H.useState(), {name: a, playerNetworkId: s} = wO(r.data), l = IU(n, void 0, H.useMemo((() => ({
...e.telemetryInfo,
pg_id: t,
destination_name: e.source,
option: "see_player_actions"
})), [ e, t ])), c = JD({
playerName: a
});
return H.createElement(VD, {
id: "player" + n,
narrationItem: c,
onFocus: i?.handleFocus,
onBlur: i?.handleBlur,
onClick: l,
primaryAction: i?.primaryAction,
secondaryAction: i?.secondaryAction
}, H.createElement(_J, {
delay: 500
}, H.createElement(eW, {
type: 0,
photonPlayerId: n,
setActions: o,
telemetryInfo: e.telemetryInfo,
source: e.source
})), H.createElement(wD, {
playerNetworkId: s,
name: a
}));
}));
function rW() {
const e = wE(), {isExpanded: t, onToggle: n} = pD({
id: "recently-met-section-teammates",
onToggleCallback: HE(e, "playing_together_teammates"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), {isExpanded: r, onToggle: i} = pD({
id: "recently-met-section-opponents",
onToggleCallback: HE(e, "playing_together_opponents"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), {isExpanded: o, onToggle: a} = pD({
id: "recently-met-section-played-together",
onToggleCallback: HE(e, "played_together"),
isInitiallyExpanded: !0,
rememberExpandedState: !0
}), s = _l((({get: e}) => t => {
const n = e(PS).get();
if (!n.data) return t.length;
const r = new Set(n.data.keys());
return t.filter((e => !r.has(e.photonPlayerId))).length;
}), []);
return H.useMemo((() => {
const l = new _V;
return l.addSection({
id: 0,
isExpanded: t,
onToggle: n,
title: e => Em("PHOTON-SOCIAL_RECENT-MET_LIST_SECTION-HEAD_TEAMMATES", {
"%numberTeammates%": e.length + ""
}),
component: e => H.createElement(nW, {
source: "playing_together_teammates",
...e
}),
focusId: ZY[0],
telemetryInfo: t => ({
pg_id: e,
destination_name: "playing_together_teammates",
msg_id: "playing_together_teammates",
context: {
rel: "not_friend",
p_cnt: s(t)
}
})
}), l.addSection({
id: 1,
isExpanded: r,
onToggle: i,
title: e => Em("PHOTON-SOCIAL_RECENT-MET_LIST_SECTION-HEAD_OPPONENTS", {
"%numberOpponents%": e.length + ""
}),
component: e => H.createElement(nW, {
source: "playing_together_opponents",
...e
}),
focusId: ZY[1],
telemetryInfo: t => ({
pg_id: e,
destination_name: "playing_together_opponents",
msg_id: "playing_together_opponents",
context: {
rel: "not_friend",
p_cnt: s(t)
}
})
}), l.addSection({
id: 2,
isExpanded: o,
onToggle: a,
title: e => Em("PHOTON-SOCIAL_RECENT-MET_LIST_SECTION-HEAD_PAST-PLAYERS", {
"%numberPlayedTogether%": e.length + ""
}),
component: tW,
focusId: ZY[2],
telemetryInfo: {
pg_id: e,
destination_name: "played_together",
msg_id: "played_together"
}
}), l;
}), [ e, t, n, r, i, o, a, s ]);
}
var iW = Ii.observer((() => {
const e = AV(KO(nC(Dz)), rW()), {rows: t} = NV(e.sectionsState, e.data, $Y);
return H.createElement(jU, {
loading: e.loading,
empty: e.empty,
emptyContent: H.createElement(KY, null),
error: e.error,
rows: t
});
})), oW = Qc({
justifyContent: "center"
}), aW = Qc({
marginBottom: Vc(Rd.DimensionSpace.smaller)
}), sW = Qc({
marginBottom: Vc(Rd.DimensionSpace.larger)
}), lW = ({title: e, body: t, style: n}) => H.createElement("surface", {
style: [ oW, n ]
}, !!e && H.createElement(nD, {
text: e,
color: Rd.TextColorStandard.emphasized,
style: aW
}), !!t && H.createElement(IT, {
text: t,
color: Rd.TextColorStandard.default
})), cW = ({title: e, body: t, style: n, children: r}) => {
const i = Tq();
return Sp((() => e), [ e ], 1, i), H.useEffect((() => {
i.setMetadata(0, t);
}), [ i, t ]), H.createElement(H.Fragment, null, H.createElement(lW, {
title: e,
body: t,
style: [ sW, n ]
}), H.createElement(Sq.Provider, {
value: i
}, r));
}, dW = class {
constructor(e) {
this.settings = mt.box([], {
deep: !1
});
const t = e.DeepLink.getSettingsAvailability({});
t && this.updateSettings(t.temporaryDisabled), e.DeepLink.onTemporaryDisabledSettingsChanged.subscribe((e => {
this.updateSettings(e.temporaryDisabled);
})), Or(this, {
updateSettings: An
});
}
updateSettings(e) {
e && this.settings.set(e);
}
getSettingDisabled(e) {
return this.settings.get().includes(e);
}
}, [uW, pW] = El({
debugName: "disabledSettingsState",
create: e => {
const t = e.get(sI);
return new dW(t);
}
}), fW = e => ({
disabled: pW().getSettingDisabled(e)
}), hW = ({label: e, group: t, keyBinding: n, icon: r}, {getKeyBindingText: i}) => [ r === ih.OPEN_EXTERNAL ? Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_EXTERNAL-LINK-FOCUSED", {
"%linkLabel%": e,
"%primaryKey%": i(n)
}) : Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_CATEGORY-FOCUSED", {
"%settingCategory%": e,
"%primaryKey%": i(n)
}), t.getMetadata(0) ], mW = Ii.observer((({setting: e, item: t, telemetryMessage: n, style: r}) => {
const i = Tm(), o = gA(), a = Yq(), {disabled: s} = fW(e), l = av(), c = H.useCallback((() => {
ME(l, n), i.DeepLink.openSetting({
setting: e
}), o.close(), a();
}), [ o, a, i.DeepLink, l, e, n ]);
return H.createElement(Oq, {
style: r,
item: {
isDisabled: s,
action: c,
...t
},
narrationItem: hW
});
})), gW = Ii.observer((({title: e, body: t, alwaysAvailable: n, ...r}) => {
const i = LS.availableSettings.includes(r.setting);
return n || i ? H.createElement(cW, {
title: e,
body: t
}, H.createElement(mW, {
...r
})) : null;
})), yW = ({text: e}) => (_p((() => Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_CATEGORY-SELECTED", {
"%settingCategory%": e
})), [ e ], 0), H.createElement(aL, {
text: e,
style: Rq
})), IW = fm.DeepLink.Setting, _W = {
pg_id: "overlay_settings_accessibility",
destination_name: "general_accessibility",
msg_id: "general_accessibility"
}, bW = {
..._W,
option: "accessibility_settings"
}, SW = () => (VE(_W), H.createElement(H.Fragment, null, H.createElement(yW, {
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_ACCESSIBILITY")
}), H.createElement(gW, {
title: Em("PHOTON-SOCIAL_SETTINGS_ACCESSIBILITY_SECTION-TITLE"),
body: Em("PHOTON-SOCIAL_SETTINGS_ACCESSIBILITY_GENERAL_DESC"),
setting: IW.Accessibility,
telemetryMessage: bW,
item: {
id: "setting-accessibility",
text: Em("PHOTON-SOCIAL_SETTINGS_ACCESSIBILITY_GENERAL_EXT-LINK"),
icon: ih.OPEN_EXTERNAL
}
}))), vW = fm.DeepLink.Setting, TW = {
pg_id: "overlay_settings_cross_play",
destination_name: "cross_play",
msg_id: "cross_play"
}, EW = {
...TW,
option: "cross_play_settings"
}, PW = () => (VE(TW), H.createElement(H.Fragment, null, H.createElement(yW, {
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_CROSSPLAY")
}), H.createElement(gW, {
title: Em("PHOTON-SOCIAL_SETTINGS_CROSSPLAY_SECTION-TITLE"),
body: Em("PHOTON-SOCIAL_SETTINGS_CROSSPLAY_GENERAL_DESC"),
setting: vW.CrossPlay,
item: {
id: "setting-crossplay",
text: Em("PHOTON-SOCIAL_SETTINGS_CROSSPLAY_GENERAL_EXT-LINK"),
icon: ih.OPEN_EXTERNAL
},
telemetryMessage: EW
}))), OW = Qc({
zOffset: 1,
marginTop: Vc(2),
marginStart: Vc(Zu.RadioInputIcon.Container.marginStart),
flexShrink: 0
}), CW = Qc({
position: "absolute",
top: 0,
left: 0,
right: 0,
bottom: 0
}), NW = {
background: Qc({
texture: ih.RADIO_INPUT_BACKGROUND
}),
stroke: Qc({
texture: ih.RADIO_INPUT_STROKE
}),
bullet: Qc({
texture: ih.RADIO_INPUT_BULLET
})
}, AW = Qc({
width: Vc(32),
height: Vc(32),
alignItems: "center",
justifyContent: "center"
}), LW = Qc({
width: Vc(12),
height: Vc(12),
color: Zu.RadioInputIcon.Bullet.color
}), wW = H.memo((({isSelected: e, isDisabled: t}) => {
let n;
return n = t ? Zu.RadioInputIconDisabled.Stroke.color : e ? Zu.RadioInputIconSelected.Stroke.color : Zu.RadioInputIcon.Stroke.color, 
H.createElement("surface", {
style: [ OW, $B.icon ]
}, H.createElement("surface", {
style: [ CW, NW.background, rd("color", Zu.RadioInputIcon.Container.backgroundColor) ]
}), H.createElement("surface", {
style: [ CW, NW.stroke, rd("color", n) ]
}), e && H.createElement("surface", {
style: [ CW, AW ]
}, H.createElement("surface", {
style: [ NW.bullet, LW ]
})));
})), kW = {
onPress: 4
}, RW = () => Tf(2), xW = Ii.observer((e => {
const t = RW(), {isSelected: n, onSelect: r} = e, i = H.useCallback((() => {
n || r();
}), [ n, r ]), o = Of({
...e,
soundEffectOverride: kW,
onClick: i,
input: {
keyBinding: t,
callback: i
}
});
let a;
if (!e.skipButtonIcon) {
const e = Uc(t.primaryButton);
e && (a = H.createElement(DD, {
type: e,
showOnPressedOrFocused: !0,
style: rd("marginEnd", Vc(Zu.RadioInput.ButtonIcon.marginEnd))
}));
}
return H.createElement(vD, {
transparent: e.transparent,
interaction: o
}, H.createElement(TD, null, a, "string" == typeof e.label ? H.createElement(LD, {
text: e.label
}) : e.children, H.createElement(wW, {
isSelected: e.isSelected,
isDisabled: e.isDisabled
})));
})), BW = e => "string" == typeof e ? e : e();
function DW(e) {
const {option: t, isSelected: n, index: r, onChange: i, narrationItem: o} = e, a = RW(), s = xp(e.focusId), l = vq();
bp((e => o({
label: BW(t.label),
index: r,
isSelected: n,
keyBinding: a,
group: l
}, e)), [ o, t.label, n, r, l, a ], s), H.useEffect((() => l.addFocusId(s)), [ l, s ]);
const c = H.useCallback((() => {
i?.(t.value);
}), [ i, t.value ]);
return H.createElement(xW, {
label: t.children ? void 0 : BW(t.label),
id: t.id,
onSelect: c,
isSelected: n,
isDisabled: t.isDisabled,
skipButtonIcon: t.skipButtonIcon,
focusId: s,
transparent: !0
}, t.children);
}
function FW({value: e, items: t, onChange: n, narrationItem: r, style: i}) {
const o = vq();
return H.useEffect((() => {
o.setMetadata(1, t.length);
}), [ o, t.length ]), H.createElement("surface", {
style: i
}, t.map(((t, i) => H.createElement(DW, {
key: t.id,
isSelected: e === t.value,
option: t,
focusId: t.focusId,
index: i,
onChange: n,
narrationItem: r
}))));
}
var MW = ({label: e, group: t, isSelected: n, index: r, keyBinding: i}, {getKeyBindingText: o}) => [ n ? Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_ACTIVE-RADIO-BUTTON-FOCUSED", {
"%radioName%": e,
"%radioNumber%": r + 1 + "",
"%radioTotal%": (t.getMetadata(1) ?? "") + ""
}) : Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_INACTIVE-RADIO-BUTTON-FOCUSED", {
"%radioName%": e,
"%radioNumber%": r + 1 + "",
"%radioTotal%": (t.getMetadata(1) ?? "") + "",
"%primaryKey%": o(i)
}), t.getMetadata(0) ], UW = {
1: "online",
2: "offline"
}, HW = [ {
id: "online",
label: () => Em("PHOTON-SOCIAL_SETTINGS_STATUS_ONLINE_RADIAL"),
value: 1
}, {
id: "offline",
label: () => Em("PHOTON-SOCIAL_SETTINGS_STATUS_OFFLINE_RADIAL"),
value: 2
} ], VW = Ii.observer((() => {
const {playerNetworkId: e} = vO(), t = av(), n = $p(), r = ol(), i = dl(jv), {showNotification: o} = bO(), a = gv(), s = Bv(e);
VE({
pg_id: "overlay_settings_online_status",
msg_id: "overlay_settings_online_status"
});
const l = H.useCallback((i => {
const s = 2 === i;
s || o(3, 3, {
icon: ih.INFORMATION,
text: Vv(e, s)
}), ME(t, {
pg_id: "overlay_settings_online_status",
msg_id: "overlay_settings_online_status",
option: UW[i]
}), Yv(r, n.localStorage, a, i);
}), [ r, t, o, n, a, e ]);
return H.createElement(cW, {
title: Em("PHOTON-SOCIAL_SETTINGS_STATUS_HEADLINE"),
body: LS.isFirstPartyAppearOfflineSupported ? Em("PHOTON-SOCIAL_SETTINGS_STATUS_DESC_CASCADING", {
"%platformName%": s
}) : Em("PHOTON-SOCIAL_SETTINGS_STATUS_DESC_PARTITIONED", {
"%platformName%": s
})
}, !LS.isFirstPartyAppearOfflineSupported && H.createElement(FW, {
style: wq,
items: HW,
value: i,
onChange: l,
narrationItem: MW
}));
})), JW = Ii.observer((() => H.createElement(_q, {
id: "online-status",
scrollbarAlwaysVisible: Fs.isPC
}, H.createElement(yW, {
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_STATUS")
}), H.createElement(VW, null)))), GW = fm.DeepLink.Setting, zW = fm.InputBindings.Action, jW = fm.XboxPlatform.XboxPermission, qW = fm.XboxPlatform.XUserPrivilege, YW = Qc({
marginTop: Vc(Rd.DimensionSpace.largest),
padding: Vc(Rd.DimensionSpace.small),
alignSelf: "flex-start"
}), WW = Qc({
texture: Cs("/photon/ElectronicArtsSignInQR-76b8ba05.png"),
width: Vc(248),
height: Vc(248),
borderRadius: Vc(Rd.BorderRadius.smallest)
}), KW = Qc({
width: Vc(500),
height: Vc(500)
}), XW = [ {
id: "private",
label: () => Em("PHOTON-SOCIAL_SETTINGS_PRIVACY_PARTY-PRIVACY_BUTTON_PRIVATE"),
value: !1
}, {
id: "public",
label: () => Em("PHOTON-SOCIAL_SETTINGS_PRIVACY_PARTY-PRIVACY_BUTTON_PUBLIC"),
value: !0
} ], QW = () => {
const {closeModal: e} = CE();
return HL({
action: zW.Decline,
callback: e,
label: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK")
}), H.createElement(fL, null, H.createElement("surface", {
style: [ WW, KW ]
}));
}, $W = Ii.observer((() => {
const {showModal: e} = CE(), t = WL(zW.Primary), n = H.useCallback((() => {
e((() => H.createElement(QW, null)), {
opaque: !0
});
}), [ e ]), {focusItem: r, isFocused: i, isPressed: o} = Of({
id: "qrOpen",
onClick: n,
input: {
callback: n,
keyBinding: t
}
}), a = dh({
borderColor: uh({
isFocused: i,
isPressed: o
}),
backgroundColor: void 0
});
return H.createElement("surface", {
style: [ YW, a ],
...r.hooks
}, H.createElement("surface", {
style: WW
}));
})), ZW = {
pg_id: "overlay_settings_privacy",
destination_name: "party_and_lobby_privacy",
msg_id: "party_and_lobby_privacy"
}, eK = Ii.observer((() => {
const e = fP(), {showNotification: t} = bO(), n = av(), r = ol(), i = hv(), o = vO();
VE(ZW);
const a = H.useCallback((async a => {
const {isAllowed: s, privacyResult: l} = await QE(r, i.photonPlayerId, [ jW.PlayMultiplayer ], qW.Multiplayer);
return a && !s ? (ME(n, {
pg_id: "overlay_settings_privacy",
destination_name: "party_and_lobby_privacy",
status: "click",
msg_id: "party_and_lobby_privacy",
option: "joinable",
status_code: $E(l)
}), void t(3, 3, {
icon: ih.INFORMATION,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-MULTIPLAYER", {
"%localPlatform%": Bv(o.playerNetworkId)
})
})) : (ME(n, {
pg_id: "overlay_settings_privacy",
destination_name: "party_and_lobby_privacy",
msg_id: "party_and_lobby_privacy",
option: a ? "joinable" : "invite_only"
}), t(3, 3, {
icon: ih.INFORMATION,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_SETTINGS-UPDATED")
}), e.setSetting(1, 0, a));
}), [ n, e, t, i, r, o ]);
return H.createElement(cW, {
title: Em("PHOTON-SOCIAL_SETTINGS_PRIVACY_PARTY-PRIVACY_HEADING"),
body: Em("PHOTON-SOCIAL_SETTINGS_PRIVACY_PARTY-PRIVACY_DESC", {
"%localPlatform%": Bv(i.personaInfo.playerNetworkId)
})
}, H.createElement(FW, {
style: wq,
items: XW,
value: e.getSetting(1, 0),
onChange: a,
narrationItem: MW
}));
})), tK = {
pg_id: "overlay_settings_privacy",
destination_name: "ea_account_privacy",
msg_id: "ea_account_privacy"
}, nK = () => {
const e = Em("PHOTON-SOCIAL_SETTINGS_PRIVACY_EA-ACCOUNT-PRIVACY_EXT-LINK"), t = "https://" + e, {showErrorNotification: n} = bO(), r = $p(), i = gA(), o = Yq();
VE(tK);
const a = H.useCallback((() => {
r.bindings.Utilities.openUrl({
url: t
}) ? (i.close(), o()) : n({}, "open ea account portal url", void 0);
}), [ r.bindings.Utilities, t, i, o, n ]);
return H.createElement(H.Fragment, null, H.createElement(cW, {
title: Em("PHOTON-SOCIAL_SETTINGS_PRIVACY_EA-ACCOUNT-PRIVACY_HEADING"),
body: Em("PHOTON-SOCIAL_SETTINGS_PRIVACY_EA-ACCOUNT-PRIVACY_DESC")
}, Fs.isPC ? H.createElement(Oq, {
item: {
id: "setting-ea-account-link",
action: a,
text: e,
icon: ih.OPEN_EXTERNAL
},
narrationItem: hW
}) : H.createElement(IT, {
text: e
})), H.createElement($W, null));
}, rK = () => {
const e = LS.availableSettings.includes(GW.Party), t = Fs.isPartyEnabled || e;
return H.createElement(_q, {
id: "settings-privacy",
scrollbarAlwaysVisible: Fs.isPC
}, H.createElement(yW, {
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_PRIVACY")
}), t ? H.createElement(eK, null) : void 0, H.createElement(nK, null));
}, iK = Qg("/settings", "overlay_settings"), oK = iK.createSubRoute("/notifications", "overlay_settings_notifications"), aK = iK.createSubRoute("/privacy", "overlay_settings_privacy"), sK = iK.createSubRoute("/voice/:focusOnSetting?", "overlay_settings_voice"), lK = iK.createSubRoute("/accessibility", "overlay_settings_accessibility"), cK = iK.createSubRoute("/crossplay", "overlay_settings_cross_play"), dK = iK.createSubRoute("/online-status", "overlay_settings_online_status"), uK = fm.DeepLink.Setting, pK = fm.DeepLink.ParentalControlSettings, fK = fm.Voip.VoipChannel, hK = {
pg_id: "overlay_settings_voice",
destination_name: "general_voice",
msg_id: "general_voice"
}, mK = {
...hK,
option: "voice_settings"
}, gK = {
...hK,
option: "voice_xbox_parental_settings"
}, yK = "voip-settings-enabled", IK = Ii.observer((() => {
const e = ol(), t = fw(), n = fP(), {showNotification: r} = bO(), i = av(), o = pl(Dl), {focusOnSetting: a} = sK.useParams(), s = LS.isChild && Fs.isPC, l = H.useRef(!1), c = H.useCallback((() => {
a && !l.current && (l.current = !0, o({
focusId: yK,
source: 2
}));
}), [ a, o ]), d = H.useCallback((o => {
r(3, 3, {
icon: o ? ih.VOIP : ih.VOIP_DISABLED,
text: Em(o ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-ENABLED" : "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED")
});
const a = cw(e);
return o || a || t({
channel: fK.None
}, !0), ME(i, {
...hK,
option: o ? "enable" : "disable",
destination_name: "voice_chat",
msg_id: "voice_chat"
}), n.setSetting(2, 0, o);
}), [ e, t, n, r, i ]), u = H.useMemo((() => [ {
id: "enabled",
focusId: yK,
label: () => Em("PHOTON-SOCIAL_SETTINGS_VOICE_RADIO-BUTTON_VOIP-ENABLE"),
value: !0,
isDisabled: s
}, {
id: "disabled",
label: () => Em("PHOTON-SOCIAL_SETTINGS_VOICE_RADIO-BUTTON_VOIP-DISABLE"),
value: !1,
isDisabled: s
} ]), [ s ]);
return H.createElement("surface", {
onBounds: c,
style: rd("marginTop", Vc(Rd.DimensionSpace.larger))
}, H.createElement(cW, {
title: Em("PHOTON-SOCIAL_SETTINGS_VOICE_VOICE-CHAT_HEADING"),
body: Em(s ? "PHOTON-SOCIAL_SETTINGS_VOICE_UNDERAGE-VOIP-PC_DESC" : "PHOTON-SOCIAL_SETTINGS_VOICE_UNDERAGE-VOIP_DESC")
}, H.createElement(FW, {
style: wq,
items: u,
value: n.getSetting(2, 0),
onChange: d,
narrationItem: MW
})));
})), _K = Ii.observer((() => {
VE(hK);
const e = tE()(pK.Voip);
return H.createElement(_q, {
id: "settings-voice",
scrollbarAlwaysVisible: Fs.isPC
}, H.createElement(yW, {
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_VOICE")
}), H.createElement(gW, {
title: Em("PHOTON-SOCIAL_SETTINGS_VOICE_AUDIO_HEADING"),
body: Em("PHOTON-SOCIAL_SETTINGS_VOICE_VOICE-CHAT_DESC"),
style: wq,
setting: uK.Audio,
item: {
id: "setting-voice",
text: Em("PHOTON-SOCIAL_SETTINGS_VOICE_VOICE-CHAT_EXT-LINK"),
icon: ih.OPEN_EXTERNAL
},
telemetryMessage: mK
}), H.createElement(IK, null), Y_() ? H.createElement(gW, {
title: Em("PHOTON-SOCIAL_SETTINGS_VOICE_XBOX-VOICE_HEADING"),
body: Em(e ? "PHOTON-SOCIAL_SETTINGS_VOICE_XBOX-VOICE_DISABLED_DESC" : "PHOTON-SOCIAL_SETTINGS_VOICE_XBOX-VOICE_ENABLED_DESC"),
alwaysAvailable: !0,
setting: uK.FirstPartyParentalVoip,
item: {
id: "setting-parental-control",
text: Em("PHOTON-SOCIAL_SETTINGS_VOICE_XBOX-VOICE_EXT-LINK"),
icon: ih.OPEN_EXTERNAL
},
telemetryMessage: gK
}) : void 0);
})), bK = Qc({
marginStart: Vc(Rd.DimensionSpace.large)
}), SK = [ {
id: "toggleMute",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_TOGGLE_MUTE"),
value: 2,
telemetryId: "muted"
}, {
id: "toggleUnmute",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_TOGGLE_UNMUTE"),
value: 0,
telemetryId: "unmuted"
} ], vK = [ {
id: "always",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_ALWAYS"),
value: 0,
telemetryId: "always"
}, {
id: "notGameplay",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_NOT-GAMEPLAY"),
value: 1,
telemetryId: "not_during_gameplay"
}, {
id: "never",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_NEVER"),
value: 2,
telemetryId: "never"
} ], TK = [ {
id: "weekly",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-REMINDER_RADIO_WEEKLY"),
value: 0,
telemetryId: "weekly"
}, {
id: "never",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_NEVER"),
value: 1,
telemetryId: "never"
} ], EK = [ {
id: "six-seconds",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_6-SEC"),
value: 6,
telemetryId: "6_sec"
}, {
id: "ten-seconds",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_10-SEC"),
value: 10,
telemetryId: "10_sec"
} ], PK = [ {
id: "top-left",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_TOP-LEFT"),
value: 0,
telemetryId: "top_left"
}, {
id: "top-right",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_TOP-RIGHT"),
value: 1,
telemetryId: "top_right"
}, {
id: "bottom-left",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_BOTTOM-LEFT"),
value: 2,
telemetryId: "bottom_left"
}, {
id: "bottom-right",
label: () => Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RADIO-BUTTON_BOTTOM-RIGHT"),
value: 3,
telemetryId: "bottom_right"
} ], OK = Ii.observer((e => {
const {body: t, setting: n, options: r, onSuccess: i, destinationName: o} = e, a = fP(), s = av(), l = H.useCallback((e => (ME(s, {
pg_id: "overlay_settings_notifications",
destination_name: o,
msg_id: o,
status: "click",
option: r.find((t => t.value === e))?.telemetryId,
index: {
item_index: 0,
total_items: 0
}
}), i(), a.setSetting(0, n, e))), [ o, a, i, s, n, r ]);
return H.createElement(cW, {
body: t,
style: bK
}, H.createElement(FW, {
style: wq,
items: r,
value: a.getSetting(0, n),
onChange: l,
narrationItem: MW
}));
})), CK = Qc({
rotateZ: -90
}), NK = Ii.observer((e => {
const [t, n] = H.useState(!1), r = H.useCallback((() => {
n((e => !e));
}), []), i = Tq();
return Sp((() => e.title), [ e.title ], 1, i), VE({
pg_id: "overlay_settings_notifications",
destination_name: e.destinationName,
msg_id: e.destinationName
}), H.createElement(H.Fragment, null, H.createElement(Sq.Provider, {
value: i
}, H.createElement(Oq, {
item: {
id: e.id + "_collapsible",
action: r,
text: e.title,
icon: oh.down,
iconStyle: t ? void 0 : CK,
isActive: t,
isFocusableWhenActive: !0
},
narrationItem: hW
})), t && e.children);
})), AK = {
pg_id: "overlay_settings_notifications",
destination_name: "restore_defaults",
msg_id: "restore_defaults"
}, LK = Ii.observer((({onSuccess: e, isDisabled: t}) => {
const {showModal: n} = CE(), r = Yq(), i = av(), o = fP();
VE(AK);
const a = H.useCallback((() => {
n((() => H.createElement(wL, {
title: Em("PHOTON-SOCIAL_SETTINGS_OVERLAY_TITLE_RESTORE-NOTIFICATIONS"),
body: Em("PHOTON-SOCIAL_SETTINGS_OVERLAY_DESC_RESTORE-NOTIFICATIONS"),
onConfirm: () => (ME(i, {
pg_id: "overlay_settings_notifications_restore",
msg_id: "overlay_settings_notifications_restore",
option: "confirm"
}), e(), o.restoreSettings(0)),
onCancel: () => {
ME(i, {
pg_id: "overlay_settings_notifications_restore",
msg_id: "overlay_settings_notifications_restore",
option: "cancel"
});
},
autoClose: !0,
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO
})), {
telemetryId: "overlay_settings_notifications_restore"
}), r(), ME(i, {
pg_id: "overlay_settings_notifications",
destination_name: "restore_defaults",
msg_id: "restore_defaults",
option: "restore"
});
}), [ n, r, i, e, o ]);
return H.createElement(cW, {
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RESTORE-ALL_HEADING"),
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_RESTORE-ALL_DESC"),
style: [ rd("marginTop", Vc(Rd.DimensionSpace.large)), t ? rd("opacity", .5) : void 0 ]
}, H.createElement(Oq, {
item: {
id: "setting-notifications-restore",
action: a,
text: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_BUTTON_RESTORE"),
isDisabled: t
},
narrationItem: hW
}));
})), wK = Ii.observer((() => {
const e = fP(), {showNotification: t} = bO(), n = ol(), r = 0 !== e.getSetting(0, 0), i = H.useCallback((() => {
t(3, 3, {
icon: ih.INFORMATION,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_SETTINGS-UPDATED")
});
}), [ t ]), o = n.get(iN) ? n.get(zC) : void 0;
return H.createElement(_q, {
id: "settings-notifications",
scrollbarAlwaysVisible: Fs.isPC
}, H.createElement(yW, {
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_NOTIFICATIONS")
}), !r && H.createElement(H.Fragment, null, H.createElement(NK, {
id: "notification-settings-online-favorite-friend",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-FAVORITES_HEADING"),
destinationName: "favorite_logged_online"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-FAVORITES_DESC"),
setting: 8,
options: vK,
onSuccess: i,
destinationName: "favorite_logged_online"
})), H.createElement(NK, {
id: "notification-settings-online-friend",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-FRIEND_HEADING"),
destinationName: "friend_logged_online"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-FRIEND_DESC"),
setting: 1,
options: vK,
onSuccess: i,
destinationName: "friend_logged_online"
})), o && H.createElement(NK, {
id: "notification-settings-online-playerlist-member",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-MEMBER_HEADING", {
"%playerList%": o.localizedName
}),
destinationName: "playerlist_member_logged_online"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_ONLINE-MEMBER_DESC", {
"%playerList%": o.localizedName
}),
setting: 7,
options: vK,
onSuccess: i,
destinationName: "playerlist_member_logged_online"
})), H.createElement(NK, {
id: "notification-settings-friend-request-received",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-RECEIVED_HEADING"),
destinationName: "friend_request_received"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-RECEIVED_DESC"),
setting: 2,
options: vK,
onSuccess: i,
destinationName: "friend_request_received"
})), H.createElement(NK, {
id: "notification-settings-friend-request-accepted",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-ACCEPTED_HEADING"),
destinationName: "friend_request_accepted"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-ACCEPTED_DESC"),
setting: 3,
options: vK,
onSuccess: i,
destinationName: "friend_request_accepted"
})), H.createElement(NK, {
id: "notification-settings-party-invite-received",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_PARTY-INVITE-RECEIVED_HEADING"),
destinationName: "party_lobby_invite_received"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-ACCEPTED_DESC"),
setting: 5,
options: vK,
onSuccess: i,
destinationName: "party_lobby_invite_received"
})), Fs.isPartyEnabled && H.createElement(NK, {
id: "notification-settings-player-promoted",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_PLAYER-PROMOTED_HEADING"),
destinationName: "party_player_promoted"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_PLAYER-PROMOTED_DESC"),
setting: 6,
options: vK,
onSuccess: i,
destinationName: "party_player_promoted"
})), Ax(n) && H.createElement(NK, {
id: "notification-settings-friend-request-reminders",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-REMINDER_HEADING"),
destinationName: "fr_reminder"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_FRIEND-REQUEST-REMINDER_DESC"),
setting: 4,
options: TK,
onSuccess: i,
destinationName: "fr_reminder"
})), H.createElement(NK, {
id: "notification-settings-time-and-location",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_TIME-LOCATION_HEADING"),
destinationName: "notification_time_location"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_TIME_DESC"),
setting: 9,
options: EK,
onSuccess: i,
destinationName: "notification_time"
}), H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_LOCATION_DESC"),
setting: 10,
options: PK,
onSuccess: i,
destinationName: "notification_location"
}))), H.createElement(NK, {
id: "notifications_global_mute",
title: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_MUTE_HEADING"),
destinationName: "mute_all_social_notifications"
}, H.createElement(OK, {
body: Em("PHOTON-SOCIAL_SETTINGS_NOTIFICATIONS_MUTE_DESC"),
setting: 0,
options: SK,
onSuccess: i,
destinationName: "mute_all_social_notifications"
})), 0 === e.getSetting(0, 0) && H.createElement(LK, {
onSuccess: i,
isDisabled: e.isDefaultSettings(0)
}));
})), kK = fm.InputBindings.Action, RK = fm.DeepLink.Setting, xK = e => ({match: t}) => H.createElement(jq, {
isVisible: !!t
}, e), BK = H.memo((() => H.createElement(H.Fragment, null, H.createElement(Fo, {
path: dK.path
}, xK(H.createElement(JW, null))), H.createElement(Fo, {
path: oK.path
}, xK(H.createElement(wK, null))), H.createElement(Fo, {
path: aK.path
}, xK(H.createElement(rK, null))), H.createElement(Fo, {
path: sK.path
}, xK(H.createElement(_K, null))), H.createElement(Fo, {
path: lK.path
}, xK(H.createElement(SW, null))), H.createElement(Fo, {
path: cK.path
}, xK(H.createElement(PW, null)))))), DK = ({navigate: e}) => {
const t = qo();
_p((() => Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_SETTINGS-OPENED")), [], 0);
const n = H.useMemo((() => {
const n = [];
return LS.availableSettings.includes(RK.AppearOffline) && n.push({
id: "onlineStatus",
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_STATUS"),
action: () => e(dK.link()),
isActive: !!Bo(t.pathname, dK.path)
}), n.push({
id: "notifications",
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_NOTIFICATIONS"),
action: () => e(oK.link()),
isActive: !!Bo(t.pathname, oK.path)
}), n.push({
id: "privacy",
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_PRIVACY"),
action: () => e(aK.link()),
isActive: !!Bo(t.pathname, aK.path)
}), Fs.isPartyEnabled && n.push({
id: "voice",
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_VOICE"),
action: () => e(sK.link()),
isActive: !!Bo(t.pathname, sK.path)
}), LS.availableSettings.includes(RK.Accessibility) && n.push({
id: "accessibility",
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_ACCESSIBILITY"),
action: () => e(lK.link()),
isActive: !!Bo(t.pathname, lK.path)
}), LS.availableSettings.includes(RK.CrossPlay) && n.push({
id: "crossplay",
text: Em("PHOTON-SOCIAL_SETTINGS_SECTION-TITLE_CROSSPLAY"),
action: () => e(cK.link()),
isActive: !!Bo(t.pathname, cK.path)
}), [ {
id: "settings",
actions: n
} ];
}), [ t.pathname, e ]);
return H.createElement(H.Fragment, null, H.createElement(aL, {
text: Em("PHOTON-SOCIAL_SETTINGS_ACTION-SHEET_HEAD"),
style: [ kq, rd("marginBottom", Vc(Rd.DimensionSpace.larger)) ]
}), H.createElement(_q, {
id: "settings"
}, H.createElement(Lq, {
items: n,
narrationItem: hW
})));
}, FK = Qc({
position: "absolute",
right: gf.width,
bottom: gf.height,
textAlign: "end",
enableMouseEvents: !1,
color: ku(Rd.TextColorStandard.emphasized, .2)
}), MK = Qc({
color: ku(Rd.TextColorStandard.emphasized, .2)
});
var UK = "main_53810".split("_").pop() || "", HK = H.createElement((() => H.createElement("surface", {
style: FK
}, H.createElement("surface", {
text: UK,
style: [ _u, MK ]
}))), null), VK = Ii.observer((({match: e}) => {
const t = ol(), {history: n, navigate: r} = XS(), i = av(), o = !!e, a = !!e?.isExact;
H.useEffect((() => {
a && ME(i, {
pg_id: "overlay_settings",
status: "impression",
msg_id: "overlay_settings"
});
}), [ a, i ]);
const s = H.useCallback((() => {
a || t.getUntracked(Vl) ? (ME(i, {
pg_id: "overlay_settings",
option: "back"
}), r($S.link())) : r(iK.link());
}), [ t, r, i, a ]), l = kK.Decline, c = WL(l);
HL(o ? {
action: l,
callback: s,
label: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK")
} : void 0), _p((({getKeyBindingText: e}) => o || a ? Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_SETTINGS_MENU-EXIT", {
"%backKey%": e(c)
}) : void 0), [ c, o, a ], 2, o);
const d = H.useCallback((e => {
Bo(n.location.pathname, iK.path)?.isExact ? r(e) : n.replace(e);
}), [ n, r ]), u = H.useMemo((() => H.createElement(BK, null)), []);
return H.createElement(Wq, {
isVisible: o,
onDimmerClick: s,
contextualSheet: u,
extraDimmerContent: HK
}, H.createElement(Nh, {
disableForControllerMode: !a,
disable: !o
}, H.createElement(DK, {
navigate: d
})));
})), JK = Cl({
debugName: "settingButtonSurfaceId",
default: null
}), GK = () => {
const {ftueManager: e} = gJ(), t = pl(JK);
return yi.useObserver((() => e.isLoaded && e.isDone("ftue_settings_notification"))) ? void 0 : t;
}, zK = () => {
const {notificationManager: e} = bO(), t = ol(), n = av(), {ftueManager: r, showFTUENotification: i} = gJ(), o = gA(), a = yi.useObserver((() => r.isLoaded && r.isDone("ftue_settings_notification"))), [s, l] = H.useState(!1), [c, d] = H.useState(0);
H.useEffect((() => {
if (s) return dE((() => t.get(JK)), (e => {
i("ftue_settings_button", (async () => {
await r.setAsDone("ftue_settings_notification"), d(0), r.setShowingToast(!1);
}), (() => {
l(!1), d(1), r.setShowingToast(!0);
}), Em("PHOTON-SOCIAL_FTUE_NOTIFICATIONS_ACTIONABLE-TOOLTIP"), {
attachToSurface: {
surfaceId: e
},
showAsToast: !0,
telemetryInfo: {
pg_id: "ttip_adjust_notif_pref"
}
});
}));
}), [ t, r, i, s ]), H.useEffect((() => {
if (!a && 0 === c) return e.onComplete.subscribe(((e, t) => {
const n = o.isRevealed ? "ftue_settings_button" : "ftue_settings_notification";
if (r.shouldShowFTUE("ftue_settings_notification", n) && 2 === t) if (o.isRevealed) l(!0); else {
i("ftue_settings_notification", (() => {}), (() => {
r.seenThisSession("ftue_settings_notification"), d(2);
}), Em("PHOTON-SOCIAL_FTUE_NOTIFICATIONS_ACTIONABLE-TOAST"), {
withOpenInfo: !0,
telemetryInfo: {
pg_id: "tst_set_notif"
}
});
}
}));
}), [ n, c, r, a, e.onComplete, i, o ]);
}, jK = fm.InputBindings.Action, qK = () => {
const {navigate: e} = XS("overlay"), {history: t} = XS("main"), n = av(), r = GK(), i = H.useCallback((() => (ME(n, {
pg_id: LE(t.location),
destination_name: "bottom_bar",
status: "click",
msg_id: "bottom_bar",
option: "social_settings"
}), e(iK.link()))), [ t, e, n ]);
HL({
registrationIdOverride: "GlobalSettings",
callback: i,
label: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_SETTINGS"),
action: jK.Settings,
onSurfaceId: r
});
}, YK = {
debugUi: NN + 1,
debugConsole: NN + 2,
dropdown: SN - 1
}, WK = Ii.observer((() => {
const e = dl(ym), {fullscreenStyle: t} = lf(), n = hP(e ? 1 : 0), [r, i] = H.useState(e);
return H.useEffect((() => {
const t = {
duration: Rd.AnimationTime.fastest,
easing: Rd.AnimationEasing.ease
};
e ? (i(!0), n.to(1, t)) : n.to(0, {
...t,
onFinished: () => {
i(!1);
}
});
}), [ e, n ]), r ? H.createElement(VN, {
opacityTween: n,
type: 1,
style: t
}) : null;
})), KK = Qc({
flexDirection: "row",
flex: 1,
zOffset: CN,
enableMouseEvents: !1,
position: "absolute",
top: gf.height,
left: gf.width,
opacity: .3
}), XK = ({text: e}) => {
const t = hv(), {timeout: n, disposeTimeout: r} = dp(), [i, o] = H.useState(), a = H.useRef(), s = H.useCallback((e => {
a.current || (a.current = {
width: e.width,
height: e.height
});
}), []);
H.useEffect((() => {
const e = () => {
const t = a.current, r = Math.floor(t?.width ?? 0), i = Math.floor(t?.height ?? 0), s = Math.random() * (yf.width - r), l = Math.random() * (yf.height - i);
o({
x: s,
y: l
}), n("reposition", (() => {
e();
}), 5e3);
};
return e(), () => r("reposition");
}), [ a, r, n ]);
const l = id((() => ({
translateX: i?.x ?? -1e3,
translateY: i?.y ?? -1e3,
rotateZ: -15
})), [ i ]);
return i ? H.createElement("surface", {
style: [ KK, l ],
onBounds: s
}, H.createElement(wT, {
playerNetworkId: t.personaInfo.playerNetworkId,
name: t.personaInfo.displayName,
useEllipsis: !1
}), H.createElement(IT, {
text: e,
style: rd("marginLeft", Vc(Rd.DimensionSpace.medium))
})) : null;
}, QK = fs.Input.MouseEventType, $K = fm.InputBindings.Action, ZK = Qc({
width: Vc(Rd.DimensionSpace.medium),
height: Vc(Rd.DimensionSpace.medium),
marginEnd: Vc(Rd.DimensionSpace.small)
}), eX = Qc({
texture: ih.ONLINE_STATUS_INDICATOR,
color: Rd.ColorSystemSuccess._300
}), tX = Qc({
texture: ih.OFFLINE_STATUS_INDICATOR
}), nX = Qc({
texture: ih.DO_NOT_DISTURB
}), rX = Qc({
flex: 1
}), iX = td((e => ({
rotateZ: e ? 180 : 0
})), {
marginStart: Vc(Rd.DimensionSpace.small)
}), oX = Qc({
zOffset: YK.dropdown,
position: "absolute",
top: Vc(90),
right: Vc(0),
width: Vc(530),
backgroundColor: Rd.ColorNeutral._500,
padding: Vc(Rd.DimensionSpace.large),
borderRadius: Vc(Rd.BorderRadius.small)
});
function aX(e) {
switch (e) {
case "ONLINE":
return "online";

case "DOWN_TO_PLAY":
return "lets_play";

case "DO_NOT_DISTURB":
return "busy";

case "APPEAR_OFFLINE":
return "appear_offline";

default:
Xs("Unhandled presence status: " + e);
}
}
function sX() {}
var lX = $K.Decline, cX = Ii.observer((({onSurfaceId: e, closeDropdown: t}) => {
HL({
action: lX,
callback: t
});
const n = $p(), r = ol(), i = av(), o = BE(), a = gv(), s = YL(), l = Ip();
_p((({getKeyBindingText: e}) => [ Em("PHOTON-SOCIAL_NARRATION_OVERLAY-DISPLAYED", {
"%overlayLabel%": Em("PHOTON-SOCIAL_STATUS_HEADING")
}), Em("PHOTON-SOCIAL_NARRATION_NAVIGATION_UP-DOWN_DESC"), Em("PHOTON-SOCIAL_NARRATION_CLOSE", {
"%key%": e(s[lX])
}) ]), [ s ], 1), H.useEffect((() => o.onDropdownView("overlay_set_status")), [ o ]);
const c = H.useCallback((e => {
qS(r, n.localStorage, a, e), ME(i, {
pg_id: "overlay_set_status",
msg_id: "overlay_set_status",
option: aX(e)
}), l.isEnabled ? setTimeout(t, 200) : t();
}), [ r, n, a, i, t, l ]), d = H.useMemo((() => [ {
status: "ONLINE",
text: Em("PHOTON-SOCIAL_PRESENCE_ONLINE"),
icon: eX
}, {
status: "DOWN_TO_PLAY",
text: Em("PHOTON-SOCIAL_STATUS_READY-TO-PLAY_RADIO"),
icon: eX
}, {
status: "DO_NOT_DISTURB",
text: Em("PHOTON-SOCIAL_STATUS_DO-NOT-DISTURB_RADIO"),
icon: nX
}, {
status: "APPEAR_OFFLINE",
text: Em("PHOTON-SOCIAL_SETTINGS_STATUS_OFFLINE_RADIAL"),
icon: tX
} ].map((({status: e, text: t, icon: n}) => ({
id: e,
label: t,
value: e,
skipButtonIcon: !0,
children: H.createElement(H.Fragment, null, H.createElement("surface", {
style: [ ZK, n ]
}), H.createElement(IT, {
color: Rd.TextColorStandard.emphasized,
text: t,
style: rX
}))
})))), []), u = r.get(jS);
return H.createElement("surface", {
style: oX,
onSurfaceId: e,
onClick: sX
}, H.createElement(cW, {
title: Em("PHOTON-SOCIAL_STATUS_HEADING")
}, H.createElement(FW, {
items: d,
value: u,
onChange: c,
narrationItem: MW
})));
})), dX = Ii.observer((({children: e}) => {
const t = "presence-status", n = ol(), [r, i] = H.useState(!1), o = H.useRef(null), a = $p(), {toggleDropdown: s, openDropdown: l, closeDropdown: c, onDropdownContentSurfaceId: d} = H.useMemo((() => ({
toggleDropdown() {
i((e => !e));
},
openDropdown() {
i(!0);
},
closeDropdown() {
n.set(Dl, {
focusId: t,
source: 2
}), i(!1);
},
onDropdownContentSurfaceId(e) {
o.current = e;
}
})), [ n ]);
H.useEffect((() => a.inputHandler.onMouseEventBeforePropagation.subscribe((({event: e, surfaces: t}) => {
null !== o.current && e === QK.Click && (t.find((({surfaceId: e}) => e === o.current)) || i(!1));
}))), [ a ]);
const u = WL($K.Primary), p = r && !n.get(Vl);
return bp((({getKeyBindingText: e}) => Em(r ? "PHOTON-SOCIAL_NARRATION_CLOSE" : "PHOTON-SOCIAL_NARRATION_USERNAME_HOVER_SET-STATUS_DESC", {
"%key%": e(u)
})), [ r, u ], t), H.createElement(Nh, {
isolate: p,
disableAutoFocus: !0
}, H.createElement(ED, {
id: t,
focusId: t,
onClick: r ? void 0 : l,
input: {
keyBinding: u,
callback: s
}
}, e, H.createElement(BD, {
texture: oh.down,
style: iX(r)
})), r && H.createElement(cX, {
onSurfaceId: d,
closeDropdown: c
}));
})), uX = fm.Voip.VoipStatus, pX = Qc({
zOffset: 1,
flexDirection: "row",
alignItems: "center",
justifyContent: "space-between",
marginBottom: Vc(Rd.TextSizeHeading.medium)
}), fX = Qc({
alignItems: "center"
}), hX = Qc({
marginRight: Vc(Rd.DimensionSpace.small)
}), mX = Qc({
marginRight: Vc(Rd.DimensionSpace.small),
fontSize: Jc(44),
marginTop: Vc(-9),
color: Rd.ColorNeutral._0
}), gX = Qc({
width: Vc(32),
height: Vc(32),
marginEnd: Vc(Rd.DimensionSpace.small),
texture: ih.PARTY_LEADER
}), yX = Qc({
marginStart: Vc(Rd.DimensionSpace.small),
marginEnd: Vc(Rd.DimensionSpace.small),
width: Vc(Rd.DimensionSpace.micro),
height: Vc(Rd.DimensionSpace.larger),
backgroundColor: Rd.ColorNeutral._400
}), IX = Qc({
flexDirection: "row",
alignItems: "center"
}), _X = Qc({
texture: ih.ONLINE_STATUS_INDICATOR,
color: Rd.ColorSystemSuccess._300
}), bX = Qc({
texture: ih.OFFLINE_STATUS_INDICATOR
}), SX = Qc({
texture: ih.DO_NOT_DISTURB
}), vX = Qc({
width: Vc(Rd.DimensionSpace.medium),
height: Vc(Rd.DimensionSpace.medium),
marginStart: Vc(Rd.DimensionSpace.small)
}), TX = Ii.observer((({photonPlayerId: e}) => {
const t = JM(), {data: n} = wF(e), r = t, i = n && n.status !== uX.Disabled;
return i || r ? H.createElement(H.Fragment, null, H.createElement("surface", {
style: yX
}), r && H.createElement("surface", {
style: gX
}), i && H.createElement(lz, {
status: n.status
})) : null;
})), EX = Ii.observer((() => {
const e = hv(), t = Uv(ol()), n = e.personaInfo;
return H.createElement(H.Fragment, null, H.createElement("surface", {
style: IX
}, H.createElement(wT, {
playerNetworkId: n.playerNetworkId,
name: n.displayName
}), Fv() ? H.createElement("surface", {
style: [ vX, t ? bX : _X ]
}) : void 0), Fs.isPartyEnabled && H.createElement(TX, {
photonPlayerId: e.photonPlayerId
}));
})), PX = Ii.observer((() => {
const e = ol().get(jS), t = [ vX ];
return "APPEAR_OFFLINE" === e ? t.push(bX) : "DO_NOT_DISTURB" === e ? t.push(SX) : t.push(_X), 
H.createElement(H.Fragment, null, H.createElement("surface", {
style: t
}), "DOWN_TO_PLAY" === e && H.createElement(IT, {
text: Em("PHOTON-SOCIAL_STATUS_READY-TO-PLAY_RADIO"),
style: rd("marginStart", Vc(Rd.DimensionSpace.small))
}));
})), OX = Ii.observer((() => {
const e = hv(), t = e.personaInfo;
return H.createElement(dX, null, H.createElement("surface", {
style: IX
}, H.createElement(wT, {
playerNetworkId: t.playerNetworkId,
name: t.displayName
}), H.createElement(PX, null), Fs.isPartyEnabled && H.createElement(TX, {
photonPlayerId: e.photonPlayerId
})));
})), CX = () => H.createElement("surface", {
style: pX
}, H.createElement("surface", {
style: [ fX, rd("flexDirection", of() ? "row-reverse" : "row") ]
}, H.createElement(rh, {
style: hX
}), H.createElement("surface", {
text: Em("PHOTON-SOCIAL_EA-LAYER_HEADER"),
style: [ yu, mX ]
})), H.createElement("surface", {
style: rd("flex", 1)
}), VS() ? H.createElement(OX, null) : H.createElement(EX, null)), NX = fm.UserExperience.SoundEffect;
function AX() {
const e = OB(), t = Um("overlay"), {addZoom: n, removeZoom: r} = Im();
ll((t => {
if (t) return e(NX.OverlayModalOpen), n(), () => {
r(), e(NX.OverlayModalClose);
};
}), [ e, n, r ], EE, !0), H.useEffect((() => t.listen((t => {
"/" === t.pathname ? e(NX.OverlaySlideOut) : e(NX.OverlaySlideIn);
}))), [ t, e ]);
}
var LX = fm.InputBindings.Action, wX = Qc({
zOffset: 1,
position: "absolute",
top: Vc(Rd.DangerZone.height),
bottom: Vc(Rd.DangerZone.height),
left: Vc(Rd.DangerZone.width),
right: Vc(Rd.DangerZone.width)
}), kX = Qc({
zOffset: 1,
flex: 1
}), RX = Ii.observer((() => (WY(), iG(), YV(), GV(), FG(), UG(), null))), xX = () => {
const e = gA(), t = av(), n = jo(), {close: r, toggle: i} = H.useMemo((() => {
const r = () => {
e.isRevealed && ME(t, {
pg_id: LE(n.location),
msg_id: "bottom_bar",
destination_name: "bottom_bar",
option: "close"
});
};
return {
toggle: () => {
r(), e.toggle();
},
close: () => {
r(), e.close();
}
};
}), [ n, t, e ]);
HL({
action: LX.TogglePhoton,
callback: i,
label: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_CLOSE"),
registrationIdOverride: "GlobalDismiss",
transcendBoundaries: !0
}), HL({
action: LX.Decline,
callback: r
});
}, BX = Ii.observer((({playerListConfig: e}) => {
const {getUnseenCount: t} = Ox(), {getUnseenCountForAll: n} = uG();
xX(), qK();
const r = H.useMemo((() => {
const r = [];
return r.push({
title: Em("PHOTON-SOCIAL_APP-BAR_FRIENDS"),
route: $g,
content: H.createElement(tG, null)
}), Fs.isPartyEnabled ? r.push({
title: Em("PHOTON-SOCIAL_APP-BAR_PARTY"),
route: xk,
content: H.createElement(Xz, null),
getUnseenCount: n
}) : r.push({
title: Em("PHOTON-SOCIAL_APP-BAR_INVITES"),
route: bG,
content: H.createElement(TG, null),
getUnseenCount: n
}), r.push({
title: Em("PHOTON-SOCIAL_APP-BAR_REQUESTS"),
route: Zg,
content: H.createElement(JV, null),
getUnseenCount: t
}), r.push({
title: Em("PHOTON-SOCIAL_APP-BAR_SEARCH"),
route: mx,
content: H.createElement(uq, null)
}), e && r.push({
title: e.localizedName,
route: DY,
content: H.createElement(GY, null)
}), r.push({
title: Em("PHOTON-SOCIAL_APP-BAR_RECENT"),
route: $Y,
content: H.createElement(iW, null)
}), r;
}), [ t, n, e ]);
return H.createElement(H.Fragment, null, H.createElement(CX, null), H.createElement("surface", {
style: kX
}, H.createElement(VB, {
tabs: r
})));
})), DX = () => {
const e = hP(1);
return sl((t => {
e.to(t ? .95 : 1, {
duration: Rd.AnimationTime.faster,
easing: Rd.AnimationEasing.accelerate
});
}), [ e ], ym, !0), H.useMemo((() => ({
zoomStyle: [ e.propStyle("scaleX"), e.propStyle("scaleY") ]
})), [ e ]);
}, FX = Ii.observer((() => {
AX();
const e = ol(), {zoomStyle: t} = DX(), n = Fs.playerListsEnabled ? e.get(zC) : void 0;
return H.createElement(H.Fragment, null, Ws.betaWatermark || e.get(jx) ? H.createElement(XK, {
text: "BETA"
}) : null, false, false, false, false, !1, H.createElement(Zx, {
router: "main"
}, H.createElement("surface", {
style: [ wX, t ]
}, H.createElement(BX, {
playerListConfig: n
}))), H.createElement(Zx, {
router: "overlay",
shouldIsolate: ZS.overlay
}, H.createElement(Fo, {
path: [ dF.path, uF.path ]
}, (({match: e}) => H.createElement(nY, {
match: e
}))), H.createElement(Fo, {
path: iK.path
}, (({match: e}) => H.createElement(VK, {
match: e
}))), H.createElement(Qx, null)), H.createElement(zY, {
portalId: "InsideContent"
}), H.createElement(aB, null), H.createElement(WK, null));
})), MX = fm.UserExperience.SoundEffect, UX = fm.StateApi.State, HX = {
duration: Rd.AnimationTime.faster,
easing: Rd.AnimationEasing.ease
}, VX = {
duration: Rd.AnimationTime.faster,
easing: Rd.AnimationEasing.accelerate
}, JX = e => e.getUntracked(hm), GX = () => {
const {StateApi: e} = Tm(), t = ol(), {notificationManager: n} = bO(), [r, i] = ml(hm), o = hP(1.1), a = hP(0), s = OB();
bm("Hidden", H.useCallback((({currentState: r, actions: l}) => {
switch (r) {
case "Hidden":
return l().execute((() => {
var t;
t = n, nl((() => t.activeItem)) ? e.setState({
state: UX.ShowingNotification
}) : e.setState({
state: UX.Closed
});
}), "StateApi.setState(Closed/ShowingNotification)");

case "Revealing":
{
let n = l().execute((() => {
e.setState({
state: UX.Open
});
}), "StateApi.setState(Open)");
return JX(t) || (n = n.execute((() => i(!0)), "setMounted(true)").wait(50)), n.executeAsync((e => {
const t = setTimeout(e, 1e3);
return o.to(1, HX), a.to(1, {
...HX,
onFinished: () => {
clearTimeout(t), vs.featureFlags.hasTweenStartEndValueRounding || a.set(1), e();
}
}), s(MX.LayerOpen), () => clearTimeout(t);
}), "tween: reveal").transition("Revealed");
}

case "Revealed":
return;

case "Hiding":
{
let e = l().executeAsync((e => {
const t = setTimeout(e, 1e3);
return o.to(1.1, VX), a.to(0, {
...VX,
onFinished: () => {
clearTimeout(t), e();
}
}), s(MX.LayerClose), () => clearTimeout(t);
}), "tween: hide");
return JX(t) && (e = e.execute((() => i(!1)), "setMounted(false)").wait(50)), e.transition("Hidden");
}

default:
Xs("Unhandled state");
}
}), [ t, i, o, a, s, e, n ]));
const l = gA();
return H.useEffect((() => {
const t = e.getState({});
return t && t.state === UX.Open && l.open(), e.onStateChanged.subscribe((({newState: e}) => {
switch (e) {
case UX.Open:
l.open();
break;

case UX.Closed:
l.close();
}
}));
}), [ e, l ]), {
isMounted: r,
opacityTween: a,
scaleTween: o
};
}, zX = e => {
H.useEffect((() => (e.init(), () => {
e.dispose();
})), [ e ]);
}, jX = Vc(10), qX = Vc(80), YX = qX - 2 * jX, WX = Qc({
width: qX,
alignItems: "center"
}), KX = Qc({
height: YX,
width: YX,
flexDirection: "row",
alignItems: "center",
justifyContent: "center",
margin: jX,
color: Rd.TextColorStandard.emphasized,
texture: Gc({
1: Cs("/photon/quantum/ellipse/White-ellipse-60px-1x-809bef81.png"),
2: Cs("/photon/quantum/ellipse/White-ellipse-60px-2x-73a11a5c.png")
})
}), XX = Qc({
position: "absolute",
top: -jX,
left: -jX,
right: -jX,
bottom: -jX,
color: Rd.InteractiveColor.focusHover,
texture: Gc({
1: Cs("/photon/quantum/ellipse/White-ellipse-80px-1x-25fd9dd1.png"),
2: Cs("/photon/quantum/ellipse/White-ellipse-80px-2x-0e077742.png")
})
}), QX = Qc({
marginTop: Vc(Rd.DimensionSpace.medium)
}), $X = Ii.observer((e => {
const {input: t, label: n, style: r} = e, i = Of(e), {focusItem: o, isFocused: a, isPressed: s} = i, l = a || s, c = t.keyBinding;
bp((t => {
if (void 0 !== e.narration) {
return (0, e.narrationItem)({
keyBinding: c,
...e.narration,
label: n
}, t);
}
return (0, e.narrationItem)?.({
keyBinding: c,
label: n
}, t);
}), [ e.narrationItem, e.narration, n, c ], o.focusId);
const d = Gf(s), u = Uc(c.primaryButton), p = c.primaryButton.keyboardKeyLabel;
return H.createElement("surface", {
style: [ WX, r ],
...o.hooks
}, H.createElement("surface", {
style: [ KX, d ]
}, l && H.createElement("surface", {
style: XX
}), H.createElement(IT, {
text: n,
color: Rd.TextColorStandard.emphasized
})), H.createElement(op, {
buttonLabel: p,
icon: u,
showIcon: l,
style: QX
}));
})), ZX = fm.InputBindings.Action, eQ = [ {
rating: "1",
response: () => Em("PHOTON-SOCIAL_SURVEY_OVERLAY_SUBMITTED_HEADLINE_LOW-RATING"),
focusId: Np()
}, {
rating: "2",
response: () => Em("PHOTON-SOCIAL_SURVEY_OVERLAY_SUBMITTED_HEADLINE_MID-RATING"),
focusId: Np()
}, {
rating: "3",
response: () => Em("PHOTON-SOCIAL_SURVEY_OVERLAY_SUBMITTED_HEADLINE_MID-RATING"),
focusId: Np(),
initialFocus: !0
}, {
rating: "4",
response: () => Em("PHOTON-SOCIAL_SURVEY_OVERLAY_SUBMITTED_HEADLINE_MID-RATING"),
focusId: Np()
}, {
rating: "5",
response: () => Em("PHOTON-SOCIAL_SURVEY_OVERLAY_SUBMITTED_HEADLINE_HIGH-RATING"),
focusId: Np()
} ], tQ = Qc({
flex: 1,
flexDirection: "row",
justifyContent: "space-between",
marginStart: Vc(40),
marginEnd: Vc(40),
marginBottom: Vc(Rd.DimensionSpace.large)
}), nQ = Qc({
flexDirection: "row",
justifyContent: "center"
}), rQ = Qc({
marginStart: Vc(Rd.DimensionSpace.smallest) / 2,
marginEnd: Vc(Rd.DimensionSpace.smallest) / 2
}), iQ = ({label: e, keyBinding: t}, {getKeyBindingText: n}) => Em("PHOTON-SOCIAL_NARRATION_SURVEY-NOTIFICATION_SCORE-FOCUSED", {
"%number%": e,
"%key%": n(t)
}), oQ = Ii.observer((({action: e, onSelect: t}) => {
const n = WL(ZX.Primary), r = H.useCallback((() => {
t(e);
}), [ e, t ]), i = {
keyBinding: n,
callback: r
};
return H.createElement($X, {
id: e.rating,
focusId: e.focusId,
onClick: r,
label: e.rating,
input: i,
style: rQ,
narrationItem: iQ
});
})), aQ = () => (_p((() => Em("PHOTON-SOCIAL_NARRATION_SURVEY-NOTIFICATION_OPENED", {
"%notificationText%": Em("PHOTON-SOCIAL_SURVEY_OVERLAY_PROMPT")
})), [], 1), null), sQ = ({id: e, holdOptions: t, isActivated: n, dismiss: r, onResponse: i, stayActive: o}) => {
const a = ol(), {showNotification: s} = bO(), l = IO();
SO(), H.useEffect((() => {
if (n) {
const e = eQ.find((e => e.initialFocus));
e && a.set(Dl, {
focusId: e.focusId,
source: 2
});
}
}), [ a, n ]);
const c = WL(ZX.NotificationFocus);
_p((({getKeyBindingText: e}) => [ Em("PHOTON-SOCIAL_NARRATION_SURVEY-NOTIFICATION_RECEIVE", {
"%notificationText%": Em("PHOTON-SOCIAL_SURVEY_OVERLAY_PROMPT")
}), Em("PHOTON-SOCIAL_SURVEY_ACTIONABLE-TOAST_BUTTON", {
"%key%": e(c)
}) ]), [ c ], 1);
const {onSelect: d, onClose: u} = H.useMemo((() => ({
onSelect: e => {
i(e.rating), fr((() => {
r(), s(3, 3, {
icon: ih.LIGHT_BULB,
text: e.response()
}), l();
}));
},
onClose: () => {
i("dismiss"), r();
}
})), [ i, r, s, l ]);
return H.createElement(PP, null, H.createElement(vP, {
key: e
}, H.createElement(EP, {
style: mP
}, H.createElement(NP, {
texture: ih.LIGHT_BULB
}), H.createElement(kP, {
text: Em("PHOTON-SOCIAL_SURVEY_OVERLAY_PROMPT")
})), H.createElement(iO, {
onClose: u,
onActivated: o,
isActivated: n,
holdTime: t.holdTimeMs,
holdRequired: !0,
activateText: "",
holdActivateText: Em("PHOTON-SOCIAL_SURVEY_ACTIONABLE-TOAST_BUTTON")
}, H.createElement(aQ, null), H.createElement("surface", {
style: tQ
}, H.createElement(IT, {
text: Em("PHOTON-SOCIAL_SURVEY_OVERLAY_LOW-RATING")
}), H.createElement(IT, {
text: Em("PHOTON-SOCIAL_SURVEY_OVERLAY_HIGH-RATING")
})), H.createElement("surface", {
style: nQ
}, eQ.map((e => H.createElement(oQ, {
key: e.rating,
action: e,
onSelect: d
})))))));
}, lQ = "LAYER_OPEN", cQ = "ELIGIBILITY", dQ = "LAYER_OPEN_DELAY";
function uQ(e, t) {
const n = e.get(t).get().data;
return !!n && n.members.size > 1;
}
var pQ = class {
constructor(e, t, n, r, i, o = 1512e7, a = 3e3, s = .005) {
this.localStorage = e, this.moby = t, this.pinClient = n, this.notifications = r, 
this.userId = i, this.cooldownMs = o, this.delay = a, this.probability = s, this.lastSeenStorageKey = "feedback_" + this.userId, 
this.eligibilityStorageKey = "feedback_e_" + this.userId, this.disposers = new OI;
}
async init(e) {
if (await this.initEligibilityListener(), e) {
const t = Number(await this.localStorage.getItem(this.lastSeenStorageKey));
if (isNaN(t) || t + this.cooldownMs < Date.now()) {
if (Math.random() <= this.probability) return this.initShowNotificationListener(e), 
!0;
}
}
return !1;
}
async initEligibilityListener() {
if (!await this.localStorage.getItem(this.eligibilityStorageKey)) {
let e = !1;
const t = Dn((() => Fs.isPartyEnabled && uQ(this.moby, bC) || !Fs.isTightlyCoupledParties && uQ(this.moby, DO)), (t => {
t && (e = !0, this.disposers.dispose(cQ), this.localStorage.setItem(this.eligibilityStorageKey, "1"));
}), {
fireImmediately: !0
});
e || (this.disposers.dispose(cQ), this.disposers.set(cQ, t));
}
}
initShowNotificationListener(e) {
const t = Dn((() => this.moby.get(hm)), (t => {
if (this.disposers.dispose(dQ), t && this.shouldShow()) {
const t = setTimeout((() => {
this.shouldShow() && (this.disposers.dispose(lQ), this.showNotification(e));
}), this.delay);
this.disposers.set(dQ, (() => clearTimeout(t)));
}
}), {
fireImmediately: !0
});
this.disposers.dispose(lQ), this.disposers.set(lQ, t);
}
shouldShow() {
return nl((() => {
const e = this.notifications.notificationManager;
return e.isNotificationAllowed && !e.queues[0].isFull && !e.isInGamePlay && !(this.moby.get(yA) > 0);
}));
}
showNotification(e) {
if (e && (this.pinClient.triggerSettings({
status: "update",
settings: [ {
name: e.experimentId + "",
value: e.variantId + ""
} ]
}), e.variantName !== XT.fbm_0.Notification)) return;
const t = Hm(this.moby, "main").location;
let n = !1;
const r = e => {
n || (n = !0, ME(this.pinClient, {
pg_id: LE(t),
destination_name: "tst_feedback_survey",
msg_id: "satisfied_eac",
option: e
})), this.localStorage.setItem(this.lastSeenStorageKey, Date.now() + "");
};
this.notifications.showNotificationComponent(0, 3, (e => H.createElement(sQ, {
...e,
onResponse: r
})), {
telemetryInfo: {
pg_id: "tst_feedback_survey"
}
});
}
dispose() {
this.disposers.disposeAll();
}
}, [fQ, hQ] = El({
debugName: "feedbackModuleManagerState",
create: e => {
const t = e.get(zh), n = e.get(_O), r = e.get(ov), i = e.get(fv).tokenInfo.userId;
return new pQ(t.localStorage, e, r, n, i);
}
}), mQ = () => {
const e = hQ(), t = WT();
H.useEffect((() => hr((() => t.isReady), (() => {
e.init(t.get("fbm_0").data);
}))), [ e, t ]);
}, [gQ, yQ] = Qs("FriendPicker"), IQ = ({children: e, onSelect: t, request: n}) => {
const r = {
onSelect: t,
request: n
};
return H.createElement(gQ.Provider, {
value: r
}, e);
}, _Q = fm.InputBindings.Action, bQ = fm.DeepLink.PickFriendPlayerInclusion, SQ = Ii.observer((({photonPlayerId: e, photonSessionId: t, telemetryInfo: n, inclusion: r, disableReason: i}) => {
const o = ol(), {data: a} = qU(e, t), {onSelect: s, request: l} = yQ(), {name: c, playerNetworkId: d} = xw(e), u = XU(a);
let p;
r === bQ.Disable ? p = i : l.showPresence && (p = u);
const f = WL(_Q.Primary), h = H.useMemo((() => {
if (r !== bQ.Disable) return {
keyBinding: f,
label: Em("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_LIST-ACTIONS_SELECT"),
callback: zE(o, e, t, (() => {
s(e);
}), {
...n,
msg_id: "list_control",
option: "select"
})
};
}), [ r, o, s, e, t, f, n ]), m = JD({
playerName: c,
supplementaryText: p
});
return H.createElement(VD, {
id: "friendpickerfriend-" + e,
narrationItem: m,
onClick: h?.callback,
primaryAction: h,
isDisabled: r === bQ.Disable
}, H.createElement(wD, {
playerNetworkId: d,
name: c
}), !!p && H.createElement(OD, {
hideOnPressedOrFocused: !!h,
text: p
}));
})), vQ = fm.DeepLink.PickFriendPlayerInclusion, TQ = () => {
const {DeepLink: e} = Tm(), t = OA(), n = ol(), r = fl(EA), i = fl(CA), o = fl(NA), a = _l((({get: t}) => async n => {
i({
loading: !0,
uninitialized: !1
});
const {data: r} = t(PA);
if (!r?.length) return void i({
loading: !1,
uninitialized: !1,
error: new Error("Missing source players")
});
o(r);
const a = [];
r.forEach((e => {
(n.includePartyPlayers && e.inParty || e.isOnline || n.includeOfflinePlayers && !e.isOnline) && a.push(e);
}));
const s = await e.filterFriendsForPicker({
requestId: n.requestId,
players: a
});
if (s) {
const e = new Map;
s.players.forEach((t => {
t.inclusion !== vQ.Hide && e.set(i_({
eaPlayerId: t.player.playerId,
playerNetworkId: e_(t.player.playerNetworkId)
}), t);
})), i({
loading: !1,
uninitialized: !1,
data: e
});
}
}), [ e, i, o ]), s = H.useCallback((r => {
const i = n.getUntracked(EA);
i && (e.pickFriendResponse({
requestId: i.requestId,
...r
}), n.reset(EA), t.stop());
}), [ e, t, n ]), l = H.useCallback((n => {
const r = e.onPickFriendRequest.subscribe((e => {
t.start(), n(e);
}));
return () => {
r(), t.stop();
};
}), [ e.onPickFriendRequest, t ]), c = H.useCallback((r => {
const i = e.onCancelFriendRequest.subscribe((() => {
n.reset(EA), r(), t.stop();
}));
return () => {
i();
};
}), [ e.onCancelFriendRequest, t, n ]);
return H.useEffect((() => () => {
s({
success: !1
});
}), [ n, s ]), {
setFriendPickerRequest: r,
sendPickFriendResponse: s,
subscribeToPickFriendRequest: l,
subscribeToPickFriendCancellation: c,
filterPlayers: a
};
};
async function EQ(e, t) {
const n = tC(e, PA);
return await yI(n, t);
}
function PQ(e, t) {
const {closeModal: n} = CE(), {showErrorNotification: r} = bO(), i = av(), {filterPlayers: o, sendPickFriendResponse: a, setFriendPickerRequest: s, subscribeToPickFriendCancellation: l} = TQ(), c = ol(), d = pm("SourcePlayers", H.useCallback((({currentState: l, actions: d}) => {
switch (l) {
case "SourcePlayers":
return d().executeAsync((n => {
s(e), EQ(c, t).then((e => {
n(e.error || void 0 === e.data ? "Error" : void 0);
}));
}), "getSourcePlayers()").executeAsync((t => {
o(e).then((() => {
t();
}));
}), "filterPlayers()").transition("DisplayPlayers");

case "DisplayPlayers":
return;

case "Error":
return d().execute((() => {
a({
success: !1
}), r(void 0, "friend picker error", void 0);
}), "error()").transition("Close");

case "Cancel":
return d().execute((() => {
a({
success: !1
}), ME(i, {
pg_id: "overlay_friends_dialog",
option: "close",
destination_name: "bottom_bar",
msg_id: "bottom_bar"
});
}), "cancel()").transition("Close");

case "Close":
return d().execute((() => {
n();
}), "closeModal()");

default:
Xs("Unhandled state");
}
}), [ n, o, c, t, i, e, a, s, r ]), {
debugName: "FriendPicker"
});
H.useEffect((() => l((() => {
d.interrupt((() => "Close"));
}))), [ d, l ]);
const u = _l((({get: e}) => t => {
const n = p_(t), r = e(CA).data?.get(n);
a(r ? {
player: r.player,
success: !0
} : {
success: !1
}), d.interrupt((() => "Close"));
}), [ a, d ]);
return {
onSelect: u,
closeAction: H.useMemo((() => ({
id: "close",
label: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_CLOSE"),
action: () => {
d.interrupt((() => "Cancel"));
}
})), [ d ])
};
}
var OQ = {
0: Np(),
1: Np(),
2: Np()
};
function CQ(e, t) {
return "" + (e?.[t].length ?? 0);
}
function NQ(e) {
const {isExpanded: t, onToggle: n} = pD({
id: "friendpicker-section-party",
isInitiallyExpanded: !0,
rememberExpandedState: !1,
onToggleCallback: HE("overlay_friends_dialog", "in_your_party")
}), {isExpanded: r, onToggle: i} = pD({
id: "friendpicker-section-online",
isInitiallyExpanded: !0,
rememberExpandedState: !1,
onToggleCallback: HE("overlay_friends_dialog", "online_friends")
}), {isExpanded: o, onToggle: a} = pD({
id: "friendpicker-section-offline",
isInitiallyExpanded: !0,
rememberExpandedState: !1,
onToggleCallback: HE("overlay_friends_dialog", "offline_friends")
});
return H.useMemo((() => {
const s = new _V;
return s.addSection({
id: 0,
isExpanded: t,
onToggle: n,
title: Em("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_SECTION-HEAD_PARTY", {
"%numberPartyMembers%": CQ(e, 0)
}),
component: SQ,
focusId: OQ[0],
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "in_your_party",
msg_id: "in_your_party"
}
}), s.addSection({
id: 1,
isExpanded: r,
onToggle: i,
title: Em("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_SECTION-HEAD_ONLINE-ALL", {
"%numberOnlineFriends%": CQ(e, 1)
}),
component: SQ,
focusId: OQ[1],
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "online_friends",
msg_id: "online_friends"
}
}), s.addSection({
id: 2,
isExpanded: o,
onToggle: a,
title: Em("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_SECTION-HEAD_OFFLINE", {
"%numberOfflineFriends%": CQ(e, 2)
}),
component: SQ,
focusId: OQ[2],
telemetryInfo: {
pg_id: "overlay_friends_dialog",
destination_name: "offline_friends",
msg_id: "offline_friends"
}
}), s;
}), [ r, o, t, i, a, n, e ]);
}
var AQ = lM, LQ = Qc({
width: AQ
}), wQ = Qg("/friend-picker/:requestId?", void 0), kQ = ({heading: e, body: t}) => H.createElement("surface", null, H.createElement(fL, {
headline: e,
body: t
})), RQ = Qc({
width: IL,
height: yf.height - Vc(Rd.DimensionLayout.medium)
}), xQ = Qc({
flex: 1,
width: IL
}), BQ = ({title: e, headline: t, body: n, style: r, children: i}) => {
const o = rd("marginTop", Vc(n ? Rd.DimensionSpace.largest : Rd.DimensionSpace.larger));
return H.createElement(fL, {
style: RQ,
childrenStyle: rd("flex", 1),
title: e,
headline: t,
body: n
}, H.createElement("surface", {
style: [ o, xQ, r ]
}, i));
};
var DQ = {
duration: Rd.AnimationTime.fastest,
easing: Rd.AnimationEasing.ease,
delay: 50
};
function FQ() {
const e = hP(0), t = hP(1.1), n = H.useRef(!1);
return H.useCallback((() => (n.current || (e.to(1, DQ), t.to(1, DQ), n.current = !0), 
[ t.propStyle("scaleX"), t.propStyle("scaleY"), e.propStyle("opacity") ])), [ e, t ]);
}
var MQ = Ii.observer((({request: e}) => {
const {onSelect: t, closeAction: n} = PQ(e, 8e3), {data: r, loading: i, uninitialized: o} = dl(AA), a = NQ(r), {rows: s} = NV(a, r, wQ);
UL("GlobalDismiss");
const l = e.heading ?? Em("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_TITLE"), c = e.description, d = FQ();
return H.createElement(IQ, {
onSelect: t,
request: e
}, H.createElement(BQ, {
title: l,
body: c,
style: LQ,
overlayTitleNarrationItem: kL
}, H.createElement(CL, {
closeAction: n
}, H.createElement(Iq, null, (t => i || o ? H.createElement(gD, {
numRows: 1,
numSections: 2
}) : s.length ? t ? H.createElement(kU, {
style: d(),
rows: s,
height: t,
width: AQ
}) : null : H.createElement(kQ, {
heading: e.emptyHeading || Em("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_EMPTY_TITLE"),
body: e.emptyDescription ?? Em("PHOTON-SOCIAL_PLAYER-SELECTION-OVERLAY_EMPTY_DESC")
}))))));
})), UQ = () => {
const {subscribeToPickFriendRequest: e} = TQ(), {showModal: t} = CE();
H.useEffect((() => e((e => {
t((() => H.createElement(MQ, {
request: e
})), {
telemetryId: "overlay_friends_dialog"
});
}))), [ t, e ]);
}, HQ = Ii.observer((({children: e}) => (zK(), H.createElement(H.Fragment, null, e)))), VQ = Ii.observer((({children: e}) => {
const t = gv(), {ftueManager: n} = gJ(), r = WT();
return H.useEffect((() => hr((() => r.isReady), (() => n.init(t)))), [ r, n, t ]), 
H.createElement(HQ, null, e);
}));
function JQ() {
const e = $k(), {playerNetworkId: t} = vO(), n = ol(), r = CE(), i = bO(), o = hw(), a = Tm();
H.useEffect((() => a.PhotonInvite.onFirstPartyInviteAccepted.subscribe((({fromPlayerId: r}) => {
const i = i_({
eaPlayerId: r,
playerNetworkId: t
});
cE((() => e.get().data?.get(i)), (async e => {
const t = mv(n).tokenInfo.userId, {data: r} = await Ow(n, a.PresenceSession, a.GameInvite, i, e), o = r?.party, s = r?.lobby, l = await fR(a.GameInvite, e.gameInviteId, t);
Ak(n, i, l.error, "platform_ui_toast", void 0, void 0, o, s);
}), {
timeout: 1e4,
onError: () => {}
});
}))), [ a, e, n, r, o, i, t ]);
}
var GQ = class extends WI {
constructor() {
super(...arguments), this.blockedMap = new Zs({});
}
init(e, t, n) {
if ("EA" === n) return void this.get().update({
loading: !1,
uninitialized: !1,
data: this.blockedMap
});
this.initSeedStrategy(e, t, n), this.reseed = () => this.initSeedStrategy(e, t, n);
const r = [ this.initBlockListUpdate(e) ];
return () => {
r.forEach((e => e?.()));
};
}
initSeedStrategy(e, t, n) {
return j_((() => e.getBlockList({})), Ob).then((e => {
yS(t, e.data?.blockList ?? [], n, (t => {
fr((() => {
for (const e of t) this.blockedMap.set(e.photonPlayerId, {
photonPlayerId: e.photonPlayerId
});
this.get().update({
...e,
data: this.blockedMap
});
}));
}));
})).catch((e => {
this.get().update({
error: e,
loading: !1
});
}));
}
initBlockListUpdate(e) {
return e.onBlockListUpdated.subscribe((() => {
this.reseed();
}));
}
}, [zQ, jQ] = El({
debugName: "firstPartyBlockedStoreState",
create: () => new GQ({
debugName: "FirstPartyBlocked"
})
}), qQ = "reconnect";
function YQ(e, t) {
const {timeout: n, disposeTimeout: r} = dp(), i = H.useRef(0), o = H.useCallback((e => {
n("successCheck", (() => {
e === i.current && (i.current = 0);
}), 15e3);
}), [ n ]);
H.useEffect((() => {
if (e) {
const a = NI((() => {
i.current++;
const e = 1 === i.current ? 0 : 5e3;
i.current <= 3 && n(qQ, (() => {
o(i.current), t();
}), e);
}), {
trailing: !0,
wait: 1e3
}), s = e.error.subscribe((() => {
a();
})), l = e.end.subscribe((() => {
a();
}));
return () => {
s(), l(), r(qQ), a.cancel();
};
}
}), [ e, r, n, t, o ]);
}
var WQ = fm.GameInvite.GameInviteNotificationType, KQ = J_.object({
gameInviteId: J_.string,
senderPlayerId: Z_,
senderPlayerNetworkId: nb,
senderDevicePlatformId: rb,
senderProductId: ob,
createdTimestamp: K_,
expiryTimestamp: K_,
purgeTimestamp: K_,
gameJoinTokenTypes: J_.array(J_.string)
}, {
revokeTimestamp: K_,
targetPlayerNetworkId: J_.array(nb),
targetDevicePlatformId: J_.array(rb),
properties: J_.map($_)
}), XQ = J_.enum(WQ, WQ.GAME_INVITE_NOTIFICATION_TYPE_UNSPECIFIED), QQ = J_.object({
gameInvite: KQ,
gameInviteNotificationType: XQ
}), $Q = J_.object({
gameInviteNotification: QQ
}), ZQ = J_.object({}), e$ = J_.object({
stream: J_.custom(sb()),
response: ZQ
}), t$ = class {
constructor(e, t) {
this.gameInvitesStore = e, this.removeInviteFromSeenState = t, this.expireTimeouts = {};
}
refreshGameInviteStore() {
const e = this.gameInvitesStore.get();
e.update(e.toProps());
}
onExpiredCallback(e) {
const t = e.senderPhotonPlayerId, n = e.expiryTimestampMs + Tw - Date.now();
fr((() => {
this.refreshGameInviteStore(), this.removeInviteFromSeenState(e);
})), this.expireTimeouts[t] = setTimeout((() => {
this.onExpiredLongAgoCallback(e);
}), n);
}
onExpiredLongAgoCallback(e) {
const t = e.senderPhotonPlayerId;
this.refreshGameInviteStore(), delete this.expireTimeouts[t];
}
addInvite(e) {
this.removeInvite(e);
const {purged: t, expired: n, expiredLongAgo: r} = tR(e);
if (t || r) return;
const i = e.senderPhotonPlayerId, o = e.expiryTimestampMs - Date.now();
e.isRevoked ? this.onExpiredCallback(e) : this.expireTimeouts[i] = n ? setTimeout((() => {
this.onExpiredLongAgoCallback(e);
}), o + Tw) : setTimeout((() => {
this.onExpiredCallback(e);
}), o);
}
removeInvite(e) {
const t = e.senderPhotonPlayerId, n = this.expireTimeouts[t];
n && (clearTimeout(n), delete this.expireTimeouts[t]);
}
clearAllTimeouts() {
for (const e of Object.values(this.expireTimeouts)) clearTimeout(e);
this.expireTimeouts = {};
}
}, n$ = fm.GameInvite.GameInviteNotificationType, r$ = fm.XboxPlatform.XboxPermission, i$ = (e, t) => t.createdTimestampMs - e.createdTimestampMs;
function o$(e) {
return e.data || new Vx([], i$);
}
function a$(e) {
let t = FT(e.expiryTimestamp), n = FT(e.purgeTimestamp), r = !1;
const i = e.revokeTimestamp && FT(e.revokeTimestamp);
i && i < t && (t = i, n = i + 72e5, r = !0);
const o = {
isCrossplayEnabled: 0 !== e?.properties?.isCrossplayEnabled?.integerValue
};
e.properties?.lobby && (o.lobby = e.properties.lobby.stringValue), e.properties?.party && (o.party = e.properties.party.stringValue);
const a = e.senderPlayerId.id, s = e_(e.senderPlayerNetworkId), l = i_({
eaPlayerId: a,
playerNetworkId: s
});
return {
gameInviteId: e.gameInviteId,
targetPlayerNetworkId: e.targetPlayerNetworkId?.map(e_),
targetDevicePlatformId: e.targetDevicePlatformId?.map(bs),
senderPlayerId: a,
senderPlayerNetworkId: s,
senderDevicePlatformId: bs(e.senderDevicePlatformId),
senderPhotonPlayerId: l,
senderProductId: e.senderProductId.id,
createdTimestampMs: FT(e.createdTimestamp),
expiryTimestampMs: t,
purgeTimestampMs: n,
gameJoinTokenTypes: e.gameJoinTokenTypes,
isRevoked: r,
properties: o
};
}
async function s$(e, t) {
const {isAllowed: n, privacyResult: r} = await QE(e, t.senderPhotonPlayerId, [ r$.CommunicateUsingText ]);
return n || r && Lk(e, t.senderPhotonPlayerId, new Error($E(r)), t, "invite_received"), 
n;
}
var l$ = () => {
const e = Tm(), t = hv(), n = t.tokenInfo.userId, r = t.personaInfo.playerNetworkId, i = ol(), o = S_(), a = fk(), s = $k(), l = jQ(), c = cS(), d = DG(), u = bI(), p = uG();
H.useEffect((() => {
const e = new t$(s, p.removeFromAll);
let t = cE((() => s.get().data), (n => {
fr((() => {
n.forEach((t => {
p.addInvite(t), e.addInvite(t);
}));
})), t = n.observe((t => {
switch (t.type) {
case "add":
p.addInvite(t.newValue), e.addInvite(t.newValue);
break;

case "delete":
p.removeFromAll(t.oldValue), e.removeInvite(t.oldValue);
break;

case "update":
p.updateInvite(t.oldValue, t.newValue), e.addInvite(t.newValue);
}
}));
}));
return () => {
t(), e.clearAllTimeouts();
};
}), [ s, p ]);
const f = hI([ i.get(PS).get(), i.get(SS).get(), i.get(lS).get() ]), h = !f.loading && !f.uninitialized, m = CF((() => e.GameInvite.SubscribeToReceivedGameInviteNotifications({
playerId: {
id: n
}
})), [ e, n ], e$, {
queryIsReady: h
});
YQ(m.data?.stream, H.useCallback((() => m.fetch?.()), [ m ])), zb("GameInvite.SubscribeToReceivedGameInviteNotifications", m.data?.stream), 
H.useEffect((() => {
if (!m.data) return;
const e = setTimeout((() => {
nl((() => {
const e = s.get();
e.data || e.update({
...e.toProps(),
uninitialized: !1,
loading: !1,
data: o$(e)
});
}));
}), 8e3), n = s.setStreamStrategy({
stream: new ab(m.data.stream, $Q),
updater: async (e, n) => {
const s = o$(e);
if (e.data || e.update({
...n,
data: s
}), !n.data) return;
const p = n.data.gameInviteNotification, f = a$(p.gameInvite), h = f.senderPhotonPlayerId;
if (f.targetDevicePlatformId && f.targetDevicePlatformId.length && !f.targetDevicePlatformId.includes(t.personaInfo.devicePlatformId)) return;
if (await u(c.get(), 8e3), nl((() => c.get().data?.has(f.senderPlayerId)))) return;
if ("EA" !== r && (await u(l.get(), 8e3), nl((() => l.get().data?.has(h))))) return;
if (!await s$(i, f)) return;
let m = !1;
switch (p.gameInviteNotificationType) {
case n$.GAME_INVITE_NOTIFICATION_TYPE_REMOVED:
s.delete(h);
break;

case n$.GAME_INVITE_NOTIFICATION_TYPE_ADDED:
s.set(h, f);
break;

case n$.GAME_INVITE_NOTIFICATION_TYPE_REVOKED:
case n$.GAME_INVITE_NOTIFICATION_TYPE_EXISTING:
{
const e = nl((() => s.get(h)));
if (e) {
const t = Date.now(), n = t > e.expiryTimestampMs, r = t > f.expiryTimestampMs;
m = n && !r;
}
s.set(h, f);
break;
}
}
if (p.gameInviteNotificationType === n$.GAME_INVITE_NOTIFICATION_TYPE_ADDED || m) {
const e = (await u(o.get(h), 1e4))?.data;
if (!e) return;
const t = (await u(a.get(p.gameInvite.senderProductId.id), 1e4))?.data, n = nl((() => s.get(h)));
n && d.trigger(n, e, t);
}
}
});
return () => {
n?.(), clearTimeout(e);
};
}), [ c, i, u, s, m.data, o, a, d, p, t, l, r, e ]);
}, c$ = Ii.observer((({children: e}) => (JQ(), l$(), H.createElement(H.Fragment, null, e)))), d$ = ({children: e}) => {
const t = Ex("GameInvites"), n = Ex("CrossGameInvites"), r = H.useMemo((() => {
function e(e) {
const {expired: r, expiredLongAgo: i, purged: o} = tR(e);
if (r || i || o) return;
return nR(e) ? t : n;
}
return {
gameInvites: t,
crossGameInvites: n,
removeFromAll(e) {
const r = eR(e);
t.removeItem(r), n.removeItem(r);
},
addInvite(t) {
const n = e(t);
n && n.addItem(eR(t));
},
updateInvite(t, n) {
const r = eR(t), i = eR(n);
if (r === i) {
const r = e(t), o = e(n);
if (r === o && void 0 !== o?.isItemSeen(i)) return;
}
fr((() => {
this.removeFromAll(t), this.addInvite(n);
}));
},
getUnseenCountForAll: () => t.getUnseenCount() + n.getUnseenCount()
};
}), [ t, n ]);
return H.createElement(dG.Provider, {
value: r
}, H.createElement(c$, null, e));
}, u$ = fm.XboxPlatform.XboxPermission, p$ = fm.XboxPlatform.XUserPrivilege, f$ = J_.object({}), h$ = e => {
const t = e.get(bC).get();
return {
lobbyJoinable: !!e.get(DO).get().data,
partyJoinable: !!t.data
};
}, m$ = (e, t) => nl((() => ({
loading: !1,
data: h$(e),
error: t
})));
function g$() {
const {GameInvite: e, PhotonInvite: t} = Tm(), n = ol();
H.useEffect((() => {
const r = n.get(fv), i = async (t, r, i, o, a, s, l) => {
const c = i_({
eaPlayerId: r,
playerNetworkId: i
}), {isAllowed: d, privacyResult: u} = await QE(n, c, [ u$.PlayMultiplayer ], p$.Multiplayer), p = nl((() => Nk(n, LA(n, c).data, s.has("party") ? uN(n).data : void 0, s.has("lobby") ? MO(n).data : void 0, "friend_picker")));
if (!d) return p(new Error($E(u))), {
error: new Error(Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_PREVENT-MULTIPLAYER", {
"%localPlatform%": Bv(TO(n).playerNetworkId)
}))
};
const f = Sw(s, l), {compatiblePlayerNetworkIds: h, compatibleDevicePlatformIds: m} = lR(), g = await j_((() => e.SendGameInvite({
playerId: {
id: t
},
targetPlayerId: {
id: r
},
targetPlayerNetworkId: h,
targetDevicePlatformId: m,
senderPlayerNetworkId: {
id: o
},
senderDevicePlatformId: {
id: a
},
senderProductId: {
id: Fs.productId
},
gameJoinTokenTypes: Array.from(s.keys()),
properties: f
})), f$);
return p(g.error), g;
};
return t.onSendEaInvite.subscribe((async e => {
const {requestId: o, toPlayerId: a, toPlayerNetworkId: s} = e, l = await new Promise((e => {
hr((() => {
const {lobbyJoinable: e, partyJoinable: t} = h$(n);
return e || t;
}), (() => {
e(m$(n));
}), {
timeout: 1e4,
onError: () => e(m$(n, new Error("TIMEOUT")))
});
}));
if (l.error) return t.sendEaInviteResponse({
requestId: o,
errorMessage: l.error.message
});
const c = sR(l.data?.partyJoinable, l.data?.lobbyJoinable), {isCrossplayEnabled: d, gameJoinTokens: u} = zR(n, c), p = await i(r.tokenInfo.userId, a, e_(s), r.personaInfo.playerNetworkId, r.personaInfo.devicePlatformId, u, d);
c.includes("party") && n.set(Zw, !0), c.includes("lobby") && n.set(ER, !0), t.sendEaInviteResponse({
requestId: o,
errorMessage: p.error?.message
});
}));
}), [ t.onSendEaInvite, t, n, e ]);
}
var y$ = J_.optional(J_.object({}));
function I$(e, t) {
return void 0 !== e && void 0 !== t && e !== t;
}
var _$ = () => {
const {GameInvite: e} = Tm(), t = hv(), n = ol(), r = H.useCallback((async r => {
r.includes("lobby") && n.set(ER, !1), r.includes("party") && n.set(Zw, !1), await j_((() => e.RevokeGameInvites({
senderPlayerId: {
id: t.tokenInfo.userId
},
senderPlayerNetworkId: {
id: t.personaInfo.playerNetworkId
},
senderProductId: {
id: Fs.productId
},
containedGameJoinTokenType: r
})), y$);
}), [ e, n, t.personaInfo.playerNetworkId, t.tokenInfo.userId ]);
sl((e => {
e && n.getUntracked(ER) && r("lobby");
}), [ n, r ], PR), sl((e => {
e && n.getUntracked(ER) && r("lobby"), n.set(ER, !1);
}), [ n, r ], OR), sl(((e, t) => {
I$(e, t) && n.getUntracked(ER) && r("lobby");
}), [ n, r ], CR), sl((e => {
e && n.getUntracked(Zw) && r("party");
}), [ n, r ], nk), sl(((e, t) => {
I$(e, t) && n.getUntracked(Zw) && r("party");
}), [ n, r ], rk);
};
function b$() {
const e = FO(), t = ol();
H.useEffect((() => Dn((() => e.get().data?.lobbyId), (() => {
kR(0, t);
}))), [ t, e ]);
const n = yi.useObserver((() => e.get().data?.members));
H.useEffect((() => n?.observe_((({type: e, name: n}) => {
"add" === e && RR(0, n, t);
}))), [ t, e, n ]);
}
function S$() {
const e = FO();
H.useEffect((() => e.init()), [ e ]);
}
var v$ = ({children: e}) => (S$(), b$(), H.createElement(H.Fragment, null, e));
function T$() {
const e = Tm(), {getUnseenCount: t} = Ox(), {getUnseenCountForAll: n} = uG();
H.useEffect((() => {
if (!e.hasMethod("Badging", "updateUnseenItemCount")) return;
const r = NI((() => nl((() => {
const r = t() + n();
e.Badging.updateUnseenItemCount({
unseenItemCount: r
});
}))), {
wait: 3e3,
leading: !0
}), i = Dn((() => t() + n()), r, {
fireImmediately: !0
});
return () => {
i(), r.cancel();
};
}), [ t, n, e ]);
}
var E$ = (e, t) => 1 === e.position ? {
bottom: null,
left: null,
top: t.top + t.height + Vc(Rd.DimensionSpace.small) + e.offsetY,
right: pf - t.start - t.width + e.offsetX,
zOffset: bN
} : {
top: null,
right: null,
bottom: ff - t.top + Vc(Rd.DimensionSpace.small) + e.offsetY,
left: t.start + t.width / 2 + e.offsetX,
zOffset: bN
}, P$ = td((e => {
return t = {
[0 === e || 1 === e ? "top" : "bottom"]: gf.height,
[0 === e || 2 === e ? "left" : "right"]: gf.width
}, of() && ("right" in t ? (t.left = t.right, delete t.right) : (t.right = t.left, 
delete t.left)), t;
var t;
}), {
zOffset: ON,
position: "absolute"
}), O$ = ({location: e, options: t, children: n}) => {
const r = $p(), {screenBoundsToLayout: i} = lf(), o = t?.appearance?.attachToSurface, [a, s] = H.useState(null), l = id((() => a && o ? E$(o, a) : {}), [ o, a ]);
return H.useEffect((() => {
if (!o) return;
const e = r.reconciler.getSurfaceById(o.surfaceId)?.getBounds();
return e && s(i(e)), r.reconciler.surfaceBindings.onSurfaceBoundsChanged.subscribe((e => {
e.changes.forEach((({bounds: e, surfaceId: t}) => {
t === o.surfaceId && s(i(e));
}));
}));
}), [ o, i, r.reconciler ]), o && !a ? null : H.createElement("surface", {
style: [ P$(e), l ]
}, n);
}, C$ = fs.Input.DeviceType, N$ = fm.UserExperience.SoundEffect, A$ = fm.StateApi.State, L$ = fm.StateApi.State, w$ = fm.InputBindings.Action, k$ = "notifications_in", R$ = "notifications_out", x$ = "notifications_ready", B$ = {
easing: Rd.AnimationEasing.accelerate,
duration: Rd.AnimationTime.slow
}, D$ = {
easing: Rd.AnimationEasing.accelerate,
duration: Rd.AnimationTime.slowest
}, F$ = {
holdRequired: !1,
holdTimeSeconds: 0
}, M$ = Qc({
position: "absolute",
top: 0,
left: 0,
right: 0,
bottom: 0,
flex: 1,
zOffset: EN,
backgroundColor: "#ffffff00"
}), U$ = {
4: N$.NotificationOtherPlayerInvite,
2: N$.NotificationOtherPlayerActivity,
1: N$.NotificationTips,
0: N$.NotificationSystemResponseFailure,
3: N$.NotificationSystemResponseSuccess
}, H$ = ({text: e, holdRequired: t, notificationIsFocusable: n}) => {
const r = WL(w$.NotificationFocus);
return _p((({getKeyBindingText: i}) => {
const o = [ Em("PHOTON-SOCIAL_NARRATION_NOTIFICATION_RECEIVED", {
"%notificationText%": e
}) ];
return n && o.push(Em(t ? "PHOTON-SOCIAL_NARRATION_NOTIFICATION_HOLD-OPEN" : "PHOTON-SOCIAL_NARRATION_NOTIFICATION_PRESS-OPEN", {
"%key%": i(r)
})), o;
}), [ t, r, e, n ], 1), null;
}, V$ = Vc(60), J$ = (e, t) => {
let n = t?.animationOffset ?? V$;
return 1 === t?.animation || 2 !== e && 0 !== e || (n = -n), n;
}, G$ = Np(), z$ = Ii.observer((() => {
const e = $p(), t = zp(), {InputBindings: n, StateApi: r} = Tm(), i = XV(), o = ol(), a = fP(), {notificationManager: s, showNextNotification: l} = bO(), {timeout: c, disposeTimeout: d} = dp(), u = gA(), [p, f] = ml(mm), h = av(), [m, g] = H.useState(!1), [y, I] = H.useState(!1), [_, b] = H.useState(), S = s.activeItem, v = Sf(), {animationOffset: T, notificationLocation: E} = H.useMemo((() => {
const e = nl((() => a.getSetting(0, 10))), t = S?.item.options?.appearance?.attachToSurface;
let n = e;
return 1 === t?.position ? n = v ? 0 : 1 : t && (n = v ? 3 : 2), {
animationOffset: J$(n, S?.item.options?.appearance),
notificationLocation: n
};
}), [ S, v, a ]), P = H.useRef(!1), O = hP(T), C = hP(0), N = OB(), A = !!_, {notificationFocusableContext: L, onBounds: w} = H.useMemo((() => ({
notificationFocusableContext: {
setFocusable: () => {
I(!0);
}
},
onBounds: e => {
b((t => {
return (n = t) === (r = e) || void 0 !== n && void 0 !== r && n.absHeight === r.absHeight && n.absWidth === r.absWidth && n.absX === r.absX && n.absY === r.absY ? t : e;
var n, r;
}));
}
})), []);
H.useEffect((() => {
if (m) return Yp(o, "GlobalDismiss");
}), [ m, o ]), H.useEffect((() => {
S && (g(!1), nl((() => {
S.item.options?.telemetryInfo && ME(h, {
msg_id: S.item.options.telemetryInfo.pg_id,
...S.item.options.telemetryInfo,
status: "impression",
...S.item.data?.hasActions && {
option: "open",
destination_name: "main"
}
});
})));
}), [ S, h ]), H.useEffect((() => {
const e = (() => {
if (!S && !u.isRevealed) return L$.Closed;
if (!u.isRevealing) {
switch (p) {
case L$.Open:
break;

case L$.Closed:
return y ? L$.ShowingFocusableNotification : L$.ShowingNotification;

case L$.ShowingNotification:
if (y) return L$.ShowingFocusableNotification;
break;

case L$.ShowingFocusableNotification:
if (!y) return L$.ShowingNotification;
if (m) return L$.FocusedNotification;
break;

case L$.FocusedNotification:
if (!y) return L$.ShowingNotification;
break;

default:
Xs("Unknown StateApiState");
}
return p;
}
})();
void 0 !== e && e !== p && (f(e), r.setState({
state: e
}));
}), [ S, p, y, m, f, r, u ]);
const k = H.useCallback((e => {
I(!1), g(!1), b(void 0), C.set(0), O.set(T), e.done(), d(k$), d(x$), d(R$), l();
}), [ d, l, C, O, T ]), R = H.useCallback((() => {
S && (C.set(0), k(S));
}), [ S, k, C ]), x = H.useCallback((() => {
S?.item.options?.telemetryInfo && ME(h, {
msg_id: S.item.options.telemetryInfo.pg_id,
...S.item.options.telemetryInfo,
destination_name: "actions",
option: "close"
}), R();
}), [ S?.item.options, R, h ]), B = H.useCallback((() => {
S && (g(!0), C.set(1), O.set(0), S.done(), d(k$), d(x$), d(R$));
}), [ S, d, C, O ]);
H.useEffect((() => {
m && S?.item.options?.telemetryInfo && ME(h, {
msg_id: S.item.options.telemetryInfo.pg_id,
...S.item.options.telemetryInfo,
option: "open",
...S.item.data?.hasActions && {
destination_name: "main"
}
});
}), [ S, m, h ]), H.useEffect((() => {
p === A$.FocusedNotification && !m && y && B();
}), [ p, m, y, B ]), H.useEffect((() => {
if (p === A$.ShowingFocusableNotification && t === C$.MouseAndKeyboard && _) {
P.current = !0;
const {absHeight: e, absWidth: t, absX: r, absY: i} = _;
n.setExclusiveMouseRegion({
exclusiveMouseRegion: {
xTopLeftPixelCoordinate: r,
yTopLeftPixelCoordinate: i,
xBottomRightPixelCoordinate: r + t,
yBottomRightPixelCoordinate: i + e
}
});
} else P.current && (P.current = !1, n.setExclusiveMouseRegion({}));
}), [ n, t, p, _ ]), H.useEffect((() => {
if (S && A) {
const e = () => {
C.transition(1, 0, D$), c(R$, (() => k(S)), D$.duration + 100);
};
(() => {
N(U$[S.item.type]), O.transition(T, 0, B$), C.transition(0, 1, B$), c(x$, (() => S.ready()), B$.duration);
const t = S.getScreenTimeInSeconds();
t && c(k$, e, 1e3 * t + B$.duration - 50);
})();
}
}), [ T, A, S, k, O, C, c, N ]), H.useEffect((() => () => {
r.setState({
state: A$.Closed
}), P.current && (P.current = !1, n.setExclusiveMouseRegion({}));
}), [ n, r ]), H.useEffect((() => s.onDismiss.subscribe((() => {
R();
}))), [ R, s.onDismiss ]);
const D = S?.item?.options?.appearance?.portalId, F = H.useMemo((() => {
if (!S) return null;
const t = S.item.options?.appearance?.animation, n = 1 === t ? O.propStyle("translateY") : O.propStyle("translateX"), {holdRequired: r, holdTimeSeconds: i} = e.bindings.Input.getFocusNotificationConfig({}) || F$;
return H.createElement(H.Fragment, null, m && H.createElement("surface", {
style: M$
}), H.createElement(O$, {
location: E,
options: S.item?.options
}, H.createElement("surface", {
onBounds: w
}, !!S.item.data?.text && H.createElement(H$, {
text: S.item.data?.text,
holdRequired: r,
notificationIsFocusable: y
}), H.createElement(jP.Provider, {
value: L
}, H.createElement("surface", {
style: [ n, C.propStyle("opacity") ]
}, S.item.content({
notificationLocation: E,
id: S.id,
dismiss: R,
onClose: x,
stayActive: B,
isActivated: m,
holdOptions: {
holdRequired: r,
holdTimeMs: i ? 1e3 * i : 0
}
}))))));
}), [ e, S, O, E, y, L, C, R, x, B, m, w ]);
return H.useEffect((() => {
D && F && i.teleport(D, F);
}), [ F, D, i ]), H.useEffect((() => {
if (D) return () => {
i.clear("InsideContent");
};
}), [ D, i ]), H.createElement(Nh, {
id: G$
}, D ? null : F);
})), j$ = (fm.Voip.VoipStatus, fm.Voip.VoipChannel, fm.XboxPlatform.XboxPermission), q$ = fm.XboxPlatform.XUserPrivilege, Y$ = J_.object({}), W$ = async (e, t, n) => {
let r = !1;
const i = e.getUntracked(fv), {eaPlayerId: o} = s_(n);
if (Y_() && o) {
const {isAllowed: a} = await QE(e, n, [ j$.CommunicateUsingVoice ], q$.Communications);
if (!a) {
nl((() => !!e.get(Aw).get().data?.get(o))) || await _w((() => j_((() => t.MutePlayer({
entityId: {
playerId: {
id: i.tokenInfo.userId
}
},
targetEntityId: {
playerId: {
id: o
}
}
})), Y$)), {
maxAttempts: 3,
retryDelay: 1e3
}), r = !0;
}
}
return [ r, n ];
}, K$ = () => {
const e = ol(), t = Lw(), n = Tm(), {showNotification: r} = bO(), i = XS("main").history;
H.useEffect((() => {
const t = e.get(ew).get(), o = e.getUntracked(fv);
let a;
return Rn((() => {
const s = t.data?.players;
if (!s) return;
const l = [];
for (const [t] of s) o.photonPlayerId !== t && (a?.has(t) || l.push(W$(e, n.MuteService, t)));
Promise.all(l).then((t => {
for (const [n, s] of t) if (n) {
r(0, 0, {
icon: ih.VOIP_DISABLED,
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY-MEMBER-RESTRICTED", {
"%localPlatform%": Bv(o.personaInfo.playerNetworkId)
})
});
const {eaPlayerId: t} = s_(s);
nl((() => {
const n = {
pg_id: LE(i.location),
destination_name: "info_bar",
status: "impression",
msg_id: "xbox_voip_party_restrict"
};
ME(e.get(ov), {
...n,
context: {
nucleus: a ? t : void 0,
rel: GE(e, s)
}
});
}));
break;
}
})), a = new Map(s);
}));
}), [ i, e, t, n, n.MuteService, r ]);
}, X$ = fm.Voip.VoipChannel, Q$ = () => {
const {Voip: e} = Tm(), t = ol(), n = fw(), r = bO();
H.useEffect((() => Dn((() => t.get(bC).get().data?.partyId), (e => {
if (!e) return;
const r = cw(t), i = lw(t);
n({
channel: i || r ? X$.None : X$.Party
}, !0);
}))), [ e, t, r, n ]);
}, $$ = Qc({
width: IL
}), Z$ = Qc({
marginTop: Vc(Rd.DimensionSpace.largest),
width: Vc(554)
}), eZ = Qc({
marginBottom: Vc(Rd.DimensionSpace.small),
flex: 1
}), tZ = ({actionConfig: e, closeModal: t}) => {
const {id: n, label: r, action: i, autoClose: o} = e, a = H.useCallback((() => {
e.isSelected || i(), o && t();
}), [ i, e.isSelected, o, t ]);
return H.createElement(xW, {
label: r,
id: "modal-" + n,
onSelect: a,
isSelected: e.isSelected,
isDisabled: e.isDisabled
});
};
function nZ(e) {
const {closeModal: t} = CE();
return H.useMemo((() => e.map((e => H.createElement("surface", {
style: eZ,
key: e.id
}, H.createElement(tZ, {
actionConfig: e,
closeModal: t
}))))), [ e, t ]);
}
var rZ = ({title: e, headline: t, body: n, actions: r, closeAction: i, closeLabel: o}) => {
const {closeModal: a} = CE();
yL({
callback: i || a,
label: o,
action: 3
});
const s = nZ(r);
return H.createElement("surface", {
style: $$
}, H.createElement(fL, {
title: e,
headline: t,
body: n,
bodyStyle: SL
}, H.createElement("surface", {
style: Z$
}, s)));
}, iZ = fm.DeepLink.Setting, oZ = fm.DeepLink.ParentalControlSettings, aZ = [ "XBOX", "PSN" ], sZ = () => {
const e = hv(), {data: t} = wF(e.photonPlayerId), n = ol(), r = t?.channel;
return {
currentChannel: r,
isVoipDisabled: cw(n),
isVoipRestricted: lw(n)
};
}, lZ = {
pg_id: "overlay_voip_toggle",
msg_id: "overlay_voip_toggle"
}, cZ = {
...lZ,
option: "off"
}, dZ = {
...lZ,
option: "team_channel"
}, uZ = {
...lZ,
option: "party_channel"
}, pZ = {
...lZ,
option: "voice_settings"
}, fZ = Ii.observer((() => {
const e = XS("overlay"), t = av(), n = H.useMemo((() => [ {
id: "open",
action: UE(t, (() => {
e.navigate(sK.link({
focusOnSetting: "1"
}));
}), pZ),
autoClose: !0,
label: Em("BUTTON_VOICE-SETTINGS")
} ]), [ e, t ]);
return H.createElement(LL, {
title: Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_UNDERAGE-VOIP"),
body: Em("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_UNDERAGE-VOIP"),
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO,
actions: n,
withoutCloseButton: !0
});
})), hZ = Ii.observer((() => {
const e = Tm(), {playerNetworkId: t} = vO(), n = H.useMemo((() => [ {
id: "open",
action: () => e.DeepLink.openSetting({
setting: iZ.FirstPartyParentalVoip
}),
autoClose: !0,
label: Em("BUTTON_XBOX-SETTINGS"),
icon: ih.OPEN_EXTERNAL
} ]), [ e.DeepLink ]);
return "XBOX" === t ? H.createElement(LL, {
title: Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_VOIP-RESTRICTED"),
body: Em("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_VOIP-RESTRICTED"),
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO,
actions: n,
withoutCloseButton: !0
}) : "PSN" === t ? H.createElement(LL, {
title: Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_VOIP-RESTRICTED-PLAYSTATION"),
body: Em("PHOTON-SOCIAL_PARTY_OVERLAY_DESC_VOIP-RESTRICTED-PLAYSTATION"),
closeLabel: Em("BUTTON_GOT-IT"),
overlayTitleNarrationItem: kL,
buttonNarrationItem: pO,
actions: []
}) : null;
})), mZ = Ii.observer((() => {
const {data: e} = kF(), {currentChannel: t, isVoipDisabled: n} = sZ(), r = fw(), i = av(), {playerNetworkId: o} = vO(), a = tE()(oZ.Voip) && aZ.includes(o), s = !fP().getSetting(2, 0), l = H.useMemo((() => [ {
id: "partyChat",
action: UE(i, (() => r({
channel: fm.Voip.VoipChannel.Party
})), uZ),
autoClose: !0,
label: Em("BUTTON_PARTY-CHAT"),
isSelected: !n && t === fm.Voip.VoipChannel.Party,
isDisabled: !e?.some((e => e.channel === fm.Voip.VoipChannel.Party))
}, {
id: "teamChat",
action: UE(i, (() => r({
channel: fm.Voip.VoipChannel.Game
})), dZ),
autoClose: !0,
label: Em("BUTTON_TEAM-CHAT"),
isSelected: !n && t === fm.Voip.VoipChannel.Game,
isDisabled: !e?.some((e => e.channel === fm.Voip.VoipChannel.Game))
}, {
id: "voipDisabled",
action: UE(i, (() => r({
channel: fm.Voip.VoipChannel.None
})), cZ),
autoClose: !0,
label: Em("BUTTON_VOIP-DISABLE"),
isSelected: n
} ]), [ t, n, i, r, e ]);
if (a) {
const e = H.createElement(hZ, null);
if (e) return e;
}
return s ? H.createElement(fZ, null) : H.createElement(rZ, {
closeLabel: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_BACK"),
actions: l,
title: Em("PHOTON-SOCIAL_PARTY_OVERLAY_TITLE_VOIP"),
body: Em(n ? "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_VOIP-DISABLED" : "PHOTON-SOCIAL_PARTY_OVERLAY_DESC_VOIP-ENABLED")
});
}));
function gZ() {
const {currentChannel: e, isVoipDisabled: t, isVoipRestricted: n} = sZ(), {data: r} = kF(), {showModal: i} = CE(), o = av(), {history: a} = XS("main"), {timeout: s} = dp(), l = r && r.length > 0;
let c = "", d = "";
e === fm.Voip.VoipChannel.Party ? (c = Em("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_SPEAK-PARTY"), 
d = "in_party_chat") : e === fm.Voip.VoipChannel.Game && (c = Em("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_SPEAK-TEAM"), 
d = "in_team_chat"), (t || n) && (c = Em("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_SPEAK-OFF"), 
d = "chat_off");
const u = c && Em("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_VOICE-CHANNEL", {
"%voiceChannel%": c
}), p = H.useCallback((() => {
ME(o, {
pg_id: LE(a.location),
destination_name: "bottom_bar",
msg_id: "bottom_bar",
option: d,
context: {
tpid: Fs.productId
}
}), i((() => H.createElement(mZ, null)), {
telemetryId: "overlay_voip_toggle"
});
}), [ a.location, o, i, d ]), [f, h] = H.useState({
toggleVoipChannel: void 0,
voiceBtnLabel: ""
});
return H.useEffect((() => {
s("voip_user", (() => {
h({
toggleVoipChannel: l ? p : void 0,
voiceBtnLabel: u
});
}), 200);
}), [ l, s, p, u ]), f;
}
var yZ = fm.Voip.VoipChannel, [IZ, _Z] = El({
debugName: "voipChannelNotificationState",
create: e => {
const {showNotification: t, showCtaNotification: n} = e.get(_O), r = t => pw(e, {
channel: t
}, !0);
return ({channelsBefore: e, channelsAfter: i, voipIsDisabled: o, voipIsRestricted: a}) => {
const s = e?.map((e => e.channel)), l = i?.map((e => e.channel)), c = s && s.includes(fm.Voip.VoipChannel.Game) && l && !l.includes(fm.Voip.VoipChannel.Game) && l.includes(fm.Voip.VoipChannel.Party), d = s && s.includes(fm.Voip.VoipChannel.Party) && l && !l.includes(fm.Voip.VoipChannel.Party) && l.includes(fm.Voip.VoipChannel.Game), u = s && !s.includes(fm.Voip.VoipChannel.Game) && l && l.includes(fm.Voip.VoipChannel.Game);
c ? o ? a || t(0, 0, {
icon: ih.VOIP,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED")
}) : (t(3, 3, {
icon: ih.VOIP,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-PARTY_FORCED")
}), r(yZ.Party)) : d ? o ? a || n(0, 0, {
icon: ih.VOIP
}, Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED_TEAM-AVAILABLE"), Em("PHOTON-SOCIAL_NOTIFICATION_TEAM-VOIP_BUTTON_OPEN"), (() => r(yZ.Game)), {
telemetryInfo: {
pg_id: "tst_team_channel",
option: "hold_to_join"
}
}) : (t(3, 3, {
icon: ih.VOIP,
text: Em("PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-TEAM")
}), r(yZ.Game)) : u && (a || n(0, 0, {
icon: ih.VOIP
}, Em(o ? "PHOTON-SOCIAL_NOTIFICATION_LOCAL_VOICE-DISABLED_TEAM-AVAILABLE" : "PHOTON-SOCIAL_NOTIFICATION_LOCAL_CHAT_IN-PARTY_TEAM-AVAILABLE"), Em("PHOTON-SOCIAL_NOTIFICATION_TEAM-VOIP_BUTTON_OPEN"), (() => r(yZ.Game)), {
telemetryInfo: {
pg_id: "tst_team_channel",
option: "hold_to_join"
}
}));
};
}
}), bZ = fm.Voip.VoipChannel, SZ = fm.Voip.VoipStatus, vZ = J_.enum(bZ), TZ = J_.enum(SZ), EZ = J_.object({
playerId: J_.string,
playerNetworkId: J_.string,
channel: vZ,
status: TZ
}), PZ = J_.object({
state: J_.object({
players: J_.array(EZ)
})
}), OZ = J_.object({
channel: vZ,
name: J_.optional(J_.string)
}), CZ = J_.object({
channels: J_.array(OZ)
});
function NZ(e) {
const t = {};
return e.state.players.forEach((e => {
const n = aw(e), r = i_(n);
t[r] && n.status === fm.Voip.VoipStatus.None || (t[r] = n);
})), {
players: new Zs(t)
};
}
function AZ() {
const {Voip: e} = Tm();
return NF((async () => e.getVoipState({})), [ e ], PZ, {
transformResponse: NZ
});
}
function LZ() {
const {Voip: e} = Tm();
return NF((async () => e.getVoipChannels({})), [ e ], CZ, {
transformResponse: e => e.channels
});
}
var wZ = class extends as {
constructor(e) {
super({
data: e
});
}
};
function kZ() {
const e = tw(), t = rw(), n = AZ(), r = LZ(), {Voip: i, Lobby: o, Party: a} = Tm(), s = _Z(), l = hv(), c = ol();
MF();
const d = H.useCallback((() => {
nl((() => {
const n = t.get().data ?? [], r = e.get(), i = r.data?.players;
i?.forEach(((e, t) => {
t === l.photonPlayerId || n.find((t => t.channel === e.channel)) || r.data?.players.delete(t);
}));
}));
}), [ t, e, l ]), u = H.useCallback(((e, t) => {
const n = cw(c), r = lw(c);
s({
channelsBefore: e,
channelsAfter: t,
voipIsDisabled: n,
voipIsRestricted: r
});
}), [ s, c ]);
H.useEffect((() => {
if (r) return t.setSeedStrategy({
fetch: async () => fI(await r()),
updater: (e, t) => {
u(e.data, t.data), MI(e, t), d();
}
});
}), [ u, r, d, t ]);
const p = H.useCallback((t => {
const n = e.get();
t?.forEach((e => {
const t = aw(e), r = i_(t);
n.data?.players.set(r, t);
}));
}), [ e ]);
H.useEffect((() => e.setStreamStrategy({
stream: new wZ(i.onVoipStateUpdated),
updater: (e, t) => {
p(t.data?.players);
}
}, "voipUpdatedStreamStrategy")), [ i.onVoipStateUpdated, p, e ]), H.useEffect((() => {
if (n) return e.setSeedStrategy({
fetch: async () => fI(await n())
});
}), [ n, e ]), H.useEffect((() => t.setStreamStrategy({
stream: new wZ(i.onVoipChannelsUpdated),
updater: (e, t) => {
t.data && (u(e.data, t.data.channels), e.update({
...e.toProps(),
data: t.data.channels
}), d());
}
}, "voipChannelsUpdatedStreamStrategy")), [ u, d, i.onVoipChannelsUpdated, t ]), 
H.useEffect((() => {
async function t() {
const t = await i.getVoipState({});
fr((() => {
nl((() => {
e.get().data?.players.clear(), p(t?.state.players);
}));
}));
}
const n = o.onLobbyChanged.subscribe(t), r = a.onPartyChanged.subscribe(t);
return () => {
n(), r();
};
}), [ e, p, i, o, a ]);
}
var RZ = fm.InputBindings.Action, xZ = Ii.observer((({children: e}) => {
const {toggleVoipChannel: t, voiceBtnLabel: n} = gZ(), r = JG();
return HL(t && {
registrationIdOverride: "GlobalChatParty",
action: RZ.ToggleMode,
callback: t,
label: n,
onSurfaceId: r
}, void 0, !!n), H.createElement(H.Fragment, null, e);
})), BZ = Ii.observer((({children: e}) => (kZ(), Q$(), K$(), H.createElement(H.Fragment, null, e)))), DZ = ({children: e}) => H.createElement(BZ, null, H.createElement(xZ, null, e)), FZ = () => {
const {showNotification: e, showCtaNotification: t} = bO(), {data: n} = ZO(cS()), {data: r} = AF(), i = hv(), o = ol(), {mute: a} = jF();
return H.useCallback((s => {
const l = s.eaPlayerId, {isCurrentPhotonUser: c} = yv(s.photonPlayerId, i);
if (c || !l) return;
const d = nl((() => n?.has(l))), u = nl((() => r?.has(l))), p = NT(kO(o, s, i), {
allowEllipsis: !0
});
d ? u ? e(0, 2, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-BLOCKED", {
"%primaryID%": p
}),
icon: ih.WARNING,
iconColor: Rd.ColorSystem.warning
}) : t(3, 3, {
icon: ih.WARNING,
iconColor: Rd.ColorSystem.warning
}, Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-BLOCKED_UNMUTED", {
"%primaryID%": p
}), Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_MUTE"), (() => {
a(s.photonPlayerId);
})) : e(2, 2, {
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-JOIN", {
"%primaryID%": p
}),
icon: ih.PARTY
});
}), [ i, o, n, r, a, e, t ]);
}, MZ = () => {
const {showNotification: e} = bO(), t = hv(), n = ol();
return H.useCallback(((r, i) => {
if (xM(i, t)) return;
const {isCurrentPhotonUser: o} = yv(r.photonPlayerId, t);
o ? e(0, 2, {
icon: ih.REMOVE,
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_KICKED")
}) : e(2, 2, {
icon: ih.REMOVE,
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-EXIT", {
"%primaryID%": NT(kO(n, r, t), {
allowEllipsis: !0
})
})
});
}), [ n, e, t ]);
}, UZ = () => {
const {showNotification: e} = bO(), t = hv(), n = ol();
return H.useCallback((r => {
const {isCurrentPhotonUser: i} = yv(r.photonPlayerId, t);
i || e(2, 2, {
icon: ih.EXIT,
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_MEMBER-EXIT", {
"%primaryID%": NT(kO(n, r, t), {
allowEllipsis: !0
})
})
});
}), [ e, t, n ]);
}, HZ = () => {
const {showNotification: e} = bO(), t = hv(), n = ol();
return H.useCallback(((r, i) => {
if (xM(i, t)) return;
const {isCurrentPhotonUser: o} = yv(r.photonPlayerId, t);
o ? e(2, 2, {
icon: ih.PARTY_LEADER,
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_LEADER-CONFIRM")
}, {
telemetryInfo: {
pg_id: "tst_promoted"
}
}) : e(2, 2, {
icon: ih.PARTY_LEADER,
text: Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_LEADER-ANNOUNCE", {
"%primaryID%": NT(kO(n, r, t), {
allowEllipsis: !0
})
})
}, {
setting: 6,
telemetryInfo: {
pg_id: "tst_promoted_other"
}
});
}), [ n, e, t ]);
}, VZ = () => {
const e = UZ(), t = MZ(), n = FZ(), r = HZ(), i = SC().notificationEvents;
H.useEffect((() => i.setLeader.subscribe(r)), [ r, i ]), H.useEffect((() => i.joined.subscribe(n)), [ n, i ]), 
H.useEffect((() => i.left.subscribe(e)), [ e, i ]), H.useEffect((() => i.kicked.subscribe(t)), [ t, i ]);
}, JZ = async (e, t, n) => {
const r = t.size > 1 ? "tst_blocked_multi" : "tst_blocked_player_current";
let i = Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_BLOCKED-PLAYERS"), o = !1;
if (t.size > 1 && n.size > 0) i = Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_BLOCKED-PLAYERS_UNMUTED"); else if (1 === n.size) {
o = !0;
const [t] = n, {data: r} = await yI(LA(e, t), 8e3);
r && (i = Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_BLOCKED-PLAYER_UNMUTED", {
"%primaryID%": NT({
name: r.displayName,
playerNetworkId: r.playerNetworkId
}, {
allowEllipsis: !0
})
}));
} else if (1 === t.size) {
const [n] = t, {data: r} = await yI(LA(e, n), 8e3);
r && (i = Em("PHOTON-SOCIAL_NOTIFICATION_OTHER_PARTY_BLOCKED-PLAYER", {
"%primaryID%": NT({
name: r.displayName,
playerNetworkId: r.playerNetworkId
}, {
allowEllipsis: !0
})
}));
}
return {
showMuteCtaNotification: o,
text: i,
telemetryId: r
};
}, GZ = () => {
const e = ol(), {mute: t} = jF(), {showNotification: n, showCtaNotification: r} = bO();
sl((async i => {
if (!i) return;
const {blockedEaIds: o, blockedAndUnmutedEaIds: a, party: s} = await ww(e);
if (s && o.size > 0) {
const {showMuteCtaNotification: i, text: s, telemetryId: l} = await JZ(e, o, a);
i ? r(3, 3, {
icon: ih.WARNING,
iconColor: Rd.ColorSystem.warning
}, s, Em("PHOTON-SOCIAL_NOTIFICATION_BUTTON_MUTE"), (() => {
const [e] = a;
t(e);
})) : n(0, 2, {
icon: ih.WARNING,
iconColor: Rd.ColorSystem.warning,
text: s
}, {
telemetryInfo: {
pg_id: l,
context: {
tpid: Fs.productId
}
}
});
}
}), [ e, n, r, t ], tk, !0);
};
function zZ() {
const e = SC(), t = ol();
H.useEffect((() => Dn((() => e.get().data?.partyId), (e => {
e && kR(0, t);
}))), [ t, e ]);
const n = yi.useObserver((() => e.get().data?.members));
H.useEffect((() => n?.observe_((({type: e, name: n}) => {
"add" === e && RR(0, n, t);
}))), [ t, e, n ]);
}
function jZ() {
const e = SC();
H.useEffect((() => e.init()), [ e ]);
}
var qZ = fm.InputBindings.Action, YZ = Ii.observer((({children: e}) => {
const {leaveParty: t} = aU();
return HL(t && {
registrationIdOverride: "GlobalLeaveParty",
action: qZ.LeaveParty,
callback: t,
label: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_LEAVE-PARTY")
}), H.createElement(H.Fragment, null, e);
})), WZ = Ii.observer((({children: e}) => (Sz(), jZ(), VZ(), zZ(), GZ(), H.createElement(H.Fragment, null, e))));
function KZ(e, t) {
const n = IA(e), r = _A(e);
let i;
r.start();
const o = n.onHidden((() => {
o(), i?.();
}));
i = t((() => {
o(), r.stop();
}));
}
var XZ = () => {
const e = Tm(), t = av(), {showModal: n, closeModal: r} = CE(), i = ol();
H.useEffect((() => e.Moderation.onOpenPlayerReporting.subscribe((o => {
KZ(i, (i => {
const a = new OM(e, o, t, (t => {
i(), t && e.Moderation.playerReportingCancelled({}), r();
}));
return n((() => H.createElement(LM, {
reportPlayer: a
}))), () => a.abort();
}));
}))), [ t, n, r, i, e ]);
}, QZ = Ii.observer((({children: e}) => {
const t = ol(), n = nx(), r = $p(), i = S_(), o = ZT("fr_1_5", "Base"), a = ZT("fr_1_5", "Attributes"), s = av(), l = o || a;
return H.useEffect((() => {
if (l) return cE((() => s.sessionHeaders?.custom.offer_id), (e => n.init(e, o)));
}), [ o, l, t, s, i, n, r ]), H.createElement(H.Fragment, null, e);
}));
function $Z(e) {
return {
eaPlayerId: e.entity.id.playerId.id,
sourcePlayerNetworkId: e_(e.sourcePlayerNetworkId ?? void 0),
targetPlayerNetworkId: e_(e.targetPlayerNetworkId ?? void 0),
createTimeMs: FT(e.createTime)
};
}
var ZZ = (e, t) => t.createTimeMs - e.createTimeMs;
function e0(e) {
return new Vx(e.invites.map((e => [ e.entity.id.playerId.id, $Z(e) ])), ZZ);
}
function t0(e, t) {
const n = Tm(), r = gv();
H.useEffect((() => e.setSeedStrategy({
fetch: async () => fI(await j_((() => n.Invites[t]({
entityId: {
playerId: {
id: r
}
},
view: fm.Invites.RequestedView.REQUESTED_VIEW_DETAILED
})), Qv, {
transformResponse: e0
}))
})), [ n, t, e, r ]);
}
var n0 = Ii.observer((({children: e}) => (t0(sE(), "ListSentFriendInvites"), t0(oE(), "ListReceivedFriendInvites"), 
Nx(), Ux(), H.createElement(H.Fragment, null, e))));
function r0() {
const e = jQ(), t = S_(), {PlatformFriends: n} = Tm(), r = hv().personaInfo.playerNetworkId;
H.useEffect((() => e.init(n, t, r)), [ e, t, n, r ]);
}
function i0(e, t) {
return (t.createTimeMs || 0) - (e.createTimeMs || 0);
}
function o0(e) {
return new Vx(e.blockedPlayers?.map((e => [ e.entity.id.playerId.id, uE(e) ])), i0);
}
function a0() {
const {BlockService: e} = Tm(), t = gv();
return NF((() => e.ListBlockedPlayers({
entityId: {
playerId: {
id: t
}
}
})), [ e, t ], Ab, {
transformResponse: o0
});
}
function s0() {
const e = a0(), t = cS();
H.useEffect((() => {
if (e) return t.setSeedStrategy({
fetch: async () => fI(await e())
});
}), [ e, t ]);
}
var l0 = ({children: e}) => (s0(), r0(), H.createElement(H.Fragment, null, e)), c0 = fm.Friends.RequestedView;
function d0() {
const {Friends: e} = Tm(), t = gv();
return NF((() => e.ListFriends({
entityId: {
playerId: {
id: t
}
},
view: c0.REQUESTED_VIEW_ID_ONLY
})), [ e, t ], _b);
}
function u0() {
const e = OS(), t = d0();
H.useEffect((() => {
if (t) return e.init(t);
}), [ t, e ]);
}
var p0 = ({children: e}) => (u0(), H.createElement(H.Fragment, null, e));
function f0() {
const e = IE();
H.useEffect((() => e.init()), [ e ]);
}
var h0 = ({children: e}) => (f0(), H.createElement(H.Fragment, null, e));
function m0() {
const e = vS(), t = oT(), n = S_(), {PlatformFriends: r} = Tm(), i = hv().personaInfo.playerNetworkId;
H.useEffect((() => e.init(t, n, r, i)), [ e, t, n, r, i ]);
}
function g0(e) {
const t = (e.mutedPlayers ?? []).map((e => [ e.entity.id.playerId.id, uE(e) ]));
return new Zs(t);
}
function y0() {
const {MuteService: e} = Tm(), t = gv();
return NF((() => e.ListMutedPlayers({
entityId: {
playerId: {
id: t
}
}
})), [ e, t ], Lb, {
transformResponse: g0
});
}
function I0() {
const e = y0(), t = Lw();
H.useEffect((() => {
if (e) return t.setSeedStrategy({
fetch: async () => fI(await e())
});
}), [ e, t ]);
}
var _0 = ({children: e}) => (I0(), H.createElement(H.Fragment, null, e));
function b0(e, t, n = !1) {
const r = H.useRef([]), {timeout: i, hasTimeout: o} = dp(), a = "batcher", s = H.useCallback((() => {
const t = r.current.splice(0, r.current.length);
t.length && e(t);
}), [ e ]);
return H.useCallback((e => {
r.current.push(e), o(a) && !n || i(a, s, t);
}), [ s, o, t, n, i ]);
}
var S0 = fm.FriendsNotificationsService.ListUpdate;
function v0() {
const e = cS();
return H.useCallback((t => nl((() => {
const n = t.blockedPlayer.entity.id.playerId.id, r = e.get().data;
t.listUpdate === S0.LIST_UPDATE_ITEM_ADDED ? r?.set(n, uE(t.blockedPlayer)) : t.listUpdate === S0.LIST_UPDATE_ITEM_REMOVED && r?.delete(n);
}))), [ e ]);
}
var T0 = fm.FriendsNotificationsService.ListUpdate;
function E0() {
const e = OS(), t = sE().get(), n = IE(), r = rG(), i = S_(), o = EH();
return H.useCallback((a => nl((() => {
const s = a.friend.entity.id.playerId.id;
a.listUpdate === T0.LIST_UPDATE_ITEM_ADDED ? i.fetchPlayerInfosForFriends([ s ], (n => {
fr((() => {
for (const i of n) i.data?.eaPlayerId && (e.addFriend({
photonPlayerId: i.data.photonPlayerId
}), "EA" === i.data.playerNetworkId && (r.trigger(i.data), nl((() => {
t.data?.delete(s);
}))));
}));
})) : a.listUpdate === T0.LIST_UPDATE_ITEM_REMOVED && (e.removeFriend(s), o(s), 
nl((() => {
s && n.removeFavoriteFriend(i_({
eaPlayerId: s,
playerNetworkId: "EA"
}));
})));
}))), [ i, e, r, t, o, n ]);
}
var P0 = fm.FriendsNotificationsService.ListUpdate;
function O0() {
const e = Lw();
return H.useCallback((t => nl((() => {
const n = t.mutedPlayer.entity.id.playerId.id, r = e.get().data;
t.listUpdate === P0.LIST_UPDATE_ITEM_ADDED ? r?.set(n, uE(t.mutedPlayer)) : t.listUpdate === P0.LIST_UPDATE_ITEM_REMOVED && r?.delete(n);
}))), [ e ]);
}
var C0 = fm.FriendsNotificationsService.ListUpdate;
function N0() {
const e = oE(), t = S_(), n = qV(), r = dp();
return H.useCallback((i => nl((async () => {
const o = i.friendInviteDetails.entity.id.playerId.id, a = e.get().data, s = $Z(i.friendInviteDetails);
if (i.listUpdate === C0.LIST_UPDATE_ITEM_ADDED || i.listUpdate === C0.LIST_UPDATE_ITEM_UPDATED) {
const e = await yI(t.get(i_({
eaPlayerId: o,
playerNetworkId: s.sourcePlayerNetworkId
})), 1e4);
e?.data && (a?.set(o, s), i.listUpdate === C0.LIST_UPDATE_ITEM_ADDED && (r.disposeTimeout(o), 
n.trigger(e.data)));
} else i.listUpdate === C0.LIST_UPDATE_ITEM_REMOVED && r.timeout(o, (() => {
a?.delete(o);
}), 5e3);
}))), [ n, t, e, r ]);
}
var A0 = fm.FriendsNotificationsService.ListUpdate;
function L0() {
const e = sE(), t = dp();
return H.useCallback((n => nl((() => {
const r = n.friendInviteDetails.entity.id.playerId.id, i = e.get().data;
n.listUpdate === A0.LIST_UPDATE_ITEM_ADDED || n.listUpdate === A0.LIST_UPDATE_ITEM_UPDATED ? (t.disposeTimeout(r), 
i?.set(r, $Z(n.friendInviteDetails))) : n.listUpdate === A0.LIST_UPDATE_ITEM_REMOVED && t.timeout(r, (() => {
nl((() => {
i?.delete(r);
}));
}), 5e3);
}))), [ e, t ]);
}
var w0 = fm.FriendsNotificationsService.SubscriptionType;
function k0() {
const e = bI();
return H.useCallback(((t, n) => {
e(t, 1e4)?.then((() => {
n();
}));
}), [ e ]);
}
function R0() {
const {FriendsNotificationsService: e} = Tm(), t = ol(), n = gv(), r = E0(), i = v0(), o = O0(), a = L0(), s = N0(), l = k0(), c = t.get(PS).get(), d = t.get(lS).get(), u = t.get(Aw).get(), p = t.get(iE).get(), f = t.get(aE).get(), h = CF((async () => e.StreamNotifications({
entityId: {
playerId: {
id: n
}
},
subscriptionTypes: [ w0.SUBSCRIPTION_TYPE_BLOCK_LIST, w0.SUBSCRIPTION_TYPE_FRIEND_LIST, w0.SUBSCRIPTION_TYPE_MUTE_LIST, w0.SUBSCRIPTION_TYPE_RECEIVED_INVITE_LIST, w0.SUBSCRIPTION_TYPE_SENT_INVITE_LIST ]
})), [ e, n ], Jb), m = b0(H.useCallback((async e => {
try {
for (const t of e) {
const {friendListNotification: e, blockListNotification: n, muteListNotification: h, sentInviteListNotification: m, receivedInviteListNotification: g} = t;
e && l(c, (() => {
r(e);
})), n && l(d, (() => {
i(n);
})), h && l(u, (() => {
o(h);
})), m && l(f, (() => {
a(m);
})), g && l(p, (() => {
s(g);
}));
}
} catch (e) {
console.error("Failed to handle friends notification", e);
}
}), [ d, i, c, r, u, o, s, p, a, f, l ]), 500);
var g, y, I, _;
g = h.data?.stream, y = Mb, I = m, H.useEffect((() => {
if (g) {
const e = new ab(g, y), t = e.data.subscribe(I), n = e.error.subscribe((e => {
console.error("Stream error", e), _?.(e);
}));
return e.start(), () => {
t(), n(), e.close();
};
}
}), [ I, _, y, g ]), YQ(h.data?.stream, H.useCallback((() => h.fetch?.()), [ h ])), 
zb("FriendsNotificationsService.StreamNotifications", h.data?.stream);
}
var x0 = class {
constructor(e) {
this.toItemId = e, this.previousItemIds = new Set, this.withChangedItems = (e, t) => {
const n = [], r = new Set;
e.forEach((e => {
const t = this.toItemId(e);
r.add(t), this.previousItemIds.has(t) || n.push(e);
}));
const i = Array.from(this.previousItemIds.values()).filter((e => !r.has(e)));
(n.length || i.length) && (this.rememberItems(n), this.forgetItemIds(i), t({
addedItems: n,
removedItemIds: i
}));
}, this.resetItems = () => {
this.previousItemIds.clear();
};
}
rememberItems(e) {
e.forEach((e => {
this.previousItemIds.add(this.toItemId(e));
}));
}
forgetItemIds(e) {
e.forEach((e => {
this.previousItemIds.delete(e);
}));
}
};
var B0 = Sl({
debugName: "onlineFriendsFilterPlayersState",
get: function({get: e}) {
const t = e(pA).data, n = new Set;
t?.[0]?.forEach((e => {
const t = p_(e.photonPlayerId);
c_(t) && n.add(t);
}));
const r = e(b_), i = [];
return n.forEach((e => {
const {eaPlayerId: t, playerNetworkId: n} = s_(e), o = r.getMaybeUntracked(e)?.data?.personaId;
t && o && i.push({
playerId: t,
playerNetworkId: n,
personaId: o
});
})), i;
}
});
function D0() {
const e = ol();
return {
addUninvitable: H.useCallback((t => {
const n = new Map(e.getUntracked(kC));
t.forEach((e => {
n.set(e.photonPlayerId, {
uninvitable: !0,
reason: e.reason
});
})), e.set(kC, n);
}), [ e ]),
removeUninvitable: H.useCallback((t => {
const n = new Map(e.getUntracked(kC));
t.forEach((e => {
n.delete(e);
})), e.set(kC, n);
}), [ e ]),
resetUninvitable: H.useCallback((() => {
e.reset(kC);
}), [ e ])
};
}
function F0(e) {
return {
photonPlayerId: o_({
eaPlayerId: e.playerId,
playerNetworkId: e_(e.playerNetworkId)
}),
reason: e.localizedReason
};
}
var M0 = () => {
const {PhotonInvite: e} = Tm(), t = ol(), {addUninvitable: n, removeUninvitable: r, resetUninvitable: i} = D0(), o = H.useCallback((async () => {
if (nl((() => t.getUntracked(DO).get().data))) {
const r = t.getUntracked(B0), o = await e.filterUninvitablePlayers({
players: r
});
fr((() => {
i(), o && n(o.uninvitablePlayers.map(F0));
}));
}
}), [ n, e, t, i ]);
H.useEffect((() => e.onUninvitablePlayersChanged.subscribe(o)), [ e.onUninvitablePlayersChanged, o ]);
const a = H.useCallback((async (t, i) => {
const o = t.length ? await e.filterUninvitablePlayers({
players: t
}) : void 0;
fr((() => {
o && n(o.uninvitablePlayers.map(F0)), r(i);
}));
}), [ n, e, r ]), s = H.useCallback((e => o_({
eaPlayerId: e.playerId,
playerNetworkId: e_(e.playerNetworkId)
})), []), {withChangedItems: l, resetItems: c} = (d = s, H.useRef(new x0(d)).current);
var d;
Il((({get: e}) => {
const t = e(B0);
e(DO).get().data ? l(t, (({addedItems: e, removedItemIds: t}) => {
a(e, t);
})) : (c(), i());
}), [ c, i, a, l ]);
}, U0 = Sl({
debugName: "onlineFriendCountState",
get: function({get: e}) {
const t = e(pA), n = t.data?.[0].length;
return {
...t,
data: t.data ? n : void 0
};
}
});
function H0() {
const e = Tm();
sl((({data: t}) => {
e.hasMethod("Badging", "updateOnlineFriendCount") && void 0 !== t && e.Badging.updateOnlineFriendCount({
onlineFriendCount: t
});
}), [ e ], U0);
}
function V0() {
const e = ol(), t = av();
H.useEffect((() => cE((() => e.get(pA).data && e.get(iE).get().data && e.get(aE).get().data), (() => {
ME(t, {
pg_id: "game_boot_friends_info",
msg_id: "game_boot_friends_info"
});
}))), [ e, t ]);
}
var J0 = Ii.observer((({children: e}) => (R0(), M0(), m0(), H0(), V0(), H.createElement(p0, null, H.createElement(h0, null, H.createElement(l0, null, H.createElement(_0, null, H.createElement(Px, null, H.createElement(n0, null, H.createElement(QZ, null, e)))))))))), G0 = "retries";
function z0(e, t) {
const n = t?.maxRetries ?? 2, r = t?.delay ?? 2e3, i = H.useRef(0), {timeout: o, disposeTimeout: a} = dp(), {data: s, error: l, fetch: c} = e;
return H.useEffect((() => (l && i.current < n ? (o(G0, (() => {
c?.();
}), r), i.current += 1) : s && (i.current = 0), () => {
a(G0);
})), [ a, n, o, l, s, c, r ]), e;
}
function j0(e) {
const {sessionNotification: t} = e, {properties: n} = t, r = e_(t.client?.playerNetworkId), i = bs(t.client?.devicePlatformId), o = i_({
eaPlayerId: e.playerId.id,
playerNetworkId: r
}), a = {
sessionId: t.presenceSessionId,
isOnline: !!t.online,
devicePlatformId: i,
photonPlayerId: o,
photonSessionId: u_(o, t.presenceSessionId),
playerNetworkId: r,
isEAPresence: !0,
gameJoinTokenTypes: t.gameJoinTokenTypes,
isMissingClientInfo: !t.client?.playerNetworkId?.id,
updated: t.updated
};
return t.inputTypes && (a.inputType = gH(t.inputTypes)), void 0 !== t.joinable && (a.joinable = t.joinable), 
e.lastSeenOnline && (a.lastSeenOnline = e.lastSeenOnline.seconds), t.updateTimestamp && (a.updateTimestamp = t.updateTimestamp.seconds), 
t.client?.productId?.id && (a.productId = t.client.productId.id), t.client?.locale && (a.locale = t.client.locale.toLowerCase().replace("_", "-")), 
t.activityDescription && (a.activityDescription = t.activityDescription), t.activityDetails && (a.activityDetails = t.activityDetails), 
n && (a.properties = {}, a.properties.currentPartySize = n.photon_currentPartySize?.integerValue, 
a.properties.maxPartySize = n.photon_maxPartySize?.integerValue, a.properties.partyJoinable = n.photon_partyJoinable ? !!n.photon_partyJoinable.integerValue : void 0, 
a.properties.currentLobbySize = n.photon_currentLobbySize?.integerValue, a.properties.maxLobbySize = n.photon_maxLobbySize?.integerValue, 
a.properties.lobbyJoinable = n.photon_lobbyJoinable ? !!n.photon_lobbyJoinable.integerValue : void 0, 
a.properties.crossplayEnabled = 0 !== n.photon_crossplayEnabled?.integerValue, a.properties.lobbyCrossplayEnabled = n.photon_lobbyCrossplayEnabled ? 1 === n.photon_lobbyCrossplayEnabled.integerValue : void 0, 
a.properties.partyCrossplayEnabled = n.photon_partyCrossplayEnabled ? 1 === n.photon_partyCrossplayEnabled.integerValue : void 0, 
a.properties.status = n.photon_status?.stringValue), a;
}
function q0(e, t) {
return (e.updateTimestamp ?? 0) < (t.updateTimestamp ?? 0);
}
var Y0 = e => `${e.isEAPresence}:${e.devicePlatformId}:${e.productId}:${e.photonPlayerId}`;
function W0(e) {
if (e.length < 2) return e;
const t = [], n = new Map, r = [];
for (const i of e) if (i.isEAPresence) {
const e = Y0(i), r = n.get(e);
r && !q0(r, i) || (r && i.sessionId !== r.sessionId && t.push(r.sessionId), n.set(e, i));
} else r.push(i);
return [ ...Array.from(n.values()), ...r ];
}
function K0(e) {
return e ? Object.values(e) : [];
}
function X0(e, t, n) {
const r = t.data, i = e.getUntracked(v_);
r ? n.forEach((e => {
var t;
if (e.sessionId) if (e.isOnline) {
let n = r.get(e.photonPlayerId) ?? {};
e.isEAPresence ? (t = W0([ ...K0(n), e ]), n = Object.fromEntries(t.map((e => [ e.sessionId, e ])))) : n = {
...n,
[e.sessionId]: e
}, r.set(e.photonPlayerId, n);
} else {
const t = Array.from(r?.entries()).find((([, t]) => t[e.sessionId]));
let n = !1;
if (t) {
const [i, o] = t;
n = o[e.sessionId]?.isOnline ?? !1;
const a = {
...o
};
delete a[e.sessionId], Object.keys(a).length > 0 ? r.set(i, a) : r.delete(i);
}
const {eaPlayerId: o} = s_(e.photonPlayerId);
n && o && E_(i, {
eaPlayerId: o,
mostRecentlyLoggedInPersonaDate: Math.floor(Date.now() / 1e3)
});
}
})) : t.update({
...t.toProps(),
data: nT(W0(n))
});
}
function Q0(e, t, n) {
nl((() => {
n.uninitialized && n.update({
loading: !0,
uninitialized: !1
});
}));
const r = CI(new DI(e, 1e3, 2e3), {
onStreamData: e => {
nl((() => t(n, e)));
},
onStreamError: e => {}
}), i = setTimeout((() => {
nl((() => {
n.loading && t(n, []);
}));
}), 3e3);
return () => {
clearTimeout(i), r();
};
}
var $0 = e => {
const {PresenceSession: t} = Tm(), n = ol();
H.useEffect((() => () => {
t.detachFromPresenceSession({});
}), [ t ]);
const r = CF((() => t.attachToPresenceSession({})), [ t ], mH), i = oT();
return H.useEffect((() => {
r.error && i.get().update({
error: r.error,
loading: !1,
uninitialized: !1
});
}), [ r.error, i ]), z0(CF((() => t.subscribeToFriendsPresence({})), [ t ], aH, {
queryIsReady: !!r.data
})), zb("presenceSession.attachToPresenceSession", r.data?.stream), H.useEffect((() => {
if (r.data?.stream) return Q0(new ab(r.data?.stream, fH, (e => j0(e.presenceNotification))), e, i.get());
}), [ r, e, n, i ]), H.useEffect((() => Q0(i.firstPartyPresenceStream, ((e, t) => {
t.length && (X0(n, e, t), e.data || e.update({
...e.toProps()
}));
}), i.get())), [ n, i.firstPartyPresenceStream, i, e ]), !!r.data;
};
function Z0(e, t) {
return !(!Fs.playerListsEnabled || !c_(t)) && e.getItemUntracked(rN, t);
}
var e1 = (e, t) => !!e.getItemUntracked(nE, t).data, t1 = (e, t, n) => {
if (!n.updated) return;
const r = _E(e, n.photonPlayerId);
if (r) {
const r = HS(e, t, n.photonPlayerId, n.photonSessionId);
if ("DOWN_TO_PLAY" === n.properties?.status && "DOWN_TO_PLAY" !== r?.properties?.status) return 3;
if (n.isOnline && (!r?.isOnline || "DO_NOT_DISTURB" === r.properties?.status)) return 2;
}
if (n.isOnline && !HS(e, t, n.photonPlayerId, void 0)?.isOnline) {
if (r) return 2;
if (!e.getItemUntracked(hA, n.photonPlayerId).data) return e1(e, n.photonPlayerId) ? 0 : Z0(e, n.photonPlayerId) ? 1 : void 0;
}
};
function n1(e) {
const t = new Map;
for (const n of e) t.set(n.sessionId, n);
return Array.from(t.values());
}
var r1 = Ii.observer((({children: e}) => {
const t = qY(), n = S_(), r = ol(), i = bI(), o = H.useCallback(((e, o) => {
const a = e.data, s = e.loading || e.uninitialized;
s || (o = n1(o));
let l = 0;
for (const e of o) if (!s) {
const o = t1(r, a, e);
if (void 0 !== o) {
if (l++, 10 === l) break;
i(n.get(e.photonPlayerId), 1e4)?.then((({data: n}) => {
n && t.trigger(e, n, {
playerType: o
});
}));
}
}
X0(r, e, o), s && e.update({
...e.toProps(),
loading: !1,
uninitialized: !1
});
}), [ r, i, n, t ]), a = $0(o);
return DH(a), PH(a), H.createElement(H.Fragment, null, e);
})), i1 = J_.object({
teamId: J_.string,
playerId: J_.string,
playerNetworkId: J_.string,
timestamp: J_.number
}, {
primaryContext: J_.string,
secondaryContext: J_.string
}), o1 = J_.object({
teamId: J_.string,
playerId: J_.string,
playerNetworkId: J_.string
}, {
timestamp: J_.number,
primaryContext: J_.string,
secondaryContext: J_.string
}), a1 = J_.object({
encounters: J_.array(i1)
}), s1 = J_.object({
encounters: J_.array(o1)
});
function l1(e, t, n) {
const r = {}, i = n.encounters.map((e => {
const t = e_(e.playerNetworkId);
ZI(e.playerNetworkId) || (r[e.playerId] = e.playerNetworkId);
const n = i_({
eaPlayerId: e.playerId,
playerNetworkId: t
});
return [ n, {
...e,
photonPlayerId: n,
playerNetworkId: t,
displayName: "",
displayNameLowerCase: ""
} ];
}));
return kv(e, t, "Invalid PlayerNetworkIds passed to RecentlyMet", r), i;
}
function c1(e, t, n) {
return () => {
const r = S_(), i = SI(), {RecentlyMet: o} = Tm(), a = e(), s = gv(), l = $p().bindings, c = aI();
H.useEffect((() => a.setOnDemandStrategy({
fetch: async () => pI(await t(o, s, l, c)),
maxAge: 3e4,
updater: async (e, t) => {
const o = t.data, a = [];
if (o) {
const e = o.map((([e]) => e));
await i(r.getByIds(e), 8e3), nl((() => {
for (const e of o) {
const [t, n] = e, i = r.get(t).data;
i && (n.displayName = i.displayName, n.displayNameLowerCase = i.displayName.toLowerCase(), 
a.push(e));
}
}));
}
nl((() => {
fr((() => {
e.data && e.data.replace(a), e.update({
...t,
data: e.data || new Vx(a, n)
});
}));
}));
}
})), [ i, a, r, o, s, l, c ]), ll((e => {
if (!e) {
const e = a.getMaybeUntracked();
return e?.onBecomeUnobserved((() => {
e.invalidateTimestamp();
}));
}
}), [ a ], hm, !1);
};
}
var d1 = c1(HA, ((e, t, n, r) => j_((() => e.getRecentlyMetPlayers({
playerId: t
})), a1, {
transformResponse: e => l1(n, r, e)
})), (function(e, t) {
return t.timestamp - e.timestamp;
})), u1 = c1(MA, ((e, t, n, r) => j_((() => e.getSessionPlayers({
playerId: t
})), s1, {
transformResponse: e => l1(n, r, e)
})), xj), p1 = e => (d1(), u1(), H.createElement(H.Fragment, null, e.children)), f1 = class extends as {
constructor(e) {
super({
data: e
});
}
};
function h1(e, t) {
return CI(new f1(e), t);
}
function m1() {
const e = S_(), t = SI();
return H.useCallback((async n => {
const r = n.map((e => e.photonPlayerId));
return await t(e.getByIds(r), 8e3), nl((() => n.filter((t => !!e.get(t.photonPlayerId)?.data))));
}), [ t, e ]);
}
function g1(e, t) {
const n = e.getUntracked(jC);
fr((() => {
nl((() => n.clear())), t.forEach(((e, t) => {
n.set(e.id, {
...e,
index: t
});
}));
}));
}
function y1(e, t) {
return t.personas.length > 100 ? (e.get(zh).bindings.Utilities.showError({
message: `PlayerList: too many personas (${t.personas.length}/100) in list '${t.playerListId}'`
}), t.personas.slice(0, 100)) : t.personas;
}
async function I1(e, t, n) {
const r = y1(e, t).map(((e, t) => ({
...e,
photonPlayerId: o_({
eaPlayerId: e.playerId,
playerNetworkId: e_(e.playerNetworkId)
}),
icons: new Set(e.icons),
index: t
}))), i = await n(r), {data: o} = e.getItemUntracked(qC, t.playerListId), a = o ?? new Zs([], "OptimizedObservableMap<playerListPersonas>");
fr((() => {
nl((() => a.clear())), i.forEach((e => {
a.set(e.photonPlayerId, e);
})), e.setItem(qC, t.playerListId, {
loading: !1,
data: a
});
}));
}
async function _1(e, t) {
const n = await t.getPlayerListConfig({});
n && e.set(zC, n.playerList);
}
function b1(e, t) {
const n = e.get(zC);
n && e.set(zC, {
...n,
emptyState: t
});
}
async function S1(e, t, n) {
const r = await t.getPlayerLists({});
r?.playerLists && (g1(e, r.playerLists), await Promise.all(r.playerLists.map((async ({id: r}) => {
const i = e.getItemUntracked(qC, r);
e.setItem(qC, r, {
...i,
loading: !0
});
const o = await t.getPlayerListPersonas({
playerListId: r
});
o && await I1(e, o, n);
}))));
}
var v1 = () => {
const e = ol(), {showNotification: t} = bO(), n = hv().personaInfo.playerNetworkId, r = H.useRef(!0);
H.useEffect((() => {
if (Fv() && !VS()) return Dn((() => Uv(e)), (e => {
if (e) {
const i = LS.isFirstPartyAppearOfflineSupported ? "tst_online_status_synced" : "tst_online_status_asynced";
t(0, 0, {
icon: ih.INFORMATION,
text: Vv(n, e, r.current)
}, {
telemetryInfo: {
pg_id: r.current ? i : "tst_online_status"
}
});
}
r.current = !1;
}), {
fireImmediately: !0
});
}), [ t, e, n ]);
};
function T1(e, t) {
switch (e) {
case "ONLINE":
return Em("PHOTON-SOCIAL_TOAST_STATUS_UPDATE_BODY", {
"%onlineOrOffline%": Em("PHOTON-SOCIAL_PRESENCE_ONLINE")
});

case "DOWN_TO_PLAY":
return t ? Em("PHOTON-SOCIAL_TOAST_STATUS_UPDATE_BODY", {
"%onlineOrOffline%": Em("PHOTON-SOCIAL_PRESENCE_ONLINE")
}) : Em("PHOTON-SOCIAL_NOTIFICATION_STATUS_CONFIRMATION_DESC");

case "DO_NOT_DISTURB":
return Em(t ? "PHOTON-SOCIAL_NOTIFICATION_STATUS_DO-NOT-DISTURB_CONFIRMATION" : "PHOTON-SOCIAL_NOTIFICATION_STATUS_CONFIRMATION_BUSY_DESC");

case "APPEAR_OFFLINE":
return Em("PHOTON-SOCIAL_TOAST_STATUS_UPDATE_BODY", {
"%onlineOrOffline%": Em("PHOTON-SOCIAL_PRESENCE_OFFLINE")
});

default:
Xs("Unknown user status: " + e);
}
}
var E1 = () => {
const e = ol(), {showNotification: t} = bO(), n = H.useRef(!0);
H.useEffect((() => {
if (VS()) return Dn((() => e.get(jS)), (e => {
e && (t(3, 3, {
icon: ih.INFORMATION,
text: T1(e, n.current)
}), n.current = !1);
}), {
fireImmediately: !0
});
}), [ e, t ]);
};
function P1() {
const e = fk(), {ContentMart: t} = Tm();
H.useEffect((() => e.init(t)), [ t, e ]);
}
var O1 = e => {
if (!Fv()) return {};
const t = Uv(e);
let n;
return n = LS.isFirstPartyAppearOfflineSupported ? t ? "offline_sync" : "online_sync" : t ? "offline" : "online", 
{
presence: n
};
};
function C1(e) {
const t = e.get(aE).get().data?.size, n = e.get(iE).get().data?.size, r = e.get(vx).get("FriendRequests")?.getUnseenCount();
return {
freqs_rcvd: n,
freqs_rcvd_unseen: r,
freqs_sent: t
};
}
function N1(e, t) {
const n = e.get(CS).data, r = new Set(n?.map((e => e.eaPlayerId))), i = e.get(yE).get().data, o = r.size, a = i?.size ?? 0;
if ("EA" === t) return {
frnds_ea: o,
frnds_loc: o,
frnds_loc_ea: o,
favs_loc_ea: a,
favs_ea: a
};
const s = e.get(NS).data, l = s?.length;
let c = 0, d = 0, u = 0;
if (i?.size) {
const e = new Set(s?.map((e => e.eaPlayerId)));
for (const t of i.keys()) e.has(t) ? ++u : ++d;
}
for (const e of s ?? []) c += r.has(e.eaPlayerId) ? 1 : 0;
return {
frnds_ea: o,
frnds_loc: l,
frnds_loc_ea: c,
favs_loc_ea: u,
favs_ea: d
};
}
function A1(e, t) {
const n = e.get(pA).data, r = e.get(yE).get().data, i = n?.[0], o = new Map;
let a = 0, s = 0, l = 0, c = 0, d = 0, u = 0;
if (i) for (const e of i) {
const {eaPlayerId: n, firstPartyPlayerId: i, playerNetworkId: p} = s_(e.photonPlayerId), f = n || i;
if (f) {
let e = o.get(f) ?? 0;
o.set(f, ++e), 2 === e && ++a;
}
p === t ? ++s : ++l, e.presence.productId === Fs.productId ? ++c : e.presence.productId && ++d, 
n && r?.get(n) && ++u;
}
return {
favs_on: u,
frnds_on: o.size,
frnds_on_mpop: a,
pop_on: i?.length,
pop_on_same: s,
pop_on_other: l,
pop_on_cur_gm: c,
pop_on_oth_gms: d
};
}
function L1(e, t, n) {
const r = e.get(DO).get().data;
return {
gmplay: !!t,
xplay_opt: e.get(OC),
xplay_supp: r?.crossPlayEnabled,
lobby: r ? `${n}_${r.telemetryType}` : void 0,
lobby_rem: r ? r.maxSize - r.members.size : void 0
};
}
function w1(e) {
return {
blocked: e.get(lS).get().data?.size ?? 0,
muted: e.get(Aw).get().data?.size ?? 0
};
}
var k1 = (e, t, n, r) => {
let i, o, a = t.Notifications.getInGamePlay({})?.inGamePlay;
n.setGetCustomCoreHeaders((() => nl((() => ({
...i,
...o,
...C1(e),
...w1(e),
...L1(e, a, Fs.productId),
...O1(e)
})))));
const s = t.Notifications.onInGamePlayChanged.subscribe((e => {
a = e.inGamePlay;
})), l = Dn((() => N1(e, r)), (e => {
i = e;
}), {
delay: 1e4,
fireImmediately: !0
}), c = Dn((() => A1(e, r)), (e => {
o = e;
}), {
delay: 1e4,
fireImmediately: !0
});
return () => {
s(), l(), c();
};
};
function R1(e) {
return [ e.get(PS).get(), e.get(SS).get(), e.get(aE).get(), e.get(iE).get(), e.get(Qk).get(), e.get(iT).get(), e.get(lS).get(), e.get(zQ).get(), e.get(Aw).get() ];
}
function x1(e) {
const t = e.get(CS).data;
return {
eaFriends: (t && new Set(t.map((e => e.eaPlayerId))))?.size ?? -1,
eaFriendPersonas: t?.length ?? -1,
firstPartyFriends: e.get(SS).get().data?.size ?? -1,
sentFriendRequests: e.get(aE).get().data?.size ?? -1,
receivedFriendRequests: e.get(iE).get().data?.size ?? -1,
gameInvites: e.get(Qk).get().data?.size ?? -1,
playerCards: e.get(b_).size,
recentlyMet: e.get(UA).getMaybeUntracked()?.data?.size ?? -1,
sessionPlayers: e.get(FA).getMaybeUntracked()?.data?.size ?? -1,
presence: e.get(iT).get().data?.size ?? -1,
blockedPlayers: e.get(lS).get().data?.size ?? -1,
firstPartyBlockedPlayers: e.get(zQ).get().data?.size ?? -1,
mutedPlayers: e.get(Aw).get().data?.size ?? -1
};
}
function B1() {
const e = $p(), t = ol(), n = aI(), r = gA(), i = SI();
H.useEffect((() => {
if (is.TwinkleNative && e.bindings.hasMethod("Metrics", "getJsMemoryUsage")) {
const o = Date.now();
let a, s = !0;
const l = async () => {
const i = await e.bindings.Metrics.getJsMemoryUsage({});
nl((() => {
n.addEvent({
eventType: "photon_js_engine_memory_usage",
timeSinceStart: Date.now() - o,
layerOpen: r.isRevealed,
...x1(t),
...i
});
})), s && (a = setTimeout(l, 3e5));
};
return i(R1(t), 1e4)?.then((() => {
s && l();
})), () => {
s = !1, a && clearTimeout(a);
};
}
}), [ e, t, n, r, i ]);
}
var {locale: D1} = Fs, F1 = 0, M1 = !1, U1 = Sl({
debugName: "telemetryExpInfo",
get: function({get: e}) {
const t = e(YT).fragment.data, n = [];
return t?.forEach((e => {
n.push({
exp_id: e.experimentId + "",
variant_id: e.variantId + "",
variant_name: e.variantName,
source: "eadp_exp_plat"
});
})), n;
}
});
function H1() {
const e = Tm(), t = av(), n = aI();
H.useEffect((() => {
const r = e => {
F1 = Date.now(), t.updateSessionId(), t.triggerBootStart({
status: "success",
player_status: "online",
source: e ?? "unknown"
});
}, i = e => {
t.triggerBootEnd({
end_reason: e ?? "normal",
sdur: F1 > 0 ? Math.floor((Date.now() - F1) / 1e3) : void 0
}), t.flushQueue(), n.flushQueue();
}, o = e.Telemetry.getTelemetryAllowed({})?.status ?? !0;
t.setTelemetryEnabled(o), n.setMetricsEnabled(o), M1 || (M1 = !0, r());
const a = [ e.Telemetry.onBootStart.subscribe((async () => {
r();
const t = await e.PlatformPresence.isAppearOffline({});
n.addEvent({
eventType: "photon_boot_start",
status: "source_update",
player_status: t?.appearOffline ? "offline" : "online"
});
})), e.Telemetry.onBootEnd.subscribe((() => i())), e.Telemetry.onTelemetryAllowChanged.subscribe((async e => {
e.status ? r("opt_in_tel") : i("opt_out_tel"), await Promise.all([ t.flushQueue(), n.flushQueue() ]), 
t.setTelemetryEnabled(e.status), n.setMetricsEnabled(e.status);
})) ];
return () => {
a.forEach((e => e())), i();
};
}), [ n, e, t ]);
}
var V1 = Ii.observer((({children: e}) => {
const t = hv(), n = av(), r = Tm(), i = ol(), {Telemetry: o} = r, a = dl(U1);
return H.useEffect((() => {
const e = {
platform: Ik(t.personaInfo.devicePlatformId),
playerNetworkId: t.personaInfo.playerNetworkId,
personaId: t.personaInfo.personaId,
nucleusId: t.tokenInfo.userId,
versionNumber: "main_53810",
locale: D1,
expInfo: a
}, s = [], l = o.getSessionHeaderInfo({})?.sessionHeader;
return l && (n.updateSessionInfo({
...l,
...e
}), s.push(k1(i, r, n, t.personaInfo.playerNetworkId))), r.hasEvent("Telemetry", "onSessionHeaderInformationChanged") && s.push(o.onSessionHeaderInformationChanged.subscribe((({updatedHeader: t}) => {
n.updateSessionInfo({
...t,
...e
});
}))), () => {
s.forEach((e => e()));
};
}), [ o, a, i, r, n, t ]), DE(), H1(), B1(), H.createElement(H.Fragment, null, e);
})), J1 = fm.StateApi.State, G1 = () => {
const e = pl(mm), {StateApi: t} = Tm(), {closeAllModals: n} = CE(), r = QS("main"), i = QS("overlay"), o = im(), a = BE(), s = kh();
H.useEffect((() => {
const l = t.getState({});
l && e(l.state);
return t.onStateChanged.subscribe((({newState: t}) => {
e(t), t === J1.Closed && (s.resetFocusState(), o.resetPressed(), a.withDisabledEvents((() => {
r.navigate($g.link()), i.navigate($S.link()), n();
})));
}));
}), [ t, r, n, i, s, o, e, a ]);
}, z1 = fm.InputBindings.Action, j1 = Qc({
position: "absolute",
top: 0,
bottom: 0,
left: 0,
right: 0
}), q1 = class extends H.Component {
constructor() {
super(...arguments), this.state = {
hasError: !1
};
}
static getDerivedStateFromError() {
return {
hasError: !0
};
}
componentDidCatch(e) {
this.props.onError?.(e);
}
render() {
return this.state.hasError ? H.createElement("surface", {
style: _u,
text: Em("PHOTON-SOCIAL_PAGE-ERROR_TITLE_GENERIC")
}) : this.props.children || null;
}
}, Y1 = () => {}, W1 = H.memo((({providers: e, children: t}) => H.createElement(H.Fragment, null, e.reduceRight(((e, t) => H.createElement(t, null, e)), t)))), K1 = [ gN, th ].concat(function(e) {
const t = [];
return e.forEach((e => {
Object.keys(e).forEach((n => {
const r = e[n];
switch (typeof r) {
case "string":
t.push(r);
break;

case "object":
t.push(...Object.keys(r).map((e => r[e])));
}
}));
})), t;
}([ iJ, ah, (e => {
switch (e) {
case "XBOXONE":
case "XBSX":
return od;

case "PS4":
case "PS5":
return ud;

case "NX":
return sd;

default:
return yd;
}
})(Fs.devicePlatformId), oh, Dd, wf, lh, ih, Kf, ph ])), X1 = Ii.observer((({onJsError: e}) => {
const {isMounted: t, opacityTween: n, scaleTween: r} = GX(), {rootStyle: i, contentStyle: o} = lf(), a = vf();
DN(), yh();
const s = aI(), l = ol();
H.useEffect((() => (s.addSessionEvent("app_started"), hr((() => l.get(hm)), (() => s.addSessionEvent("app_opened"))))), [ l, s ]);
const c = gA();
return HL({
action: z1.TogglePhoton,
callback: c.toggle
}), H.createElement("surface", {
style: i
}, false, t && H.createElement(VN, {
type: 0,
opacityTween: n,
key: "layer-background"
}), H.createElement("surface", {
style: [ o, a ]
}, H.createElement(RX, null), t && H.createElement("surface", {
style: [ j1, r.propStyle("scaleX"), r.propStyle("scaleY"), n.propStyle("opacity") ]
}, H.createElement(q1, {
onError: e
}, H.createElement(FX, null))), H.createElement(z$, null)));
})), Q1 = [ ({children: e}) => {
const t = WT();
return zX(t), H.createElement(H.Fragment, null, e);
}, XL, ({children: e}) => {
const t = OB(), n = YL(), r = H.useMemo((() => ({
2: n[z1.Primary],
3: n[z1.Decline],
0: n[z1.NextPage],
1: n[z1.PreviousPage],
4: n[z1.NotificationFocus],
5: n[z1.GoUp],
6: n[z1.GoDown]
})), [ n ]);
return H.createElement(bf, {
playSoundEffect: t,
actionKeyBindings: r,
initialRTL: of()
}, e);
}, e => {
const t = kh();
return H.useEffect((() => t.init()), [ t ]), H.createElement(Ll.Provider, {
value: t
}, H.createElement(Tp.Provider, {
value: t.defaultNavigation
}, H.createElement(Nh, {
id: t.rootBoundaryId
}, e.children)));
}, ({children: e}) => {
const t = YL(), n = H.useMemo((() => ({
left: t[z1.GoLeft],
right: t[z1.GoRight],
down: t[z1.GoDown],
up: t[z1.GoUp]
})), [ t ]);
return H.createElement(om, {
navigationConfig: n
}, e);
}, ({children: e}) => {
const t = Tm(), n = ol(), r = m1();
return H.useEffect((() => {
if (!Fs.playerListsEnabled) return;
let e;
_1(n, t.PlayerList), t.hasEvent("PlayerList", "onPlayerListEmptyStateChanged") && (e = h1(t.PlayerList.onPlayerListEmptyStateChanged, {
onStreamData: e => {
b1(n, e.emptyState);
}
})), S1(n, t.PlayerList, r);
const i = h1(t.PlayerList.onPlayerListsChanged, {
onStreamData: e => {
g1(n, e.playerLists);
}
}), o = h1(t.PlayerList.onPlayerListPersonasChanged, {
onStreamData: async e => {
await I1(n, e, r);
}
});
return () => {
e?.(), i(), o();
};
}), [ r, n, t ]), H.createElement(H.Fragment, null, e);
}, V1, ({children: e}) => {
const t = H.useRef(!0), [n, r] = [ pl(i = Dh), gl(i) ];
var i;
const o = H.useCallback((e => {
n((t => {
const n = t.slice();
return e.forEach((e => {
const t = n.indexOf(e);
t > -1 && n.splice(t, 1);
})), n;
}));
}), [ n ]), a = H.useCallback((e => (t.current && n((t => [ ...t, ...e ])), () => t.current && o(e))), [ o, n ]);
H.useEffect((() => () => {
t.current = !1, r();
}), [ r ]);
const s = H.useMemo((() => ({
preloadImages: a
})), [ a ]);
return H.createElement(Fh.Provider, {
value: s
}, H.createElement(Vh, null), e);
}, ({children: e}) => {
const t = ol(), n = hv(), r = fP(), i = WT();
return H.useEffect((() => hr((() => i.isReady), (() => {
r.init(n.tokenInfo.userId, n.photonPlayerId, $T(t, "fo_0", "FriendOnline"));
}))), [ r, t, n, i ]), H.createElement(H.Fragment, null, e);
}, ({children: e}) => H.createElement(H.Fragment, null, e), VQ, ({children: e}) => (P1(), 
H.createElement(H.Fragment, null, e)), ({children: e}) => H.createElement(r1, null, H.createElement(J0, null, H.createElement(p1, null, e))), ({children: e}) => H.createElement(qF, null, H.createElement(_F, null, e)), ({children: e}) => (_$(), 
g$(), H.createElement(d$, null, e)), ({children: e}) => Fs.isPartyEnabled ? H.createElement(WZ, null, H.createElement(DZ, null, H.createElement(YZ, null, e))) : H.createElement(H.Fragment, null, e), ({children: e}) => Fs.isTightlyCoupledParties ? H.createElement(H.Fragment, null, e) : H.createElement(v$, null, e), e => (G1(), 
v1(), E1(), UQ(), XZ(), JN(), T$(), Am(), mQ(), Gh(K1), e.children) ];
((e, t = []) => {
return n = {
roundedRectUrl: gN,
fullscreenResample: {
enable: !1,
width: Vc(1920),
height: Vc(1080)
},
createOnErrorCallback: (e, t) => (n, r) => {
r.message = n + ": " + r.message, lI(e, r), t(n, r);
},
isAcceptableNativeError: (e, t) => !Lv.DeveloperMode(e.bindings.Utilities) && (t.msg.startsWith("http error status=0") || t.msg.startsWith("Http error, response empty")),
async onStart(n, r) {
const i = new rl;
i.addExternalSingletonState(zh, n);
const o = i.get(oI);
n.bindings.Telemetry.sendTelemetryEvent.subscribe((e => {
if (e.httpRequestCompleteEvent) {
const {url: t, statusCode: n, requestCompletionDurationMs: r, requestQueueDurationMs: i} = e.httpRequestCompleteEvent;
_N(t) || o.addEvent({
eventType: "photon_http_request",
url: t,
status_code: n,
duration: r,
queue: i
});
} else e.noPublicKeyProvidedEvent && o.addEvent({
eventType: "photon_script_engine",
event: "no_public_key_provided"
});
}));
const a = i.get(xm);
await Mm(0, KS, a, yN), Zc(n.bindings.Surface, [ bu ]), n.bindings.Surface.updateSurface({
surfaceId: "<TwinkleLayout::defaultSurface>",
surface: {
alignContent: "stretch",
textureFadeInTime: .3,
textureFadeInCutoff: .01,
textureFadeInEasing: "CubicOut",
styleObjects: [ bu ]
}
});
const s = [ pu, fu, hu, mu ], l = uu, c = await Rm(n, s, l), d = 0 === c.length, u = Lv.TranslationHost(n.bindings.Utilities), p = new Ov(n.nativeApi, o);
p.registerBinding(), i.addExternalSingletonState(sI, p);
const f = Ly(n, (() => nl((() => {
const e = i.get(fv);
return {
Authorization: e?.tokenInfo.accessToken ? `Bearer ${e?.tokenInfo.accessToken}` : ""
};
})))), h = wy(new Ny(f), o);
i.addExternalSingletonState(ky, h), mN(i, p), await wS(p), sv(i, p);
const {data: m, error: g} = await pv(p.Identity, i, o);
m && i.addExternalSingletonState(fv, m);
const {translationsLoaded: y, errors: I} = await cv(n, Fs.locale, u);
var _;
_ = {
CLOSE: Em("BUTTON_BACK"),
CONFIRM: Em("BUTTON_CONFIRM"),
INPUT_LABEL_CANCEL: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_CANCEL"),
INPUT_LABEL_DISMISS: Em("PHOTON-SOCIAL_ACTIONS-GLOBAL_GLOBAL_DISMISS"),
INPUT_LABEL_DISMISS_NOTIFICATION: Em("PHOTON-SOCIAL_BOTTOM-BAR_ACTIONS_DISMISS-NOTIFICATION")
}, Nm = _;
const b = !d || !y || !m;
let S, v = "";
b && (v += "boot failure:", d || (v += " fonts failed to load"), y || (v += " translations failed to load"), 
m || (v += " user failed to load (" + g + ")"), o.addCountEvent("js_boot_fail", 1, v)), 
b || (S = VS() ? "APPEAR_OFFLINE" === await YS(i, n.localStorage, m?.tokenInfo.userId) : await Kv(n, p, i, m.tokenInfo.userId)), 
c.forEach((({url: e, duration: t}) => {
const n = e.split("/").pop();
o.addEvent({
eventType: "photon_font_fails",
filename: n,
duration: t
});
})), I.forEach((({url: e, duration: t, message: n}) => {
const r = e.split("/").pop();
o.addEvent({
eventType: "photon_translation_fails",
filename: r,
duration: t,
message: n
});
})), o.addEvent({
eventType: "photon_boot_start",
status: b ? "error" : "success",
player_status: S ? "offline" : "online",
error_code: v,
fallback_translation_used: 1 === I.length
}), b && await o.flushQueue(), Rv(n.bindings, o), r((n => {
n(e, [ ...t, e => H.createElement(al, {
moby: i
}, H.createElement(vm.Provider, {
value: p
}, e)) ]);
}), b, v);
}
}, new Promise((e => {
const t = new xg, r = new Rg(t), i = (e, t) => {
const n = "Error during " + e + ": " + t.message;
console.log(n), r.bindings.Utilities.showError({
message: n
});
};
t.onErrorCallback = n.createOnErrorCallback?.(r, i) ?? i, r.bindings.Utilities.onSendErrorToJs.subscribe((e => {
const t = "Error from native: " + e.msg + ":\n" + e.debugStrings.join("\n");
console.log(t), n.isAcceptableNativeError?.(r, e) || r.bindings.Utilities.showError({
message: t
});
})), r.bindings.Layout.SetLayoutMode({
layoutMode: Bg.Yoga
}), r.bindings.Bootflow.onJsBootBegin({}), n.fullscreenResample && r.bindings.Utilities.setFullscreenResample(n.fullscreenResample), 
n?.roundedRectUrl && r.bindings.Texture.loadRoundedRectTexture({
url: n.roundedRectUrl
});
const o = async (t, n) => {
r.rootElementWrapper = e => {
let t = e;
return n?.forEach((e => {
t = e(t);
})), H.createElement(H.StrictMode, null, H.createElement(Qp.Provider, {
value: r
}, t));
}, await r.render(t), e(r);
};
r.nativeApi.start((() => {
n.onStart(r, ((t, n = !1, i = "boot failure: unknown reason") => {
r.bindings.Bootflow.onJsBootEnd(n ? {
success: !1,
reason: i
} : {
success: !0
}), n ? (console.error(i), e(r)) : t(o);
}));
}));
}));
var n;
})(H.createElement((function() {
const e = cI(), t = aI(), n = H.useCallback((n => (t.addCountEvent("js_error", 1), 
t.flushQueue(), e(n))), [ t, e ]);
return H.createElement("surface", {
style: rd("flex", 1),
onClick: Y1
}, H.createElement(q1, {
onError: n
}, false, H.createElement(W1, {
providers: Q1
}, H.createElement(X1, {
onJsError: n
}))));
}), null));
}();
//# sourceMappingURL=bundle.js.map
